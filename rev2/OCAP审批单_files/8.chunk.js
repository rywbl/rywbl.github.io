webpackJsonpecCom([8],{1018:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultProps=t.defaultState=t.initialState=t.orgInfoArr=t.contentTypeMap=t.formCb=void 0;var n=a(0),r=function(e){return e&&e.__esModule?e:{default:e}}(n),i=(t.formCb={},t.contentTypeMap={1:"dk_hasPgTable",2:"noPgTable",3:"Tree",4:"hasPgTable",5:"iframe",6:"hrmTree",7:"hrmTreeGroup",8:"hrmTable"},t.orgInfoArr=["4","57","167","168","164","194","169","170"],t.initialState={showSearchAd:!1,loadAllTreeData:!1,scaleHeight:0,count:0,current:1,selectedAllCurrent:0,inputValue:"",date2during:"",contentType:"",isAccount:!1,checkStrictly:!0,showAllbranch:!1,showDls:!1,isInSearch:!1,outerAdHeight:0,selectedDialogVisible:!1,leftCheckedData:[],rightCheckedData:[],leftTreeCheckedKeys:[],leftTreeCheckedData:[],leftGroupCheckedKeys:[],leftGroupCheckedData:[],leftExpandKeys:[],leftSelectKeys:[]});t.defaultState=(0,r.default)({},i,{visible:!1,loading:!0,fetchDataLoading:!1,data:[],loadModal:!1,modalloaded:!1,activeKey:"",quickSearch:"",selectedData:[],inputId:"id",inputName:"name",inputTop:[],inputBottom:[],columns:[],tabsFromApi:[],dataKey:"",dataOfListWithkey:[],dataOfListWithoutKeyAndPg:[],dataOfListWithoutKeyButPg:[],dataIconBgColor:"",dataIconFontColor:"",idCache:"",nameCache:"",listDatas:[],treeDatas:[],groupTreeDatas:[],leftTreeDatas:[],defaultExpandedKeys:[],companyId:"1",companyList:[],hasRight:0,browserConditions:[],browserConditionsOuter:[],showCheckedDatas:!1,urlOfIframeInDialogParrentHeight:"100%",urlOfIframeInDialog:""}),t.defaultProps={dataURL:"/api/public/browser/data/",conditionURL:"/api/public/browser/condition/",destUrl:"/api/public/browser/destData/",leftTreeUrl:"/api/public/browser/data/",tabsUrl:"/api/common/browser/tab/list?type=",type:"7",viewAttr:2,icon:"icon-toolbar-Organization-list",iconBgcolor:"#4a90e2",iconFontColor:"#fff",topPrefix:"wea",desc:"",fieldName:"",onChange:"",isSingle:!0,hasRadio:!1,hideOps:!1,showCheckStrictly:!0,defaultCheckStrictly:!0,checkStrictlyKey:"alllevel",showDls:!1,hasScroll:!0,isDetail:"",isLoadAll:!1,isAutoComplete:0,memorise:!1,scrollx:!1,noOperate:!0,needCallDest:!0,clickNameExpandFirst:!1,linkUrl:"",dataParams:{},conditionDataParams:{},completeParams:{},leftTreeParams:{datatype:"tree"},tabsParams:{},inputStyle:{},modalStyle:{width:784},contentHeight:460,hasAdd:!1,ddUrl:"",addOnClick:"",dropMenuKey:"companyId",displaySearchAdInBar:!1,displaySearchAdInBarRow:2,displaySearchAdInBarCol:4,displaySearchAd:!0,forceShowAll:!0,maxDataLength:80,maxShowDataLength:50,draggable:!0,draggableType:"row",enableScale:!1,onModalScale:"",scaledPageSize:0}},1027:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,s,o=a(0),l=n(o),c=a(6),d=n(c),u=a(2),h=n(u),p=a(3),f=n(p),m=a(4),g=n(m),y=a(5),v=n(y),b=a(1),k=n(b),C=a(8),S=a(45),w=n(S),_=a(33),D=n(_),I=a(32),E=n(I),T=a(66),P=n(T),A=a(10),K=n(A),R=a(134),x=n(R),M=a(308),L=a(1176),N=a(1046),O=n(N),B=C.Tree.TreeNode,F=K.default.getLabel,W=null,H=function(e,t){return(e||[]).map(function(e){var a=(0,M.text)(t,e);return"string"!==typeof a?k.default.createElement("span",{style:{display:"inline-block",marginRight:5,lineHeight:2}},a):k.default.createElement("span",{style:{marginRight:5},dangerouslySetInnerHTML:{__html:a}})})},z=(i=r=function(e){function t(e){(0,h.default)(this,t);var a=(0,g.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return s.call(a),a.state={key:"",loading:!1,visible:!1,showData:[]},a}return(0,v.default)(t,e),(0,f.default)(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.data!==e.data||this.state.key!==t.key||this.props.checkedKeys!==e.checkedKeys}},{key:"componentDidMount",value:function(){this.setShowData()}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=e.data;if(!(0,E.default)(this.props.data,a)){var n=this.getShowData(e,this.state.key);this.setState({showData:n},function(){t.forceUpdate()})}}},{key:"count",value:function(e){return"all"===e.type?e.count:(e.users||[]).length}},{key:"onSelectedGroupExpand",value:function(e,t){(0,M.stopPropagation)(e);var a=this.props.onSelectedGroupExpand;"function"===typeof a&&a(t)}},{key:"generateTreeNodes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=this.props,n=a.inputId,r=(a.type,[]);return this.isCrm()?(this.nodeIds=[],this.nodeObj={},t.map(function(t,a){var n=e.getItemRender(t,a);r.push(k.default.createElement(B,{ecId:e.props.ecId+"_TreeNode@mq2ak9@"+a,title:n,name:t.lastname,jobtitlename:t.jobtitlename,key:t.nodeid,isLeaf:!0,id:t.id,type:t.type})),e.nodeIds.push(t.nodeid),e.nodeObj[t.nodeid]=t})):n&&(this.nodeIds=[],this.nodeObj={},t.map(function(t,a){var i=e.getItemRender(t,a);r.push(k.default.createElement(B,{ecId:e.props.ecId+"_TreeNode@njhgfr@"+a,title:i,key:t[n],isLeaf:!0})),e.nodeIds.push(t[n]),e.nodeObj[t[n]]=t})),r}},{key:"onDrop",value:function(e){var t=this,a=e.dragNodesKeys,n=e.node.props.eventKey,r=[];this.nodeIds.filter(function(e){return-1===a.indexOf(e)}).forEach(function(e){e===n&&a.forEach(function(e){return r.push(t.nodeObj[e])}),r.push(t.nodeObj[e])}),this.props.onDrag&&this.props.onDrag(r)}},{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.checkedKeys,r=t.height,i=t.data,s=t.inputId,o=t.forceShowAll,c=t.getDataKey,d=t.maxShowDataLength,u=this.state,h=u.showData,p=u.loading,f=this.hideExtra(h),m=h.length;return f&&(h=h.slice(0,d)),k.default.createElement("div",{className:"wea-transfer-right"},k.default.createElement(w.default,{ecId:this.props.ecId+"_WeaInputSearch@6wgdv9",onSearchChange:(0,P.default)(this.onSearchChange,200).bind(this),placeholder:F(83788,"请输入关键字搜索"),value:this.state.key}),k.default.createElement(C.Spin,{ecId:this.props.ecId+"_Spin@nsz81i",spinning:p},k.default.createElement("div",{style:{height:(r||400)-(f?35:0),overflowY:"auto"}},k.default.createElement(L.SortableList,{ecId:this.props.ecId+"_SortableList@k7jvvt",onChange:function(t){var a=t.map(function(t){return i.find(function(a){return(c?c(a):a[e.isCrm()?"nodeid":s])==t})}).filter(function(e){return!!e});f&&(a=a.concat(i.slice(d))),e.props.onDrag&&e.props.onDrag(a)}},h.map(function(t,a){return k.default.createElement(L.SortableListItem,{ecId:e.props.ecId+"_SortableListItem@0b3fph@"+a,key:c?c(t):t[e.isCrm()?"nodeid":s],data:t,draggable:!0,selectable:!0,multiple:!0,selectedKeys:n,getDataKey:c||function(t){return t[e.isCrm()?"nodeid":s]},getItemRender:function(t){return e.getItemRender(t,a)},onSelect:e.checkHandler,onDoubleClick:e.onDoubleClick,onDragStart:e.onDragStart})})))),f&&[k.default.createElement("div",{ecId:this.props.ecId+"_div@enjocp",className:"show-all-selected-data",onClick:function(){return e.onVisibleChange(!0)}},k.default.createElement("span",null,F(-1,"查看全部$s条数据").replace("$s",m)))],!o&&k.default.createElement(O.default,(0,l.default)({},this.props,{ecId:this.props.ecId+"_SelectedDialog@7c4zg0",onVisibleChange:this.onVisibleChange,dialogProps:{visible:a}})))}}]),t}(k.default.Component),s=function(){var e=this;this.isCrm=function(){var t=e.props.type;return 1==t||17==t},this.hideExtra=function(t){var a=e.props,n=a.data,r=a.maxDataLength,i=a.forceShowAll;return t=t||n,!i&&t.length>r},this.setShowData=function(t,a){t=t||e.props,a=a||e.state.key;var n=e.getShowData(t,a),r=!1;t.needLoading&&(r=!0,setTimeout(function(){e.setState({showData:e.getShowData(t,a),loading:!1},function(){e.forceUpdate()})},500),n=n.slice(0,t.maxShowDataLength)),e.setState({showData:n,loading:r},function(){e.forceUpdate()})},this.getShowData=function(t,a){t=t||e.props,a=a||e.state.key||"";var n=t,r=n.data,i=n.inputId,s=n.inputName,o=n.inputTop,l=r||[];return e.isCrm()?(0,D.default)(a)&&(l=l.filter(function(e){var t=!1;return t=e.lastname.indexOf((0,D.default)(a))>-1,!t&&e.pingyinname&&(t=e.pingyinname.indexOf((0,D.default)(a))>-1),t})):i&&(0,D.default)(a)&&(l=l.filter(function(e){return o.length>0?e[o[0]].indexOf((0,D.default)(a))>-1:e[s]&&e[s].indexOf((0,D.default)(a))>-1})),l},this.getItemRender=function(t,a){var n=e.props,r=n.inputId,i=(n.inputName,n.inputTop),s=n.inputBottom,o=(n.type,n.hideNum),c=n.isShowGroup,d=(0,l.default)({},t||{}),u=null;if(e.isCrm()){var h=[];if(d.departmentname&&h.push(d.departmentname),d.supsubcompanyname&&h.push(d.supsubcompanyname),d.subcompanyname&&h.push(d.subcompanyname),d.crmNames=h.join("／"),"resource"==d.type){var p=void 0;try{d.requestParams&&(p=JSON.parse(d.requestParams))}catch(e){p=void 0}u=k.default.createElement("div",{className:"tree-title sortable-list-item resource"},k.default.createElement(x.default,{ecId:e.props.ecId+"_WeaAvatar@qh4f69@"+a,className:"wea-tree-hr-portrait",userId:d.id,requestParams:p}),k.default.createElement("div",{className:"resource-content breakall"},k.default.createElement("div",null,i||s?H(i,d):[k.default.createElement("span",{className:"lastname",title:d.lastname},d.lastname),k.default.createElement("span",{className:"jobtitlename gray",title:d.jobtitlename},d.jobtitlename)]),k.default.createElement("div",null,i||s?H(s,d):k.default.createElement("div",{className:"overflow gray",title:d.crmNames},d.crmNames))))}else u=k.default.createElement("div",{className:"tree-title sortable-list-item"},k.default.createElement("span",{className:"tree-title-icon"},"dept"===d.type?k.default.createElement("i",{className:"icon-mail-folder"}):k.default.createElement("i",{className:"icon-process-scene"})),k.default.createElement("span",{className:"tree-title-name "+(c?"has-expand-icon":""),title:d.lastname},d.lastname,!o&&"("+e.count(d)+")"),c&&k.default.createElement("span",{ecId:e.props.ecId+"_span@lq1v3r@"+a,title:F(520392,"拆分显示"),className:"tree-title-expand",onClick:function(t){return e.onSelectedGroupExpand(t,d)},onDoubleClick:M.stopPropagation},k.default.createElement("i",{className:"icon-coms02-split"})))}else if(r){var f=H(i,d),m=H(s,d);u=k.default.createElement("div",{className:"item-wrap"},k.default.createElement("div",{className:"item-top"},f),k.default.createElement("div",{className:"item-bottom"},m))}return u},this.onSearchChange=function(t){e.setState({key:t}),e.setShowData(null,t)},this.onVisibleChange=function(t){var a=e.props.onVisibleChange;"function"===typeof a&&a(t)},this.reset=function(){e.setState({key:""})},this.checkHandler=function(t,a){var n=e;clearTimeout(W),W=setTimeout(function(){n.props.checkedCb&&n.props.checkedCb(t)},200)},this.onDoubleClick=function(t){clearTimeout(W),e.props.onDoubleClick&&e.props.onDoubleClick(t)},this.onDragStart=function(t){clearTimeout(W),e.props.checkedCb&&e.props.checkedCb([])}},i);t.default=z},1028:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(0),i=n(r),s=a(6),o=n(s),l=a(2),c=n(l),d=a(3),u=n(d),h=a(4),p=n(h),f=a(5),m=n(f),g=a(1),y=n(g),v=a(8),b=a(54),k=n(b),C=a(35),S=n(C),w=a(133),_=a(308),D=function(e){function t(e){(0,c.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.opsHandler=function(e,t,n){var r=a.props.dataParams,i=void 0===r?{}:r;(0,_.stopPropagation)(t);var s={};"delete"==e?v.Modal.confirm({title:(0,w.getLabel)(131329,"信息确认"),content:(0,w.getLabel)(385625,"确定要删除选择的记录吗？"),onOk:function(){S.default.callApi("/api/hrm/group/delete","POST",{cmd:"base",groupid:n.id,f_weaver_belongto_userid:i.f_weaver_belongto_userid||""}).then(function(e){if("1"===e.status){var t=a.props.getGrouptree;t&&t()}}).catch(function(e){return a.props.onError&&a.props.onError(e)})}}):s={ops:e,groupId:n.id,groupType:"true"===n.isPrivate?0:1,visible:!0},a.setState({optParams:s})},a.state={optParams:{}},a}return(0,m.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.icon,n=t.iconBgcolor,r=t.dataParams,s=void 0===r?{}:r,o=this.state.optParams,l=o.groupType,c=o.groupId,d=o.visible,u=void 0!==d&&d,h=o.ops,p={ecId:this.props.ecId+"_WeaDialog@j3kr9y",icon:a,iconBgcolor:n,visible:u},f=function(){return e.setState({optParams:{}})};if("advice"==h){var m=(window.ecologyContentPath||"")+"/spa/hrm/static/index.html#/main/hrm/groupAdvice?groupId="+c;p=(0,i.default)({},p,{title:(0,w.getLabel)("126253","公共组调整建议"),style:{width:650,height:360},url:m,onCancel:f,callback:f})}else if("add"==h||"edit"==h){var g=s.f_weaver_belongto_userid||"",v=(window.ecologyContentPath||"")+"/spa/hrm/index_mobx.html#/main/hrm/operateGroup?groupType="+l,b=(window.ecologyContentPath||"")+"/spa/hrm/index_mobx.html#/main/hrm/operateGroup?groupId="+c,C="add"==h?v:b;g&&(C+="&f_weaver_belongto_userid="+g),p=(0,i.default)({},p,{title:"add"==h?(0,w.getLabel)("386496","新建常用组"):(0,w.getLabel)("126252","常用组设置"),style:"add"==h?{width:650,height:225}:{width:750,height:482},url:C,onCancel:f,callback:function(t){return e.setState({optParams:t?(0,i.default)({},o,{ops:"edit"}):{}})}})}return y.default.createElement(k.default,p)}}]),t}(y.default.Component);t.default=D},1029:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(!(0,N.default)(e)){var t=[];t.push(e),e=t}return e}function i(e){var t=e.subs,a=e.depts,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"wea",r=[];if(!(0,A.default)(t)||!(0,A.default)(a)){[].concat((0,E.default)(t),(0,E.default)(a)).reduce(function(e,t){var a=(e||n+"0")+"-"+t;return r.push(a),a},"")}return r}function s(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!(0,A.default)(e)){var r=this.props,i=r.topPrefix,s=r.defaultExpandedLevel;(0,N.default)(e)?e.forEach(function(e){e.isLeaf=!1===e.isParent||"false"===e.isParent,1==a&&(e.treeKey=i+"0-"+(e.nodeid||e.id)),e.children=e.subs||e.children,s>0&&s>=a&&n.push(e.treeKey||e.id),e.children&&e.children.length>0&&t.generateData(e.children,a+1,n)}):(e.isLeaf=!1===e.isParent||"false"===e.isParent,1==a&&(e.treeKey=i+"0-"+(e.nodeid||e.id)),e.children=e.subs||e.children,s>0&&s>=a&&n.push(e.treeKey||e.id),e.children&&e.children.length>0&&this.generateData(e.children,a+1,n))}}function o(e,t){var a=e;e.length||(a=new Array(a));var n=new Array,r=this.props.topPrefix;if(t){!function(e){for(var a=0;a<e.length;a++){var r=e[a];r.treeKey=t+"-"+(r.nodeid||r.id),"1"===r.type&&(r.treeKey+="type1"),r.isLeaf=!1===r.isParent||"false"===r.isParent,n.push(r)}}(a[0].datas)}else for(var i=0;i<a.length;i++){var s=a[i];s.treeKey=r+"0-"+(s.nodeid||s.id),s.isLeaf=!1===s.isParent||"false"===s.isParent,s.children=s.subs||s.children,n.push(s)}return n}function l(e,t,a,n){!function e(n){n.forEach(function(n){0===(t+"-").indexOf(n.treeKey+"-")&&((0,A.default)(n.children)?n.children=a:e(n.children))})}(e)}Object.defineProperty(t,"__esModule",{value:!0});var c,d,u,h=a(27),p=n(h),f=a(0),m=n(f),g=a(6),y=n(g),v=a(2),b=n(v),k=a(3),C=n(k),S=a(4),w=n(S),_=a(5),D=n(_),I=a(19),E=n(I);t.getKeys=i;var T=a(8),P=a(18),A=n(P),K=a(42),R=n(K),x=a(32),M=n(x),L=a(21),N=n(L),O=a(80),B=n(O),F=a(41),W=n(F),H=a(64),z=n(H),q=a(35),V=n(q),j=a(134),U=n(j),G=a(1028),$=n(G),Q=a(133),J=a(308),Y=a(50),X=T.Tree.TreeNode,Z=function(){return Math.random().toString(36).substr(2,6)},ee=function(e,t){var a=(0,J.text)(e,t);return"string"!==typeof a?React.createElement("span",{style:{display:"inline-block",marginRight:5,lineHeight:2}},a):React.createElement("span",{style:{marginRight:5},dangerouslySetInnerHTML:{__html:a}})},te=(d=c=function(e){function t(e){(0,b.default)(this,t);var a=(0,w.default)(this,(t.__proto__||(0,y.default)(t)).call(this,e));u.call(a);var n=e.defaultExpandedKeys,i=e.treeData;return a.generateData=s.bind(a),a.generateTreeNodes=o.bind(a),a.getNewTreeData=l.bind(a),a.state={expandedKeys:n||[],ztreeExpandedKeys:n||[],selectedKeys:[],treeData:r(i)||[],defaultExpandedKeys:n||[],checkedKeys:[],radioCheckedData:e.radioCheckedData||"",checkedDatas:e.checkedDatas||[],checkStrictly:e.checkStrictly||!1},a.browserTreeKey=Z(),a}return(0,D.default)(t,e),(0,C.default)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.ztreeMode,a=(e.isHrmTree,this.state),n=a.treeData,r=a.defaultExpandedKeys,i=[].concat((0,E.default)(r));t||(this.generateData(n,1,i),this.setState({expandedKeys:i,defaultExpandedKeys:i}))}},{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.checkedDatas,n=t.defaultCurrentUser,i=t.asynLoadAll,s=t.defaultExpandedLevel,o=this.state.treeData;if(i||s)this.fetchChildDatas();else{var l={treeData:r(o)};(0,A.default)(a)||(l.checkedKeys=this.formatCheckDatas(a)),this.setState(l,function(){(0,A.default)(n)||(0,A.default)(e.state.treeData)||e.expandChild(n,e.state.treeData[0],e.focusCurrentUser)})}}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.props,n=a.componyParam,i=a.ztreeMode,s=(a.isHrmTree,a.defaultCurrentUser,this.state.checkStrictly),o=[].concat((0,E.default)(this.state.defaultExpandedKeys));if(n&&n!=e.componyParam&&(this.generateData(e.treeData),this.setState({expandedKeys:e.defaultExpandedKeys,treeData:r(e.treeData)})),(0,M.default)(this.props.treeData,e.treeData)||(i||(o=[],this.generateData(e.treeData,1,o)),this.setState({treeData:r(e.treeData),defaultExpandedKeys:o,expandedKeys:o},function(){(0,A.default)(e.defaultCurrentUser)||(0,A.default)(t.state.treeData)||t.expandChild(e.defaultCurrentUser,t.state.treeData[0],t.focusCurrentUser)})),"checkedDatas"in e&&void 0!=e.checkedDatas&&(!(0,M.default)(this.props.checkedDatas,e.checkedDatas)||!(0,M.default)(this.state.checkedDatas,e.checkedDatas))){var l=this.formatCheckDatas(e.checkedDatas);this.setState({checkedKeys:l,checkedDatas:e.checkedDatas})}"radioCheckedData"in e&&((0,M.default)(this.state.radioCheckedData,e.radioCheckedData)||this.setState({radioCheckedData:e.radioCheckedData})),"defaultExpandedKeys"in e&&!(0,M.default)(this.props.defaultExpandedKeys,e.defaultExpandedKeys)&&this.setState({defaultExpandedKeys:e.defaultExpandedKeys,expandedKeys:e.defaultExpandedKeys}),"checkStrictly"in e&&!(0,M.default)(s,e.checkStrictly)&&(s=e.checkStrictly,this.setState({checkStrictly:s}))}},{key:"formatCheckDatas",value:function(e){var t=[];return(0,N.default)(e)&&e.length>0&&(0,B.default)(this.treeDataList,function(a,n){e.some(function(e){return e.id==a.id&&e.type==a.type})&&t.push(n)}),t}},{key:"updateExpandedKeys",value:function(e,t){var a=this;if(t=t||this.state.expandedKeys,(0,N.default)(e)&&e.length>0){var n=[];e.forEach(function(e){return n.push(a.treeDataList[e].pid)}),(0,B.default)(this.treeDataList,function(e,a){n.some(function(t){return t==e.id})&&t.push(a)})}t=(0,z.default)([].concat((0,E.default)(t),(0,E.default)(this.state.expandedKeys))),this.setState({expandedKeys:t})}},{key:"onCheck",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){var n=a.props,r=n.isMult,i=n.checkedCb;n.checkStrictly,t.node.props.treeKey,t.checked;if(r){var s=[],o=[];e.forEach(function(e){a.isCheckedDisable(a.treeDataList[e])||(s.push(a.treeDataList[e]),o.push(a.treeDataList[e].id))}),i&&i(o,s)}};n?r(e,t):this.setState({checkedKeys:e},function(){return r(e,t)})}},{key:"onCheckedKeysChange",value:function(e){var t=this,a=this.props,n=a.isMult,r=a.onCheckedKeysChange;if(n){var i=[],s=[];e.forEach(function(e){t.isCheckedDisable(t.treeDataList[e])||(i.push(t.treeDataList[e]),s.push(t.treeDataList[e].id))}),r&&r(s,i)}}},{key:"onHrmCheck",value:function(e,t){var a=this,n=this.props,r=(n.isSingle,n.checkGroup),i=void 0===r||r,s=n.checkStrictly,o=[],l=(0,W.default)(e);l=l.filter(function(e){return"false"!==a.treeDataList[e].canClick&&"com"!==a.treeDataList[e].type});var c=l.filter(function(e){return-1===e.indexOf("resource")}),d=l.filter(function(e){return e.indexOf("resource")>-1});i?l.forEach(function(e){var t=a.treeDataList[e];!s&&c.some(function(e){return t.treeKey.indexOf(e+"-")>-1})||o.push(t)}):d.forEach(function(e){o.push(a.treeDataList[e])}),this.props.checkedCb&&this.props.checkedCb(l,o)}},{key:"onZTreeCheck",value:function(e,t){this.props.checkedCb&&this.props.checkedCb(e,t)}},{key:"resetCheck",value:function(){this.setState({checkedKeys:[]})}},{key:"resetSelect",value:function(){this.setState({selectedKeys:[]})}},{key:"onSelect",value:function(e,t){var a=this.props,n=a.isMult,r=a.isHrmTree,i=a.onSelect;if(r){var s=t.selectedNodes,o=t.node.props.eventKey;this.setHrmDatas(s,o)}else"function"===typeof i&&i(t),n||this.setTheDatas(e,t.selectedNodes)}},{key:"onHrmSelect",value:function(e,t){t&&t[0]&&"resource"===t[0].type&&this.onRadioCheck(t)}},{key:"onDoubleClick",value:function(e){this.isCheckedDisable(this.treeDataList[e])||this.props.onDoubleClick&&this.props.onDoubleClick([this.treeDataList[e]])}},{key:"setHrmDatas",value:function(e,t){for(var a=[],n=[],r=0;r<e.length;r++){var i=e[r].props;"resource"==i.type&&(a.push(i.id),n.push(i))}var s=[];jQuery.each(a,function(e,t){-1===jQuery.inArray(t,s)&&s.push(t)}),a.length>0&&this.props.setData&&this.props.setData(a,n)}},{key:"setTheDatas",value:function(e,t){var a=[],n=[],r=[];t=t||[];for(var i=0,s=t.length;i<s;i++){var o=t[i].props;o.canClick&&(a.push(o.id),n.push(o.name),r.push(e[i]))}this.setState({selectedKeys:r});var l=a.join(","),c=n.join(",");l&&"function"===typeof this.props.setRadioData&&this.props.setRadioData(l,c)}},{key:"onLoadData",value:function(e){var t=this,a=this,n=this.props,r=n.dataUrl,i=n.keyword,s=n.params,o=n.asyncOtherParams,l=void 0===o?{}:o,c=n.isAccount,d=n.showDls,u=this.props.type,h=[].concat((0,E.default)(this.state.treeData)),f=e.props,g=(f.eventKey,f.treeKey),y=f.isVirtual,v=f.type,b=(f.psubcompanyid,f.id),k=f.level,C=4==u?{isLoadSubDepartment:1,type:v,id:b,isVirtual:y}:{type:v,id:b,isVirtual:y};i&&(C.keyword=i),c&&(C.isNoAccount=1),d&&(C.showDls=1);var S=(0,m.default)({},s,l,C,{level:k});return new p.default(function(n){V.default.callApi(r,"GET",S).then(function(r){t.getNewTreeData(h,g,t.generateTreeNodes(r,e.props.treeKey),2),a.setState({treeData:h});var i=a.formatCheckDatas(a.state.checkedDatas);a.setState({checkedKeys:i}),n()}).catch(function(e){return t.props.onError&&t.props.onError(e)})})}},{key:"checkChild",value:function(e,t,a){var n=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";e=[].concat((0,E.default)(r(e))),e.forEach(function(e){if(e.treeKey||(e.treeKey=s+"-"+(e.nodeid||e.id),"1"===e.type&&(e.treeKey+="type1")),e.children=e.subs||e.children||[],(a&&t<=a||!a||n.props.asynLoadAll)&&e.isParent)0!=e.children.length||e.isLoad||n.fetchChildDataByLevel(e,t,a,i,e.treeKey).then(function(){var r=n.state.expandedKeys,s=n.state.checkedKeys;(t<=a||0===a)&&(r.push(e.treeKey),i&&(s.push(e.treeKey),n.onCheck((0,z.default)(s),{checked:!0},!0))),n.setState({expandedKeys:r,checkedKeys:(0,z.default)(s)})}),e.children.length>0&&n.checkChild(e.children,t+1,a,i);else if(i){var r=n.state.checkedKeys;r.push(e.treeKey),n.onCheck((0,z.default)(r),{checked:!0},!0),n.setState({checkedKeys:(0,z.default)(r)})}})}},{key:"fetchChildDataByLevel",value:function(e,t,a){var n=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments[4],s=this.props,o=s.dataUrl,l=s.keyword,c=s.params,d=s.asyncOtherParams,u=void 0===d?{}:d,h=this.props.type,f=e.isVirtual,g=e.type,y=e.id,v={type:g,id:y,isVirtual:f};4==h&&(v.isLoadSubDepartment=1),l&&(v.keyword=l);var b=(0,m.default)({},c,u,v);return new p.default(function(s){V.default.callApi(o,"GET",b).then(function(o){e.children=o.datas,e.isLoad=!0;var l=[].concat((0,E.default)(n.state.treeData));n.getNewTreeData(l,i,n.generateTreeNodes(o,i)),n.setState({treeData:l});var c=n.formatCheckDatas(n.state.checkedDatas);n.setState({checkedKeys:c}),n.checkChild(e.children,t+1,a,r,i),s()}).catch(function(e){return n.props.onError&&n.props.onError(e)})})}},{key:"fetchChildDatas",value:function(){var e=[].concat((0,E.default)(this.state.treeData)),t=parseInt(this.props.defaultExpandedLevel)||1;if(!e)return!1;this.checkChild(e,1,t)}},{key:"isCheckedDisable",value:function(e){var t=this.props,a=t.filterData,n=t.inputId,r=(t.inputName,t.checkStrictly),i=t.isHrmTree;if(!e)return!0;if(!0===e.disabledCheck||"true"===e.disableCheckbox)return!0;if(i)return"false"==e.canClick||!(!a||!a.length)&&a.some(function(t){return e.id===t.id&&e.type===t.type});if(!e.canClick&&(r||!e.isParent))return!0;if(e.canClick&&!(0,A.default)(a)){var s=n||"id";return a.some(function(t){return e[s]===t[s]})}return!1}},{key:"isRadioDisable",value:function(e){return!!this.props.isHrmTree||!e.canClick||!1}},{key:"isRadioChecked",value:function(e){var t=!1,a=this.state.radioCheckedData;return(0,A.default)(a)||(t=(0,R.default)(a)?e.treeKey==a:e.id==a.id),t}},{key:"onExpandChange",value:function(e,t){var a=this.props.onExpand;a&&a(e,t),this.setState({expandedKeys:e,ztreeExpandedKeys:e})}},{key:"onRadioCheck",value:function(e){var t=this.props,a=t.ztreeMode,n=t.setRadioData,r=null;a&&e&&e.length>0?r=e[0]:e&&(r=this.treeDataList[e]),r?(this.setState({radioCheckedData:r}),n&&n(r.id,r.orgWholePathspan||r.name||r.lastname,r)):(this.setState({radioCheckedData:null}),n&&n("","",null))}},{key:"render",value:function(){var e=this,t=this.state,a=t.treeData,n=t.expandedKeys,r=t.defaultExpandedKeys,i=t.selectedKeys,s=t.checkStrictly,o=t.radioCheckedData,l=t.checkedDatas,c=t.checkedKeys,d=t.ztreeExpandedKeys,u=this.props,h=u.browserTree,p=u.isMult,f=u.hasRadio,g=u.isLoadAll,y=void 0!==g&&g,v=u.ztreeMode,b=u.isHrmTree;this.treeDataList={};var k=a.length>0?function t(a,n){return a.map(function(a,r){if(a.children)for(var i=0;i<a.children.length;i++)a.children[i].treeKey=a.treeKey+"-"+(a.children[i].nodeid||a.children[i].id),"1"===a.children[i].type&&(a.children[i].treeKey+="type1");e.treeDataList[a.treeKey]=a;var s=b?e.getHrmTitle(a):e.getTitle(a);return React.createElement(X,{ecId:e.props.ecId+"_TreeNode@q7ga7w@"+r,browserTree:h,level:n,isVirtual:a.isVirtual,type:a.type,title:s,name:a.name,lastname:a.lastname,jobtitlename:a.jobtitlename,key:a.treeKey,id:a.id,treeKey:a.treeKey,isLeaf:a.isLeaf,disableCheckbox:e.isCheckedDisable(a),disableRadio:e.isRadioDisable(a),radioChecked:e.isRadioChecked(a),expanded:!0,canClick:a.canClick},a.children&&t(a.children,n+1))})}(a,0):null,C={};return v&&(C={checkable:!0,ztreeMode:v,browserTree:!1,onCheck:(p?this.onZTreeCheck:function(t,a){return e.onRadioCheck(a)}).bind(this),onSelect:(b?this.onHrmSelect:this.onSelect).bind(this),getTitle:b?this.getHrmTitle:this.getTitle,checkedKeys:p?(l||[]).map(function(e){return e.id}):o&&o.id?[o.id]:[],expandedKeys:d,checkStrictly:!!p&&s}),[React.createElement(T.Tree,(0,m.default)({},this.props,{ecId:this.props.ecId+"_Tree@q7ga7w",className:(this.props.className||"")+" my-tree",defaultExpandedKeys:r,expandedKeys:n,onExpand:this.onExpandChange.bind(this),onSelect:this.onSelect.bind(this),onCheck:(b?this.onHrmCheck:this.onCheck).bind(this),loadData:y?null:this.onLoadData.bind(this),checkable:p,checkedKeys:this.props.checkedKeys||c,checkStrictly:s,onRadioCheck:this.onRadioCheck.bind(this),hasRadio:f,multiple:p,selectedKeys:i,needExpandChildren:!0,clickNameExpandNode:!0,clickNodeExpandChildren:!f&&!p,onDoubleClick:this.onDoubleClick.bind(this)},C),!v&&k),b&&React.createElement($.default,(0,m.default)({},this.props,{ecId:this.props.ecId+"_GroupDialog@4q6f98",ref:function(t){return e.groupDialog=t}}))]}}]),t}(React.Component),u=function(){var e=this;this.focusCurrentUser=function(){var t=e.props.defaultCurrentUser;(0,A.default)(t)||setTimeout(function(){var a=t[t.length-1];a=e.browserTreeKey+"-"+a;var n=document.getElementById(a);if(n){var r=n.offsetTop,i=jQuery(".scroller").has("#"+a)[0];i&&(i.scrollTop=r)}},500)},this.expandChild=function(t,a,n){if((0,A.default)(t))return void("function"==typeof n&&n());var r=t[0];if(a){var i=function(a){var i=e.state.expandedKeys;i.push(r),e.setState({expandedKeys:(0,z.default)(i)}),e.expandChild(t.slice(1),a.find(function(e){return e.treeKey=e.treeKey||r+"-"+e.nodeid,e.treeKey===t[1]}),n)};"true"===a.isParent||!0===a.isParent?0!=a.children.length||a.isLoad?i(a.children):e.fetchChildData(a).then(i):"com"==a.type&&i(a.children)}},this.fetchChildData=function(t){var a=e.props,n=a.dataUrl,r=a.keyword,i=a.params,s=a.asyncOtherParams,o=void 0===s?{}:s,l=e.props.type,c=t.isVirtual,d=t.type,u=t.id,h=t.treeKey,f={type:d,id:u,isVirtual:c};4==l&&(f.isLoadSubDepartment=1),r&&(f.keyword=r);var g=(0,m.default)({},i,o,f);return new p.default(function(a){V.default.callApi(n,"GET",g).then(function(n){t.isLoad=!0;var r=[].concat((0,E.default)(e.state.treeData));e.getNewTreeData(r,h,e.generateTreeNodes(n,{props:t})),e.setState({treeData:r}),a(n.datas)}).catch(function(t){return e.props.onError&&e.props.onError(t)})})},this.getDisplayName=function(e){var t=void 0,a=[];if(e&&e.displayKeys&&("string"===typeof e.displayKeys?a=e.displayKeys.split(","):Array.isArray(e.displayKeys)&&(a=e.displayKeys)),(0,A.default)(a)||(t=a.reduce(function(t,a,n){var r=(0,J.text)(e,a,!0);return t+=n?"<span>"+r+"</span>":"<label>"+r+"</label>"},"")),t&&(0,Y.desensitization)(t)){var n=a.map(function(t){return ee(e,t)});return React.createElement("span",{className:"wea-tree-browser-display-name"},n)}return t&&React.createElement("span",{title:t.replace(/\n|(<label>|<\/label>|<span>|<\/span>)/g," "),className:"wea-tree-browser-display-name",dangerouslySetInnerHTML:{__html:t}})},this.getHrmTitle=function(t){var a=e.props,n=a.icon,r=a.hasRight,i=void 0,s=e.getDisplayName(t),o=s||t.lastname;if("com"==t.type)i=React.createElement("div",null,"string"===typeof n?React.createElement("span",{className:n}):n,o,React.createElement("span",{className:"wea-f12",style:{color:"#979797"}}));else if("subcom"==t.type)i=React.createElement("div",null,React.createElement("i",{className:"icon-process-scene"}),o);else if("dept"==t.type)i=React.createElement("div",{id:e.browserTreeKey+"-"+t.treeKey},React.createElement("i",{className:"icon-mail-folder"})," ",o);else if("resource"==t.type){s||(o=[React.createElement("span",{style:{paddingLeft:10,color:"#333"}},t.lastname),React.createElement("span",{style:{color:"#929390",paddingLeft:10}},t.jobtitlename)]);var l=void 0;try{t.requestParams&&(l=JSON.parse(t.requestParams))}catch(e){}i=React.createElement("div",{className:"wea-f12"},React.createElement(U.default,{className:"wea-tree-hr-portrait",userId:t.id,requestParams:l}),o)}else{var c=!t.pid&&("true"===t.isPrivate||"false"===t.isPrivate&&1===r),d=!1;d=t.canEdit?t.pid&&("true"===t.isPrivate||"false"===t.isPrivate&&"true"===t.canEdit):t.pid&&("true"===t.isPrivate||"false"===t.isPrivate&&1===r);var u=t.pid&&"false"===t.isPrivate&&1!==r;i=React.createElement("div",null,React.createElement("i",{className:t.cusIcon||"icon-process-scene"}),t.cusIcon?React.createElement("span",{style:{paddingLeft:10}},o):React.createElement("span",{className:"wea-tree-node-title-content"},o),React.createElement("span",{className:"wea-tree-hr-node"},c&&React.createElement("span",{className:"wea-tree-hr-node-icon",title:(0,Q.getLabel)("611","添加"),onClick:function(a){return e.groupDialog&&e.groupDialog.opsHandler("add",a,t)}},React.createElement("i",{className:"icon-coms-Add-to"})),d&&[React.createElement("span",{className:"wea-tree-hr-node-icon",title:(0,Q.getLabel)("26473","编辑"),onClick:function(a){return e.groupDialog&&e.groupDialog.opsHandler("edit",a,t)}},React.createElement("i",{className:"icon-coms-edit"})),React.createElement("span",{className:"wea-tree-hr-node-icon",title:(0,Q.getLabel)(91,"删除"),onClick:function(a){return e.groupDialog&&e.groupDialog.opsHandler("delete",a,t)}},React.createElement("i",{className:"icon-coms-delete"}))],u&&React.createElement("span",{className:"wea-tree-hr-node-icon",title:(0,Q.getLabel)(16159,"建议"),onClick:function(a){return e.groupDialog&&e.groupDialog.opsHandler("advice",a,t)}},React.createElement("i",{className:"icon-coms-Advice"}))))}return i},this.getTitle=function(t){var a=e.props,n=a.isLoadUser,r=a.renderItem,i=e.getDisplayName(t)||t.displayName||t.name||t.lastname,s=React.createElement("div",{title:t.title||t.name||t.lastname},t.icon&&React.createElement("i",{className:t.icon,style:{marginRight:"5px"}}),i);if(n&&("3"==t.type||"resource"==t.type)){var o=void 0;try{t.requestParams&&(o=JSON.parse(t.requestParams))}catch(e){}s=React.createElement("div",null,React.createElement(U.default,{ecId:e.props.ecId+"_WeaAvatar@hqwqgm",className:"wea-tree-hr-portrait",userId:t.id,requestParams:o}),React.createElement("span",{style:{paddingLeft:10}},i))}return t.isImgIcon&&(s=React.createElement("div",{className:"wea-f12"},React.createElement("img",{className:"wea-tree-hr-portrait",src:t.icon,onError:function(){return t.icon=(window.ecologyContentPath||"")+"/cloudstore/resource/pc/com/images/portrait_default.jpg"},alt:"img"}),React.createElement("span",{style:{paddingLeft:10}},i))),r&&(s=r(t)),s}},d);t.default=te},1046:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r,i,s=a(0),o=n(s),l=a(6),c=n(l),d=a(2),u=n(d),h=a(3),p=n(h),f=a(4),m=n(f),g=a(5),y=n(g),v=a(1),b=n(v),k=a(8),C=a(54),S=n(C),w=a(1027),_=n(w),D=a(10),I=n(D),E=I.default.getLabel,T=(i=r=function(e){function t(){return(0,u.default)(this,t),(0,m.default)(this,(t.__proto__||(0,c.default)(t)).apply(this,arguments))}return(0,y.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e=this.props,t=e.checkedKeys,a=e.data,n=e.contentHeight,r=e.onDoubleClick,i=e.onVisibleChange,s=e.onOk,l=e.dialogProps;return b.default.createElement(S.default,(0,o.default)({ecId:this.props.ecId+"_WeaDialog@df0npn",className:"wea-browser-test-selected-dialog",title:"已选列表",destroyBodyOnClose:!0,style:{height:n},buttons:[b.default.createElement(k.Button,{onClick:function(){i&&i(!1),s&&s()},ecId:this.props.ecId+"_Button@tvfupu",type:"primary"},E(385565,"确 定"),"(",a.length,")"),b.default.createElement(k.Button,{onClick:function(){r&&r(t)},ecId:this.props.ecId+"_Button@nixixi",disabled:0===t.length},E(385566,"清 除"),"(",t.length,")")],onCancel:i&&function(){return i(!1)}},l||{}),b.default.createElement(_.default,(0,o.default)({},this.props,{ecId:this.props.ecId+"_WeaSelectedRight",forceShowAll:!0,height:n-48,needLoading:!0})))}}]),t}(b.default.PureComponent),r.defaultProps={checkedKeys:[],data:[],contentHeight:460,dialogProps:{}},i);t.default=T},1047:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(0),i=n(r),s=a(6),o=n(s),l=a(2),c=n(l),d=a(3),u=n(d),h=a(4),p=n(h),f=a(5),m=n(f),g=a(8),y=a(100),v=n(y),b=a(35),k=n(b),C=a(1048),S=(n(C),a(10)),w=n(S),_=a(1028),D=n(_),I=w.default.getLabel,E=function(e){function t(e){(0,c.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));a.state={showall:!1,hrmgroups:[],allUserIds:"",allUserCount:0,showAllUser:!1,addgroupVisable:!1};var n=a;return k.default.callApi("/api/workflow/forward/getHrmGroup","GET",{}).then(function(e){n.setState({hrmgroups:e.datas||[]})}),a}return(0,m.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.isshowoperategroup||this.setState({showall:!1}),e.isshowoperategroup&&k.default.callApi("/api/workflow/forward/getHrmGroup","GET",{}).then(function(e){t.setState({hrmgroups:e.datas||[]})})}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.hrmgroups!==t.hrmgroups||this.state.showall!==t.showall||this.state.showAllUser!==t.showAllUser||this.state.addgroupVisable!==t.addgroupVisable||this.state.allUserCount!==t.allUserCount}},{key:"addgroup",value:function(e){this.setState({addgroupVisable:!0}),e(!1)}},{key:"add",value:function(e,t,a){var n={isAllUser:!1};"4"==a.grouptype&&(n.datas=[a]),"6"==a.grouptype&&(n.datas=a.users),e(n),t(!1)}},{key:"showAllOperators",value:function(){var e=this,t=this.state,a=t.showAllUser,n=t.allUserIds,r=t.allUserCount;if(a){var i=this.props,s=i.handleVisibleChange;(0,i.setOperatorIds)({ids:n,isAllUser:!0,count:r}),s(!1)}else k.default.callApi("/api/workflow/hrmgroup/datas","GET",{isgetallres:"1"}).then(function(t){e.setState({showAllUser:!0,allUserIds:t.ids,allUserCount:t.count})})}},{key:"render",value:function(){var e=this,t=this.props,a=t.handleVisibleChange,n=t.setOperatorIds,r=t.canSelectAllUser,s=this.state,o=s.showall,l=s.hrmgroups,c=s.showAllUser,d=s.allUserCount;s.addgroupVisable;return React.createElement("div",{className:"wea-req-operate-group"},r&&React.createElement("div",{ecId:this.props.ecId+"_div@qkssd2",className:"wea-req-all-operators",onClick:this.showAllOperators.bind(this)},React.createElement("span",null,I(1340,"所有人"),c&&"（"+d+"）")),React.createElement("div",{className:"wea-req-operate-content"},React.createElement(v.default,{ecId:this.props.ecId+"_WeaScroll@zrwbkg",className:"wea-scroll",typeClass:"scrollbar-macosx"},React.createElement("ul",null,l&&l.map(function(t,r){if(r>2&&!o)return!0;var i=t.users.length;return React.createElement("li",{ecId:e.props.ecId+"_li@5c3a53@"+r,onClick:e.add.bind(e,n,a,t)},React.createElement("span",{className:"cg_title"},""+t.lastname+I("531151","（$s人）").replace("$s",i)),React.createElement("span",{className:"cg_detail"},t.names))})))),l.length>3&&!o&&React.createElement("div",{ecId:this.props.ecId+"_div@gilfnk",className:"wea-req-operate-load-more",onClick:function(){return e.setState({showall:!0})}},React.createElement(g.Icon,{type:"down"}),React.createElement("span",{style:{color:"#4397d3","margin-left":"10px"}},I(20234,"显示全部"))),React.createElement("div",{ecId:this.props.ecId+"_div@oj4iup",className:"wea-req-operate-add",onClick:function(t){e.addgroup(a),e.groupDialog.opsHandler("add",t,{id:"",isPrivate:"true"})}},React.createElement("span",{style:{color:"#59b632"}},React.createElement(g.Icon,{type:"plus-square"})),React.createElement("span",{style:{color:"#323232","margin-left":"10px"}},I(124815,"添加常用组"))),React.createElement(D.default,(0,i.default)({},this.props,{ecId:this.props.ecId+"_GroupDialog@w8a13y",ref:function(t){return e.groupDialog=t}})))}}]),t}(React.Component);t.default=E},1048:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(0),i=n(r),s=a(6),o=n(s),l=a(2),c=n(l),d=a(3),u=n(d),h=a(4),p=n(h),f=a(5),m=n(f),g=a(1),y=n(g),v=a(8),b=a(35),k=n(b),C=a(54),S=n(C),w=a(210),_=n(w),D=a(46),I=n(D),E=a(55),T=n(E),P=a(49),A=n(P),K=a(79),R=n(K),x=a(81),M=n(x),L=a(10),N=n(L),O=N.default.getLabel,B=function(e){function t(e){(0,c.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={name:"",type:"0",sn:null,hrmids:"",hrmidsDatas:[],savable:!0},a}return(0,m.default)(t,e),(0,u.default)(t,[{key:"init",value:function(){this.setState({name:"",type:"0",sn:null,hrmids:"",hrmidsDatas:[]})}},{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.onVisableChange;return y.default.createElement("div",null,y.default.createElement(S.default,{ecId:this.props.ecId+"_WeaDialog@eed5do",title:O(81554,"常用组"),hasScroll:!0,visible:a,icon:"icon-coms-workflow",iconBgcolor:"#0079DE",closable:!0,onCancel:function(){n(!1),e.init()},buttons:this.getAddModalButtons(),style:{height:"300px",width:"500px"},className:"wea-dialog-add-group-modal"},y.default.createElement(_.default,{ecId:this.props.ecId+"_WeaRightMenu@060h17",datas:this.getRightMenu()},this.initGroup())))}},{key:"initGroup",value:function(){var e=this,t=this.state,a=t.name,n=t.sn,r=t.type,i=t.hrmidsDatas;return y.default.createElement("div",{className:"wea-form-item-group wea-addgroup-form"},y.default.createElement(I.default,{ecId:this.props.ecId+"_WeaFormItem@fjj0id",label:O(33439,"名称"),labelCol:{span:6},wrapperCol:{span:18},domkey:"name"},y.default.createElement(M.default,{ecId:this.props.ecId+"_WeaError@yehxts",tipPosition:"bottom",ref:"weaErrorName",error:O(385562,'"名称"未填写').replace(/&quot;/g,'"')},y.default.createElement(T.default,{ecId:this.props.ecId+"_WeaInput@yj85t8",viewAttr:3,value:a,onChange:function(t){e.setState({name:t}),t||e.refs.weaErrorName.showError()}}))),y.default.createElement(I.default,{ecId:this.props.ecId+"_WeaFormItem@kv6kvw",label:O("132033","类型"),labelCol:{span:6},wrapperCol:{span:18},domkey:"type"},y.default.createElement(A.default,{ecId:this.props.ecId+"_WeaSelect@rc9331",value:r,onChange:function(t){e.setState({type:t})},options:[{key:"0",selected:!0,showname:O(17618,"私人组")},{key:"1",selected:!1,showname:O(17619,"公共组")}]})),y.default.createElement(I.default,{ecId:this.props.ecId+"_WeaFormItem@fu1nfw",label:O(338,"排序"),labelCol:{span:6},wrapperCol:{span:18},domkey:"sn"},y.default.createElement(v.InputNumber,{ecId:this.props.ecId+"_InputNumber@u8w37n",value:n,min:1,onChange:function(t){e.setState({sn:t})}})),y.default.createElement(I.default,{ecId:this.props.ecId+"_WeaFormItem@bcn4t1",label:O(431,"成员"),labelCol:{span:6},wrapperCol:{span:18},domkey:"hrmids"},y.default.createElement(M.default,{ecId:this.props.ecId+"_WeaError@pr6330",tipPosition:"bottom",ref:"weaErrorHrmids",error:O(385563,'"成员"未填写').replace(/&quot;/g,'"')},y.default.createElement(R.default,{mr0:!0,ecId:this.props.ecId+"_WeaBrowser@mxkkbd",type:17,isSingle:!1,title:O(83496,"多人力资源"),viewAttr:3,valueObj:i,onChange:function(t,a,n){e.setState({hrmids:t,hrmidsDatas:n}),t||e.refs.weaErrorHrmids.showError()}}))))}},{key:"getRightMenu",value:function(){var e=this,t=[];return t.push({key:"add",icon:y.default.createElement("i",{className:"icon-coms-Preservation"}),content:O(30986,"保存"),onClick:function(){e.doSave()}}),t}},{key:"validate",value:function(){var e=!0,t=this.state,a=t.name,n=t.hrmids;return a||(e=!1,this.refs.weaErrorName.showError()),n||(e=!1,this.refs.weaErrorHrmids.showError()),e}},{key:"doSave",value:function(){var e=this;if(this.state.savable&&this.validate()){var t=function(){return e.setState({savable:!0})};this.setState({savable:!1});var a=(0,i.default)({},this.state);a.cmd="base",delete a.hrmidsDatas,k.default.callApi("/api/workflow/forward/saveUserGroupCmd","POST",a).then(function(){t(),e.init(),e.props.onVisableChange()},function(){t(),window.alert(O(385564,"添加常用组失败！"))})}}},{key:"getAddModalButtons",value:function(){var e=this;return[y.default.createElement(v.Button,{ecId:this.props.ecId+"_Button@r3wd6i",type:"primary",onClick:function(){e.doSave()}},O(30986,"保存"))]}}]),t}(y.default.Component);t.default=B},1049:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(19),i=n(r),s=a(6),o=n(s),l=a(2),c=n(l),d=a(3),u=n(d),h=a(4),p=n(h),f=a(5),m=n(f),g=a(10),y=n(g),v=a(134),b=n(v),k=a(308),C=y.default.getLabel,S=null,w=function(e,t){var a=(0,k.text)(e,t);return"string"!==typeof a?React.createElement("span",{style:{display:"inline-block",marginRight:5,lineHeight:2}},a):React.createElement("span",{style:{marginRight:5},dangerouslySetInnerHTML:{__html:a}})},_=function(e){function t(e){(0,c.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={},a}return(0,m.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.datas,n=t.inputTop,r=t.inputBottom;this.dataObj={};var i=a.map(function(t,a){var i=[];t.departmentname&&i.push(t.departmentname),t.supsubcompanyname&&i.push(t.supsubcompanyname),t.subcompanyname&&i.push(t.subcompanyname),t.crmNames=i.join("／"),e.dataObj[t.id]=t;var s=void 0;try{t.requestParams&&(s=JSON.parse(t.requestParams))}catch(e){}return React.createElement("li",{ecId:e.props.ecId+"_li@ttfft4@"+a,className:e.cls(t),onDoubleClick:e.onDoubleClick.bind(e,t),onClick:e.onClick.bind(e,t)},React.createElement("div",{className:"item-wrap"},React.createElement(b.default,{ecId:e.props.ecId+"_WeaAvatar@0wvc22@"+a,className:"wea-tree-hr-portrait",userId:t.id,requestParams:s}),React.createElement("div",{className:"resource-content breakall"},React.createElement("div",null,e.props.is_012app&&t.workcode&&React.createElement("span",{title:t.workcode,style:{marginRight:10}},t.workcode),n||r?(n||[]).map(function(e){return w(t,e)}):[React.createElement("span",{key:"lastname",className:"lastname",title:t.lastname},t.lastname),React.createElement("span",{key:"jobtitlename",className:"jobtitlename gray",title:t.jobtitlename},t.jobtitlename)]),React.createElement("div",null,n||r?(r||[]).map(function(e){return w(t,e)}):React.createElement("div",{className:"gray",title:t.crmNames},t.crmNames)))),React.createElement("div",{className:"icon-wrap"}),React.createElement("i",{className:"icon-coms-Selected"}))});return React.createElement("div",{className:"wea-crm-list"},React.createElement("ul",{className:"wea-crm-list-wrapper"},i),0==i.length&&React.createElement("div",{className:"empty-tip",style:{color:"#999",paddingTop:30,textAlign:"center"}},C(83320,"没有可显示的数据")))}},{key:"cls",value:function(e){var t=this.props,a=t.selectedKeys,n=t.filterData,r=["cursor-pointer"];if(a&&a.indexOf(e.id)>-1&&r.push("selected"),n){var i=[];n.forEach(function(e){"resource"==e.type?i.push(e.id):e.users&&e.users.forEach(function(e){i.push(e.id)})}),i.indexOf(e.id)>-1&&r.push("hide")}return r.join(" ")}},{key:"onClick",value:function(e){var t=this;clearTimeout(S),S=setTimeout(function(){var a=t.props.selectedKeys,n=a?[].concat((0,i.default)(a)):[],r=[];n.indexOf(e.id)>-1?n=n.filter(function(t){return t!==e.id}):n.push(e.id),n.forEach(function(e){t.dataObj[e]&&r.push(t.dataObj[e])}),t.props.onClick&&t.props.onClick(n,r)},200)}},{key:"onDoubleClick",value:function(e){var t=this.props,a=t.isSingle,n=t.is_012app;a&&n&&alert(C(385602,"请“单击”选择人员，不可“双击”")),clearTimeout(S),this.props.onDoubleClick&&this.props.onDoubleClick([e])}}]),t}(React.Component);t.default=_},1050:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),i=n(r),s=a(6),o=n(s),l=a(2),c=n(l),d=a(3),u=n(d),h=a(4),p=n(h),f=a(5),m=n(f),g=a(18),y=n(g),v=a(32),b=n(v),k=a(1051),C=n(k),S=function(e){function t(e){(0,c.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={visible:!1,loading:!0,showDrop:!1,activeKey:"allData",dataKey:e.dataKey,hasPgTableData:e.hasPgTableData||{},noPgTableData:e.noPgTableData||{},contentType:e.contentType,hasPagination:e.hasPagination,url_pgTable:e.url,initialShowSearchAd:!1,id:"",name:"",seacrhPara:"",hasSearchValue:!1,pagination:{}},a}return(0,m.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e,t){var a=this.props,n=a.dataKey,r=a.noPgTableData,i=a.hasPgTableData,s=a.contentType,o=a.hasPagination,l=a.url;n===e.dataKey||(0,y.default)(e.dataKey)||this.setState({dataKey:e.dataKey}),(0,b.default)(r,e.noPgTableData)||this.setState({noPgTableData:e.noPgTableData}),(0,b.default)(i,e.hasPgTableData)||this.setState({hasPgTableData:e.hasPgTableData}),s===e.contentType||(0,y.default)(e.contentType)||this.setState({contentType:e.contentType}),o!==e.hasPagination&&this.setState({hasPagination:e.hasPagination}),l!==e.url&&this.setState({url_pgTable:e.url})}},{key:"onRowClick",value:function(e,t){var a=this.state,n=(a.id,a.name,a.hasPagination,""),r="",i="",s="";if("function"===typeof this.props.setData){this.refs.tableList.state.columns.forEach(function(e){"true"==e.isInputCol&&(n=e.dataIndex),"true"==e.isPrimarykey&&(i=e.dataIndex)}),r=e.orgWholePathspan||e[n+"span"]||e[n]||e.name||"",s=e[i+"span"]||e[i]||e.id||"",e.id=s||e.id,e.name=r||e.name,this.props.setData(s,r,[e])}this.setState({id:s,name:r})}},{key:"setShowSearchAd",value:function(e){this.state.showSearchAd;this.setState({showSearchAd:e,initialShowSearchAd:!0})}},{key:"render",value:function(){var e=this,t=this,a=this.props,n=a.scrollHeight,r=a.pageSize,s=a.hasRadio,o=a.modalStyle,l=a.scrollx,c=a.noOperate,d=a.showCheck,u=a.showCheckBtn,h=a.showCheckedDatas,p=a.showCheckedDatasChange,f=a.checkedDatas,m=a.getSelection,g=a.setLoading,y=a.onOperatesClick,v=a.keepSelectedRowKeys,b=a.getTableParams,k=a.tableApiPrefix,S=a.onDrop,w=a.draggable,_=a.draggableType,D=a.formatInput,I=this.state,E=I.noPgTableData,T=I.hasPgTableData,P=I.dataKey,A=I.contentType,K=I.hasPagination,R=I.url_pgTable,x={};"dk_hasPgTable"==A&&(x={dataKey:P}),"hasPgTable"==A&&(x={noSkHasPgTable:{contentType:A,url:R,hasPgTableData:T}}),"noPgTable"==A&&(x={noPgTableData:E});var M={};return f&&(M.checkedDatas=f),React.createElement(C.default,(0,i.default)({ref:"tableList"},x,M,{ecId:this.props.ecId+"_WeaBrowserTable@j1aj1p",scroll:!0,weaSimple:!0,showTotal:!0,useFixedHeader:!0,width:o.width,scrollx:l,showRadio:s,showCheck:d,getSelection:m,setLoading:g,pageSize:r,noOperate:c,onDrop:S,draggable:w,draggableType:_,tableApiPrefix:k,onOperatesClick:y,usePagination:K,showCheckBtn:u,showCheckedDatas:h,showCheckedDatasChange:p,formatInput:D,scrollHeight:n,getTableParams:b,keepSelectedRowKeys:v,onChange:function(t){return e.setState({pagination:t})},onRowClick:function(e,a){return t.onRowClick(e,a)},getTableLoading:function(e){return t.setState({loading:e})}}))}},{key:"isPreviousDisabled",value:function(){return 1===this.state.pagination.current}},{key:"isNextDisabled",value:function(){var e=this.state.pagination;return e.current===Math.ceil(e.count/e.pageSize)}},{key:"previous",value:function(){var e=this.state.pagination,t=e.current-1;0!==t&&this.refs.tableList.getTableDatas("",!1,t,e.pageSize)}},{key:"next",value:function(){var e=this.state.pagination;e.current!==Math.ceil(e.count/e.pageSize)&&this.refs.tableList.getTableDatas("",!1,e.current+1,e.pageSize)}}]),t}(React.Component);t.default=S},1051:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _promise=__webpack_require__(27),_promise2=_interopRequireDefault(_promise),_stringify=__webpack_require__(36),_stringify2=_interopRequireDefault(_stringify),_typeof2=__webpack_require__(24),_typeof3=_interopRequireDefault(_typeof2),_getPrototypeOf=__webpack_require__(6),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_extends2=__webpack_require__(0),_extends3=_interopRequireDefault(_extends2),_classCallCheck2=__webpack_require__(2),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_possibleConstructorReturn2=__webpack_require__(4),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_createClass2=__webpack_require__(3),_createClass3=_interopRequireDefault(_createClass2),_inherits2=__webpack_require__(5),_inherits3=_interopRequireDefault(_inherits2),_class,_temp,_antd=__webpack_require__(8),_cloneDeep=__webpack_require__(41),_cloneDeep2=_interopRequireDefault(_cloneDeep),_isEmpty=__webpack_require__(18),_isEmpty2=_interopRequireDefault(_isEmpty),_isArray=__webpack_require__(21),_isArray2=_interopRequireDefault(_isArray),_isEqual=__webpack_require__(32),_isEqual2=_interopRequireDefault(_isEqual),_uniq=__webpack_require__(64),_uniq2=_interopRequireDefault(_uniq),_weaNewDragula=__webpack_require__(324),_weaNewDragula2=_interopRequireDefault(_weaNewDragula),_weaLocaleProvider=__webpack_require__(10),_weaLocaleProvider2=_interopRequireDefault(_weaLocaleProvider),_weaTools=__webpack_require__(35),_weaTools2=_interopRequireDefault(_weaTools),_util=__webpack_require__(308),_weaTextarea=__webpack_require__(65),_weaTextarea2=_interopRequireDefault(_weaTextarea),_Encry=__webpack_require__(50),getLabel=_weaLocaleProvider2.default.getLabel,MenuItem=_antd.Menu.Item,defaultLocale={total:"共",totalUnit:"条",operates:"操作",customColTitle:"定制列",customColSelect:"待选列名",customColSelected:"已选列名",customColSave:"保存",customColCancel:"取消"},Main=(_temp=_class=function(_React$Component){function Main(props){(0,_classCallCheck3.default)(this,Main);var _this=(0,_possibleConstructorReturn3.default)(this,(Main.__proto__||(0,_getPrototypeOf2.default)(Main)).call(this,props));_this.onWindowResize=function(){_this.instanceIsMounted&&_this.setScrollheigth()},_this.getKeyFromData=function(e){return e.randomFieldId},_this.getKeyFromDom=function(e){return $("span.wea-table-move",e).attr("data-index")},_this.createOperateDom=function(e,t){return Array.isArray(e)&&0!=e.length?React.createElement("div",{onClick:_util.stopPropagation},React.createElement(_antd.Dropdown,{ecId:_this.props.ecId+"_Dropdown@vsdk1a",getPopupContainer:function(e){return e},overlay:React.createElement(_antd.Menu,{ecId:_this.props.ecId+"_Menu@iwjki4"},e.map(function(e,t){return React.createElement(MenuItem,{ecId:_this.props.ecId+"_MenuItem@qaxaiz@"+t,key:t},React.createElement("a",{ecId:_this.props.ecId+"_a@oyzymq@"+t,href:"javascript:void(0);",onClick:function(t){(0,_util.stopPropagation)(t),e.func()}},e.text))}))},React.createElement("a",{className:"ant-dropdown-link",href:"javascript:void(0);"},t," ",React.createElement(_antd.Icon,{ecId:_this.props.ecId+"_Icon@fzyykj",type:"caret-down"})))):React.createElement("div",null)},_this.createOperate=function(){return{title:"",dataIndex:"randomFieldOperate",key:"randomFieldOperate",className:"wea-table-operates",display:"true",render:_this.createOperateRender()}},_this.createOperateRender=function(){var createOperateDom=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_this.createOperateDom,operates=_this.state.operates,locale=_this.getLocale();return function(text,record,index){var rfs=record.randomFieldOp?"object"===(0,_typeof3.default)(record.randomFieldOp)?record.randomFieldOp:JSON.parse(record.randomFieldOp):"",operList=operates.filter(function(e,t){var a=e.index||"-1";return!0===rfs||!1===rfs?rfs:"true"===rfs||"false"===rfs||""===rfs?"true"===rfs:rfs[a]&&"false"!=rfs[a]}).map(function(operate,operIndex){var flag=operate.index||"-1",argumentString=[],opParams=record["randomFieldOpPara"+(operate.index||"")];Array.isArray(opParams)&&opParams.map(function(e){argumentString.push(e.obj)});var fn=_this.createOperateOldFunc(operate.href,record,argumentString);return{text:operate.text,func:function func(){"function"===typeof _this.props.onOperatesClick?_this.props.onOperatesClick(record,index,operate,flag):eval(fn)}}});return createOperateDom(operList,getLabel(30585,"操作"),record,index,operates)}},_this.createOperateOldFunc=function(e,t,a){var n="";return e&&(n=e.split(":")[1].split(")")[0],"number"===typeof t.randomFieldId&&(n+=t.randomFieldId),"string"===typeof t.randomFieldId&&(n+='"'+t.randomFieldId+'"'),a.length&&a.length>0&&(n+=",",a.map(function(e){"number"===typeof t.randomFieldId&&(n+=e),"string"===typeof t.randomFieldId&&(n+='"'+e+'"')})),n+=")"),n},_this.instanceIsMounted=!1;var columns=[],datas=[],selectedRowKeys=[];return props.noSkHasPgTable&&(columns=props.noSkHasPgTable.hasPgTableData.columns||[],datas=props.noSkHasPgTable.hasPgTableData.datas||[]),(0,_isEmpty2.default)(props.noPgTableData)||(columns=props.noPgTableData.columns||[],datas=props.noPgTableData.datas),(0,_isEmpty2.default)(props.checkedDatas)||props.checkedDatas.forEach(function(e){selectedRowKeys.push(e.randomFieldId||e.id)}),_this.state={height:props.scrollHeight||0,showCheck:props.showCheck||!1,columns:columns,datas:datas,operates:[],sortParams:[],selectedRowKeys:selectedRowKeys,current:1,count:0,pageSize:props.pageSize||10,loading:!1,showCheckedDatas:!1,checkedDatas:props.checkedDatas||[]},_this}return(0,_inherits3.default)(Main,_React$Component),(0,_createClass3.default)(Main,[{key:"getLocale",value:function(){var e={};return this.context.antLocale&&this.context.antLocale.Table&&(e=this.context.antLocale.WeaTable),(0,_extends3.default)({},defaultLocale,e,this.props.locale)}}]),(0,_createClass3.default)(Main,[{key:"setScrollheigth",value:function(){return}},{key:"componentDidMount",value:function(){this.instanceIsMounted=!0;var e=this.props,t=e.usePagination,a=(e.noPgTableData,e.dataKey);t&&this.getTableDatas(a),this.setScrollheigth(),window.addEventListener("resize",this.onWindowResize)}},{key:"componentWillReceiveProps",value:function(e,t){if(this.props.showCheckedDatas!==e.showCheckedDatas&&this.setState({showCheckedDatas:e.showCheckedDatas}),this.props.dataKey===e.dataKey||(0,_isEmpty2.default)(e.dataKey)||this.getTableDatas(e.dataKey),(0,_isEqual2.default)(this.props.noPgTableData,e.noPgTableData)||!(0,_isEmpty2.default)(e.noPgTableData)&&this.setState({datas:e.noPgTableData.datas,columns:e.noPgTableData.columns}),"checkedDatas"in e){var a=[],n=[];(0,_isArray2.default)(e.checkedDatas)&&e.checkedDatas.forEach(function(e){a.push(e.randomFieldId||e.id),e.randomFieldId&&n.push(e)}),this.setState({selectedRowKeys:a,checkedDatas:e.checkedDatas})}_weaTools2.default.isEqual(this.props.noSkHasPgTable,e.noSkHasPgTable)||!(0,_isEmpty2.default)(e.noSkHasPgTable)&&!(0,_isEmpty2.default)(e.noSkHasPgTable.hasPgTableData)&&this.setState({current:1,columns:e.noSkHasPgTable.hasPgTableData.columns,datas:e.noSkHasPgTable.hasPgTableData.datas,count:e.noSkHasPgTable.hasPgTableData.count}),this.props.scrollHeight!==e.scrollHeight&&this.setState({height:e.scrollHeight})}},{key:"componentWillUnmount",value:function(){this.instanceIsMounted=!1,window.removeEventListener("resize",this.onWindowResize)}},{key:"formatColumns",value:function(e,t){var a=this,n=this.props,r=n.scrollx,i=n.showRadio,s=n.useSorter,o=n.noOperate,l=this.state,c=l.showCheck,d=l.sortParams,u=this.getColumns(e)||[],h={},p=0,f=0;return u=u.filter(function(e){if("false"==e.hide&&e.oldWidth){var t=e.oldWidth?parseFloat(e.oldWidth.substring(0,e.oldWidth.length-1)):10;h[e.dataIndex]=t,p++,f+=t}return"false"==String(e.hide)}),!o&&u.push(this.createOperate()),f+=8,t&&(u.unshift({key:"draggable",dataIndex:"draggable",render:function(e,t,n){return React.createElement("span",{"data-index":t.randomFieldId,key:t.randomFieldId,className:"icon-coms-move wea-table-move cursor-pointer",ecId:a.props.ecId+"_span@5g3wet@"+n})}}),f+=15),(c||i)&&(f+=2),u=u.map(function(e){return"false"==e.hide&&e.oldWidth?(e.width=parseFloat(h[e.dataIndex])+(100-f)*parseFloat(h[e.dataIndex]/f)+"%",r&&(e.width=e.oldWidth),!1!==s&&e.orderkey&&(e.sorter=!0,d&&d.length>0?d.map(function(t){t.orderkey==e.orderkey&&(e.sortOrder=t.sortOrder)}):e.sortOrder=!1),e):e})}},{key:"render",value:function(){var e=this,t=(this.getLocale(),this.props),a=t.width,n=t.scrollx,r=t.showCheckBtn,i=t.showRadio,s=t.scroll,o=t.usePagination,l=t.useFixedHeader,c=t.checkType,d=(t.useLoading,t.onDrop),u=t.draggable,h=t.draggableType,p=t.showCheckedDatasChange,f=this.state,m=f.height,g=f.columns,y=f.datas,v=f.selectedRowKeys,b=f.showCheck,k=(f.loading,this.state),C=k.showCheckedDatas,S=k.checkedDatas,w=this.formatColumns(g),_=b?{selectedRowKeys:v,onSelect:function(t,a,n){var r=e.state,i=r.selectedRowKeys,s=r.checkedDatas,o=void 0===s?[]:s;(0,_isEmpty2.default)(i)&&(i=[]),a?(i.push(t.randomFieldId),o.push(t)):(i=i.filter(function(e){return e!==t.randomFieldId}),o=o.filter(function(e){return(e.randomFieldId||e.id)!==t.randomFieldId})),e.setState({selectedRowKeys:i,checkedDatas:o}),e.props.getSelection&&e.props.getSelection(i,o)},onSelectAll:function(t,a,n){var r=e.state,i=r.selectedRowKeys,s=r.checkedDatas,o=void 0===s?[]:s;(0,_isEmpty2.default)(i)&&(i=[]),t?(a.forEach(function(e){return i.push(e.randomFieldId)}),o=o.concat(n),i=(0,_uniq2.default)(i)):(i=i.filter(function(e){return!n.some(function(t){return e===t.randomFieldId})}),o=o.filter(function(e){return!n.some(function(t){return(e.randomFieldId||e.id)===t.randomFieldId})})),e.setState({selectedRowKeys:i,checkedDatas:o}),e.props.getSelection&&e.props.getSelection(i,o)}}:null;i&&(_={type:"radio",selectedRowKeys:v,onSelect:function(t,a,n){var r=[],i=[];a&&(r.push(t.randomFieldId),i.push(t)),e.setState({selectedRowKeys:r,checkedDatas:i}),e.props.getSelection&&e.props.getSelection(r,i)}});var D={selectedRowKeys:v,onChange:function(t,a){e.setState({selectedRowKeys:t,checkedDatas:a}),e.props.getSelection&&e.props.getSelection(t,a)}},I=o?{weaSimple:this.props.weaSimple,pagination:this.getPagination()}:{weaSimple:!1,pagination:!1},E={};if(s||a){var T={};s&&(T.y=m,I.pagination&&this.state.count&&(T.y-=35)),a&&n&&(T.x=a-20),a&&n&&b&&(T.x=T.x-60),E.scroll=T}var P=void 0;if(C){if(u&&"icon"==h&&(w=this.formatColumns(g,u)),P=React.createElement(_antd.Table,(0,_extends3.default)({ecId:this.props.ecId+"_Table@94u6kq"},E,{useFixedHeader:l,rowSelection:D,columns:w,dataSource:S,weaSimple:!1,pagination:!1,checkType:c||"checkbox",rowKey:this.getKeyFromData})),u){var A={ecId:this.props.ecId+"_WeaNewDragula@rcxgo2",container:".ant-table-body .ant-table-tbody",draggableIconContainer:".wea-table-move",datas:S,getKeyFromData:this.getKeyFromData,getKeyFromDom:this.getKeyFromDom,onDrop:d,draggableType:h||"row"};P=React.createElement(_weaNewDragula2.default,A,P)}}else P=React.createElement(_antd.Table,(0,_extends3.default)({ecId:this.props.ecId+"_Table@y1plxf"},E,{useFixedHeader:l,rowSelection:_,columns:w,dataSource:y},I,{checkType:c||"checkbox",rowKey:this.getKeyFromData,onRowClick:this.onRowClick.bind(this),onChange:this.onChange.bind(this)}));return React.createElement("div",{className:"wea-new-table wea-browser-table"},r&&React.createElement("span",{className:"check-button-wrapper"},React.createElement(_antd.Button,{ecId:this.props.ecId+"_Button@ha2n4l",className:"check-button",type:C?"primary":"ghost",onClick:function(){e.setState({showCheckedDatas:!C}),p&&p(!C)}},getLabel(385596,"仅显示已选")),C&&React.createElement("span",{className:"icon-check-wrapper"},React.createElement(_antd.Icon,{ecId:this.props.ecId+"_Icon@99mhke",className:"icon-check",type:"check"}))),P)}},{key:"getPagination",value:function(){var e=(this.getLocale(),this.props),t=e.showSizeChanger,a=e.pageSizeOptions,n=e.showQuickJumper,r=(e.pageinationSize,e.showTotal),i=this.state,s=i.current,o=i.count,l=i.pageSize,c={defaultCurrent:1,defaultPageSize:l,current:s,count:o,total:o,showSizeChanger:!1!==t,showQuickJumper:!1!==n,pageSizeOptions:a||[10,20,50,100]};return!1!==r&&(c.showTotal=function(e){return getLabel(385617,"共$s条").replace(/\$s/,e)}),c}},{key:"getTableDatas",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments[2],n=this,r=arguments[3],i=arguments[4],s=this.props,o=s.dataKey,l=s.noSkHasPgTable,c=s.tableApiPrefix,d=s.keepSelectedRowKeys,u=s.getTableParams,h=this.state,p=h.current,f=h.pageSize,m=h.sortParams,g=h.count,y=a||p;t&&(y=1);var v=r||f,b=i||m,k=e||o,C=v*(y-1)+1,S=v*y;if(0!=t||t){C=1,S=v,b=[];var w={current:1,pageSize:f,sortParams:[],selectedRowKeys:""};d&&delete w.selectedRowKeys,this.setState(w)}if("function"===typeof this.props.getTableLoading&&this.props.getTableLoading(!0),l&&"hasPgTable"==l.contentType)if(a||r){var _=l.url.replace(/&min=(\d)*/g,"").replace(/&max=(\d)*/g,"");y>1&&S>g&&(S=g),_+="&"+_weaTools2.default.getFd((0,_extends3.default)({},u?u()||{}:{},{min:C,max:S,pageSize:f,current:y,sortParams:(0,_stringify2.default)(b)})),this.props.setLoading&&this.props.setLoading(!0),_weaTools2.default.callApi(_,"GET").then(function(e){n.setState({current:y,datas:e.datas,columns:e.columns,count:e.total,sortParams:b}),n.props.setLoading&&n.props.setLoading(!1)}).catch(function(e){return n.props.onError&&n.props.onError(e)})}else this.setState({current:p,columns:l.hasPgTableData.columns,datas:l.hasPgTableData.datas,count:l.hasPgTableData.count});!l&&k&&(this.props.setLoading&&this.props.setLoading(!0),_promise2.default.all([_weaTools2.default.callApi((c||"")+"/api/ec/dev/table/datas","POST",{dataKey:k,min:C,max:S,pageSize:f,current:y,sortParams:(0,_stringify2.default)(b)}).then(function(e){return n.setState({current:y,datas:e.datas,columns:e.columns,operates:e.ops,sortParams:b}),n.props.formatInput&&n.props.formatInput(e.columns),e.count?(n.setState({count:e.count}),"function"===typeof n.props.onChange&&n.props.onChange({count:e.count,current:y,pageSize:v})):_weaTools2.default.callApi((c||"")+"/api/ec/dev/table/counts","POST",{dataKey:k}).then(function(e){return n.setState({count:e.count}),"function"===typeof n.props.onChange&&n.props.onChange({count:e.count,current:y,pageSize:v}),e}),e})]).then(function(e){var t=e[0].haveCheck,a=e[0].ops;if(n.props.setLoading&&n.props.setLoading(!1),t||a&&a.length>0){var r=e[0].columns,i=e[0].datas,s=[];i.map(function(e){var t={};r.map(function(a){(a.from&&"set"===a.from||"randomFieldId"===a.dataIndex)&&(t[a.dataIndex]=e[a.dataIndex])}),s.push(t)}),_weaTools2.default.callApi((c||"")+"/api/ec/dev/table/checks","POST",{randomDatas:(0,_stringify2.default)(s),dataKey:k}).then(function(e){var t=n.state.datas,a=e.datas;t=t.map(function(e){var t=(0,_cloneDeep2.default)(e);return a.map(function(a){if(a.randomFieldId==e.randomFieldId)for(var n in a)t[n]=a[n]}),t}),n.setState({datas:t}),"function"===typeof n.props.getTableLoading&&n.props.getTableLoading(!1)})}}).catch(function(e){return n.props.onError&&n.props.onError(e)}))}},{key:"onChange",value:function(e,t,a){var n={current:e.current,pageSize:e.pageSize,sortParams:a.column?[{orderkey:a.column.orderkey,sortOrder:a.order}]:[]};this.getTableDatas("",!1,n.current,n.pageSize,n.sortParams)}},{key:"onRowClick",value:function(e,t){"function"===typeof this.props.onRowClick&&this.props.onRowClick(e,t)}},{key:"getColumns",value:function(e){var t=(0,_cloneDeep2.default)(e);return t&&t.map(function(e){var t=e;return t.render=function(e,a,n){var r=a[t.dataIndex+"span"];return void 0===r&&(r=a[t.dataIndex]),(0,_Encry.desensitization)(r)||(0,_Encry.encryption)(r)?React.createElement(_weaTextarea2.default,{value:r,key:Math.random().toString(36).substr(2,6),viewAttr:"1"}):React.createElement("div",{className:"wea-url",dangerouslySetInnerHTML:function(){return{__html:r}}()})},t})}}]),Main}(React.Component),_class.contextTypes={antLocale:React.PropTypes.object},_temp);exports.default=Main},1172:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,s,o,l=a(0),c=r(l),d=a(16),u=r(d),h=a(6),p=r(h),f=a(2),m=r(f),g=a(3),y=r(g),v=a(4),b=r(v),k=a(5),C=r(k),S=a(1),w=r(S),_=a(194),D=(r(_),a(8)),I=a(14),E=(r(I),a(32)),T=r(E),P=a(25),A=r(P),K=a(18),R=r(K),x=a(42),M=r(x),L=a(64),N=r(L),O=a(10),B=r(O),F=a(1018),W=a(1173),H=n(W),z=a(1174),q=n(z),V=a(1183),j=n(V),U=a(1184),G=n(U),$=a(1185),Q=n($),J=a(1188),Y=n(J),X=a(1189),Z=n(X),ee=a(1190),te=n(ee),ae=a(1192),ne=n(ae),re=a(1193),ie=n(re),se=B.default.getLabel,oe=(s=i=function(e){function t(e){(0,m.default)(this,t);var a=(0,b.default)(this,(t.__proto__||(0,p.default)(t)).call(this,e));o.call(a),[H,q,j,G,Q,Y,Z,te,ne,ie].map(function(e){(0,u.default)(e).forEach(function(t){"function"===typeof e[t]&&(a[t]=e[t].bind(a))})});var n=e.searchAdFormCallbackKey;n&&!F.formCb[n]&&(F.formCb[n]=a.onFieldsChange);var r={showDls:!1,isAccount:!1,quickSearch:e.quickSearchName||"",pageSize:e.pageSize};return D.TreeZ.loadZTree(),a.updateState(e,r,!0),a}return(0,C.default)(t,e),(0,y.default)(t,[{key:"componentDidMount",value:function(){this.setMinWidth();var e=this.props,t=e.initFunc,a=e.quickSearchName,n={quickSearch:a||""};this.updateState(this.props,n,!0),t&&t(this)}},{key:"componentWillReceiveProps",value:function(e){this.setMinWidth(e),this.updateState(e)}},{key:"componentWillUnmount",value:function(){var e=this.props.searchAdFormCallbackKey;e&&F.formCb[e]&&delete F.formCb[e],this.setState({selectedDialogVisible:!1})}},{key:"setMinWidth",value:function(e){e=e||this.props,e.setMinWidth&&e.setMinWidth()}},{key:"count",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.state.inputId,n=0,r=[];return e.forEach(function(e){e.users?r=r.concat(e.users.map(function(e){return e[a]||e.id})):r.push(e[a]||e.id)}),n+=(0,N.default)(r).length,t?n:n>0?"("+n+")":""}},{key:"render",value:function(){var e=this.props.extraElement,t=this.getAssociative(),a=void 0;return this.state.loadModal&&(a=this.getModal()),w.default.createElement("div",null,t,e,a)}}]),t}(w.default.Component),i.defaultProps=(0,c.default)({},F.defaultProps,{title:se(24986,"标题")}),o=function(){var e=this;this.state=F.defaultState,this.modules={},this.renderModules={},this.resourceCache={},this.tabConditions={},this.tabConditionsOuter={},this.updateState=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],r=(0,c.default)({},a),i=e.getDataOfProps(t,n);void 0===i||(0,T.default)(i,e.state.data)||(r.data=i),e.setState(r)},this.updateModules=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.modules=(0,c.default)({},e.modules,t)},this.getTabsProps=function(){var t=e.props,a=e.state.activeKey,n=e.getTabs();if(!(0,R.default)(n)&&a){var r=n.filter(function(e){return e.key===a})[0]||{};t=(0,c.default)({},t,r.browserProps||{})}return t},this.onChange=function(t){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.props,r=n.onChange,i=n.type,s=e.state,o=s.inputId,l=s.inputName,d=s.activeKey,u=s.companyList,h=s.companyId,p=[],f=[],m=[];t.forEach(function(t){if(!e.isCrm()||"resource"==t.type||"all"==t.type||!(0,R.default)(t.users)){var a=t[o]||t.id||"",n=t.orgWholePathspan||t[l+"span"]||t[l]||t.name||t.lastname||"";if("all"==t.type?p=[t.ids]:t.users?p=p.concat(t.users.map(function(e){return e[o]||e.id})):p.push(a),"systempage"===i){var r=u.find(function(e){return e.id==h})||{};t.dropMenuValue=h,t.dropMenuUrl=r.url,t.activeKey=d}f.push(n),"children"in t&&delete t.children,"subs"in t&&delete t.subs,m.push((0,c.default)({},t,{id:a,name:n}))}}),e.setState({data:m}),(0,A.default)(r)&&r(""+p,""+f,m),a&&e.closeModal()},this.onSearch=function(t,a,n){var r=e.getTabsProps();e.setState({activeKey:a||("searchAtTab"in r?r.searchAtTab:e.getDefaultActiveKey(!1)),showCheckedDatas:!1,showSearchAd:!1},function(){e.getData(e.getSearchParams((0,c.default)({},t)),n),e.weaSrcoll&&e.weaSrcoll.scrollerToTop()})},this.onFieldsChange=function(t,a){var n=e.state.quickSearch||"name",r={};if(a[n]){var i=a[n].value;(0,M.default)(i)&&(r.inputValue=i)}if(a.date2during){var s=a.date2during.value;r.date2during=s}e.setState(r)},this.isCrm=function(){var t=e.getTabsProps(),a=t.type,n=void 0===a?1:a;return 1==n||17==n}},s);t.default=D.Form.create({onFieldsChange:function(e,t){var a=e.searchAdFormCallbackKey;a&&F.formCb[a]&&F.formCb[a](e,t)}})(oe)},1173:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=[];return!(0,y.default)(e)&&e.length&&e.map(function(e){e&&("resource"===e.type?t.push(e):e.users&&(t=t.concat(e.users)))}),t}function i(e){var t=this.state.data,a=[],n=[];return t&&t.forEach(function(e){"resource"==e.type?n.push(e.id):e.users&&e.users.forEach(function(e){return n.push(e.id)})}),e&&(a=e.filter(function(e){return-1==n.indexOf(e.id)||"resource"!=e.type})),a}function s(e){var t=this,a=this.getTabsProps(),n=[],r=a.isShowGroup;return e.forEach(function(e){var a=t.resourcesCache[e.type+e.id]||e;"resource"===e.type?n.push(e):(a.users=e.users,r?"true"==a.isPrivate?n=n.concat(t.formatData(a.users)):n.push(a):n=n.concat(t.formatData(a.users)))}),n}function o(e,t,a){return this.isCrm()?(t=(0,C.default)(t,a),t=t.filter(function(t){return-1===e.findIndex(function(e){return e.type==t.type&&e[a]==t[a]})}),e=e.concat(t)):e=(0,C.default)(e.concat(t),a),e}function l(e){Array.isArray(e)?e.map(this.getGroupTreeDatas):("true"===e.open&&(e.canClick="false"),e.nocheck=!0,e.isParent="true"===e.isParent||!0===e.isParent||void 0!=e.children&&e.children.length>0,e.isParent&&this.getGroupTreeDatas(e.children))}function c(e,t,a){var n=this;return e.map(function(e){return e.key===t?(0,m.default)({},e,{childs:a}):e.childs?(0,m.default)({},e,{childs:n.refreshTreeDatas(e.childs,t,a)}):e})}function d(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.state.data,n=(0,w.default)(a);return t&&(e=this.filterDatas(e)),this.setSearchValues(e,n)}function u(e){if(this.isCrm())return this.setSearchValues(e,[],!1);var t=this.state.inputName,a=this.getTabsProps,n=[];return e.forEach(function(e){e&&(a.isOrgInfo&&(e.name=e.orgWholePathspan||e[t+"span"]||e[t]||e.name),n.push(e))}),n}function h(e,t){var a=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.getTabsProps(),i=r.maxLength;if(e&&e.length>0){for(var s=0;s<e.length;s++){if("break"===function(a){var n=e[a];if(n){if(n.type=n.type||"resource",n.lastname=n.lastname||n.name||"","all"===n.type)return n.id=n.id||"all_x",n.nodeid="all_x",t=[n],"break";"resource"===n.type?n.nodeid="resource_"+n.id+"x":n.nodeid=n.type+"_"+n.id+"x",t&&!t.some(function(e){return e.nodeid==n.nodeid})&&t.push(n)}}(s))break}if(i&&i<this.countCrm(t,!0))return void window.alert(I(385619,"所选人数不能超出$s人!").replace(/\$s/,i));n&&this.setState({selectedData:t},function(){return a.onChange(t)})}return t}function p(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=0,n=[];return e.forEach(function(e){"all"===e.type?a+=e.count:"resource"!==e.type?a+=(e.users||[]).length:n.push(e.id)}),a+=(0,b.default)(n).length,t?a:a>0?"("+a+")":""}Object.defineProperty(t,"__esModule",{value:!0});var f=a(0),m=n(f);t.getFilterData=r,t.filterDatas=i,t.formatData=s,t.filterDuplData=o,t.getGroupTreeDatas=l,t.refreshTreeDatas=c,t.appendSearchValues=d,t.replaceSearchValues=u,t.setSearchValues=h,t.countCrm=p;var g=a(18),y=n(g),v=a(64),b=n(v),k=a(103),C=n(k),S=a(41),w=n(S),_=a(10),D=n(_),I=D.default.getLabel},1174:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){this.associative&&this.associative.focus&&this.associative.focus()}function i(){this.setState({data:[]})}function s(e){var t=this.getTabsProps(),a=t.onBeforeFocusCheck;if(e&&e.preventDefault(),a){a(this.onCustomClickInner.bind(this))}else this.onCustomClickInner(e)}function o(){if(this.getTabsProps().memorise){var e=this.state.data;this.onBrowerClick(e)}else this.onBrowerClick()}function l(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getTabsProps(),r=n.onBrowerClick,i=function(){t.getTabsFromUrl(function(){t.onBrowerClickInner(e,a)})};"function"===typeof r?r(e,i):i()}function c(e,t){var a=this,n=this.getTabsProps(),r=n.isSingle,i=n.pageSize,s=n.virtualUrl,o=n.hasLeftTree,l=n.defaultCheckStrictly,c=n.defaultShowDls,d=n.defaultShowAllBranch,u=n.defaultShowAccount,p=(0,h.default)({},b.initialState,{loadModal:!0,visible:t,showDls:c,isAccount:u,showAllBranch:d,checkStrictly:l,pageSize:i});this.onTabChange(this.getDefaultActiveKey(),p,function(){r?(0,g.default)(e)?a.setState({idCache:"",nameCache:"",selectedData:[]}):a.setState({idCache:e[0].id,nameCache:e[0].name,selectedData:e}):a.getSelectedData(e)}),r&&o&&this.getLeftTreeDatas(),s&&this.getVirtual()}function d(){var e=this,t=this.getTabsProps(),a=t.inputStyle,n=t.fieldName,r=t.customized,i=t.children,s=t.associativeValueWrap;if(r)return f.default.createElement("div",{className:"cursor-pointer",onClick:this.onCustomClick},i);var o=this.state,l=o.data,c=o.inputId,d=o.inputName,u=o.inputTop,p=o.inputBottom,m=l.map(function(e){return e.id||""}),g=f.default.createElement("input",{type:"hidden",id:n,name:n,value:m.join(","),ecId:this.props.ecId+"_input@jc79en"}),y=(0,h.default)({},t,{valueWarp:s,style:a,data:l,value:m,inputId:c,inputName:d,inputTop:u,inputBottom:p,ref:function(t){return e.associative=t},ecId:t.ecId+"_Associative@zt8qgk",onChange:function(t){return e.setState({selectedData:t},function(){return e.onChange(t)})},appendSearchValues:this.appendSearchValues,clearAssoData:this.clearAssoData,clickCallback:this.onBrowerClick});return[f.default.createElement(v.default,y),g]}Object.defineProperty(t,"__esModule",{value:!0});var u=a(0),h=n(u);t.focus=r,t.clearAssoData=i,t.onCustomClick=s,t.onCustomClickInner=o,t.onBrowerClick=l,t.onBrowerClickInner=c,t.getAssociative=d;var p=a(1),f=n(p),m=a(18),g=n(m),y=a(1175),v=n(y),b=a(1018)},1175:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'};return e.replace(/&(lt|gt|nbsp|amp|quot);/gi,function(e,a){return t[a]})}Object.defineProperty(t,"__esModule",{value:!0});var s,o,l=a(16),c=r(l),d=a(19),u=r(d),h=a(0),p=r(h),f=a(6),m=r(f),g=a(2),y=r(g),v=a(3),b=r(v),k=a(4),C=r(k),S=a(5),w=r(S),_=a(1),D=r(_),I=a(194),E=r(I),T=a(14),P=r(T),A=a(18),K=r(A),R=a(32),x=r(R),M=a(42),L=r(M),N=a(41),O=r(N),B=a(103),F=r(B),W=a(33),H=r(W),z=a(17),q=a(50),V=a(1046),j=r(V),U=a(1177),G=n(U),$=a(1178),Q=n($),J=(o=s=function(e){function t(e){(0,y.default)(this,t);var a=(0,C.default)(this,(t.__proto__||(0,m.default)(t)).call(this,e));return a.state={loading:!1,focus:!1,dropdownWidth:200,hrmlist:[],hrmlistVisible:!1,hrmlistStyle:null,hrmVisible:!1,searchList:[],activeKey:"",loadSelect:!1,selectedDialogVisible:!1,checkedKeys:[],selectedData:[],searchCache:""},a.isCrm=function(){var e=a.props.type,t=void 0===e?1:e;return"1"==t||"17"==t},a.getData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=a.props,n=t.isSingle,r=t.type,i=void 0===r?1:r,s=t.oldUrl,o=t.completeURL,l=t.completeParams,c=o||"/api/public/browser/complete/"+i+"?";s&&(c="/api/ec/api/data/search?type="+i+"&"),(0,H.default)(e)?(a.setState({searchCache:e}),(0,z.callApi)(c,"GET",(0,p.default)({q:e},l)).then(function(t){if(a.state.searchCache===e){var r=(0,L.default)(t.datas)&&t.datas.length>0?JSON.parse(t.datas):t.datas;s&&(r=t),r||(r=[]);var i=[];if(a.props.data.forEach(function(e){a.isCrm()&&!n&&"resource"!==e.type?i=i.concat(Array.isArray(e.users)?e.users.map(function(e){return e.id||""}):[]):i.push(e.id)}),a.isCrm()&&!n){var o=[];r.forEach(function(e){e.type="resource",e.nodeid="resource_"+e.id+"x",e.lastname=e.name,-1===i.indexOf(e.id)&&o.push(e)}),r=o}var l="";if(!(0,K.default)(r)){var c=r.filter(function(e){return-1==i.indexOf(e.id)});(0,K.default)(c)||(l=c[0].id),r.forEach(function(e){e.title&&(e.title=((e.title||"").split("|")||[]).map(function(e){return(0,q.desensitization)(e)?q.ENCRYPTION_CODE:e}).join("|"),(0,q.encryption)(e.title)&&(e.title=(0,q.replaceEncryption)(e.title)))})}a.setState({searchList:r,loading:!1,activeKey:l})}})):a.setState({searchList:[],loading:!1,activeKey:""})},a.getTitle=function(){return a.props.showTitle?i(a.props.data.map(function(e){return e.name}).join(",")):""},a.filterDuplData=function(e,t,n){return a.isCrm()?(t=(0,F.default)(t,n),t=t.filter(function(t){return-1===e.findIndex(function(e){return e.type==t.type&&e[n]==t[n]})}),e=e.concat(t)):e=(0,F.default)(e.concat(t),n),e},a.onSelectedGroupExpand=function(e){var t=a.props.inputId,n=a.state.selectedData,r=(0,O.default)(n),i=t,s=r.findIndex(function(t){return t[i]===e[i]});if(-1!=s){var o,l=r[s];(o=r).splice.apply(o,[s,1].concat((0,u.default)(l.users||[]))),r=a.filterDuplData([],r,i)}a.setState({selectedData:r})},a.onSelectedListCheck=function(e){e.length>0?a.setState({checkedKeys:e}):a.setState({checkedKeys:[]})},a.onSelectedListDoubleClick=function(e){if(Array.isArray(e)||(e=[e]),e){var t=a.props.inputId,n=a.state,r=n.selectedData,i=n.checkedKeys,s=t,o=r.filter(function(t){return!e.some(function(e){return e===t[s]})}),l=i.filter(function(t){return!e.some(function(e){return e===t})});a.setState({selectedData:o,checkedKeys:l})}},a.onVisibleChange=function(e){return a.setState({selectedDialogVisible:e})},a.onDrag=function(e){return a.setState({selectedData:e})},a.onOk=function(){return a.props.onChange(a.state.selectedData)},[G,Q].map(function(e){(0,c.default)(e).forEach(function(t){"function"===typeof e[t]&&(a[t]=e[t].bind(a))})}),a}return(0,w.default)(t,e),(0,b.default)(t,[{key:"componentDidMount",value:function(){var e=this.state.dropdownWidth,t=(0,E.default)(this.searchWrapper).outerWidth()||0;this.setState({selectedData:[].concat((0,u.default)(this.props.data))}),e<t&&this.setState({dropdownWidth:t}),this.props.defaultFocus&&this.setState({focus:!0})}},{key:"componentWillReceiveProps",value:function(e){(0,x.default)(e.data,this.props.data)||(this.setState({selectedData:[].concat((0,u.default)(e.data))}),this.props.onAssociativeDataChange&&this.props.onAssociativeDataChange())}},{key:"clear",value:function(){this.props.clearAssoData()}},{key:"render",value:function(){var e=this,t=this.props,a=t.isSingle,n=t.style,r=t.linkUrl,i=t.viewAttr,s=t.fieldName,o=t.inputId,l=t.inputName,c=t.inputTop,d=t.inputBottom,u=t.mr0,h=t.resize,f=t.hasAddBtn,m=t.customIcon,g=t.hasBorder,y=t.whiteBackground,v=t.underline,b=t.hideOps,k=t.linked,C=t.valueWarp,S=t.hasAddGroup,w=t.cls,_=t.forceShowAll,I=t.data,E=this.state,T=E.selectedData,A=E.checkedKeys,R=E.selectedDialogVisible,x=(0,p.default)({},n);x.textDecoration="none";var M=(0,P.default)(w,"wea-associative-search","wea-associative-search-test","wea-associative-"+(a?"single":"search-mult"),{mr0:u,resize:h,underline:v,hideops:b,required:"3"==i&&(0,K.default)(I),mr15:/^field/.test(s)||"3"==i&&(0,K.default)(I),custom:f||m,border:g,white:y,"ext-btn":f||m||!a&&!("1"==i)&&S,"wea-associative-click":this.isCrm()||!(0,K.default)(r)||k,"value-warp":C,"wea-field-readonly":"1"==i});return D.default.createElement("div",{id:s+"span",title:this.getTitle(),className:M,style:x,ref:function(t){t&&(e.searchWrapper=t)}},this.getSelect("1"==i),this.getButtons(),!_&&D.default.createElement(j.default,(0,p.default)({},this.props,{ecId:this.props.ecId+"_SelectedDialog@vyd926",getDataKey:function(e){return e[o]},onVisibleChange:this.onVisibleChange,dialogProps:{visible:R},data:T,inputId:o,inputName:l,inputTop:c,inputBottom:d,checkedKeys:A,checkedCb:this.onSelectedListCheck,onDoubleClick:this.onSelectedListDoubleClick,onSelectedGroupExpand:this.onSelectedGroupExpand,onDrag:this.onDrag,onOk:this.onOk})))}}]),t}(D.default.Component),s.defaultProps={data:[],showTitle:!1},o);t.default=J},1176:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SortableListItem=t.SortableList=void 0;var r=a(19),i=n(r),s=a(0),o=n(s),l=a(23),c=n(l),d=a(1),u=n(d),h=a(350),p=n(h),f=a(14),m=n(f),g=function(e){var t=e.children,a=(0,c.default)(e,["children"]);return u.default.createElement(p.default,(0,o.default)({className:"sortable-list"},a),u.default.Children.map(t,function(e){return"SortableListItem"!==e.type.displayName?void console.error("TypeError: sortable list got a child which is not a SortableListItem component."):e}))};t.SortableList=g;var y=t.SortableListItem=function(e){var t=e.data,a=e.ecId,n=e.selectedKeys,r=e.multiple,s=e.selectable,o=e.draggable,l=e.getDataKey,c=e.getItemRender,d=e.onSelect,h=e.onDoubleClick,p=e.onDragStart,f="function"===typeof l?l(t):t,g=-1!==(n||[]).indexOf(f);return u.default.createElement("div",{className:(0,m.default)("sortable-list-item-wrap",{"sortable-list-item-selected":g}),ecId:a+"_div@1kxoak",draggable:o,"data-id":f,onClick:s?function(){var e=[].concat((0,i.default)(n));if(r){var t=e.indexOf(f);-1!==t?e.splice(t,1):e.push(f)}else e=[f];"function"===typeof d&&d(e)}:void 0,onDoubleClick:s?function(){"function"===typeof h&&h(f)}:void 0,onDragStart:o?p:void 0},"function"===typeof c?c(t):t,g&&[u.default.createElement("span",{className:"wea-icon-selected-bg"}),u.default.createElement("i",{className:"icon-coms-Selected"})])};y.displayName="SortableListItem",y.defaultProps={}},1177:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){}function i(){var e=this.props.onBlur;this.setState({searchList:[],activeKey:""}),(0,j.default)(e)&&e()}function s(){var e=this.props.onFocus;this.setState({focus:!0,searchList:[],activeKey:""}),(0,j.default)(e)&&e()}function o(e){if(e&&e.preventDefault(),this.props.onBeforeFocusCheck){var t=this.handleClickInner.bind(this);this.props.onBeforeFocusCheck(t,r)}else this.handleClickInner(e)}function l(e){var t=this.props,a=t.clickCallback,n=(t.isSingle,t.data);this.hasAll()||(0,j.default)(a)&&a(n)}function c(e){var t=this,a=function(){t.setState({focus:!0})};this.props.onBeforeFocusCheck?this.props.onBeforeFocusCheck(a,r):a()}function d(e){var t=this.props,a=t.onChange;t.isSingle&&e&&e.length>1&&(e=e.slice(0,1)),(0,j.default)(a)&&a(e)}function u(e){this.props.isSingle&&this.onChange(this.state.searchList.filter(function(t){return t.id==e}))}function h(e,t){var a=this.props,n=a.isSingle,r=a.data,i=r.filter(function(t){return!(t.id==e)});n&&this.onChange(i),n||this.handleChange(i.map(function(e){return e.id}))}function p(e){var t=this.props,a=t.isSingle,n=t.data;if(this.state.focus&&this.focus(),!a){var r=e.findIndex(function(e){return"_showMore"===e});-1!==r&&e.splice.apply(e,[r,1].concat((0,P.default)((this.showMore&&this.showMore.users||[]).map(function(e){return e.id}))));var i=n.concat(this.state.searchList);this.onChange(e.map(function(e){return i.filter(function(t){return t.id==e})[0]}))}this.hasAll()&&0===e.length&&this.props.dropAllUserGroup&&this.props.dropAllUserGroup()}function f(e){var t=this.props,a=t.onSearch,n=t.data,r=t.type;n.some(function(e){return"all"===e.type})||"141"==r||(this.setState({loading:!0}),this.getData(e),(0,j.default)(a)&&a(e))}function m(e,t){var a=this.props,n=a.isSingle,r=a.viewAtter,i=a.data,s=a.selectedClickCB;if(t=1==r?t:i.find(function(e){return e.id==t.id&&e.name==t.name})||t,s)return void(this.state.focus||s(e,{key:this.getId(t)||t.id,label:this.getName(t)}));if(t)if(this.isCrm()){if(n||!n&&"resource"===t.type)(0,j.default)(window.openhrm)&&window.openhrm(t.id),(0,j.default)(window.pointerXY)&&window.pointerXY(e.nativeEvent),(0,X.stopPropagation)(e);else if(!n&&"resource"!==t.type&&"all"!==t.type){var o=(0,M.default)(e.nativeEvent.target),l=(0,M.default)(this.searchWrapper),c=o.offset().top,d=o.offset().left,u=l.offset().top,h=l.offset().left,p={top:c-u+25,left:d-h};(0,O.default)(t.users)||this.setState({hrmlist:t.users,hrmlistVisible:!0,hrmlistStyle:p}),(0,X.stopPropagation)(e)}}else{var f=this.props,m=f.linkUrl,g=f.inputId,y=f.onLinkClick;if((0,j.default)(y))y(e,t),(0,X.stopPropagation)(e);else if(m){var v=""+m+(t[g]||t.id);window.open(v),(0,X.stopPropagation)(e)}}}function g(e){var t=this.props,a=t.forceShowAll,n=t.maxDataLength,r=t.maxShowDataLength,i=[].concat((0,P.default)(e||this.props.data||[]));if(a||i.length<=n)return i;var s=i.length-r-1,o=r,l=i.length-1-1,c={name:"……",id:"_showMore",disabled:!0,users:i.slice(o,l)};return this.showMore=c,i.splice(o,s,c),i}function y(e){var t=this.props,a=t.isSingle,n=t.inputId,r=e.id||"";return a?r:(this.isCrm()?e.type&&("all"===e.type&&(r=ids),"resource"!==e.type&&(r=e.users.map(function(e){return e.id}).join())):n&&(r=e[n]),r)}function v(e){if(!e)return"";var t=this.props.inputName,a=e.name||"";return this.isCrm()?(a=e.lastname||a,e.type&&("all"===e.type?a=a+"("+e.count+")":"resource"!==e.type&&(a=a+"("+(e.users||[]).length+")")),a):(a=e.orgWholePathspan||e[t+"span"]||e[t]||e.name||"",(0,q.default)(a)?ae(a):a)}function b(){var e=this.props,t=!1;e.data.length&&(t=!0);var a=e.placeholder;return a?K.default.createElement("div",{style:{display:t?"none":"block"},className:"ant-select-selection__placeholder"},a):null}function k(){var e=this;this.select&&(this.select.refs.rcSelect&&this.select.refs.rcSelect.onPlaceholderClick&&this.select.refs.rcSelect.onPlaceholderClick(),this.timmer&&clearTimeout(this.timmer),this.timmer=setTimeout(function(){clearTimeout(e.timmer);try{if(e.select){var t=(0,R.findDOMNode)(e.select);(0,M.default)(t).find(".scroller")[0].scrollTop=1e4,(0,M.default)(t).find("input").focus()}}catch(e){console&&console.warn(e)}},50))}function C(e){e&&(this.select=e,this.state.focus&&this.focus())}function S(){var e=this.props.data,t=0,a=[];return e.forEach(function(e){"all"===e.type?t+=e.count:"resource"!==e.type?e.users&&e.users.forEach(function(e){return a.push(e.id)}):a.push(e.id)}),t+=(0,G.default)(a).length}function w(){var e=this.props,t=e.isSingle,a=e.data;return!t&&a.some(function(e){return"all"===e.type})}function _(){var e=!1,t=this.props.data,a=[],n=[];return t.forEach(function(e){"resource"!==e.type&&"all"!==e.type?n.push(e):a.push(e)}),n.length>1&&(e=!0),1===n.length&&a.length>0&&(e=!0),e}function D(e){var t=this;if(e){var a=this.props,n=a.isSingle,r=a.data,i=a.readOnlyCallback,s=[];return r.forEach(function(e,a){var r=t.getName(e);(0,Z.encryption)(r)&&(r=(0,Z.replaceEncryption)(r));var o=function(a){return i?i.bind(t,e?[e]:[],a)():t.selectedClickHandler(a,e)},l={className:"child-item wdb",ecId:t.props.ecId+"_a@scy9nc@"+a,onClick:o};(0,Z.desensitization)(r)?s.push(K.default.createElement(Z.Encry,{value:r,valueProps:l,ecId:t.props.ecId+"_Encry@055rt8"})):(0,q.default)(r)?(n&&(l.title=r),l.dangerouslySetInnerHTML={__html:r},s.push(K.default.createElement("a",l))):s.push(K.default.createElement("a",l,r))}),!n&&this.isCrm()&&this.showCount()&&s.push(K.default.createElement("span",{style:{color:"#bfbfc0"}},"(",te(385618,"共$s人").replace(/\$s/,this.countCrm()),")")),s}var o=this.props,l=(o.isSingle,o.fieldName),c=o.hasScroll,d=o.tempTitle,u=o.placeholder,h=o.hideSelect,p=o.maxBrowerHeight,f=o.getPopupContainer,m=o.layout,g=o.valueWarp,y=o.hideOps,v=o.style,b=o.data,k=this.state,C=k.dropdownWidth,S=k.activeKey,w=k.searchList,_=k.loading,D=k.focus,I=this.hasAll(),T={type:"ghost",icon:"search",onClick:this.handleClick};I&&(T.disabled=!0,T.onClick=function(){});var P=null,A=g?"value-warp":"",R=this.getShowData(),x=b.length,M=function(e){return K.default.createElement("a",{ecId:t.props.ecId+"_a@0muixt",style:{marginRight:8},title:te(-1,"查看全部$s条数据").replace("$s",x),onClick:function(e){(0,X.stopPropagation)(e),t.setState({selectedDialogVisible:!0})}},e)};if(D){var N=[];try{N=w.filter(function(e){return e&&e.id&&!b.some(function(t){return t.id==e.id})}).map(function(e,a){var n=t.getName(e),r=e.title||n;return(0,Z.encryption)(n)&&(n=(0,Z.replaceEncryption)(n)),(0,Z.desensitization)(n)&&(n=(0,Z.replaceDesensitization)(n,!0)),(0,Z.encryption)(r)&&(r=(0,Z.replaceEncryption)(r)),(0,Z.desensitization)(r)&&(r=(0,Z.replaceDesensitization)(r,!0)),K.default.createElement(ee,{ecId:t.props.ecId+"_Option@d49y8n@"+a,value:e.id,key:(0,F.default)(1e9),tooltip:e.title||n},K.default.createElement("span",{dangerouslySetInnerHTML:{__html:n}}))}),N=N.concat(R.map(function(e,a){var n=t.getName(e),r=e.title||n;return(0,Z.encryption)(n)&&(n=(0,Z.replaceEncryption)(n)),(0,Z.desensitization)(n)&&(n=(0,Z.replaceDesensitization)(n,!0)),(0,Z.encryption)(r)&&(r=(0,Z.replaceEncryption)(r)),(0,Z.desensitization)(r)&&(r=(0,Z.replaceDesensitization)(r,!0)),K.default.createElement(ee,{ecId:t.props.ecId+"_Option@zvc8au@"+a,value:e.id,key:(0,F.default)(1e9),tooltip:r,disabled:e.disabled},"_showMore"===e.id?M(n):(0,q.default)(n)?K.default.createElement("a",{title:(0,X.filterHtmlInText)(n),onClick:function(a){return t.selectedClickHandler(a,e)},dangerouslySetInnerHTML:{__html:n}}):K.default.createElement("a",{onClick:function(a){return t.selectedClickHandler(a,e)}},n))}))}catch(e){console&&console.warn("浏览按钮脏数据: ",e),N=[]}P=K.default.createElement(L.Select,(0,E.default)({key:"associativeSelect",className:A},this.props,{ecId:this.props.ecId+"_Select@ccz38p",onBeforeFocusCheck:void 0,ref:this.selectMounted,fieldName:l,hasScroll:c,onInputBlur:function(){return t.setState({focus:!1})},title:d,hideSelected:!0,transitionName:"",animation:"",value:R.map(function(e){return e.id||""}),multiple:!0,maxHeight:p,placeholder:u,notFoundContent:"",activeKey:S,defaultActiveFirstOption:!0,showArrow:!1,filterOption:!1,onBlur:this.handleBlur,onFocus:this.handleFocus,onSelect:this.handleSelect,onDeselect:this.handleDeselect,onChange:this.handleChange,onSearch:!h&&(0,H.default)(this.handleSearch,400).bind(this),selectedClose:!0,dropdownStyle:{minWidth:C},dropdownMenuStyle:{maxHeight:160},getPopupContainer:function(){return f&&f()||m||Y.default.getTop().document.body}}),N)}else{var O=[];R.forEach(function(e,a){var n=t.getName(e);(0,Z.encryption)(n)&&(n=(0,Z.replaceEncryption)(n));var r=null;r="_showMore"===e.id?M(n):(0,q.default)(n)?(0,Z.desensitization)(n)?[K.default.createElement(Z.Encry,{value:n,valueProps:{onClick:function(a){return t.selectedClickHandler(a,e)}},ecId:t.props.ecId+"_Encry@rjoyot",className:"ant-select-selection__choice__content-encry"})]:[K.default.createElement("a",{ecId:t.props.ecId+"_a@ml5n00@"+a,title:(0,X.filterHtmlInText)(n),onClick:function(a){return t.selectedClickHandler(a,e)},dangerouslySetInnerHTML:{__html:n}})]:[K.default.createElement("a",{ecId:t.props.ecId+"_a@n8sity@"+a,onClick:function(a){return t.selectedClickHandler(a,e)}},(0,Z.desensitization)(n)?K.default.createElement(Z.Encry,{value:n,ecId:t.props.ecId+"_Encry@u4t5b9",className:"ant-select-selection__choice__content-encry"}):n)],O.push(K.default.createElement("li",{unselectable:"unselectable",className:"ant-select-selection__choice "},K.default.createElement("div",{className:"ant-select-selection__choice__content"},r,!e.disabled&&K.default.createElement("span",{ecId:t.props.ecId+"_span@mmk95u"+a,className:"ant-select-selection__choice__remove",onClick:function(){return t.handleDeselect(e.id,!0)}}))))}),P=K.default.createElement("div",{ecId:this.props.ecId+"_div@5rwd5k",className:"ant-select ant-select-enabled ant-select-open "+A,style:v,onClick:this.onSelectClick},K.default.createElement("div",{className:"ant-select-selection ant-select-selection--multiple",style:{maxHeight:p||110,overflowY:"auto"}},K.default.createElement("span",{className:"ant-select-selection__rendered",id:"",name:"",style:{display:"block"}},K.default.createElement("ul",null,O,this.getPlaceholderElement()))))}return[P,K.default.createElement(L.Icon,{ecId:this.props.ecId+"_Icon@xxqsqv",type:"loading",style:{display:_?"block":"none"}}),!y&&K.default.createElement("div",{className:"ant-input-group-wrap"},K.default.createElement(L.Button,(0,E.default)({},T,{ecId:this.props.ecId+"_Button@ztqsd2"})))].filter(Boolean)}Object.defineProperty(t,"__esModule",{value:!0});var I=a(0),E=n(I),T=a(19),P=n(T);t.handleBlur=i,t.handleFocus=s,t.handleClick=o,t.handleClickInner=l,t.onSelectClick=c,t.onChange=d,t.handleSelect=u,t.handleDeselect=h,t.handleChange=p,t.handleSearch=f,t.selectedClickHandler=m,t.getShowData=g,t.getId=y,t.getName=v,t.getPlaceholderElement=b,t.focus=k,t.selectMounted=C,t.countCrm=S,t.hasAll=w,t.showCount=_,t.getSelect=D;var A=a(1),K=n(A),R=a(37),x=a(194),M=n(x),L=a(8),N=a(18),O=n(N),B=a(96),F=n(B),W=a(66),H=n(W),z=a(42),q=n(z),V=a(25),j=n(V),U=a(64),G=n(U),$=a(10),Q=n($),J=a(28),Y=n(J),X=a(308),Z=a(50),ee=L.Select.Option,te=Q.default.getLabel,ae=Q.default.formatMultiLang},1178:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u.default.createElement(h.Popover,(0,c.default)({placement:"bottomLeft",title:"",trigger:"click",getTooltipContainer:function(){return e.searchWrapper}},t))}function i(){var e=this.props.addOnClick;(0,f.default)(e)&&e()}function s(e){var t=[];e.isAllUser?t.push({type:"all",count:e.count,ids:e.ids,lastname:w(1340,"所有人")}):t=e.datas,this.props.appendSearchValues&&this.props.appendSearchValues(t,!0)}function o(){var e=this,t=[],a=this.props,n=(a.data,a.isSingle),r=a.hasAddBtn,i=a.hasAddGroup,s=a.customIcon,o=a.customIconTip,l=a.helpfulTip,d=a.helpfulTipProps,p=a.isShowGroup,f=a.canSelectAllUser,m=void 0===f||f,g=a.viewAttr,y=this.state,b=y.hrmlist,C=y.hrmlistStyle,_=y.hrmlistVisible,D=y.hrmVisible,I=this.hasAll();if(r&&t.push(u.default.createElement("div",{className:"ant-input-group-wrap custom extbtn",onClick:this.addOnClick},u.default.createElement(h.Icon,{className:"add-icon",type:"plus"}))),s){var E=u.default.createElement("i",{className:s+" add-icon"});o&&(E=u.default.createElement(h.Tooltip,{placement:"bottom",title:o},E)),t.push(u.default.createElement("div",{className:"ant-input-group-wrap extbtn custom",onClick:this.addOnClick},E))}if(!n&&this.isCrm()&&1!=g&&i){var T={ecId:this.props.ecId+"_Popover@qj9tz6",visible:D,onVisibleChange:function(t){return e.setState({hrmVisible:t})},overlayClassName:"wea-hrm-group-popover",content:u.default.createElement(S.default,{ecId:this.props.ecId+"_OGroup@kyee4m",isshowoperategroup:D,handleVisibleChange:function(t){return e.setState({hrmVisible:t})},setOperatorIds:this.crmAddcb,canSelectAllUser:m}),children:u.default.createElement(h.Button,{ecId:this.props.ecId+"_Button@mhyysh",type:"primary",title:w(84511,"快捷选择人员"),size:"small",onClick:I?void 0:function(){return e.setState({hrmVisible:!0})},disabled:I},u.default.createElement("i",{className:"icon-coms-HumanResources"}))};t.push(u.default.createElement("div",{className:"ant-input-group-wrap extbtn hasAddGroup"},this.getHrmPopover(T)))}if(l&&t.push(u.default.createElement(v.default,(0,c.default)({ecId:this.props.ecId+"_WeaHelpfulTip@0iwhes",style:{position:"absolute",right:-31,top:4},title:l},d))),p&&!n){var P={ecId:this.props.ecId+"_Popover@7tfqrh",visible:_,onVisibleChange:function(t){return e.setState({hrmlistVisible:t})},overlayClassName:"hrmlist-wrapper",content:u.default.createElement(k.default,{ecId:this.props.ecId+"_WeaHrmlist@hw50cq",list:b,onVisibleChange:function(t){return e.setState({hrmlistVisible:t})},style:C,visible:_}),children:u.default.createElement("div",{className:"hrmlistDom"}," ")};t.push(this.getHrmPopover(P))}return t}Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),c=n(l);t.getHrmPopover=r,t.addOnClick=i,t.crmAddcb=s,t.getButtons=o;var d=a(1),u=n(d),h=a(8),p=a(25),f=n(p),m=a(10),g=n(m),y=a(51),v=n(y),b=a(203),k=n(b),C=a(1047),S=n(C),w=g.default.getLabel},1183:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=this.getTabsProps(),a=t.dataURL,n=this.state,r=n.current,i=n.pageSize,s=e.current||r,o=a;e.customUrl&&(o=e.customUrl,delete e.customUrl);var l=(0,b.default)({pageSize:i,current:s,min:(s-1)*i+1,max:s*i},e);return(0,I.callApi)(o,(0,E.getMethod)(o,l),l)}function i(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this.setState({loading:!0});var n=this.getTabsProps(),r=n.onError,i=n.isSingle,s=n.dropMenuKey,o=n.displayType,l=n.isGroupTree,c=this.state,d=c.current,u=c.pageSize,h=c.activeKey,p=e.current||d,f=e.pageSize||u,m={};s&&(m.companyId=e[s]),this.callGetData(e).then(function(e){if(t.state.activeKey==h){var n=e.datas,r=e.columns,s=e.companys,c=e.selectDatas,d=e.type;if(!d&&o&&("tree"==o?(d=6,l&&(d=7)):d=8),"number"===typeof d){if(m=(0,b.default)({},m,{contentType:d}),"checkStrictly"in e&&(m.checkStrictly=e.checkStrictly),1===d?n&&(m.dataKey=n,i||t.getDataOfListWithkey({dataKey:n,current:p,pageSize:f})):(0,w.default)(r)||(m=(0,b.default)({},m,t.getRowNameKeyFromColumns(r))),2===d&&(m=(0,b.default)({},m,{dataOfListWithoutKeyAndPg:{datas:n,columns:r},listDatas:n,columns:r})),3===d)if(m=(0,b.default)({},m,{treeDatas:n,loadAllTreeData:e.isLoadAll}),(0,w.default)(s))if(c){var u=c.options,g=c.selected,y=u.map(function(e){return(0,b.default)({},e,{id:e.key,name:e.showname})});m=(0,b.default)({},m,{companyList:y,companyId:g})}else"undefined"===typeof s&&"undefined"===typeof c&&(m.companyList=void 0);else{var v=s.map(function(e){return(0,b.default)({},e,{id:e.companyid})});m=(0,b.default)({},m,{companyList:v,companyId:v[0].id})}4===d&&(m=(0,b.default)({},m,{columns:r,dataOfListWithoutKeyButPg:{datas:n,columns:r,count:e.total},listDatas:n,count:e.total,current:p})),5==d&&(m=(0,b.default)({},m,{urlOfIframeInDialog:n.pcurl})),6===d&&(n&&"_self"==n.target&&(n.isParent="true",n.open="true",n.canClick="false"),m=(0,b.default)({},m,{treeDatas:n})),7===d&&(t.getGroupTreeDatas(n),n&&n.isParent&&(n.isParent="true",n.open="true",n.canClick="false"),m=(0,b.default)({},m,{groupTreeDatas:n,hasRight:e.hasRight||0})),8===d&&(n.forEach(function(e){e.icon=e.messagerurl,e.nodeid="resource_"+e.id+"x",e.type="resource"}),m=(0,b.default)({},m,t.getRowNameKeyFromColumns(r),{columns:r,current:p,dataOfListWithoutKeyButPg:{datas:n},count:e.count}))}t.setState(m,function(){return 1!=d&&t.setState({loading:!1})}),a()}}).catch(function(e){return(0,C.default)(r)&&r(e)})}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getTabsProps(),a=t.tableApiPrefix,n=this.state,r=n.current,i=n.pageSize,s=e.current||r;return(0,I.callApi)((a||"")+"/api/ec/dev/table/datas","POST",(0,b.default)({pageSize:i,current:s,min:(s-1)*i+1,max:s*i},e))}function o(e){var t=this,a=this.getTabsProps(),n=this.state,r=n.current,i=n.dataKey,s=a.tableApiPrefix,o=a.onError,l=e.current||r,c=e.dataKey||i;this.callDataOfListWithKey((0,b.default)({},e,{dataKey:c})).then(function(e){var a={loading:!1,current:l,dataKey:c};if(e&&e.datas){var n=e.datas,r=e.columns;a=(0,b.default)({},a,{columns:r,dataOfListWithkey:n},t.getRowNameKeyFromColumns(r))}t.setState(a)}).catch(function(e){return(0,C.default)(o)&&o(e)}),(0,I.callApi)((s||"")+"/api/ec/dev/table/counts","POST",{dataKey:c}).then(function(e){return t.setState({count:e.count})}).catch(function(e){return(0,C.default)(o)&&o(e)})}function l(e){(0,w.default)(e)||this.setState((0,b.default)({},this.getRowNameKeyFromColumns(e)))}function c(e){var t=this.state,a=t.inputId,n=t.inputName,r=[],i=[];return Array.isArray(e)&&e.forEach(function(e){"true"===e.isPrimarykey&&(a=e.dbField||e.dataIndex),"true"===e.isInputCol&&(n=e.dbField||e.dataIndex),"false"===e.hide&&("1"===e.showType&&r.push(e.dbField||e.dataIndex),"0"===e.showType&&i.push(e.dbField||e.dataIndex))}),{inputId:a,inputName:n,inputTop:r,inputBottom:i}}function d(e,t){var a=this.getTabsProps(),n=a.type,r=a.destUrl,i=a.destDataParams,s=void 0===i?{}:i,o=a.dataURL,l=a.isMultCheckbox,c=this.state.contentType,d=""+r+n,u=(0,b.default)({},s,this.getExtraParams(t),e);if(l&&1!=c){d=(this.getSearchParams()||{}).customUrl||o}return(0,I.callApi)(d,(0,E.getMethod)(d,u),u)}function u(e){var t=this,a=this.getTabsProps(),n=a.needCallDest,r=a.isMultCheckbox,i=this.state.inputId,s=e||this.getDataOfProps()||[],o={},l=(0,D.default)(s);o.selectids=s.map(function(e){return e[i]||e.id||""}),(0,w.default)(s)||!n&&!r?this.setState({selectedData:l}):this.callSelectedReq(o,s).then(function(e){var a={};if(!(0,w.default)(e)&&3!=e.type){var n=e.datas,r=e.columns;t.isCrm()&&(n=t.formatData(n)),(0,w.default)(r)||(a=(0,b.default)({},a,t.getRowNameKeyFromColumns(r))),i=a.inputId||i,l=(n||[]).filter(function(e){return e[i]||e.id})}a.selectedData=l,t.setState(a)})}function h(){var e=this,t=this.getTabsProps(),a=t.virtualUrl,n=t.virtualParams,r=void 0===n?{}:n;(0,I.callApi)(a,"GET",r).then(function(t){var a=0,n=t.datas.map(function(e){return 0==e.id&&(a=e.virtualtype),(0,b.default)({},e,{companyid:e.id,name:e.virtualtype})});e.setState({companyId:a,companyList:n})})}function p(e,t,a){var n=this,r=this.getTabsProps(),i=r.leftTreeUrl,s=r.leftTreeParams,o=r.type,l=r.conditionDataParams;(0,I.callApi)(""+i+o,"GET",(0,b.default)({},l,s,e)).then(function(e){var r=e.datas||[];if(t){var i=n.state.leftTreeDatas;r=n.refreshTreeDatas(i,t.key,r)}n.setState({leftTreeDatas:r}),a&&a()})}function f(e){var t=this,a=this.props,n=a.tabsUrl,r=a.tabsParams,i=a.type,s=a.onError,o=a.extendTabs,l=void 0===o?[]:o,c=this.getTabs();n&&(0,w.default)(c)&&(0,w.default)(this.state.tabsFromApi)?(0,I.callApi)(""+n+i,"GET",r).then(function(a){var n=a.datas;n=n?[].concat((0,y.default)(n),(0,y.default)(l)):[],t.setState({tabsFromApi:n},e)}).catch(function(e){return(0,C.default)(s)&&s(e)}):e&&e()}function m(e,t){e=e||this.getTabsProps();var a=e,n=a.isSingle,r=a.value,i=a.valueSpan,s=a.replaceDatas,o=a.appendDatas,l=a.replaceNotCtrl,c=a.valueObj,d=void 0;if("value"in e)if(n)if(r){var u="";!(0,w.default)(s)&&s[0]&&(u=s[0].orgWholePathspan||s[0].name||s[0].lastname),d=[{id:r,name:i||u}]}else d=[];else(0,w.default)(r)?d=[]:(c||s)&&(d=this.replaceSearchValues(c||s));if("appendDatas"in e&&this.appendSearchValues(o,!0),n||(0,w.default)(c)||!t||(d=this.replaceSearchValues(c)),"replaceDatas"in e&&(!l||t))if(n)if(!(0,w.default)(s)&&s[0]){var h=s[0],p=h.orgWholePathspan||h.name||h.lastname,f=""+h.id;f&&(d=[{id:f,name:p}])}else d=[];else d=this.replaceSearchValues(s||[]);if(d)try{d=d.filter(function(e){return e&&e.id})}catch(e){console&&console.warn("浏览按钮脏数据: ",e),d=[]}return d}Object.defineProperty(t,"__esModule",{value:!0});var g=a(19),y=n(g),v=a(0),b=n(v);t.callGetData=r,t.getData=i,t.callDataOfListWithKey=s,t.getDataOfListWithkey=o,t.formatInput=l,t.getRowNameKeyFromColumns=c,t.callSelectedReq=d,t.getSelectedData=u,t.getVirtual=h,t.getLeftTreeDatas=p,t.getTabsFromUrl=f,t.getDataOfProps=m;var k=a(25),C=n(k),S=a(18),w=n(S),_=a(41),D=n(_),I=a(17),E=a(308)},1184:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=this.getTabsProps(),a=t.isSingle,n=this.state.inputName;if(a){var r="",i="",s=[];if(!(0,w.default)(e)){i=e[0].name,r=e[0].id;var o=(0,g.default)({},e[0],{id:r,name:i});this.isCrm()&&(o.type="resource"),s.push(o)}this.setState({idCache:r,nameCache:i,data:s,selectedData:s})}else{var l=[];this.isCrm()?l=this.replaceSearchValues(e):e.forEach(function(e){e&&(e.name=e.orgWholePathspan||e[n+"span"]||e[n]||e.name||"",l.push(e))}),this.setState({selectedData:l,data:l})}}function i(){var e=this.getTabsProps(),t=e.isSingle,a=this.state,n=a.idCache,r=a.nameCache;if(t)return{id:n,name:r};var i=this.state,s=i.selectedData,o=i.inputId,l=[];return!(0,w.default)(s)&&s.forEach(function(e){l.push(e[o]||e.id)}),{id:l,ids:l,datas:s}}function s(){this.setState({visible:!1})}function o(){this.onCustomClick()}function l(){this.onBrowerClick()}function c(e,t,a){var n=this.getTabsProps(),r=n.leftToSearchKey,i=n.form.setFieldsValue;if(r){var s=(0,f.default)({},r,e);this.onSearch(s);var o=a.node.props.data.name;i(s,o,[{id:e,name:o}]),this.setState({leftSelectKeys:[e],showSearchAd:!1})}}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getTabsProps(),a=t.icon,n=t.iconBgcolor,r=t.iconFontColor,i=t.title,s=void 0===i?x(24986,"标题"):i,o=this.state,l=o.dataIcon,c=o.dataIconBgColor,d=o.dataIconFontColor,u=v.default.createElement("span",{style:{verticalAlign:"middle",marginRight:10}},v.default.createElement("i",{className:a}));(c||n)&&(u=v.default.createElement("div",{className:"wea-browser-single-icon-circle",style:{background:c||n,color:d||r}},v.default.createElement("i",{className:l||a}))),u=(0,R.getModuleRender)(e,"module_1_1_1",u,this);var h=v.default.createElement("span",{style:{verticalAlign:"middle"}},s);h=(0,R.getModuleRender)(e,"module_1_1_2",h,this);var p=v.default.createElement(b.Row,{ecId:t.ecId+"_Row@ui3pn5"},v.default.createElement(b.Col,{ecId:t.ecId+"_Col@m5sru9",span:"22",style:{paddingLeft:20,lineHeight:"48px"}},v.default.createElement("div",{className:"wea-browser-single-title"},u,h)));return p=(0,R.getModuleRender)(e,"module_1_1",p,this),{module_1_1:p,module_1_1_1:u,module_1_1_2:h}}function u(e){var t=this,a=this.getTabsProps(),n=a.hasLeftTree,r=a.urlOfIframeInDialogKey,i=a.contentHeight,s=a.urlOfIframeInDialogAutoHeight,o=void 0===s||s,l=this.state,c=l.loading,d=l.fetchDataLoading,u=l.leftTreeDatas,h=l.leftExpandKeys,p=l.leftSelectKeys,f=l.urlOfIframeInDialog,m=l.urlOfIframeInDialogParrentHeight,y=void 0,k={},C={},S=void 0;return f?y=v.default.createElement("iframe",{title:"urlOfIframeInBrowser",key:"iframe",style:{border:0,width:"100%",height:o?m:i,minHeight:400},ref:function(e){if(e&&"100%"===m){var a=$(e).closest(".ant-modal-body");if(a.length>0&&a.height()>0){var n=a.height();n>0&&t.setState({urlOfIframeInDialogParrentHeight:n})}}},src:f+(/\?/.test(f)?"&":"?")+"urlOfIframeInDialogKey="+r}):(k=this.getActionBar(e),C=this.getModalMainContent(e),y=[k.module_2_1,k.module_2_3,v.default.createElement(b.Spin,{ecId:a.ecId+"_Spin@7fk6xu",spinning:c||d},C.module_2_2)],n&&(S=v.default.createElement(P.default,{ecId:a.ecId+"_WeaLeftTree@0dr7cn",datas:u,selectedKeys:p,expandedKeys:h,itemMainKey:"key",onExpand:function(e,a){a.node.childs?t.setState({leftExpandKeys:e}):t.getLeftTreeDatas({id:a.node.key},a.node,function(){t.setState({leftExpandKeys:e})})},onSelect:this.onLeftTreeSelect}),S=(0,R.getModuleRender)(e,"module_2_3",S,this),y=[v.default.createElement(E.default,{ecId:a.ecId+"_WeaLeftRightLayout@197yu8",leftCom:S},k.module_2_1,k.module_2_3,v.default.createElement(b.Spin,{ecId:a.ecId+"_Spin@kgpgd2",spinning:c||d},C.module_2_2))]),y=v.default.createElement("div",{style:window.setDialogFullWindow?{}:{height:this.getContentHeight({isWrap:!0})}},y)),y=(0,R.getModuleRender)(e,"module_2",y,this),(0,g.default)({module_2:y},k,C,{module_2_3:S})}function h(){var e=this,t=this.getTabsProps(),a=this.state,n=a.visible,r=a.modalloaded,i={visible:n};if(r||!r&&n){var s=t.zIndex,o=t.showTop,l=t.hasLeftTree,c=t.modalStyle,d=t.enableScale,u=t.scaledPageSize,h=t.onModalScale,p=t.browserModalProps,f=t.isMultCheckbox,m=t.getRenderModule,y=this.state.urlOfIframeInDialog,k=t.isSingle||f,S=(0,C.default)("wea-browser-modal","wea-browser-"+(k?"single":"muli"),"wea-browser-test-"+(k?"single":"muli"),{"wea-browser-table-cursor":k,"wea-hr-muti-input":!k,"no-top":k&&!o,"wea-browser-mult-checkbox":f,"wea-browser-iframe-in-dialog":y});if(this.updateModules((0,g.default)({},this.getModalTitle(),this.getModalChild(),this.getModalFooter())),"function"===typeof m){var w=m(this,this.modules)||{};this.renderModules=w,this.updateModules((0,g.default)({},w,this.getModalTitle(w),this.getModalChild(w),this.getModalFooter(w)))}var _=c.width;if(_){var D=(K.default.getTop()||window).document,I=D.documentElement.clientWidth||0;_=I&&I<_?I:_}i=(0,g.default)({},i,{zIndex:s,width:_,scalable:d,onScale:function(a,n,r){var i=t.pageSize;n&&u>0&&(i=u),e.setState({scaleHeight:n?r:0,pageSize:i},function(){u>0&&e.onSearch({current:1},e.state.activeKey)}),"function"===typeof h&&h(a,n,r)},wrapClassName:l?(S||"")+" wea-browser-withLeftTreeModal":S,title:this.modules.module_1_1,maskClosable:!1,onCancel:this.handleCancel,footer:this.modules.module_3,ecId:t.ecId+"_Modal@4txh8j",getRenderModule:"function"===typeof t.getRenderModule&&function(t,a){return e.updateModules(a),e.renderModules}},p,{children:this.modules.module_2})}return v.default.createElement(b.Modal,(0,g.default)({ref:function(t){!t&&e.state.modalloaded&&e.setState({modalloaded:!1}),t&&!e.modal&&(e.modal=t,e.setState({modalloaded:!0}))}},i))}Object.defineProperty(t,"__esModule",{value:!0});var p=a(15),f=n(p),m=a(0),g=n(m);t.set=r,t.get=i,t.closeModal=s,t.openModal=o,t.reload=l,t.onLeftTreeSelect=c,t.getModalTitle=d,t.getModalChild=u,t.getModal=h;var y=a(1),v=n(y),b=a(8),k=a(14),C=n(k),S=a(18),w=n(S),_=a(10),D=n(_),I=a(352),E=n(I),T=a(353),P=n(T),A=a(28),K=n(A),R=a(309),x=D.default.getLabel},1185:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){var e=this,t=this.getTabsProps(),a=t.isSingle,n=t.icon,r=t.iconBgcolor,i=t.topPrefix,s=t.dataParams,o=t.is_012app,l=t.recentUrl,c=t.checkGroup,d=t.browserTreeCustomProps,u=void 0===d?{}:d,p=t.defaultCurrentUser,m=t.clickNameExpandFirst,g=t.showAccount,y=t.showAllbranch,v=t.showCheckStrictly,b=t.hideVirtualOrg,C=t.displayType,S=t.isGroupTree,w=this.state,_=w.activeKey,I=w.inputId,E=w.inputTop,T=w.inputBottom,P=w.dataOfListWithoutKeyButPg,A=w.idCache,R=w.nameCache,x=w.treeDatas,M=w.groupTreeDatas,L=w.defaultExpandedKeys,N=w.selectedData,B=w.leftCheckedData,F=w.leftTreeCheckedKeys,W=w.leftGroupCheckedKeys,H=w.isAccount,z=w.showDls,q=w.hasRight,V=w.checkStrictly,j=w.companyList,U=w.contentType,G=P&&P.datas||[],$=void 0;if("tree"==C){var Q=x;if(S&&(Q=M),(0,k.default)(Q))$=this.renderEmpty();else{var J=t.defaultExpandedLevel;"undefined"===typeof J&&Q&&Q.id&&(J=1);var Y=(0,h.default)({icon:n,iconBgcolor:r,dataParams:s,recentUrl:l,isAccount:H,showDls:z,topPrefix:i,checkable:!1,isMult:!a,ztreeMode:!1,isHrmTree:!0,inputTop:E,inputBottom:T,treeData:Q,defaultCurrentUser:p,defaultExpandedKeys:L,defaultExpandedLevel:J,clickNameExpandFirst:m,ecId:t.ecId+"_WeaBrowserTree@47q092"},this.getAsyncParams());Y=a?(0,h.default)({},Y,{dataParams:s,checkable:!1,hasRadio:!0,radioCheckedData:{id:A,name:R},setRadioData:function(t,a,n){return e.onHrmTableChange([t],[n])},setData:this.onHrmTableChange}):(0,h.default)({},Y,{checkStrictly:V,className:"rsc-wrapper",checkGroup:c,onDoubleClick:this.onleftTreeDoubleClick,filterData:this.getFilterData(N)}),6==U?a||(Y=(0,h.default)({},Y,{checkedCb:this.onLeftTreeCheck,checkedKeys:F})):7==U&&(Y=(0,h.default)({},Y,{hasRight:q,getGrouptree:function(){return e.onSearch({},_)}}),a||(Y=(0,h.default)({},Y,{checkedCb:this.onLeftGroupCheck,checkedKeys:W}))),$=f.default.createElement("div",{className:"wea-tree-hr"},f.default.createElement(O.default,(0,h.default)({},Y,u)))}}else{var X={is_012app:o,isSingle:a,inputTop:E,inputBottom:T,ecId:t.ecId+"_HrmList@q5ihjz",datas:G};if(a)X=(0,h.default)({},X,{onClick:this.onHrmTableChange});else{var Z=B.map(function(e){return e[I]});X=(0,h.default)({},X,{onDoubleClick:this.onleftDoubleClick,onClick:this.onleftClick,selectedKeys:Z,filterData:N})}$=f.default.createElement(K.default,X)}var ee="list"==C,te={showDls:t.showDls,showAccount:g,showAllbranch:y,showCheckStrictly:!a&&"list"!=C&&v},ae=!b&&!(0,k.default)(j),ne=!a&&this.hasAdvanceSearch(),re=this.getContentHeight({showDropMenu:ae,showAdvanceSearch:ne,showPagination:ee}),ie=15;return ae&&(ie+=37),a||(ie+=35),[ne&&this.getActionBarInTrans(),ae&&this.getDropMenuInTrans(),f.default.createElement(D.default,{ecId:t.ecId+"_WeaNewScroll@puqck9",height:re,ref:function(t){return e.weaSrcoll=t}},$),this.getTreeButtonInTrans(te,{top:ie}),ee&&this.getPaginationInTrans()]}function i(e){var t=this,a=this.getTabsProps(),n=a.selectedAllMaxLength,r=this.state,i=r.count,s=r.current,o=r.inputId,l=r.pageSize,c=r.activeKey,u=r.selectedData,p=r.leftCheckedData,f=r.rightCheckedData,m=r.dataOfListWithkey,g=r.selectedAllCurrent,y=r.leftTreeCheckedData,v=r.leftGroupCheckedData,b=r.dataOfListWithoutKeyAndPg,C=r.dataOfListWithoutKeyButPg,S={};if("allToRight"===e){this.setState({fetchDataLoading:!0});var w=Math.ceil(i/l),_=Math.ceil(((g+1)*n+1)/l);w<_&&(_=w),_!=s&&this.onPageChange(_);var D=(0,h.default)({},this.getSearchParams(),{min:g*n+1,max:(g+1)*n,current:g+1,pageSize:n});this.callGetData(D).then(function(e){var a=function(e,a){if(t.state.activeKey==c){if(Array.isArray(e)&&!(0,k.default)(e)){t.isCrm()&&e.forEach(function(e){e.icon=e.messagerurl,e.nodeid="resource_"+e.id+"x",e.type="resource"});var n=t.filterDuplData(u,e,o||"id");t.onCountChange(n),a.selectedData=n}t.setState(a)}},n={fetchDataLoading:!1,selectedAllCurrent:g+1};1==e.type?t.callDataOfListWithKey((0,h.default)({},D,{dataKey:e.datas})).then(function(e){return a(e.datas,n)}):a(e.datas,n)})}else if(/right$/i.test(e)){if(y.length>0||v.length>0)this.setState({loading:!0}),this.callSelectedReq(this.getExtraParams()).then(function(e){var a={};(0,k.default)(e.columns)||(a=(0,h.default)({},a,t.getRowNameKeyFromColumns(e.columns)));var n=p.concat(t.isCrm()?t.formatData(e.datas||[]):e.datas),r=t.isCrm()?"nodeid":a.inputId||o||"id",i=t.filterDuplData(u,n,r);t.onCountChange(i),a=(0,h.default)({},a,{loading:!1,selectedData:i,leftTreeCheckedData:[],leftTreeCheckedKeys:[],leftGroupCheckedData:[],leftGroupCheckedKeys:[]}),t.setState(a)});else{var I="right"===e?p:[].concat((0,d.default)(m),(0,d.default)(b&&b.datas||[]),(0,d.default)(C&&C.datas||[]));S.leftCheckedData=[],S.selectedData=this.filterDuplData(u,I,o||"id")}if("pageToRight"==e){var E=this.state,T=E.current,P=E.pageSize,A=E.count;T*P<A&&this.onPageChange(T+1)}}else/left$/i.test(e)&&(S.rightCheckedData=[],S.selectedData="left"===e?u.filter(function(e){return!f.some(function(t){return t&&t[o]===e[o]})}):[],"allToLeft"===e&&(S.selectedAllCurrent=0));"selectedData"in S&&this.onCountChange(S.selectedData),this.setState(S)}function s(){var e={icon:f.default.createElement(g.Icon,{ecId:this.props.ecId+"_Icon@e15qbi",type:"frown"}),iconSize:12,minHeight:413};return f.default.createElement(E.default,(0,h.default)({ecId:this.props.ecId+"_WeaAlertPage@jgtxw8"},e),f.default.createElement("span",{style:{paddingLeft:15,color:"#999"}},(0,F.getLabel)("83553","暂无数据")))}function o(){var e=this.getTabsProps(),t=e.dataURL,a=e.isSingle,n=e.dataParams,r=e.isMultCheckbox,i=this.state,s=i.dataKey,o=i.listDatas,l=i.contentType,c=i.dataOfListWithkey,d=i.dataOfListWithoutKeyAndPg,u=i.dataOfListWithoutKeyButPg,h={};if(a||r){var p=t;1==l&&(h={dataKey:s,hasPagination:!0,url:p}),2==l&&(h={noPgTableData:d,hasPagination:!1,url:p}),4==l&&(h={hasPgTableData:u,hasPagination:!0,url:p+"?"+(0,w.getFd)(n)})}else h={datas:[]},1==l&&(h={datas:c}),2==l&&(h={datas:o}),4==l&&(h={datas:(0,k.default)(o)?[]:o});return h}function l(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this.getTabsProps(),n=a.isSingle,r=a.hasRadio,i=a.type,s=a.hideVirtualOrg,o=a.icon,l=a.isLoadUser,c=a.isImgIcon,u=a.topPrefix,p=a.checkStrictly,m=a.asynLoadAll,g=a.draggable,y=a.draggableType,b=a.showCheck,C=void 0===b||b,w=(a.showCheckBtn,a.displaySearchAd),_=a.isMultCheckbox,I=a.selectedAllMaxLength,E=a.browserTreeCustomProps,T=void 0===E?{}:E,A=a.clickNameExpandFirst,K=a.showCheckStrictly,R=this.state,M=R.contentType,N=R.inputId,H=R.inputName,z=R.inputTop,q=R.inputBottom,V=R.companyList,j=R.selectedAllCurrent,U=R.count,G=R.selectedDialogVisible,$=R.dataOfListWithoutKeyAndPg,Q=R.dataOfListWithoutKeyButPg,J=R.pageSize,Y=R.idCache,X=R.nameCache,Z=R.treeDatas,ee=R.selectedData,te=R.showCheckedDatas,ae=R.defaultExpandedKeys,ne=R.loadAllTreeData,re=R.leftTreeCheckedData,ie=3==M||6==M||7==M,se=void 0,oe=void 0,le=void 0,ce=void 0;if(n||_)if(6==M||7==M||8==M)se=this.getHrmMainContent();else{var de=void 0,ue={showCheckStrictly:!n&&ie&&K},he=ie&&!s&&!(0,k.default)(V),pe=this.getContentHeight({showDropMenu:he});if(3==M)if((0,k.default)(Z))de=this.renderEmpty();else{var fe=a.defaultExpandedLevel;"undefined"===typeof fe&&Z&&Z.id&&(fe=1);var me=(0,h.default)({ztreeMode:!1,type:i,checkable:!0,topPrefix:u},this.getAsyncParams(),{icon:o,treeData:Z,defaultExpandedKeys:(0,S.default)(ae),clickNameExpandFirst:A,isLoadUser:l,isLoadAll:ne,asynLoadAll:m,ecId:a.ecId+"_WeaBrowserTree@di9dct",defaultExpandedLevel:fe});me=_?(0,h.default)({},me,{isMult:!0,browserTree:!1,checkedDatas:ee,contentType:M,checkStrictly:this.state.checkStrictly,clickNodeExpandChildren:!0,checkedCb:this.onTreeMultCheck.bind(this)}):(0,h.default)({},me,{hasRadio:!0,isImgIcon:c,inputId:N,inputName:H,inputTop:z,inputBottom:q,checkStrictly:p,setRadioData:this.onTreeClick,radioCheckedData:{id:Y,name:X}}),de=f.default.createElement(O.default,(0,h.default)({},me,T))}else{var ge=(0,h.default)({},this.getTableKeyProps(),{hasRadio:r,contentType:B.contentTypeMap[M],setLoading:function(t){return e.setState({loading:t})},getTableParams:this.getSearchParams,formatInput:this.formatInput,scrollHeight:this.getContentHeight({},42)},a,{ecId:a.ecId+"_TableSingle@dss98k",pageSize:J});ge=_?(0,h.default)({},ge,{checkedDatas:ee,onDrop:this.onSelectedListChange,draggable:g,draggableType:y,keepSelectedRowKeys:!0,getSelection:this.onMultTableCheck,setData:this.onMultTableChange,showCheck:C,showCheckedDatas:te}):(0,h.default)({},ge,{getSelection:this.onTableCheck,setData:this.onTableChange}),de=f.default.createElement(x.default,ge)}de=ie?f.default.createElement(D.default,{ecId:a.ecId+"_WeaNewScroll@6akvfj",height:pe,ref:function(t){return e.weaSrcoll=t}},de):f.default.createElement("div",{style:{height:pe}},de),se=[he&&this.getDropMenuInTrans(),this.getTreeButtonInTrans(ue),de]}else{var ye=this.state,ve=ye.leftCheckedData,be=ye.leftGroupCheckedData,ke=ye.rightCheckedData,Ce=ye.dataOfListWithkey,Se=(0,v.default)("wea-hr-muti-input-left",{noTop:!(w&&this.hasAdvanceSearch())}),we=[].concat((0,d.default)(Ce),(0,d.default)($&&$.datas||[]),(0,d.default)(Q&&Q.datas||[])),_e={rightActiveTitle:(0,F.getLabel)(384113,"添加"),rightActive:ve.length>0||re.length>0||be.length>0,moveToRight:function(){return e.moveTo("right")},leftActiveTitle:(0,F.getLabel)(91,"删除"),leftActive:ke.length>0,moveToLeft:function(){return e.moveTo("left")},rightPageActiveTitle:(0,F.getLabel)(515643,"将当页数据全部添加到右侧已选列表"),rightPageActive:!ie&&we.length>0&&we.filter(function(e){return!ee.some(function(t){return t[N]===e[N]})}).length>0,movePageToRight:function(){return e.moveTo("pageToRight")},canMoveAllToRight:I>0,rightAllActiveTitle:(0,F.getLabel)(520388,"全部添加（一次最多添加$s条）").replace(/\$s/,I),rightAllActive:!ie&&I*j<U,moveAllToRight:function(){return e.moveTo("allToRight")},leftAllActiveTitle:(0,F.getLabel)(16335,"全部删除"),leftAllActive:ee.length>0,moveAllToLeft:function(){return e.moveTo("allToLeft")}},De=ke.filter(function(e){return!!e}).map(function(t){return t[e.isCrm()?"nodeid":N]});oe=this.getModalMainContentLeft(),oe=(0,W.getModuleRender)(t,"module_2_2_1",oe,this),le=f.default.createElement(P.default,(0,h.default)({},_e,{ecId:a.ecId+"_Operation@o7w69g"})),le=(0,W.getModuleRender)(t,"module_2_2_2",le,this),ce=f.default.createElement(L.default,(0,h.default)({},a,{ecId:a.ecId+"_SelectedList@w6drvr",data:ee,inputId:N,inputName:H,inputTop:z,inputBottom:q,contentType:M,checkedKeys:De,visible:G,checkedCb:this.onSelectedListCheck,onVisibleChange:function(t){return e.setState({selectedDialogVisible:t})},onDoubleClick:this.onSelectedListDoubleClick,onSelectedGroupExpand:this.onSelectedGroupExpand,height:this.getContentHeight({showAdvanceSearch:!0}),onDrag:this.onSelectedListChange})),ce=(0,W.getModuleRender)(t,"module_2_2_3",ce,this),se=f.default.createElement("div",{style:{padding:10},ref:"weaModalContent"},f.default.createElement("div",{className:Se},oe),f.default.createElement("div",{className:"wea-transfer-opration"},le),f.default.createElement("div",{className:"wea-hr-muti-input-right"},ce))}return se=(0,W.getModuleRender)(t,"module_2_2",se,this),{module_2_2:se,module_2_2_1:oe,module_2_2_2:le,module_2_2_3:ce}}Object.defineProperty(t,"__esModule",{value:!0});var c=a(19),d=n(c),u=a(0),h=n(u);t.getHrmMainContent=r,t.moveTo=i,t.renderEmpty=s,t.getTableKeyProps=o,t.getModalMainContent=l;var p=a(1),f=n(p),m=a(194),g=(n(m),a(8)),y=a(14),v=n(y),b=a(18),k=n(b),C=a(1186),S=n(C),w=a(17),_=a(26),D=n(_),I=a(199),E=n(I),T=a(1187),P=n(T),A=a(1049),K=n(A),R=a(1050),x=n(R),M=a(1027),L=n(M),N=a(1029),O=n(N),B=a(1018),F=a(133),W=a(309)},1186:function(e,t,a){function n(e){return r(e,i)}var r=a(347),i=4;e.exports=n},1187:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(6),i=n(r),s=a(2),o=n(s),l=a(3),c=n(l),d=a(4),u=n(d),h=a(5),p=n(h),f=a(8),m=a(1),g=n(m),y=function(e){function t(){var e,a,n,r;(0,o.default)(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return a=n=(0,u.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(l))),n.getButtons=function(e){return e.filter(function(e){return e.show}).map(function(e,t){return g.default.createElement(f.Button,{ecId:n.props.ecId+"_Button@0uo974@"+t,key:e.icon,type:"primary",size:"small",disabled:!e.active,onClick:e.handler},g.default.createElement("span",{title:e.title},g.default.createElement("i",{className:e.icon})))})},r=a,(0,u.default)(n,r)}return(0,p.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.moveToRight,n=e.rightActive,r=e.rightActiveTitle,i=e.moveToLeft,s=e.leftActive,o=e.leftActiveTitle,l=e.rightPageActive,c=e.movePageToRight,d=e.rightPageActiveTitle,u=e.rightAllActive,h=e.moveAllToRight,p=e.rightAllActiveTitle,f=e.canMoveAllToRight,m=e.leftAllActive,y=e.moveAllToLeft,v=e.leftAllActiveTitle,b=[{icon:"icon-coms-Browse-box-Add-to",title:r,active:n,handler:a,show:!0},{icon:"icon-coms-Browse-box-delete",title:o,active:s,handler:i,show:!0},{icon:"icon-coms-right",title:d,active:l,handler:c,show:!0},{icon:"icon-coms-Browse-box-add-all",title:p,active:u,handler:h,show:f},{icon:"icon-coms-Browse-box-Delete-all",title:v,active:m,handler:y,show:!0}];return g.default.createElement("div",{className:t},this.getButtons(b))}}]),t}(g.default.Component);t.default=y},1188:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){var e=this.getTabsProps(),t=this.state,a=t.selectedData,n=t.inputId,r=t.inputName,i=e.maxLength,s=e.onBeforeBrowserOK,o=[];if(!(0,f.default)(a)){if(i&&i<this.count(a,!0))return void window.alert("所选的数量不能超过"+i+"!");a.forEach(function(e){e.id=e[n]||e.id,e.name=e.orgWholePathspan||e[r+"span"]||e[r]||e.name||"",o.push(e.id)})}if(o=(0,v.default)(o),"function"===typeof s){var l=this.handleOkInner.bind(this);s(o,a,l)}else this.handleOkInner(o,a)}function i(e,t){var a=this.getTabsProps(),n=a.onClose,r=a.onOkClick;this.onChange(t),"function"===typeof n&&n(),"function"===typeof r&&r(e,t)}function s(){this.props.onBeforeBrowserClear?this.props.onBeforeBrowserClear(this.handleClearInner):this.handleClearInner()}function o(){this.setState({idCache:"",nameCache:"",selectedData:[]}),this.associative&&this.associative.clear&&this.associative.clear(),this.onChange([])}function l(){var e=this.getTabsProps(),t=e.onClose,a=e.onCancel;this.closeModal(),this.setState(C.initialState),"function"===typeof a&&a(),"function"===typeof t&&t()}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getTabsProps(),a=t.isSingle,n=t.buttons,r=t.bottomLeft,i=t.browserModalProps,s=this.state,o=s.contentType,l=s.selectedData,c=0===l.length,d=void 0,p=void 0,f=void 0;if(p=n||[(a&&3==o||!a)&&u.default.createElement(h.Button,{ecId:t.ecId+"_Button@juiace",key:"submit",type:"primary",disabled:c,onClick:this.handleOk},[w(385565,"确 定"),a||c?"":this.count(l)]),(a||!a&&(!i||!i.hideClear))&&u.default.createElement(h.Button,{ecId:t.ecId+"_Button@7fvodm",key:"clear",type:"ghost",onClick:this.handleClear},w(385566,"清 除")),u.default.createElement(h.Button,{ecId:t.ecId+"_Button@8vyew5",key:"back",type:"ghost",onClick:this.handleCancel},w(385567,"取 消"))].filter(Boolean),p=(0,S.getModuleRender)(e,"module_3_1",p,this),r){var m=(0,g.default)(r)?u.default.createElement("span",{dangerouslySetInnerHTML:{__html:r}}):u.default.createElement("span",null,r);p=u.default.createElement("div",{className:"ext-link",style:{float:"left",cursor:"pointer",paddingLeft:20}},m)}return f=(0,S.getModuleRender)(e,"module_3_2",f,this),(p||f)&&(d=[p,f]),d=(0,S.getModuleRender)(e,"module_3",d,this),{module_3:d,module_3_1:p,module_3_2:f}}Object.defineProperty(t,"__esModule",{value:!0}),t.handleOk=r,t.handleOkInner=i,t.handleClear=s,t.handleClearInner=o,t.handleCancel=l,t.getModalFooter=c;var d=a(1),u=n(d),h=a(8),p=a(18),f=n(p),m=a(42),g=n(m),y=a(64),v=n(y),b=a(10),k=n(b),C=a(1018),S=a(309),w=k.default.getLabel},1189:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=this.getTabsProps(),n=a.dataParams,r=void 0===n?{}:n,i=a.isOrgInfo,s=a.handleTypes,o=this.state,l=o.inputId,c=o.leftTreeCheckedData,d=o.leftGroupCheckedData,u=o.leftTreeCheckedKeys,h=(0,g.default)({},i?r:{},this.getStateParams({},!0),this.getFormParams()),p=[].concat((0,f.default)(c),(0,f.default)(t)),m=[].concat((0,f.default)(u)),y="";this.resourcesCache={};var v=function(t,a){if(!a)return t;var n=a[l]||a.id||"";if("function"===typeof s){return t+=s(a)+","}if("org"==s){if(a&&"0"!=n){var r=("1"==a.type?"subcom":"dept")+"|"+n;return t+=r+","}}else if("dece_hrm"==s){if(a&&"0"!=n){var i=("1"==a.type?"subcom|":"2"==a.type?"dept|":"")+n;return t+=i+","}}else{if("hrm"==s){e.resourcesCache[a.type+n]=a;var o=("resource"==a.type?"":a.type+"|")+n;return t+=o+","}if("normal"==s){var c=a.type+"|"+n;return t+=c+","}}return t};return y=p.reduce(v,y),"org"==s?m=m.filter(function(e){return"0"!=e}):"dece_hrm"==s?m=m.filter(function(e){return"0"!=e}):"hrm"==s&&(h.cmd="resource",y=d.reduce(v,y)),"hrm"!=s&&(h.selectids=m.join(",")),y&&(h.types=y.substring(0,y.length-1)),h}function i(e){var t=this.getTabsProps(),a=t.dataURL,n=t.dataParams,r=this.getTabs(),i=a,s=(0,g.default)({},n),o={},l={};return e=e||this.state.activeKey,(0,v.default)(r)||(o=r.filter(function(t){return t.key==e})[0]),o&&(i=o.url||i,s=(0,g.default)({},s,o.dataParams||{})),s=(0,g.default)({},s,this.getFormParams(),this.getStateParams(),l),{dataUrl:i,asyncOtherParams:s}}function s(){var e=this.getTabsProps(),t=e.form;if(!this.hasAdvanceSearch())return{};var a=[],n={},r=t.getFields()||[];for(var i in r)r.hasOwnProperty(i)&&a.push(i);var s=(0,k.default)(t.getFieldsValue(a));return(0,h.default)(s).forEach(function(e){var t=s[e];(t||0===t||!1===t)&&(n[e]=t)}),n}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],a=this.getTabsProps(),n=a.dropMenuKey,r=a.showCheckStrictly,i=a.showAccount,s=a.hideVirtualOrg,o=a.checkStrictlyKey,l=this.state,c=l.isAccount,d=l.showDls,u=l.showAllbranch,h=l.checkStrictly,p=l.companyId,f={};return(e.showCheckStrictly||r&&!h)&&(f[o||"alllevel"]=1),u&&(e.showAllbranch||a.showAllbranch&&u?f["string"===typeof a.showAllbranch?a.showAllbranch:"showAllbranch"]=1:delete f[a.showAllbranch]),(e.showAccount||i&&c)&&(f["string"===typeof i?i:"showAccount"]=1),(e.showDls||a.showDls&&d)&&(f["string"===typeof a.showDls?d:"showDls"]=1),t||!e.showVirtualOrg&&s||(f[n]=p||"1"),f}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getTabsProps(),a=t.dataParams,n=t.form,r=t.searchParams,i=void 0===r?{}:r,s=this.state,o=s.inputValue,l=s.activeKey,c=s.date2during,u=s.isInSearch,h=this.getTabs(),p=this.state.quickSearch||"name",f=(0,g.default)({},this.getStateParams(),this.getFormParams()),m={};if(p&&o&&(f[p]=o,n.setFieldsValue((0,d.default)({},p,o))),c&&(f.date2during=c),!(0,v.default)(h)&&l){var y=h.filter(function(e){return e.key===l})[0];m=y.dataParams||{},y.url&&(f.customUrl=y.url||void 0)}return u&&(f=(0,g.default)({},f,i)),(0,g.default)({},f,a,m,e)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(15),d=n(c),u=a(16),h=n(u),p=a(19),f=n(p),m=a(0),g=n(m);t.getExtraParams=r,t.getAsyncParams=i,t.getFormParams=s,t.getStateParams=o,t.getSearchParams=l;var y=a(18),v=n(y),b=a(41),k=n(b)},1190:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getTabsProps(),a=t.form,n=t.hasAdvanceSearch,r=this.state.browserConditions,i=void 0===r?[]:r,s=n;return(e?s:s&&i.length>0)&&a}function i(e){e=e?e||[]:this.state.browserConditions||[];var t=this.state.quickSearch||"";return e.forEach(function(e){e.isQuickSearch&&(t=e.domkey[0])}),t}function s(e){var t=this,a=this.getTabsProps(),n=a.disabledConditionCache,r=a.conditionURL,i=a.type,s=a.conditionDataParams,o=a.onError,l=a.hasTabConditions,c=this.state,d=c.activeKey,u=c.browserConditions,h=c.browserConditionsOuter,p=l&&d?this.tabConditions[d]:u,f=l&&d?this.tabConditionsOuter[d]:h;if(!(0,W.default)(p)&&!n){var m={};return l?(this.defaultConditionParams=(0,H.getParamsByConditions)(p),m={quickSearch:this.getQuickSearchInCondition(p),browserConditions:p,browserConditionsOuter:f}):m={quickSearch:this.getQuickSearchInCondition(p)},void this.setState(m,e)}(0,z.callApi)(""+r+i,"GET",s).then(function(n){if((0,W.default)(n.conditions))e&&e();else{var r={},i=t.getQuickSearchInCondition(n.conditions);r.quickSearch=i;var s=t.getSearchAdOuterConditions(n.conditions),o=(0,H.getParamsByConditions)(n.conditions);t.defaultConditionParams=(0,K.default)({},o),l&&d&&(t.tabConditions[d]=n.conditions,t.tabConditionsOuter[d]=s);var c=a.form,u=c.setFieldsValue;(0,c.resetFields)(),(0,W.default)(o)||(u(o),o[i]&&(r.inputValue=o[i]),o.date2during&&(r.date2during=o.date2during)),t.setState((0,K.default)({},r,{browserConditions:n.conditions,browserConditionsOuter:s,showSearchAd:!1}),function(){e&&e(o)})}}).catch(function(e){return(0,N.default)(o)&&o(e)})}function o(){var e=this.props,t=e.tabs,a=e.defualtTabs,n=e.extendTabs,r=e._tabs,i=this.state.tabsFromApi,s=a&&a.length?a:[],o=void 0;return o="tabs"in this.props?[].concat((0,P.default)(t||[]),(0,P.default)(n||[])):(0,W.default)(s)?i:[].concat((0,P.default)(s),(0,P.default)(n||[])),Array.isArray(o)&&(o=(0,ne.joinArray)(o,r||[])),o}function l(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.getTabs();return Array.isArray(t)&&!(0,W.default)(t)?(t.filter(function(t){return e?t.selected:t.isSearch})[0]||t[0]).key:""}function c(){var e=this,t=this.getTabs();return(0,W.default)(t)?null:x.default.createElement(M.Tabs,{ecId:this.props.ecId+"_Tabs@yrnhwz",activeKey:this.state.activeKey,onChange:this.onTabChange},t.map(function(t,a){return!t.hideTab&&x.default.createElement(ie,{ecId:e.props.ecId+"_TabPane@8gzhce@"+a,tab:t.name,key:t.key})}))}function d(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],r=function(){var r=t.getTabsProps(),i=r.form,s=r.isMultCheckbox,o=r.defaultAtSearch;if(!s&&n&&n(),t.hasAdvanceSearch()){var l=i.resetFields,c=i.setFieldsValue;l(),t.setState({inputValue:t.defaultConditionParams[t.state.quickSearch]||""}),c(t.defaultConditionParams)}else t.setState({inputValue:"",quickSearch:r.quickSearchName||""});a.loadModal&&o?(t.onSearchClick(),s&&n&&n()):t.onSearch({},e,function(){s&&n&&n()})};this.setState((0,K.default)({activeKey:e,current:1,selectedAllCurrent:0,isInSearch:!1},a),function(){t.hasAdvanceSearch(!0)?t.getConditions(r):r()})}function u(e){var t=window.event||e,a=t.target;13==(t.keyCode||t.which||t.charCode)&&a&&"INPUT"==a.nodeName&&a.id&&this.onSearchClick()}function h(e){var t=this.state.browserConditions;return e=e||t,e=Array.isArray(e)?e:[],e.filter(function(e){return e.defaultDisplayInBar})}function p(){for(var e=this.getTabsProps(),t=e.displaySearchAdInBarCol,a=this.state.browserConditionsOuter,n=a.map(function(t,a){var n=X.default.isComponentHide(t)?{display:"none"}:null,r=t.label,i=t.viewAttr,s=t.conditionType,o=t.browserConditionParam,l=t.domkey,c=i&&1!=i?{display:"inline-block",verticalAlign:"top"}:{display:"table"};return x.default.createElement(M.Col,{ecId:e.ecId+"_Col@63mwfj@"+a,className:"wea-form-cell wea-form-item",span:6,style:n},x.default.createElement(M.Row,{ecId:e.ecId+"_Row@aj0xzv@"+a},x.default.createElement(M.Col,{ecId:e.ecId+"_Col@n8o8q3@"+a,className:"wea-form-label-wrapper",span:24},x.default.createElement("div",{title:(0,B.default)(r)?r:"",className:"wea-form-item-label text-elli colon",style:{width:"100%"}},r))),x.default.createElement(M.Row,{ecId:e.ecId+"_Row@kdfilo@"+a},x.default.createElement(M.Col,{ecId:e.ecId+"_Col@0y9zhr@"+a,span:24},x.default.createElement("div",{className:"wea-form-item-wrapper",style:c},(0,H.getComponent)(s,o,l,e,t)))))}),r=Math.ceil(n.length/t),i=[],s=0;s<r;s++)i.push(x.default.createElement(M.Row,{ecId:e.ecId+"_Row@i15ln7@"+s,className:"wea-content"},n.slice(s*t,(s+1)*t)));return x.default.createElement("div",{ecId:e.ecId+"_div@0hi4za",className:"wea-search-group",onKeyDown:this.onAdvanceSearchEnter},i)}function f(){var e=this.getTabsProps(),t=e.isSingle,a=e.isMultCheckbox,n=e.getAdvanceSearch,r=e.enableSearchValid,i=this.state,s=i.browserConditions,o=i.showSearchAd;if(n&&o)return n(s,e);var l=s.map(function(n,i){var s=X.default.isComponentHide(n)?{display:"none"}:null;return x.default.createElement(M.Col,{ecId:e.ecId+"_Col@on3x9s@"+i,className:"wea-form-cell",span:24/(t||a?n.colSpan||2:1),style:s},x.default.createElement(ee.default,{ecId:e.ecId+"_WeaFormItem@6666rx@"+i,label:n.label,labelCol:{span:n.labelcol},labelStyle:r&&3==n.viewAttr?{color:"red"}:void 0,wrapperCol:{span:n.fieldcol},viewAttr:n.viewAttr},(0,H.getComponent)(n.conditionType,n.browserConditionParam,n.domkey,e,n)))});return x.default.createElement("div",{ecId:e.ecId+"_div@oold3y",className:"wea-search-group",onKeyDown:this.onAdvanceSearchEnter},x.default.createElement(M.Row,{ecId:e.ecId+"_Row@2pxlz9",className:"wea-content"},l))}function m(){var e=this.getTabsProps(),t=e.form,a=t.getFieldValue,n=t.resetFields,r=t.setFieldsValue,i=this.state.browserConditions,s=this.state.quickSearch||"name",o=(0,H.getParamsByConditions)(i);a(s)&&this.setState({inputValue:""}),n(),r(o)}function g(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=this.getTabsProps(),n=a.hasLeftTree,r=a.leftToSearchKey,i=a.hasTabConditions,s=a.enableSearchValid,o=[];if(s){var l=this.getFormParams(),c=this.state.browserConditions;c&&c.forEach(function(e){if(e&&3==e.viewAttr){var t=e.domkey&&e.domkey[0];t&&!l[t]&&o.push(e.label)}})}if(o.length)return void M.Modal.confirm({title:"必填提示",content:o.join(",")+" 字段必须填写！"});var d={current:1,selectedAllCurrent:0,isInSearch:!0},u={};if(t&&(d.showSearchAd=!1,n)){var h=this.getSearchParams();h[r]&&this.setState({leftSelectKeys:[h[r]]})}this.isCrm()&&(d.isAccount=!0),this.setState(d,function(){return e.onSearch(u,i?e.state.activeKey:void 0)})}function y(){var e=this;return[x.default.createElement(M.Button,{ecId:this.props.ecId+"_Button@wnmavd",type:"primary",onClick:this.onSearchClick},se(197,"搜索")),x.default.createElement(M.Button,{ecId:this.props.ecId+"_Button@spbqgg",type:"ghost",onClick:function(){return e.reset()}},se(2022,"重置")),x.default.createElement(M.Button,{ecId:this.props.ecId+"_Button@rtz97u",type:"ghost",onClick:function(){return e.setState({showSearchAd:!1})}},se(31129,"取消"))]}function v(e){this.setState({inputValue:e});var t=this.getTabsProps(),a=t.form,n=this.state.quickSearch;this.hasAdvanceSearch()&&n&&a.setFieldsValue((0,E.default)({},n,e))}function b(){var e=this,t=this.state,a=t.showSearchAd,n=t.inputValue,r=this.getActionSearchType(!0),i=/base/.test(""+r),s=/advanced/.test(""+r),o=null,l=null;(i||s)&&(o=x.default.createElement(M.Col,{ecId:this.props.ecId+"_Col@4tud1x",span:s?18:24},i?x.default.createElement(ae.default,{ecId:this.props.ecId+"_WeaInputSearch@kluesq",placeholder:"",value:n,onSearchChange:this.onSearchChange,onSearch:function(){return e.onSearchClick(!1)}}):x.default.createElement("div",{className:"wea-transfer-search-base-disabled"}))),s&&(l=x.default.createElement(M.Col,{ecId:this.props.ecId+"_Col@v67zwv",span:6},x.default.createElement(M.Button,{ecId:this.props.ecId+"_Button@v66td8",className:"wea-workflow-serch-condition",type:"ghost",onClick:function(){return e.setState({showSearchAd:!0})}},se(347,"高级搜索"))));var c=this.getActionButtonsAd().map(function(e){return x.default.createElement("span",{style:{marginLeft:15}},e)}),d=x.default.createElement("div",{className:"wea-search-wrap",style:{display:a?"block":"none"}},x.default.createElement(M.Button,{ecId:this.props.ecId+"_Button@kyima9",type:"ghost",className:"wea-advanced-search",onClick:function(){return e.setState({showSearchAd:!1})}},se(347,"高级搜索")),x.default.createElement("div",{className:"wea-advanced-searchs"},x.default.createElement(M.Form,{ecId:this.props.ecId+"_Form@ms89jl",horizontal:!0},this.getActionSearchAd(),x.default.createElement("div",{className:"wea-search-buttons"},x.default.createElement("div",{style:{textAlign:"center"}},c)))));return[i||s?x.default.createElement(M.Row,{ecId:this.props.ecId+"_Row@c3vkae",style:{height:35}},o,l):null,d]}function k(e){var t=[],a=this.getTabsProps(),n=this.state,r=n.quickSearch,i=n.browserConditionsOuter,s=a.isSingle,o=a.isMultCheckbox,l=a.displaySearchAd,c=a.displaySearchAdInBar;if(!s&&!o&&!e)return t;var d=i.length;return!r||!l||(e||c&&d)&&!e||t.push("base"),l&&this.hasAdvanceSearch()&&t.push("advanced"),t.filter(Boolean)}function C(e){var t=this,a=this.getTabsProps(),n=a.form;this.hasAdvanceSearch()&&n.setFieldsValue({date2during:e}),this.setState({date2during:e},function(){return t.onSearch()})}function S(){var e=this.getTabsProps(),t=e.isSingle,a=e.isMultCheckbox,n=(e.displaySearchAd,this.state.contentType),r=this.getActionTab(),i=1==n||2==n||4==n,s=this.getActionSearchType();return r||a&&(!i&&s.length>0||i)||t&&s.length>0}function w(){var e=this.getTabsProps(),t=e.displaySearchAdInBar,a=this.state.browserConditionsOuter,n=a.length;return t&&n}function _(e){var t=0;if(e)try{var a=(0,re.findDOMNode)(e);a&&(t=a.clientHeight)}catch(e){}this.setState({outerAdHeight:t})}function D(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this.getTabsProps(),n=a.isSingle,r=a.addSelect,i=a.isMultCheckbox,s=a.showCheckBtn,o=void 0===s||s,l=a.displaySearchAdInBarRow,c=a.displaySearchAdInBarCol,d=a.getRenderModule,u=this.state,h=u.browserConditions,p=u.browserConditionsOuter,f=u.date2during,m=u.inputValue,g=u.showCheckedDatas,y=u.showSearchAd,v=void 0,b=void 0,k=this.getActionTab(),C=[].concat((0,P.default)(a.tabExtendButtons||[])),S=this.getActionSearchType();if(this.showSearchBar()){if(v=x.default.createElement(J.default,{ecId:a.ecId+"_Search@d4bbhi",buttons:C,buttonsAd:this.getActionButtonsAd(),addSelect:r?function(){var t=[],n="2";return h&&h.forEach(function(e){"date2during"==e.domkey[0]&&(t=e.options,e.viewAttr&&(n=e.viewAttr))}),t.length>0?x.default.createElement($.default,{ecId:a.ecId+"_WeaSelect@vkmlo1",viewAttr:n,style:{width:100},value:f,options:t,onChange:e.onSelectChange}):null}():"",tabs:k,showCheckBtn:i&&o,showCheckedDatas:g,showCheckedDatasChange:function(t){return e.setState({showCheckedDatas:t})},searchType:S,searchsBaseValue:m,searchsAd:x.default.createElement(M.Form,{ecId:a.ecId+"_Form@zskvun",horizontal:!0},this.getActionSearchAd()),showSearchAd:(n||i)&&y,setShowSearchAd:function(t){return e.setState({showSearchAd:t})},onSearchChange:this.onSearchChange,onSearch:function(){return e.onSearchClick(!1)},getRenderModule:"function"===typeof d&&function(t,a){return e.updateModules(a),e.renderModules}}),this.showSearchOuter()){var w=p.length,_=58*Math.min(l,Math.ceil(w/c))+5;!y&&C.push(x.default.createElement(M.Button,{ecId:a.ecId+"_Button@1h1d91",type:"primary",onClick:this.onSearchClick},se(197,"搜索")));var D={display:y?"none":"block"};b=x.default.createElement("div",{className:"wea-tab-outer-SearchAd",style:D,ref:this.setOuterAdRef},x.default.createElement(U.default,{ecId:a.ecId+"_WeaNewScroll@gbb9n8",height:_},x.default.createElement(M.Form,{ecId:a.ecId+"_Form@lfmpmp",horizontal:!0},this.getActionSearchAdOuter())))}}else v=null,b=null;return v=(0,H.getModuleRender)(t,"module_2_1",v,this),b=(0,H.getModuleRender)(t,"module_2_3",b,this),{module_2_1:v,module_2_3:b}}Object.defineProperty(t,"__esModule",{value:!0});var I=a(15),E=n(I),T=a(19),P=n(T),A=a(0),K=n(A);t.hasAdvanceSearch=r,t.getQuickSearchInCondition=i,t.getConditions=s,t.getTabs=o,t.getDefaultActiveKey=l,t.getActionTab=c,t.onTabChange=d,t.onAdvanceSearchEnter=u,t.getSearchAdOuterConditions=h,t.getActionSearchAdOuter=p,t.getActionSearchAd=f,t.reset=m,t.onSearchClick=g,t.getActionButtonsAd=y,t.onSearchChange=v,t.getActionBarInTrans=b,t.getActionSearchType=k,t.onSelectChange=C,t.showSearchBar=S,t.showSearchOuter=w,t.setOuterAdRef=_,t.getActionBar=D;var R=a(1),x=n(R),M=a(8),L=a(25),N=n(L),O=a(42),B=n(O),F=a(18),W=n(F),H=a(309),z=a(17),q=a(10),V=n(q),j=a(26),U=n(j),G=a(49),$=n(G),Q=a(1191),J=n(Q),Y=a(35),X=n(Y),Z=a(46),ee=n(Z),te=a(45),ae=n(te),ne=a(308),re=a(37),ie=M.Tabs.TabPane,se=V.default.getLabel},1191:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r,i,s,o=a(0),l=n(o),c=a(6),d=n(c),u=a(2),h=n(u),p=a(3),f=n(p),m=a(4),g=n(m),y=a(5),v=n(y),b=a(1),k=n(b),C=a(8),S=a(25),w=n(S),_=a(14),D=n(_),I=a(45),E=n(I),T=a(10),P=n(T),A=a(309),K=P.default.getLabel,R=(i=r=function(e){function t(e){(0,h.default)(this,t);var a=(0,g.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return s.call(a),a.updateState(e),a}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){this.updateState()}},{key:"componentWillReceiveProps",value:function(e){this.updateState(e)}},{key:"render",value:function(){var e=this,t=this.state.showSearchAd,a=this.props,n=a.tabs,r=a.addSelect,i=a.searchType,s=a.getRenderModule,o=a.showCheckBtn,c=a.showCheckedDatas,d=a.showCheckedDatasChange,u=/base/.test(""+i),h=/advanced/.test(""+i),p={display:t?"block":"none"},f=n||o&&k.default.createElement("span",{className:"check-button-wrapper"},k.default.createElement(C.Button,{ecId:this.props.ecId+"_Button@p8ug8q",className:"check-button",type:c?"primary":"ghost",onClick:function(){e.setState({showCheckedDatas:!c}),d&&d(!c)}},K(385596,"仅显示已选")),c&&k.default.createElement("span",{className:"icon-check-wrapper"},k.default.createElement(C.Icon,{ecId:this.props.ecId+"_Icon@t3n797",className:"icon-check",type:"check"}))),m=this.getTabBarRight(),g=this.getSearchContainer();if("function"===typeof s){var y=s(this,(0,l.default)({module_2_1_1:f},m,g))||{};f=(0,A.getModuleRender)(y,"module_2_1_1",f,this),m=this.getTabBarRight(y),g=this.getSearchContainer(y)}return k.default.createElement("div",{className:"wea-tab"},k.default.createElement(C.Row,{ecId:this.props.ecId+"_Row@s6vh3z",className:"wea-tab-row"},k.default.createElement(C.Col,{ecId:this.props.ecId+"_Col@gdekqx",className:(0,D.default)({"wea-tab-row-left":!0,"add-select":r,"search-base":u,"search-advanced":h})},f),k.default.createElement(C.Col,{ecId:this.props.ecId+"_Col@r077gc",className:(0,D.default)({"wea-tab-row-right":!0})},m.module_2_1_2)),g.module_2_1_3,k.default.createElement("div",{className:"mask-dark",style:p}),k.default.createElement("div",{ecId:this.props.ecId+"_div@eed5do",className:"mask-wrapper",style:p,onClick:function(){return e.props.hideSearchAd&&e.props.hideSearchAd()}}))}}]),t}(k.default.Component),s=function(){var e=this;this.state={showSearchAd:!1},this.updateState=function(t){var a=t||e.props,n=a.showSearchAd;void 0!==n&&e.state.showSearchAd!==n&&e.setState({showSearchAd:n})},this.onSearch=function(t){var a=e.props.onSearch;(0,w.default)(a)&&a(t)},this.onSearchChange=function(t){var a=e.props.onSearchChange;(0,w.default)(a)&&a(t)},this.setShowSearchAd=function(t){var a=e.props.setShowSearchAd;e.setState({showSearchAd:t}),(0,w.default)(a)&&a(t)},this.getTabBarRight=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.props,n=a.searchType,r=a.searchsBaseValue,i=a.buttons,s=a.addSelect,o=/base/.test(""+n),l=/advanced/.test(""+n),c=[i&&i.map(function(e){return k.default.createElement("span",{style:{marginLeft:8}},e)}),s];c=(0,A.getModuleRender)(t,"module_2_1_2_1",c,e);var d=k.default.createElement("div",{className:"advance-search-wrapper"},o&&k.default.createElement(E.default,{ecId:e.props.ecId+"_WeaInputSearch@0gtcs0",value:r,onSearch:e.onSearch,onSearchChange:e.onSearchChange}),l&&k.default.createElement(C.Button,{ecId:e.props.ecId+"_Button@38g0at",type:"ghost",className:"wea-advanced-search",onClick:function(){return e.setShowSearchAd(!0)}},K(347,"高级搜索")));d=(0,A.getModuleRender)(t,"module_2_1_2_2",d,e);var u=k.default.createElement("div",{className:"wea-search-tab"},c,d);return u=(0,A.getModuleRender)(t,"module_2_1_2",u,e),{module_2_1_2:u,module_2_1_2_1:c,module_2_1_2_2:d}},this.getSearchContainer=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.state.showSearchAd,n=e.props,r=n.buttonsAd,i=n.searchsAd,s=n.height,o={display:a?"block":"none"},l=k.default.createElement(C.Button,{ecId:e.props.ecId+"_Button@rp42zw",type:"ghost",className:"wea-advanced-search",onClick:function(){return e.setShowSearchAd(!1)}},K(347,"高级搜索"));l=(0,A.getModuleRender)(t,"module_2_1_3_1",l,e);var c=k.default.createElement("div",{className:"wea-advanced-searchsAd",style:{maxHeight:s}},i);c=(0,A.getModuleRender)(t,"module_2_1_3_2",c,e);var d=k.default.createElement("div",{className:"wea-search-buttons"},k.default.createElement("div",{style:{textAlign:"center"}},r&&r.map(function(e){return k.default.createElement("span",{style:{marginLeft:15}},e)})));d=(0,A.getModuleRender)(t,"module_2_1_3_3",d,e);var u=k.default.createElement("div",{className:"wea-search-container",style:o},l,c,d);return u=(0,A.getModuleRender)(t,"module_2_1_3",u,e),{module_2_1_3:u,module_2_1_3_1:l,module_2_1_3_2:c,module_2_1_3_3:d}}},i);t.default=R},1192:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"checkStrictly",a=this.state,n=a.checkStrictly,r=a.isAccount,i=a.showAllbranch,s=a.showDls,o=a.activeKey,l={},c=function(){};"showAllbranch"==t?(l={showAllbranch:!i},c=function(){return e.onSearch({cmd:"branch"},o)}):"showAccount"==t?(l={isAccount:!r},c=function(){return e.onSearch({},o)}):"checkStrictly"==t?l={checkStrictly:!n}:"showDls"==t&&(l={showDls:!s},c=function(){return e.onSearch({},o)}),this.setState(l,c)}function i(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getTabsProps(),r=n.checkStrictlyTitle,i=n.checkStrictlyTitles,s=n.showCheckStrictly,o=this.state,l=o.checkStrictly,c=o.isAccount,d=o.showAllbranch,u=o.showDls,h=[],p=function(t){var a=t.type,r=t.title,i=t.icon,s=t.opIcon,o=t.flag;return m.default.createElement(v.Button,{ecId:n.ecId+"_Button@9lt1un@"+a,size:"small",title:r,onClick:function(){return e.onButtonsClick(a)}},m.default.createElement("span",null,o?m.default.createElement("i",{className:"icon-coms-"+i,style:{color:"#2db7f5"}}):m.default.createElement("i",{className:"icon-coms-"+s})))};if(s&&t.showCheckStrictly){var f=r||i&&2===i.length&&(l?i[0]:i[1])||(l?K(33454,"包含下级机构"):K(390067,"不包含下级机构"));h.push(p({type:"checkStrictly",title:f,flag:!l,icon:"DisplaySubordinates",opIcon:"NoDisplayOfSubordinates"}))}return t.showAllbranch&&h.push(p({type:"showAllbranch",title:d?K(390066,"隐藏下级下属"):K(83783,"显示下级下属"),flag:d,icon:"DisplaySubordinates",opIcon:"NoDisplayOfSubordinates"})),t.showDls&&h.push(p({type:"showDls",title:u?K(513842,"隐藏代理商"):K(513843,"显示代理商"),flag:u,icon:"currency-Customer",opIcon:"currency-Customer"})),t.showAccount&&h.push(p({type:"showAccount",title:c?K(385568,"隐藏无账号人员"):K(31504,"显示无账号人员"),flag:c,icon:"ShowNoAccount",opIcon:"NoAccountNoDisplay"})),m.default.createElement("div",{className:"operation-wrap",style:a},h)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.onSearch((0,p.default)({current:e},t),this.state.activeKey)}function o(){var e=this.state,t=e.pageSize,a=e.current,n=e.count;return m.default.createElement(v.Pagination,{ecId:this.props.ecId+"_Pagination@3vrvbf",weaSimple:!0,showTotal:function(e){return K(385617,"共$s条").replace(/\$s/,e)},total:n,pageSize:t,current:a,onChange:this.onPageChange})}function l(e){var t=this,a=this.getTabsProps(),n=a.dropMenuKey,r={current:1};n&&(r[n]=e.key||"1"),this.setState({companyId:e.key||"1"},function(){t.onSearch(r,t.state.activeKey)})}function c(){var e=this.getTabsProps(),t=e.isSingle,a=e.isMultCheckbox,n=this.state,r=n.companyList,i=n.companyId,s=n.scaleHeight,o=[];r&&r.map(function(t,a){o.push(m.default.createElement(v.Menu.Item,{ecId:e.ecId+"_MenuItem@q7sqx2@"+a,key:t.id},t.name)),o.push(m.default.createElement(v.Menu.Divider,null))});var l=r.find(function(e){return e.id==i}),c=l&&l.name?l.name:"",d=m.default.createElement(v.Menu,{ecId:e.ecId+"_Menu@4vl1tk",className:"wea-browser-drop-menu wea-browser-drop-menu-test max-height "+(t||a?"":"wea-hr-muti-input-drop-menu"),onSelect:this.onCompanySelect.bind(this)},o);return m.default.createElement(v.Row,{ecId:e.ecId+"_Row@88hl8r"},m.default.createElement(v.Col,{ecId:e.ecId+"_Col@a9x41i",span:24,style:{fontSize:0}},m.default.createElement(v.Dropdown,{className:"wea-browser-virtual-dropdown",ecId:e.ecId+"_Dropdown@v0sr9s",key:s,overlay:d,trigger:["click"]},m.default.createElement("a",{className:"wea-dropdown-link",href:"javascript:;"},m.default.createElement("span",{className:"wea-dropdown-link-menuicon"},m.default.createElement("i",{className:"icon-toolbar-Organization-list"})),m.default.createElement("div",{className:"text-elli wea-dropdown-link-company",title:c},c),m.default.createElement("span",{className:"wea-dropdown-link-arrow"},m.default.createElement(v.Icon,{ecId:e.ecId+"_Icon@zcyjh9",type:"down",className:"wea-dropdown-link-downicon"}))))))}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this.props,n=a.contentHeight,r=a.isSingle,i=a.isMultCheckbox,s=this.state,o=s.outerAdHeight,l=s.showSearchAd,c=s.scaleHeight,d=e.showDropMenu,u=e.showPagination,h=e.showAdvanceSearch,p=e.isWrap,f=c||n;if(!p){this.showSearchBar()&&(t+=47),d&&(t+=37),h&&(t+=35),u&&(t+=35),r||i||(t+=21),l||(t+=o)}if(window.setLayoutWindow){var m=(0,y.default)(window.setLayoutWindow.document.body).height();m<550&&(m=550);var g=m-49-52-t;f>g&&(f=g)}else{var v=(I.default.getTop()||window).document,b=v.documentElement.clientHeight||0;b&&f>b-49-52&&(f=b-49-52),f<270&&(f=270),f-=t}return f}function u(){var e=this,t=this.getTabsProps(),a=t.icon,n=t.isImgIcon,r=t.type,i=t.topPrefix,s=t.asynLoadAll,o=t.isLoadUser,l=t.browserTreeCustomProps,c=void 0===l?{}:l,d=t.hideVirtualOrg,u=t.clickNameExpandFirst,h=t.showCheckStrictly,f=this.state,g=f.contentType,y=f.inputId,v=f.inputName,b=f.inputTop,C=f.inputBottom,S=f.selectedData,w=f.leftCheckedData,D=f.checkStrictly,I=f.leftTreeCheckedData,E=f.treeDatas,P=f.companyList,K=f.defaultExpandedKeys,R=f.loadAllTreeData,x=3==g,M=null;if(x){var L=t.defaultExpandedLevel;"undefined"===typeof L&&E&&E.id&&(L=1),M=(0,k.default)(E)?this.renderEmpty():m.default.createElement(A.default,(0,p.default)({ecId:t.ecId+"_WeaBrowserTree@qv3dxw",ztreeMode:!1,isImgIcon:n,type:r,browserTree:!1,onDoubleClick:this.onleftTreeDoubleClick,checkable:!0,topPrefix:i},this.getAsyncParams(),{checkedCb:this.onLeftTreeCheck.bind(this),filterData:S,inputId:y,inputName:v,inputTop:b,inputBottom:C,checkedDatas:I,isMult:!0,icon:a,treeData:E,defaultExpandedKeys:K,checkStrictly:D,isLoadUser:o,isLoadAll:R,asynLoadAll:s,clickNameExpandFirst:u,defaultExpandedLevel:L},c))}else{if(6==g||7==g||8==g)return this.getHrmMainContent();var N=w.map(function(e){return e[y]}),O=this.getTableKeyProps();M=m.default.createElement(T.default,(0,p.default)({},O,{ecId:t.ecId+"_TableLeft@7f6my1",contentType:g,inputId:y,inputName:v,inputTop:b,inputBottom:C,onDoubleClick:this.onleftDoubleClick,onClick:this.onleftClick,selectedKeys:N,filterData:S}))}var B=x&&!d&&!(0,k.default)(P),F=(this.getActionSearchType(!0)||[]).length>0,W=this.getContentHeight({showDropMenu:B,showAdvanceSearch:F,showPagination:1==g||4==g}),H={showCheckStrictly:x&&h},z=15;return B&&(z+=37),F&&(z+=35),[this.getActionBarInTrans(),B&&this.getDropMenuInTrans(),m.default.createElement(_.default,{ecId:t.ecId+"_WeaNewScroll@dnbddi",height:W,ref:function(t){return e.weaSrcoll=t}},M),this.getTreeButtonInTrans(H,{top:z}),(1==g||4==g)&&this.getPaginationInTrans()].filter(Boolean)}Object.defineProperty(t,"__esModule",{value:!0});var h=a(0),p=n(h);t.onButtonsClick=r,t.getTreeButtonInTrans=i,t.onPageChange=s,t.getPaginationInTrans=o,t.onCompanySelect=l,t.getDropMenuInTrans=c,t.getContentHeight=d,t.getModalMainContentLeft=u;var f=a(1),m=n(f),g=a(194),y=n(g),v=a(8),b=a(18),k=n(b),C=a(10),S=n(C),w=a(26),_=n(w),D=a(28),I=n(D),E=a(325),T=n(E),P=a(1029),A=n(P),K=S.default.getLabel},1193:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var a=this.state.inputName,n=(0,_.default)({},t[0]);if(n&&n.id){var r=n.orgWholePathspan||n[a+"span"]||n[a]||n.name||n.lastname||"";this.onCountChange(t),this.setState({idCache:e[0],nameCache:r,checkedKeys:e,selectedData:t}),this.onChange(t,!1)}}function i(e,t){var a=this.getTabsProps(),n=a.onOkClick,r=this.state.inputName;if(e){"function"===typeof n&&n(e,t);var i=(0,_.default)({},t[0]),s=i.orgWholePathspan||i[r+"span"]||i[r]||i.name||i.lastname||"";this.onTableChange(e[0],s,t)}}function s(e,t,a){var n=this.getTabsProps(),r=n.isSingle,i=n.hasRadio,s=n.sap,o=n.checkHook,l={};if(r){if(i)return;o&&o(e,t,a),s||(l=(0,_.default)({},l,{idCache:e,nameCache:t}))}else this.onCountChange(a),l=(0,_.default)({},l,{idCache:e,nameCache:t,checkedKeys:[e],selectedData:a});this.onChange(a)}function o(e,t,a){var n=this.state.inputId;if(a&&a[0]){a=a[0];var r=[].concat((0,S.default)(this.state.selectedData)),i=r.findIndex(function(e){return e[n]==a[n]});-1!==i?r.splice(i,1):r.push(a),this.onMultTableCheck(r.map(function(e){return e[n]}),r)}}function l(e,t){var a=this.getTabsProps(),n=a.onCheck,r=this.state,i=r.inputId,s=r.inputName,o=[];t.length>0&&t.forEach(function(e){var t=(0,T.default)(e);t.id=e[i]||e.id||"",t.name=e[s+"span"]||e[s]||e.name||"",o.push(t)}),"function"===typeof n&&n(o),this.onCountChange(o),this.setState({selectedData:o})}function c(e,t,a){var n=this.getTabsProps(),r={};if(a){var i=(0,_.default)({},a);"22"==n.type&&(t=a.prop.fullName||t,i.name=t),a=[a],r={checkedKeys:[e],selectedData:a,idCache:e,nameCache:t}}else r={checkedKeys:[],selectedData:[],idCache:e,nameCache:t};this.setState(r)}function d(e,t){this.onCountChange(t),this.setState({selectedData:t})}function u(e,t){this.setState({leftTreeCheckedKeys:e,leftTreeCheckedData:t})}function h(e,t){this.setState({leftGroupCheckedKeys:e,leftGroupCheckedData:t})}function p(e){var t=this.getTabsProps(),a=t.count,n=this.count(e)||"";a&&a(n,e)}function f(e){var t=this.state,a=t.selectedData,n=t.inputId,r=(0,T.default)(a),i=n;this.isCrm()&&(i="nodeid");var s=r.findIndex(function(t){return t[i]===e[i]});if(-1!=s){var o,l=r[s];(o=r).splice.apply(o,[s,1].concat((0,S.default)(l.users||[]))),r=this.filterDuplData([],r,i)}this.setState({selectedData:r})}function m(e){this.setState({selectedData:e})}function g(e){if(e.length>0){var t=this.state,a=t.inputId,n=t.selectedData,r=a;this.isCrm()&&(r="nodeid");var i=e.map(function(e){return n.find(function(t){return t[r]===e})});this.setState({rightCheckedData:i})}else this.setState({rightCheckedData:[]})}function y(e){if(Array.isArray(e)||(e=[e]),e){var t=this.state,a=t.selectedData,n=t.rightCheckedData,r=t.inputId,i=this.isCrm()?"nodeid":r,s=a.filter(function(t){return!e.some(function(e){return e===t[i]})}),o=n.filter(function(t){return!e.some(function(e){return e===t[i]})});this.onCountChange(s),this.setState({selectedData:s,rightCheckedData:o})}}function v(e,t){this.setState({leftCheckedData:t})}function b(e){var t=this.state,a=t.selectedData,n=t.inputId,r=this.filterDuplData(a,e,n||"id");this.onCountChange(r),this.setState({selectedData:r})}function k(e){var t=this,a=this.state,n=a.inputId,r=a.selectedData;this.setState({loading:!0});var i={};i.selectids=e.map(function(e){return e[n]||e.id||""}),this.callSelectedReq(i,e).then(function(e){var a={};(0,I.default)(e.columns)||(a=(0,_.default)({},a,t.getRowNameKeyFromColumns(e.columns)));var i=t.isCrm()?"nodeid":a.inputId||n||"id",s=t.isCrm()?t.formatData(e.datas||[]):e.datas,o=t.filterDuplData(r,s,i);t.onCountChange(o),a=(0,_.default)({},a,{loading:!1,selectedData:o,leftTreeCheckedData:[],leftTreeCheckedKeys:[],leftGroupCheckedData:[],leftGroupCheckedKeys:[]}),t.setState(a)})}Object.defineProperty(t,"__esModule",{value:!0});var C=a(19),S=n(C),w=a(0),_=n(w);t.onTableCheck=r,t.onHrmTableChange=i,t.onTableChange=s,t.onMultTableChange=o,t.onMultTableCheck=l,t.onTreeClick=c,t.onTreeMultCheck=d,t.onLeftTreeCheck=u,t.onLeftGroupCheck=h,t.onCountChange=p,t.onSelectedGroupExpand=f,t.onSelectedListChange=m,t.onSelectedListCheck=g,t.onSelectedListDoubleClick=y,t.onleftClick=v,t.onleftDoubleClick=b,t.onleftTreeDoubleClick=k;var D=a(18),I=n(D),E=a(41),T=n(E)},1194:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){var e=this.state.selectOptions,t=this.props,a=t.inputStyle,n=t.viewAttr,r=t.isDetail,i=a;return(0,u.default)(a)&&(i=1!==n?1==r?{width:110}:{width:210}:{width:"100%"}),React.createElement("div",{style:{display:"inline-block",width:"100%"},ref:"selectWrapper"},!(0,u.default)(e)&&React.createElement(p.default,(0,c.default)({},this.props,{detailtype:1,options:e,style:i})))}function i(){var e=this,t=this.props,a=t.type,n=t.dataParams,r=t.completeParams,i=t.conditionDataParams,s=t.destDataParams,l=this.props,d=l.dataURL,u=l.completeURL,h=l.conditionURL,p=l.pageSize;u=u||"/api/public/browser/complete/"+a,d=d||"/api/public/browser/data/"+a,h=h||"/api/public/browser/condition/"+a;var f=(0,c.default)({},M.defaultProps,this.props,{dataUrl:d+"?"+(0,L.getFd)(n),completeURL:u+"?"+(0,L.getFd)(r),conditionURL:h+"?"+(0,L.getFd)(i)});p=p>0?p:(0,N.getPageSize)(this.props);var g=(0,N.getValueWarp)(this.props),v={valueWarp:g},k=Number(a),S=(M.defaultProps.dataURL,M.defaultProps.completeURL,M.defaultProps.conditionURL,(0,o.default)(M.defaultProps,["dataURL","completeURL","conditionURL"])),_=(0,c.default)({},S,this.props);return"systempage"==a?React.createElement(m.default,(0,c.default)({initFunc:function(t){return e.browser=t},contentHeight:460},f,{dataURL:d,pageSize:p},v)):"browserTypeList"==a?React.createElement(y.default,(0,c.default)({initFunc:function(t){return e.browser=t}},f,{dataURL:d+"?"+(0,L.getFd)(n),pageSize:p})):"icons"==a?React.createElement(b.default,(0,c.default)({initFunc:function(t){return e.browser=t},contentHeight:460},f,{pageSize:p})):"nodeTreeList"==a?React.createElement(C.default,(0,c.default)({initFunc:function(t){return e.browser=t},contentHeight:460},_,{pageSize:p})):"devmodules"==a?React.createElement(w.default,(0,c.default)({initFunc:function(t){return e.browser=t},contentHeight:410},f,{pageSize:p})):184===k?React.createElement(D.default,(0,c.default)({contentHeight:450},f,{pageSize:p,destUrl:"/api/public/browser/destData/"+a+"?"+K.default.getFd(s)},v)):141===k?React.createElement(E.default,(0,c.default)({contentHeight:460},f,{pageSize:p},v)):-1!==[258,2222,58,263].indexOf(k)?React.createElement(P.default,(0,c.default)({initFunc:function(t){return e.browser=t}},f,{pageSize:p,setMinWidth:function(){return e.setMinWidth(e.props)}})):34===k?this.renderLevelCmps():"ecode"===a?React.createElement(x.default,(0,c.default)({initFunc:function(t){return e.browser=t}},this.props)):null}Object.defineProperty(t,"__esModule",{value:!0});var s=a(23),o=n(s),l=a(0),c=n(l);t.renderLevelCmps=r,t.renderBrowser=i;var d=a(18),u=n(d),h=a(49),p=n(h),f=a(1195),m=n(f),g=a(1196),y=n(g),v=a(366),b=n(v),k=a(367),C=n(k),S=a(368),w=n(S),_=a(369),D=n(_),I=a(371),E=n(I),T=a(372),P=n(T),A=a(35),K=n(A),R=a(373),x=n(R),M=a(1018),L=a(17),N=a(308)},1195:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getUrl=void 0;var r,i,s=a(6),o=n(s),l=a(2),c=n(l),d=a(3),u=n(d),h=a(4),p=n(h),f=a(5),m=n(f),g=a(0),y=n(g),v=a(1),b=n(v),k=a(8),C=a(18),S=n(C),w=a(64),_=n(w),D=a(32),I=n(D),E=a(86),T=n(E),P=a(26),A=n(P),K=a(35),R=n(K),x=a(326),M=n(x),L=a(317),N=n(L),O=a(54),B=n(O),F=a(197),W=n(F),H=a(10),z=n(H),q=z.default.getLabel,V=t.getUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e.props,n=e.state,r={},i=a.dataURL;if((0,S.default)(a.dataParams)||(r=a.dataParams),!(0,S.default)(a.tabs)){var s={};s=a.tabs.filter(function(e){return e.key==n.activeKey})[0],t&&a.tabs.forEach(function(t){t.isSearch&&(s=t,e.setState({activeKey:t.key}))}),s&&s.url&&(i=s.url),s&&!(0,S.default)(s.dataParams)&&(r=(0,y.default)({},r,s.dataParams))}return{url:i,params:r}},j={checkedKeys:[],checkedDatas:[],expandedKeys:[],inputValue:"",loading:!1},U=(i=r=function(e){function t(e){(0,c.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.onCustomClick=function(e){if(e&&e.preventDefault(),a.props.memorise){var t=a.state,n=t.searchKeys,r=t.selectedData;a.onInputClick(n,r)}else a.onInputClick()},a.state={selectedData:{},searchKeys:[],inputValue:"",hiddenIds:"",checkedDatas:[],loading:!0,loadAll:!1,displayType:"tree",visible:!1,dropMenuValue:"",dropMenuObj:{},dropMenuData:[],expandedKeys:[],checkedKeys:[],datas:[],activeKey:e.tabs&&e.tabs[0].key||"1"},["onInputChangeHandler","onInputClick","handleOk","handleClear","handleCancel","changeTab","onDropMenuSelect","onSearchChange"].forEach(function(e){a[e]=a[e].bind(a)}),a}return(0,m.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){(0,S.default)(this.props.replaceDatas)||this.replaceSearchValues(this.props.replaceDatas),this.props.initFunc&&this.props.initFunc(this)}},{key:"componentWillReceiveProps",value:function(e){this.props.value!==e.value&&(0,S.default)(e.value)&&this.handleClear(),(0,I.default)(this.props.replaceDatas,e.replaceDatas)||this.replaceSearchValues(e.replaceDatas),"valueObj"in e&&e.valueObj&&this.replaceSearchValues(e.valueObj||[])}},{key:"formatDropMenuDatas",value:function(e){var t=this.state.dropMenuValue||R.default.getSelectDefaultValue(e.options)||e.options[0].key,a=[],n=e.options[0];e.options&&e.options.forEach(function(t){t.companyid=t.key,t.name=t.name||t.showname,e.selected==t.key&&(n=t),a.push(t)}),this.setState({dropMenuValue:t,dropMenuData:a,dropMenuObj:n})}},{key:"getData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setState({loading:!0});var n=V(this,t);R.default.callApi(n.url,"GET",(0,y.default)({},n.params,a)).then(function(t){3==t.type&&(e.formatDropMenuDatas(t.selectDatas),(0,S.default)(t.datas)||e.setState({displayType:"tree",datas:t.datas,loadAll:t.isLoadAll,loading:!1}))}).then(function(){})}},{key:"changeTab",value:function(e){var t=this;this.setState({activeKey:e,checkedKeys:[],checkedDatas:[],expandedKeys:[],inputValue:""},function(){t.getData()})}},{key:"onDropMenuSelect",value:function(e){var t=this,a=this.state.dropMenuData.find(function(t){return t.key===e.key})||{};this.setState({dropMenuValue:e.key,checkedKeys:[],checkedDatas:[],expandedKeys:[],inputValue:"",dropMenuObj:a},function(){t.getData(!1,{key:e.key})})}},{key:"onSearchChange",value:function(e){var t=[];t[this.props.quickSearchName]=e,t.key=this.state.dropMenuValue,this.getData(!0,t),this.setState({checkedKeys:[],checkedDatas:[],expandedKeys:[],inputValue:e})}},{key:"closeModal",value:function(){this.setState({visible:!1})}},{key:"openModal",value:function(){this.onCustomClick()}},{key:"showModal",value:function(){this.setState({visible:!0}),this.props.onOpen&&this.props.onOpen()}},{key:"onInputClick",value:function(){this.setState(j),this.showModal(),this.getData()}},{key:"handleOk",value:function(){var e=this.state.checkedDatas,t=[],a={};!(0,S.default)(e)&&e.forEach(function(e){t.push(e.id),a[e.id]=e}),this.setState({visible:!1,searchKeys:t,selectedData:a}),this.props.onClose&&this.props.onClose(),this.throwCurrentState(t.join(this.delimiter),e)}},{key:"handleCancel",value:function(){this.setState({visible:!1}),this.props.onClose&&this.props.onClose()}},{key:"handleClear",value:function(){this.setState({checkedDatas:[],visible:!1,selectedData:{},searchKeys:[]}),this.refs.associativeInput.clear(),this.throwCurrentState(""),this.props.onClose&&this.props.onClose()}},{key:"replaceSearchValues",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],a={};e.forEach(function(e){e&&(t.push(e.id),a[e.id]=e)}),this.setState({searchKeys:t,selectedData:a});var n=(0,_.default)(t).join(this.delimiter);this.setState({hiddenIds:n})}},{key:"onInputChangeHandler",value:function(e,t){this.setState({searchKeys:e,selectedData:t});var a=[];(0,S.default)(e)||e.forEach(function(e){a.push(t[e])}),this.throwCurrentState(e.join(this.delimiter),a)}},{key:"count",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=0,n=[];return e.forEach(function(e){n.push(e.id)}),a+=(0,_.default)(n).length,t?a:a>0?"("+a+")":""}},{key:"throwCurrentState",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.setState({hiddenIds:e});var n=[];a.map(function(e){return n.push(e.name),e.dropMenuValue=t.state.dropMenuValue,e.dropMenuUrl=t.state.dropMenuObj.url,e.activeKey=t.state.activeKey,e}),this.props.onChange&&this.props.onChange(e,n.join(this.delimiter),a)}},{key:"getFooter",value:function(){var e=this.props,t=this.state;return e.buttons||[b.default.createElement(k.Button,{key:"submit",type:"primary",onClick:this.handleOk,disabled:0==this.count(t.checkedDatas,!0)},q("385565","确 定"),this.count(t.checkedDatas)),b.default.createElement(k.Button,{key:"clear",type:"ghost",onClick:this.handleClear},q("385566","清 除")),b.default.createElement(k.Button,{key:"back",type:"ghost",onClick:this.handleCancel},q("385567","取 消"))]}},{key:"getTabs",value:function(){var e=this.props,t=this.state,a=[];return e.tabs&&e.tabs.forEach(function(e){e.title=e.title||e.name,a.push(e)}),b.default.createElement(W.default,{datas:a,searchsBaseValue:t.inputValue,selectedKey:t.activeKey,searchType:"base",keyParam:"key",onChange:this.changeTab,onSearchChange:this.onSearchChange})}},{key:"render",value:function(){var e=this,t=this.props,a=this.state,n=b.default.createElement(T.default,(0,y.default)({},this.props,{ref:"associativeInput",style:t.inputStyle,datas:a.selectedData,selectedValues:a.searchKeys,type:t.type,clickCallback:this.onInputClick,onChange:this.onInputChangeHandler})),r=t.contentHeight-46,i=n;return t.customized&&(i=b.default.createElement("div",{className:"cursor-pointer",onClick:this.onCustomClick},this.props.children)),b.default.createElement("div",null,i,b.default.createElement(B.default,(0,y.default)({},this.props,{height:579,style:t.modalStyle,title:t.title,visible:a.visible,buttons:this.getFooter(),maskClosable:!1,hasScroll:!1,onCancel:this.handleCancel}),this.getTabs(),b.default.createElement(k.Spin,{spinning:a.loading},b.default.createElement(M.default,{value:a.dropMenuValue,dropMenu:a.dropMenuData,onSelect:this.onDropMenuSelect}),"tree"==a.displayType&&b.default.createElement(A.default,{height:r},b.default.createElement(N.default,{checkable:!0,showCheckStrictly:!0,datas:a.datas,checkStrictlyTitle:t.checkStrictlyTitle,loadAll:a.loadAll,onCheck:function(t,a,n){return e.setState({checkedKeys:(0,S.default)(a)?t:a,checkedDatas:n})},checkedKeys:a.checkedKeys,expandedKeys:a.expandedKeys,onExpand:function(t,a){return e.setState({expandedKeys:(0,S.default)(a)?t:a})}})))))}}]),t}(b.default.Component),r.defaultProps={tabs:[{name:q("22243","文档"),key:"1",dataParams:{sourcetype:"1"}},{name:q("30045","流程"),key:"2",dataParams:{sourcetype:"2"}},{name:q("136","客户"),key:"3",dataParams:{sourcetype:"3"}},{name:q("101","项目"),key:"4",dataParams:{sourcetype:"4"}}],quickSearchName:"name"},i);t.default=U},1196:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(36),i=n(r),s=a(0),o=n(s),l=a(6),c=n(l),d=a(2),u=n(d),h=a(3),p=n(h),f=a(4),m=n(f),g=a(5),y=n(g),v=a(1),b=n(v),k=a(194),C=n(k),S=a(8),w=a(18),_=n(w),D=a(56),I=n(D),E=a(41),T=n(E),P=a(32),A=n(P),K=a(35),R=n(K),x=a(138),M=n(x),L=a(26),N=n(L),O=a(10),B=n(O),F=a(54),W=n(F),H=a(356),z=n(H),q=a(197),V=n(q),j=a(357),U=n(j),G=B.default.getLabel,$=function(e){function t(e){(0,u.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return a.defaultProps={browserTypeParams:{}},a.showSettingPanel=function(){var e=a.props.browserTypeParams;R.default.callApi("/api/common/browserType/getBrowerTypeDetailType","get",e).then(function(t){if(t.hasRight){var n=t.datas,r=t.types;return a.setState({visibleSetting:!0,detailType:n||[],selectType:r||[]}),R.default.callApi("/api/common/browserType/getBrowserType","get",e)}return null}).then(function(e){e&&e.datas&&a.setState({browserType:e.datas||[]})})},a.onSave=function(){var e=a.props.browserTypeParams,t=a.state,n=t.selectedKey,r=t.browserType,s=t.detailType,l=function(e){var t=e.api_status,n=e.msg;t?R.default.callApi(a.props.dataURL).then(function(e){a.setState({datas:e.groups,visibleSetting:!1,saving:!1,detailType:[],selectType:[],selectedKey:0}),S.message.success(n)}):S.message.error(n)};if(1==n){a.refs.tableEditable.doValidate().pass&&(a.setState({saving:!0}),R.default.callApi("/api/common/browserType/updateBrowserType","POST",(0,o.default)({},e,{datas:(0,i.default)(r)})).then(l))}else a.setState({saving:!0}),R.default.callApi("/api/common/browserType/updateBrowerTypeDetail","POST",(0,o.default)({},e,{datas:(0,i.default)(s)})).then(l)},a.state={id:"",name:"",url:e.dataUrl,isClearData:!1,visible:!1,headerId:"all",datas:[],panelStyle:{},selectedKey:0,browserType:[],detailType:[],selectType:[],selectedKeys:[],saving:!1},!(0,_.default)(a.props.replaceDatas)&&a.props.replaceDatas[0]&&(a.state.id=(0,I.default)(a.props.replaceDatas[0].id),a.state.name=a.props.replaceDatas[0].name),a.selectedSearch=a.selectedSearch.bind(a),a.props.initFunc&&a.props.initFunc(a),a}return(0,y.default)(t,e),(0,p.default)(t,[{key:"openModal",value:function(){var e=this;this.setState({visible:!0},function(){e.setPosition()})}},{key:"closeModal",value:function(){this.setState({visible:!1,panelStyle:{}})}},{key:"setPosition",value:function(){var e=(0,C.default)(this.refs.wrapper)[0].getBoundingClientRect(),t=R.default.WindowFunc.getTop().document,a={opacity:1,left:e.left},n=e.top+35,r=t.body.clientHeight,i=this.refs.panel?this.refs.panel.clientHeight:260;n>r-i&&(n=e.top-i-10),n<0&&(n=0),a.top=n,e.left+500>t.documentElement.clientWidth&&(a.width=t.documentElement.clientWidth-e.left),this.setState({panelStyle:a})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.dataURL;R.default.callApi(t).then(function(t){e.setState({datas:t.groups})})}},{key:"componentWillReceiveProps",value:function(e){if("value"in e&&this.state.id!==e.value&&this.setState({id:e.value}),"valueSpan"in e&&this.state.name!==e.valueSpan&&this.setState({id:e.valueSpan}),"replaceDatas"in e&&!(0,A.default)(this.props.replaceDatas,e.replaceDatas)){var t="",a="";!(0,_.default)(e.replaceDatas)&&e.replaceDatas[0]&&(a=e.replaceDatas[0].name,t=(0,I.default)(e.replaceDatas[0].id)),this.setState({id:t,name:a})}}},{key:"selectedSearch",value:function(e,t,a){this.setState({id:e,name:t}),this.throwCurrentState(e,t,a)}},{key:"throwCurrentState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],a=arguments[2],n=[];(e||t)&&n.push({id:e.toString(),name:t}),this.props.onChange&&this.props.onChange(e.toString(),t,a||n)}},{key:"onHeaderClick",value:function(e){this.state.headerId!==e&&(this.setState({headerId:e}),this.refs.scroll.scroll(0))}},{key:"onClick",value:function(e,t){this.setState({id:e,name:t,visible:!1,panelStyle:{}}),this.throwCurrentState(e,t)}},{key:"renderAsssosiate",value:function(){var e=this,t=this.props.type,a=this.state,n=a.id,r=a.name,i=a.visible;return b.default.createElement(M.default,(0,o.default)({},this.props,{ecId:this.props.ecId+"_WeaAssociativeSearch@g7j97q",isCity:!0,style:this.props.inputStyle,type:t,ids:n,names:r,modalVisable:i,clickCallback:function(){var t=!e.state.visible;e.setState({visible:t,panelStyle:{},headerId:"all"},function(){t&&e.setPosition()})},onChange:this.selectedSearch}))}},{key:"renderPanel",value:function(){var e=this,t=this.state,a=t.datas,n=t.headerId,r=t.id,i=t.panelStyle,s=t.visibleSetting,o=(0,T.default)(a);return"all"===n||(0,_.default)(o)||(o=o.filter(function(e){return e.groupid===n})),b.default.createElement("div",{className:"wea-type-list-panel wdb "+(s?"showDialog":""),style:i,ref:"panel"},b.default.createElement("i",{ecId:this.props.ecId+"_i@dace8a",className:"cursor-pointer icon-coms-Flow-setting",onClick:this.showSettingPanel}),b.default.createElement("div",{className:"wea-type-list-header"},b.default.createElement("span",{ecId:this.props.ecId+"_span@8v9e34",className:"cursor-pointer list-item "+("all"===n?"active":""),onClick:function(){return e.onHeaderClick("all")}},G("21979","全部类型")),a&&a.map(function(t,a){return b.default.createElement("span",{ecId:e.props.ecId+"_span@iil8jt@"+a,className:"cursor-pointer list-item "+(n===t.groupid?"active":""),onClick:function(){return e.onHeaderClick(t.groupid)}},t.groupname)})),b.default.createElement(N.default,{className:"wea-type-list-content",height:200,ecId:this.props.ecId+"_WeaNewScroll@jebkli",ref:"scroll"},o&&o.map(function(t,a){return b.default.createElement(S.Row,{ecId:e.props.ecId+"_Row@38u001@"+a,className:"wea-type-list-content-item"},b.default.createElement(S.Col,{ecId:e.props.ecId+"_Col@28e787@"+a,className:"wea-type-list-content-item-left",span:4},t.groupname),b.default.createElement(S.Col,{ecId:e.props.ecId+"_Col@qq1shs@"+a,span:20},t.items&&t.items.map(function(a,n){return b.default.createElement("span",null,b.default.createElement("span",{ecId:e.props.ecId+"_span@w83m40@"+n,className:"cursor-pointer list-item "+(r===a.key?"active":""),onClick:function(){return e.onClick(a.key,a.value)}},a.value),t.items.length-1!==n&&b.default.createElement("span",{className:"splite"},"|"))})))})))}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.visibleSetting,r=t.selectedKey,i=t.detailType,s=t.selectType,l=t.browserType,c=t.selectedKeys,d=t.saving,u=this.props,h=u.mask,p=u.hideSearch,f=void 0!==p&&p,m=1==r?[{title:G("33439","名称"),dataIndex:"labelName",key:"labelName",com:[{type:"INPUT",style:{width:200},key:"labelName",viewAttr:3,isBase64:!0,inputType:"multilang",maxLength:20}],width:"65%"},{title:G("18096","禁用"),dataIndex:"useable",showCheckAll:!0,width:"20%",com:[{type:"CHECKBOX",key:"useable"}]}]:[{title:G("505266","浏览类型名称"),dataIndex:"labelName",width:"40%",com:[{type:"INPUT",key:"labelName",viewAttr:1}]},{title:G("455","分类"),dataIndex:"typeId",width:"40%",com:[{type:"SELECT",key:"typeId",style:{width:200},options:s}]},{title:G("18096","禁用"),dataIndex:"useable",showCheckAll:!0,width:"20%",com:[{type:"CHECKBOX",key:"useable"}]}],g=1==r?l:i,y=[{title:G("16490","分类设置"),viewcondition:0},{title:G("16493","类别设置"),viewcondition:1}],v=1==r?[b.default.createElement(z.default,{ecId:this.props.ecId+"_WeaButtonIcon@k6m0h3",buttonType:"add",type:"primary",onClick:function(){return e.refs.tableEditable.doAdd()}}),b.default.createElement(z.default,{ecId:this.props.ecId+"_WeaButtonIcon@cacugc",buttonType:"del",type:"primary",onClick:function(){return e.refs.tableEditable.doDelete()},disabled:0==c.length})]:[];return b.default.createElement("div",{className:"wea-type-list",ref:"wrapper"},!f&&this.renderAsssosiate(),a&&this.renderPanel(),h&&b.default.createElement("div",{ecId:this.props.ecId+"_div@ls1ptq",className:"wea-mask-dark",style:{display:a?"block":"none",position:"fixed"},onClick:function(){return e.setState({visible:!1})}}),b.default.createElement(W.default,{ecId:this.props.ecId+"_WeaDialog@0i961z",title:G("16493","类别设置"),visible:n,buttons:[b.default.createElement(S.Button,{ecId:this.props.ecId+"_Button@b69dyo",type:"primary",onClick:this.onSave,loading:d,disabled:d},G("30986","保存"))],onCancel:function(){return e.setState({visibleSetting:!1})},style:{width:800,height:600}},b.default.createElement(V.default,{ecId:this.props.ecId+"_WeaTab@c6vh7t",datas:y,buttons:v,keyParam:"viewcondition",selectedKey:r,onChange:function(t){return e.setState({selectedKey:t})}}),b.default.createElement(U.default,{ecId:this.props.ecId+"_WeaTableEditable@q1cqa5",ref:"tableEditable",draggable:1==r,columns:m,datas:g,deleteConfirm:!0,showTitle:!1,tableProps:{scroll:{y:505}},validator:1==r?{rules:{labelName:"required"}}:{},onChange:function(t){t=t.map(function(e,t){var a=(0,o.default)({},e,{labelName:e.labelName||"",useable:e.useable||"0"});return 1==r&&(a=(0,o.default)({},a,{orderid:t+1,changeable:a.changeable||"1"})),a});var a={};a=1==r?(0,o.default)({},a,{browserType:t}):(0,o.default)({},a,{detailType:t}),e.setState(a)},onRowSelect:function(t){return e.setState({selectedKeys:t})},getRowSelection:1==r?function(e){var t=(0,o.default)({},e);return t.getCheckboxProps=function(e){return{disabled:0==e.changeable}},t}:function(){}})))}}]),t}(b.default.Component);t.default=$},1297:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,o.default)({},e),a=t,n=a.type,r=a.isSingle,s=a.isMultCheckbox;return t.associativeValueWrap="valueWrap"in t?t.valueWrap:(0,v.getValueWarp)(t),t.pageSize=Number(t.pageSize>0?t.pageSize:(0,v.getPageSize)(t)),t.selectedAllMaxLength=Number(t.selectedAllMaxLength>0?t.selectedAllMaxLength:(0,v.getSelectAllMaxSize)(t)),t.key=t.key||t.type,r&&(s&&(t.isMultCheckbox=!1),16==n&&(t.addSelect=!0),"hasAdvanceSearch"in t?t.hasAdvanceSearch=t.hasAdvanceSearch:"hasAdvanceSerach"in t&&(t.hasAdvanceSearch=t.hasAdvanceSerach)),r||(142==n&&(t.hasAdvanceSearch=!0),t.hasAdvanceSearch=!t.hideAdvanceSearch),1!=n&&17!=n||(t=i(t)),-1!==k.findIndex(function(e){return e==n})&&(t.isOrgInfo=!0,t.dropMenuKey="virtualCompanyid",t.handleTypes="org"),165!=n&&166!=n||(t.handleTypes="dece_hrm",t.isLoadUser=!0),-1===k.findIndex(function(e){return e==n})&&165!=n&&166!=n||(t._tabs=[{key:"2",browserProps:{displaySearchAd:!1}}]),142==n&&(t.handleTypes="normal",t.defaultCheckStrictly=!1,t.checkStrictlyKey="checkStrictly"),"systempage"==n&&(t.defaultCheckStrictly=!1,t.dropMenuKey="key"),152!=n&&171!=n||(t.addSelect=!0),161!=n&&162!=n||(t.displaySearchAdInBar=!0),226!=n&&227!=n||(t.disabledConditionCache=!0,t.enableSearchValid=!0),t}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,o.default)({},e),a=t.type;return t.handleTypes="hrm",t.displayType="list",t.dropMenuKey="virtualtype",t.showAccount="isNoAccount",t.showCheckStrictly=!0,t.hasAdvanceSearch=!0,t.destUrl="/api/public/browser/data/",t.destDataParams=(0,d.default)({},t.dataParams||{},t.destDataParams),t.virtualUrl="/api/public/browser/data/"+a,t.virtualParams=(0,d.default)({},t.virtualParams,{cmd:"companyvirtual"}),t.defaultCheckStrictly=!1,t.searchParams=(0,d.default)({},t.searchParams,{cmd:"search"}),t.searchAtTab="",t.hideVirtualOrg=!0,t.onOkClick=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length>0){var t="/api/public/browser/data/"+a,n={cmd:"addList",ids:e.join(",")};p.default.callApi(t,(0,v.getMethod)(t,n),n)}},(0,m.default)(t.tabs)&&(t.tabs=[{name:b(24515,"最近"),key:"1"},{name:b(18511,"同部门"),key:"2"},{name:b(15089,"我的下属"),key:"3"},{name:b(18770,"按组织结构"),key:"4"},{name:b(81554,"常用组"),key:"5"}]),t._tabs=[{key:"1",dataParams:{cmd:"newly"},browserProps:{showAccount:!1}},{key:"2",dataParams:{cmd:"underling"},browserProps:{hideVirtualOrg:!1}},{key:"3",dataParams:{cmd:"branch"},browserProps:{showCheckStrictly:!1,hideVirtualOrg:!1,showAllbranch:"alllevel"}},{key:"4",dataParams:{cmd:"v2resourcetree"},browserProps:{displayType:"tree",hideVirtualOrg:!1,showCheckStrictly:!0}},{key:"5",dataParams:{cmd:"v2grouptree"},browserProps:{displayType:"tree",isGroupTree:!0,showCheckStrictly:!0}},{key:"6",hideTab:!0}],t}Object.defineProperty(t,"__esModule",{value:!0}),t.orgInfoArr=void 0;var s=a(0),o=n(s),l=a(19),c=(n(l),a(99)),d=n(c),u=a(24);n(u);t.handleBrowserProps=r;var h=a(35),p=n(h),f=a(18),m=n(f),g=a(10),y=n(g),v=a(308),b=y.default.getLabel,k=t.orgInfoArr=[4,57,167,168,164,194,169,170]},949:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=[];if(e&&e.length>0)for(var a=0;a<e.length;a++){var n=function(a){var n=e[a];if(n){if(n.type=n.type||"resource",n.lastname=n.lastname||n.name||"","all"===n.type)return n.id=n.id||"all_x",n.nodeid="all_x",t=[n],"break";"resource"===n.type?n.nodeid="resource_"+n.id+"x":n.nodeid=n.type+"_"+n.id+"x",t&&!t.some(function(e){return e.nodeid==n.nodeid})&&t.push(n)}}(a);if("break"===n)break}return t}function i(e){var t=e.type,a=e.isSingle,n=e.valueObj,i=e.replaceDatas,s=e.value,o=e.valueSpan,l=[];if(void 0!==n||void 0!==i){try{l=(n||i||[]).filter(function(e){return e&&e.id})}catch(e){console&&console.warn("浏览按钮脏数据: ",e),l=[]}return 1!=t&&17!=t||(l=r(l)),l}if("value"in e&&a){if(s)if(1==t||17==t)l=[{id:s,name:o}];else{var c="";!(0,K.default)(i)&&i[0]&&(c=i[0].orgWholePathspan||i[0].name),l=[{id:s,name:o||c}]}else l=[];return l}}Object.defineProperty(t,"__esModule",{value:!0});var s,o,l=a(0),c=n(l),d=a(6),u=n(d),h=a(2),p=n(h),f=a(3),m=n(f),g=a(4),y=n(g),v=a(5),b=n(v),k=a(1),C=n(k),S=a(28),w=n(S),_=a(35),D=n(_),I=a(9),E=n(I),T=a(14),P=n(T),A=a(18),K=n(A),R=a(32),x=n(R),M=a(1172),L=n(M),N=a(1048),O=n(N),B=a(1028),F=n(B),W=a(1047),H=n(W),z=a(1049),q=n(z),V=a(1050),j=n(V),U=a(325),G=n(U),Q=a(1027),J=n(Q),Y=a(1029),X=n(Y),Z=a(1051),ee=n(Z),te=a(17),ae=a(1018),ne=a(1194),re=a(1297);a(377);var ie=function(){return Math.random().toString(36).substr(2,6)},se=(o=s=function(e){function t(e){(0,p.default)(this,t);var a=(0,y.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.checkUrlOfIframeInDialogCallBackFunction=function(){var e=a.props.onChange,t=w.default.getTop().ecCom?w.default.getTop():window;a.urlOfIframeInDialogKey&&t.ecCom&&t.ecCom.WeaBrowser&&!t.ecCom.WeaBrowser.urlOfIframeInDialogCallBack[a.urlOfIframeInDialogKey]&&(t.ecCom.WeaBrowser.urlOfIframeInDialogCallBack[a.urlOfIframeInDialogKey]=function(t){if(Array.isArray(t)){var n=t.filter(function(e){return e&&e.id});a.set(n),"function"===typeof e&&e(""+n.map(function(e){return e.id}),""+n.map(function(e){return e.name}),n)}return a})},a.searchAdFormCallbackKey=ie(),a.renderLevelCmps=ne.renderLevelCmps.bind(a),a.renderBrowser=ne.renderBrowser.bind(a),a.state={browserloaded:!1,selectOptions:[]},a.urlOfIframeInDialogKey=ie(),a.checkUrlOfIframeInDialogCallBackFunction(),a}return(0,b.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){this.setMinWidth(),"34"==this.props.type&&this.getLevelCmpsDatas(),this.checkUrlOfIframeInDialogCallBackFunction()}},{key:"componentDidUpdate",value:function(){this.checkUrlOfIframeInDialogCallBackFunction()}},{key:"componentWillReceiveProps",value:function(e){this.setMinWidth(e),(0,x.default)(this.props.dataParams,e.dataParams)||"34"!=this.props.type||this.getLevelCmpsDatas(e.dataParams)}},{key:"componentWillUnmount",value:function(){var e=w.default.getTop().ecCom?w.default.getTop():window;this.urlOfIframeInDialogKey&&e.ecCom&&e.ecCom.WeaBrowser&&e.ecCom.WeaBrowser.urlOfIframeInDialogCallBack[this.urlOfIframeInDialogKey]&&(e.ecCom.WeaBrowser.urlOfIframeInDialogCallBack[this.urlOfIframeInDialogKey]=void 0)}},{key:"focus",value:function(){this.browser&&this.browser.focus&&this.browser.focus()}},{key:"set",value:function(e){this.browser&&this.browser.set&&this.browser.set(e)}},{key:"openModal",value:function(){this.browser&&this.browser.openModal&&this.browser.openModal()}},{key:"closeModal",value:function(){this.browser&&this.browser.closeModal&&this.browser.closeModal()}},{key:"get",value:function(){return this.browser&&this.browser.get&&this.browser.get()}},{key:"reload",value:function(){this.browser&&this.browser.reload&&this.browser.reload()}},{key:"getLevelCmpsDatas",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=this.props.dataURL,n=this.props,r=n.dataParams,i=n.type;a=a||"/api/public/browser/data/"+i,a=a+"?"+(0,te.getFd)(t||r),D.default.callApi(a).then(function(t){e.setState({selectOptions:t.datas})}).catch(function(t){return e.props.onError&&e.props.onError(t)})}},{key:"setMinWidth",value:function(e){var t=this;if(e=e||this.props,e.enableInterval&&e.resize&&this.refs.weaBrowser)var a=$(this.refs.weaBrowser),n=setInterval(function(){var e=a.parent().outerWidth();if(e>0){e<112&&(e=112),a.css("max-width",e);var r=210;e<210&&(r=e),1==t.props.isDetail&&(r=e),a.find(".wea-associative-search").filter(":not(.wea-field-readonly)").css("min-width",r-32).css("margin-right",12),a.css("visibility","visible"),a=null,clearInterval(n)}},10)}},{key:"render",value:function(){var e=this,t=this.renderBrowser(),a=this.props,n=a.className,r=a.customized,s=a.fieldName,o=a.viewAttr,l=a.style,d=a.resize,u=a.isDetail,h=a.enableInterval,p=a.beforeHandleBrowser,f=a.afterHandleBrowser,m=(0,P.default)("wea-browser",n,{customized:r,"wea-browser-resize":!h&&d,"wea-browser-detail":!h&&1==u,"wea-field":/^field/.test(s),"wea-field-readonly":"1"==o}),g=void 0,y=void 0;if(t)g=t;else{var v=this.props,b=v.dataURL,k=v.type;if(!this.state.browserloaded){var S=i(this.props)||[],w=S.map(function(e){return e.id||""}).join(",");y=C.default.createElement("input",{type:"hidden",id:s,name:s,value:w,ecId:this.props.ecId+"_input@75n6th"})}var _=(0,c.default)({},ae.defaultProps,{initFunc:function(t){e.setState({browserloaded:!0}),e.browser=t}},this.props,{dataURL:b||"/api/public/browser/data/"+k,searchAdFormCallbackKey:this.searchAdFormCallbackKey,urlOfIframeInDialogKey:this.urlOfIframeInDialogKey,setMinWidth:function(){return e.setMinWidth(e.props)}});"function"===typeof p&&(_=p(_)||_),_=(0,re.handleBrowserProps)(_),"function"===typeof f&&(_=f(_)||_),g=C.default.createElement(L.default,_)}return[C.default.createElement("div",{className:m,style:l,ref:"weaBrowser"},g),y]}}]),t}(C.default.Component),s.defaultProps={enableInterval:!0},s.addGroup=O.default,s.GroupDialog=F.default,s.OGroup=H.default,s.WeaBrowserTable=ee.default,s.WeaBrowserTree=X.default,s.WeaHrmList=q.default,s.WeaSelectedRight=J.default,s.WeaTableLeft=G.default,s.WeaTableSingle=j.default,s.urlOfIframeInDialogCallBack={},o),oe=(0,E.default)(se,"WeaBrowser");t.default=oe}});
//# sourceMappingURL=8.chunk.js.map?v=1018e2bf