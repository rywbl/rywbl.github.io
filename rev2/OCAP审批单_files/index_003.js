!function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("React"),require("mobxReact"),require("ecCom"),require("mobx"),require("comsMobx"),require("antd"),require("ReactDOM"),require("loadjs"),require("ReactRouter")):"function"===typeof define&&define.amd?define(["React","mobxReact","ecCom","mobx","comsMobx","antd","ReactDOM","loadjs","ReactRouter"],t):"object"===typeof exports?exports.weaWorkflowPublic=t(require("React"),require("mobxReact"),require("ecCom"),require("mobx"),require("comsMobx"),require("antd"),require("ReactDOM"),require("loadjs"),require("ReactRouter")):e.weaWorkflowPublic=t(e.React,e.mobxReact,e.ecCom,e.mobx,e.comsMobx,e.antd,e.ReactDOM,e.loadjs,e.ReactRouter)}(this,function(e,t,r,n,o,a,i,s,l){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/spa/workflow/static4public/",t.v="ecologyContentPath",t(t.s=217)}([function(e,t){e.exports=r},function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(13),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,o.default)(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},function(e,t,r){e.exports={default:r(225),__esModule:!0}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(18),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":(0,o.default)(t))&&"function"!==typeof t?e:t}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=r(244),a=n(o),i=r(248),s=n(i),l=r(18),c=n(l);t.default=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":(0,c.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.default?(0,a.default)(e,t):e.__proto__=t)}},function(e,t){e.exports=a},function(e,t){e.exports=n},function(e,t,r){"use strict";t.__esModule=!0;var n=r(138),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}},function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){e.exports=o},function(e,t){var r=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=r)},function(e,t,r){e.exports={default:r(218),__esModule:!0}},function(e,t){var r=Array.isArray;e.exports=r},function(e,t,r){function n(e){if(!a(e))return!1;var t=o(e);return t==s||t==l||t==i||t==c}var o=r(36),a=r(25),i="[object AsyncFunction]",s="[object Function]",l="[object GeneratorFunction]",c="[object Proxy]";e.exports=n},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t,r){var n=r(100)("wks"),o=r(73),a=r(16).Symbol,i="function"==typeof a;(e.exports=function(e){return n[e]||(n[e]=i&&a[e]||(i?a:o)("Symbol."+e))}).store=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=r(227),a=n(o),i=r(235),s=n(i),l="function"===typeof s.default&&"symbol"===typeof a.default?function(e){return typeof e}:function(e){return e&&"function"===typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"===typeof s.default&&"symbol"===l(a.default)?function(e){return"undefined"===typeof e?"undefined":l(e)}:function(e){return e&&"function"===typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":"undefined"===typeof e?"undefined":l(e)}},function(e,t,r){function n(e){return o(e,a|i)}var o=r(336),a=1,i=4;e.exports=n},function(e,t,r){var n=r(16),o=r(12),a=r(46),i=r(37),s=r(38),l=function(e,t,r){var c,u,d,f=e&l.F,p=e&l.G,h=e&l.S,m=e&l.P,v=e&l.B,g=e&l.W,w=p?o:o[t]||(o[t]={}),y=w.prototype,b=p?n:h?n[t]:(n[t]||{}).prototype;p&&(r=t);for(c in r)(u=!f&&b&&void 0!==b[c])&&s(w,c)||(d=u?b[c]:r[c],w[c]=p&&"function"!=typeof b[c]?r[c]:v&&u?a(d,n):g&&b[c]==d?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):m&&"function"==typeof d?a(Function.call,d):d,m&&((w.virtual||(w.virtual={}))[c]=d,e&l.R&&y&&!y[c]&&i(y,c,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t,r){function n(e){if(null==e)return!0;if(l(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||d(e)||i(e)))return!e.length;var t=a(e);if(t==f||t==p)return!e.size;if(u(e))return!o(e).length;for(var r in e)if(m.call(e,r))return!1;return!0}var o=r(108),a=r(50),i=r(59),s=r(14),l=r(29),c=r(60),u=r(77),d=r(79),f="[object Map]",p="[object Set]",h=Object.prototype,m=h.hasOwnProperty;e.exports=n},function(e,t){function r(e){return null!=e&&"object"==typeof e}e.exports=r},function(e,t,r){var n=r(34);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,r){var n=r(148),o="object"==typeof self&&self&&self.Object===Object&&self,a=n||o||Function("return this")();e.exports=a},function(e,t){function r(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=r},function(e,t,r){e.exports={default:r(378),__esModule:!0}},function(e,t,r){var n=r(23),o=r(137),a=r(95),i=Object.defineProperty;t.f=r(28)?Object.defineProperty:function(e,t,r){if(n(e),t=a(t,!0),n(r),o)try{return i(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){e.exports=!r(47)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,r){function n(e){return null!=e&&a(e.length)&&!o(e)}var o=r(15),a=r(110);e.exports=n},function(e,t,r){function n(e,t){return o(e,t)}var o=r(112);e.exports=n},function(e,t,r){"use strict";t.__esModule=!0;var n=r(191),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,o.default)(e)}},function(e,t,r){e.exports={default:r(383),__esModule:!0}},function(e,t,r){!function(e,n){n(t,r(7),r(9),r(387))}(0,function(e,t,r,n){"use strict";function o(e){function r(r,n,o,a,i,s){for(var l=arguments.length,c=Array(l>6?l-6:0),u=6;u<l;u++)c[u-6]=arguments[u];return t.untracked(function(){if(a=a||"<<anonymous>>",s=s||o,null==n[o]){if(r){var t=null===n[o]?"null":"undefined";return new Error("The "+i+" `"+s+"` is marked as required in `"+a+"`, but its value is `"+t+"`.")}return null}return e.apply(void 0,[n,o,a,i,s].concat(c))})}var n=r.bind(null,!1);return n.isRequired=r.bind(null,!0),n}function a(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"===typeof Symbol&&t instanceof Symbol)}function i(e){var t="undefined"===typeof e?"undefined":E(e);return Array.isArray(e)?"array":e instanceof RegExp?"object":a(t,e)?"symbol":t}function s(e){var t=i(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function l(e,r){return o(function(n,o,a,l,c){return t.untracked(function(){if(e&&i(n[o])===r.toLowerCase())return null;var l=void 0;switch(r){case"Array":l=t.isObservableArray;break;case"Object":l=t.isObservableObject;break;case"Map":l=t.isObservableMap;break;default:throw new Error("Unexpected mobxType: "+r)}var u=n[o];if(!l(u)){var d=s(u),f=e?" or javascript `"+r.toLowerCase()+"`":"";return new Error("Invalid prop `"+c+"` of type `"+d+"` supplied to `"+a+"`, expected `mobx.Observable"+r+"`"+f+".")}return null})})}function c(e,r){return o(function(n,o,a,i,s){for(var c=arguments.length,u=Array(c>5?c-5:0),d=5;d<c;d++)u[d-5]=arguments[d];return t.untracked(function(){if("function"!==typeof r)return new Error("Property `"+s+"` of component `"+a+"` has invalid PropType notation.");var t=l(e,"Array")(n,o,a);if(t instanceof Error)return t;for(var c=n[o],d=0;d<c.length;d++)if((t=r.apply(void 0,[c,d,a,i,s+"["+d+"]"].concat(u)))instanceof Error)return t;return null})})}function u(e){return!e.prototype.render}function d(e,t,n){var o,a,i="inject-"+(t.displayName||t.name||t.constructor&&t.constructor.name||"Unknown");n&&(i+="-with-"+n);var s=(a=o=function(r){function n(){var e,t,r,o;I(this,n);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return t=r=x(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(i))),r.storeRef=function(e){r.wrappedInstance=e},o=t,x(r,o)}return R(n,r),C(n,[{key:"render",value:function(){var r={};for(var n in this.props)this.props.hasOwnProperty(n)&&(r[n]=this.props[n]);var o=e(this.context.mobxStores||{},r,this.context)||{};for(var a in o)r[a]=o[a];return u(t)||(r.ref=this.storeRef),S.createElement(t,r)}}]),n}(r.Component),o.displayName=i,a);return z(s,t),s.wrappedComponent=t,Object.defineProperties(s,U),s}function f(e){return function(t,r){return e.forEach(function(e){if(!(e in r)){if(!(e in t))throw new Error("MobX injector: Store '"+e+"' is not available! Make sure it is provided by some Provider");r[e]=t[e]}}),r}}function p(){var e=void 0;if("function"===typeof arguments[0])return e=arguments[0],function(t){var r=d(e,t);return r.isMobxInjector=!1,r=b(r),r.isMobxInjector=!0,r};for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e=f(t),function(r){return d(e,r,t.join("-"))}}function h(e){if(k)try{return k.findDOMNode(e)}catch(e){return null}return null}function m(e){var t=h(e);t&&K&&K.set(t,e),Q.emit({event:"render",renderTime:e.__$mobRenderEnd-e.__$mobRenderStart,totalTime:Date.now()-e.__$mobRenderStart,component:e,node:t})}function v(){if("undefined"===typeof WeakMap)throw new Error("[mobx-react] tracking components is not supported in this browser.");V||(V=!0)}function g(e){G=e}function w(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e[t],o=J[t],a=n?!0===r?function(){o.apply(this,arguments),n.apply(this,arguments)}:function(){n.apply(this,arguments),o.apply(this,arguments)}:o;e[t]=a}function y(e,t){if(null==e||null==t||"object"!==("undefined"===typeof e?"undefined":E(e))||"object"!==("undefined"===typeof t?"undefined":E(t)))return e!==t;var r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(var n=void 0,o=r.length-1;n=r[o];o--)if(t[n]!==e[n])return!0;return!1}function b(e,t){if("string"===typeof e)throw new Error("Store names should be provided as array");if(Array.isArray(e))return H||(H=!0),t?p.apply(null,e)(b(t)):function(t){return b(e,t)};var n=e;if(n.isMobxInjector,"function"===typeof n&&(!n.prototype||!n.prototype.render)&&!n.isReactClass&&!S.Component.isPrototypeOf(n)){var o,a;return b((a=o=function(e){function t(){return I(this,t),x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return R(t,e),C(t,[{key:"render",value:function(){return n.call(this,this.props,this.context)}}]),t}(r.Component),o.displayName=n.displayName||n.name,o.contextTypes=n.contextTypes,o.propTypes=n.propTypes,o.defaultProps=n.defaultProps,a))}if(!n)throw new Error("Please pass a valid component to 'observer'");return _(n.prototype||n),n.isMobXReactObserver=!0,n}function _(e){w(e,"componentWillMount",!0),["componentDidMount","componentWillUnmount","componentDidUpdate"].forEach(function(t){w(e,t)}),e.shouldComponentUpdate||(e.shouldComponentUpdate=J.shouldComponentUpdate)}var S="default"in r?r.default:r,k="default"in n?n.default:n,E="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},C=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),R=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},x=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t},P=function(){function e(){I(this,e),this.listeners=[]}return C(e,[{key:"on",value:function(e){var t=this;return this.listeners.push(e),function(){var r=t.listeners.indexOf(e);-1!==r&&t.listeners.splice(r,1)}}},{key:"emit",value:function(e){this.listeners.forEach(function(t){return t(e)})}}]),e}(),N=l(!1,"Array"),D=c.bind(null,!1),O=l(!1,"Map"),L=l(!1,"Object"),T=l(!0,"Array"),F=c.bind(null,!0),A=l(!0,"Object"),M=Object.freeze({observableArray:N,observableArrayOf:D,observableMap:O,observableObject:L,arrayOrObservableArray:T,arrayOrObservableArrayOf:F,objectOrObservableObject:A}),W={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},j={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},B="function"===typeof Object.getOwnPropertySymbols,z=function(e,t,r){if("string"!==typeof t){var n=Object.getOwnPropertyNames(t);B&&(n=n.concat(Object.getOwnPropertySymbols(t)));for(var o=0;o<n.length;++o)if(!W[n[o]]&&!j[n[o]]&&(!r||!r[n[o]]))try{e[n[o]]=t[n[o]]}catch(e){}}return e},q={mobxStores:A};Object.seal(q);var U={contextTypes:{get:function(){return q},set:function(e){},configurable:!0,enumerable:!1},isMobxInjector:{value:!0,writable:!0,configurable:!0,enumerable:!0}},V=!1,G=!1,H=!1,K="undefined"!==typeof WeakMap?new WeakMap:void 0,Q=new P,$=new P,J={componentWillMount:function(){function e(e){var r=this[e],n=new t.Atom("reactive "+e);Object.defineProperty(this,e,{configurable:!0,enumerable:!0,get:function(){return n.reportObserved(),r},set:function(e){!i&&y(r,e)?(r=e,a=!0,n.reportChanged(),a=!1):r=e}})}var r=this;if(!0!==G){var n=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>",o=this._reactInternalInstance&&this._reactInternalInstance._rootNodeID,a=!1,i=!1;e.call(this,"props"),e.call(this,"state");var s=this.render.bind(this),l=null,c=!1,u=function(){return l=new t.Reaction(n+"#"+o+".render()",function(){if(!c&&(c=!0,"function"===typeof r.componentWillReact&&r.componentWillReact(),!0!==r.__$mobxIsUnmounted)){var e=!0;try{i=!0,a||S.Component.prototype.forceUpdate.call(r),e=!1}finally{i=!1,e&&l.dispose()}}}),d.$mobx=l,r.render=d,d()},d=function(){c=!1;var e=void 0,n=void 0;if(l.track(function(){V&&(r.__$mobRenderStart=Date.now());try{n=t.extras.allowStateChanges(!1,s)}catch(t){e=t}V&&(r.__$mobRenderEnd=Date.now())}),e)throw $.emit(e),e;return n};this.render=u}},componentWillUnmount:function(){if(!0!==G&&(this.render.$mobx&&this.render.$mobx.dispose(),this.__$mobxIsUnmounted=!0,V)){var e=h(this);e&&K&&K.delete(e),Q.emit({event:"destroy",component:this,node:e})}},componentDidMount:function(){V&&m(this)},componentDidUpdate:function(){V&&m(this)},shouldComponentUpdate:function(e,t){return this.state!==t||y(this.props,e)}},Y=b(function(e){return(0,e.children)()});Y.propTypes={children:function(e,t,r,n,o){if("function"!==typeof e[t])return new Error("Invalid prop `"+o+"` of type `"+E(e[t])+"` supplied to `"+r+"`, expected `function`.")}};var X,Z,ee={children:!0,key:!0,ref:!0},te=(Z=X=function(e){function t(){return I(this,t),x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return R(t,e),C(t,[{key:"render",value:function(){return S.Children.only(this.props.children)}},{key:"getChildContext",value:function(){var e={},t=this.context.mobxStores;if(t)for(var r in t)e[r]=t[r];for(var n in this.props)ee[n]||"suppressChangedStoreWarning"===n||(e[n]=this.props[n]);return{mobxStores:e}}},{key:"componentWillReceiveProps",value:function(e){if(Object.keys(e).length,Object.keys(this.props).length,!e.suppressChangedStoreWarning)for(var t in e)!ee[t]&&(this.props[t],e[t])}}]),t}(r.Component),X.contextTypes={mobxStores:A},X.childContextTypes={mobxStores:A.isRequired},Z),re=void 0;if(re="mobx-react",!t)throw new Error(re+" requires the MobX package");if(!S)throw new Error(re+" requires React to be available");"function"===typeof n.unstable_batchedUpdates&&t.extras.setReactionScheduler(n.unstable_batchedUpdates);var ne=function(e){return $.on(e)};"object"===("undefined"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__?"undefined":E(__MOBX_DEVTOOLS_GLOBAL_HOOK__))&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobxReact(e,t),e.propTypes=M,e.PropTypes=M,e.onError=ne,e.default=e,e.observer=b,e.Observer=Y,e.renderReporter=Q,e.componentByNodeRegistery=K,e.trackComponents=v,e.useStaticRendering=g,e.Provider=te,e.inject=p,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModifySecretLevel=t.saveMobileSignAnnex=t.updateReqInfo=t.wfCenterSubmit=t.getRightMenu=t.getReqBaseParams=t.updateUserTxStatus=t.updateRequestLogPageSize=t.getRequestLogList=t.getRequestLogBaseInfo=t.getLogAllReceiveUser=t.getFormResourcesKey=t.getModifyLog=void 0;var n=r(0);t.getModifyLog=function(e){return n.WeaTools.callApi("/api/workflow/reqform/getModifyLog","POST",e)},t.getFormResourcesKey=function(e){return n.WeaTools.callApi("/api/workflow/reqform/resources","GET",e)},t.getLogAllReceiveUser=function(e){return n.WeaTools.callApi("/api/workflow/reqform/getLogAllReceiveUser","GET",e)},t.getRequestLogBaseInfo=function(e){return n.WeaTools.callApi("/api/workflow/reqform/getRequestLogBaseInfo","POST",e)},t.getRequestLogList=function(e){return n.WeaTools.callApi("/api/workflow/reqform/getRequestLogList","POST",e)},t.updateRequestLogPageSize=function(e){return n.WeaTools.callApi("/api/workflow/reqform/updateRequestLogPageSize","POST",e)},t.updateUserTxStatus=function(e){return n.WeaTools.callApi("/api/workflow/reqform/updateUserTxStatus","POST",e)},t.getReqBaseParams=function(e){return n.WeaTools.callApi("/api/workflow/wfcenter/getReqBaseParams","GET",e)},t.getRightMenu=function(e){return n.WeaTools.callApi("/api/workflow/reqform/rightMenu","POST",e)},t.wfCenterSubmit=function(e){var t=e.actiontype,r=void 0===t?"":t;return"doSupervise"===r?(e.requestids=e.requestid,n.WeaTools.callApi("/api/workflow/supervise/doSupervise","POST",e)):n.WeaTools.callApi("/api/workflow/reqform/"+r,"POST",e)},t.updateReqInfo=function(e){return n.WeaTools.callApi("/api/workflow/reqform/updateReqInfo","POST",e)},t.saveMobileSignAnnex=function(e){return n.WeaTools.callApi("/api/workflow/reqform/saveMobileSignAnnex","POST",e)},t.ModifySecretLevel=function(e){return n.WeaTools.callApi("/api/doc/upload/ModifySecretLevel ","POST",e)}},function(e,t,r){function n(e){return null==e?void 0===e?l:s:c&&c in Object(e)?a(e):i(e)}var o=r(51),a=r(259),i=r(260),s="[object Null]",l="[object Undefined]",c=o?o.toStringTag:void 0;e.exports=n},function(e,t,r){var n=r(27),o=r(54);e.exports=r(28)?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){var n=r(140),o=r(96);e.exports=function(e){return n(o(e))}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.concat=t.findIndex=t.dropWhile=t.includes=t.cloneDeep=t.merge=t.forIn=t.indexOf=t.size=t.get=t.has=t.isEqual=t.trim=t.isEmpty=void 0;var o=r(21),a=n(o),i=r(42),s=n(i),l=r(30),c=n(l),u=r(307),d=n(u),f=r(167),p=n(f),h=r(312),m=n(h),v=r(316),g=n(v),w=r(172),y=n(w),b=r(322),_=n(b),S=r(19),k=n(S),E=r(124),I=n(E),C=r(125),R=n(C),x=r(126),P=n(x),N=r(89),D=n(N);t.isEmpty=a.default,t.trim=s.default,t.isEqual=c.default,t.has=d.default,t.get=p.default,t.size=m.default,t.indexOf=g.default,t.forIn=y.default,t.merge=_.default,t.cloneDeep=k.default,t.includes=I.default,t.dropWhile=R.default,t.findIndex=P.default,t.concat=D.default},function(e,t,r){function n(e,t){var r=a(e,t);return o(r)?r:void 0}var o=r(258),a=r(263);e.exports=n},function(e,t,r){function n(e,t,r){if((e=c(e))&&(r||void 0===t))return e.replace(u,"");if(!e||!(t=o(t)))return e;var n=l(e),d=l(t),f=s(n,d),p=i(n,d)+1;return a(n,f,p).join("")}var o=r(152),a=r(269),i=r(270),s=r(273),l=r(274),c=r(81),u=/^\s+|\s+$/g;e.exports=n},function(e,t){},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLocationInfoData=t.appendDefaultSytle=t.realLength=t.chekcremark=t.convertSpecialChar=void 0;var n=r(42),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.convertSpecialChar=function(e){return e=e.toString(),e=e.replace(/<br>/gi,"\n"),e=e.replace(/&nbsp;/gi," "),e=e.replace(/&lt;/gi,"<"),e=e.replace(/&gt;/gi,">"),e=e.replace(/&quot;/gi,'"'),e=e.replace(/&amp;/gi,"&")},t.chekcremark=function(e,t){var r=!0,n=t.signworkflowids,a=void 0===n?"":n,i=t.signdocids,s=void 0===i?"":i,l=t.handWrittenSign,c=void 0===l?0:l;if(a.length>0||s.length>0||t["field-annexupload"].length>0||c>0);else if(null==e)r=!1;else{var u=e;u=u.replace(/<p>/gi,"").replace(/<\/p>/gi,"").replace(/ /gi,"").replace(/&nbsp;/gi,"").replace(/<br \/>/gi,""),u=u.replace(/\\n/gi,""),0===(0,o.default)(u).length&&(r=!1)}return r},t.realLength=function(e){for(var t=0,r=0;r<=e.length-1;r++)t+=1,e.charCodeAt(r)>127&&(t+=2);return t},t.appendDefaultSytle=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(e){if(new RegExp(/^<div id=\"wea_rich_text_default_font\"[^>]+\>/).test(e))return e;var o="";t&&t.indexOf("/")>-1&&(o+="font-family:"+t.split("/")[1]+";"),r&&r.indexOf("/")>-1&&(o+="font-size:"+r.split("/")[1]+";"),o&&(e=1==n?'<span id="wea_rich_text_default_font" style="'+o+'">'+e+"</span>":'<div id="wea_rich_text_default_font" style="'+o+'">'+e+"</div>")}return e},t.getLocationInfoData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={};if(e){var r=e.split(",");4===r.length&&(t.longitude=r[1],t.latitude=r[2],t.name=r[3]),3===r.length&&(t.longitude=r[0],t.latitude=r[1],t.name=r[2])}return t}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.doConfirm=t.onCheck=t.createMarkMenu=t.isColorDark=t.createAttachLi=t.imgZoom=t.dateFormat=t.createReplyBottomAtt=t.getViewCoworkOfFloorNnmUrl=t.getViewCoworkUrl=t.getSearchs=t.getNewFiels=void 0;var o=r(18),a=n(o),i=r(21),s=n(i),l=r(6),c=r(0),u=r(11),d=(r(7),c.WeaLocaleProvider.getLabel);t.getNewFiels=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};if(!(0,s.default)(e))for(var r in e)t[e[r].name]=e[r].value;return t},t.getSearchs=function(e,t){var r=e.isFormInit,n=[],o=e.getFormParams();return r&&t&&t.map(function(t,r){var i=[];t.items.map(function(t){var r="object"===(0,a.default)(t.domkey)?t.domkey[0]:t.domkey;i.push({com:React.createElement(c.WeaFormItem,{ecId:"_WeaFormItem@pbvv3p@"+r,label:""+t.label,labelCol:{span:""+t.labelcol},wrapperCol:{span:""+t.fieldcol}},React.createElement(u.WeaSwitch,{ecId:"_WeaSwitch@nioprs@"+r,fieldConfig:t,form:e,formParams:o})),colSpan:1})}),n.push(React.createElement(c.WeaSearchGroup,{ecId:"_WeaSearchGroup@tcq3ip@"+r,needTigger:!0,title:t.title,showGroup:t.defaultshow,items:i}))}),n},t.getViewCoworkUrl=function(e){return"/spa/cowork/static/index.html#/cowork/"+e},t.getViewCoworkOfFloorNnmUrl=function(e,t){return"/spa/cowork/static/index.html#/cowork/"+e+"/"+t},t.createReplyBottomAtt=function(e,t,r,n){return t&&0!=t.length?React.createElement("div",{className:"cowork-att-list"},React.createElement("div",{className:"cowork-att-content"},"doc"===n&&React.createElement("div",{className:"icon-search-File content-icon"}),"wf"===n&&React.createElement("div",{className:"icon-coms-Workflow-o content-icon"}),"crm"===n&&React.createElement("div",{className:"icon-coms-currency-Customer content-icon"}),"project"===n&&React.createElement("div",{className:"icon-coms-task-list content-icon"}),"task"===n&&React.createElement("div",{className:"icon-coms-currency-Task content-icon"}),"acc"===n&&React.createElement("div",{className:"icon-coms-currency-Enclosure content-icon"}),React.createElement("ul",null,t.map(function(e,t){return"acc"!==n?React.createElement("li",null,React.createElement("a",{href:e.url,target:"_blank"},e.name)):React.createElement("li",{className:"workflow-accessory"},React.createElement("div",{className:"workflow-accessory-item"},React.createElement("a",{className:"item-a",onClick:function(){return window.open(e.url)},title:e.name},e.name),React.createElement("i",{className:"icon-coms-download",onClick:function(t){t.stopPropagation(),window.open(e.downUrl)}}),React.createElement("span",null,e.downName)))})))):null},t.dateFormat=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd";if(e&&t){var r=e,n=Object.prototype.toString.call(e);if("[object String]"==n){var o=e.split(" "),a=o[0].split("-"),i=o[1]?o[1].split(":"):[];r=new Date(1*(a[0]||0),1*(a[1]||0)-1,1*(a[2]||0),1*(i[0]||0),1*(i[1]||0),1*(i[2]||0))}else if("[object Date]"!=n)return"";var s={"M+":r.getMonth()+1,"d+":r.getDate(),"h+":r.getHours()%12==0?12:r.getHours()%12,"H+":r.getHours(),"m+":r.getMinutes(),"s+":r.getSeconds(),"q+":Math.floor((r.getMonth()+3)/3),S:r.getMilliseconds()},l={0:"\\u65e5",1:"\\u4e00",2:"\\u4e8c",3:"\\u4e09",4:"\\u56db",5:"\\u4e94",6:"\\u516d"};if(/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(r.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(t)){var c=(RegExp.$1.length>1?RegExp.$1.length>2?"\\u661f\\u671f":"\\u5468":"")+l[r.getDay()+""];t=t.replace(RegExp.$1,Utils.GB2312UnicodeConverter.ToGB2312(c))}for(var u in s)new RegExp("("+u+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?s[u]:("00"+s[u]).substr((""+s[u]).length)));return t}return""},t.imgZoom=function(e,t){var r=jQuery(t+" img",e),n=0;window.WfForm&&window.WfForm.getLayoutStore()&&window.WfForm.getLayoutStore().propFileCfg&&(n=WfForm.getLayoutStore().propFileCfg.handwriting_download_switch),r.each(function(e,t){var r=$(t);"handWrittenSign"==r.attr("name")&&1==n||r.attr("resize")||(r.attr("original-src",""),r.parents(".ui-coomixPic").length>0||r.css({"max-width":"400px","max-height":"400px"}).attr("resize",1).coomixPic({path:"/blog/js/weaverImgZoom/images",preload:!0,blur:!0,left:d(26921,"向左转"),right:d(26922,"向右转"),source:d(26923,"查看原图"),hide:d(26985,"收起")}))})},t.createAttachLi=function(e){return React.createElement("li",{className:"cowork-accessory-item"},React.createElement("a",{className:"item-a",onClick:function(){return window.open(e.url)},title:e.name},e.name),React.createElement("i",{className:"icon-coms-download",onClick:function(t){t.stopPropagation(),window.open(e.downUrl)}}),React.createElement("span",null,e.downName))},t.isColorDark=function(e,t){if(!e||"string"!=typeof e)return!1;0==e.indexOf("#")&&(e=e.substring(1,e.length));var r,n,o,a=e.split("");if(6==a.length)r=a[0]+a[1],n=a[2]+a[3],o=a[4]+a[5];else{if(3!=a.length)return!1;r=a[0]+a[0],n=a[1]+a[1],o=a[2]+a[2]}return.299*parseInt(r,16)+.587*parseInt(n,16)+.114*parseInt(o,16)<(t||125)},t.createMarkMenu=function(e,t){return React.createElement(l.Menu,{ecId:"_Menu@t82vdn",className:"wea-cowork-dropdown-menu",onClick:t},React.createElement(l.Menu.Item,{ecId:"_undefined@b0poxj",key:"read"},d(25425,"已读")),React.createElement(l.Menu.Item,{ecId:"_undefined@mjxa2f",key:"unread"},d(83697,"未读")),React.createElement(l.Menu.Divider,{ecId:"_undefined@y8x44a"}),React.createElement(l.Menu.Item,{ecId:"_undefined@1vy0l4",key:"important"},d(382626,"标星")),React.createElement(l.Menu.Item,{ecId:"_undefined@8j4ron",key:"normal"},d(382669,"取消标星")),React.createElement(l.Menu.Divider,{ecId:"_undefined@0qy6io"}),React.createElement(l.Menu.Item,{ecId:"_undefined@sdn5rg",key:"hidden"},d(16636,"隐藏")),React.createElement(l.Menu.Item,{ecId:"_undefined@eyx635",key:"show"},d(25424,"取消隐藏")),React.createElement(l.Menu.Divider,{ecId:"_undefined@pgiins"}),React.createElement(l.Menu.Item,{ecId:"_undefined@zuc2a6",key:"tag"},d(176,"标签"),"...",React.createElement("span",{className:"icon-coms-Flow-setting"})),e.length>0&&e.filter(function(e){return"typePlate"!=e.labelType}).map(function(e,t){return React.createElement(l.Menu.Item,{ecId:"_undefined@oq5war@"+t,key:e.id,className:"wea-cowork-tag-menu-item"},React.createElement(c.WeaTag,{ecId:"_WeaTag@xbinmg@"+t,className:"setable-label",color:e.labelColor},e.labelName))}),React.createElement(l.Menu.Divider,{ecId:"_undefined@rwygvd"}),React.createElement(l.Menu.Item,{ecId:"_undefined@5h4az1",key:"deleteAll"},d(31219,"取消所有标签")))},t.onCheck=function(e,t){e.validateForm().then(function(e){e.isValid?t&&"function"==typeof t&&t():e.showErrors()})},t.doConfirm=function(e,t){l.Modal.confirm({title:""+d(131329,"信息确认"),content:e,okText:""+d(382958,"确定"),cancelText:""+d(31129,"取消"),onOk:function(){return t&&t()}})}},function(e,t,r){var n=r(72);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){var n=r(96);e.exports=function(e){return Object(n(e))}},function(e,t){e.exports={}},function(e,t,r){var n=r(257),o=r(109),a=r(264),i=r(151),s=r(265),l=r(36),c=r(150),u=c(n),d=c(o),f=c(a),p=c(i),h=c(s),m=l;(n&&"[object DataView]"!=m(new n(new ArrayBuffer(1)))||o&&"[object Map]"!=m(new o)||a&&"[object Promise]"!=m(a.resolve())||i&&"[object Set]"!=m(new i)||s&&"[object WeakMap]"!=m(new s))&&(m=function(e){var t=l(e),r="[object Object]"==t?e.constructor:void 0,n=r?c(r):"";if(n)switch(n){case u:return"[object DataView]";case d:return"[object Map]";case f:return"[object Promise]";case p:return"[object Set]";case h:return"[object WeakMap]"}return t}),e.exports=m},function(e,t,r){var n=r(24),o=n.Symbol;e.exports=o},function(e,t,r){function n(e){return i(e)?o(e):a(e)}var o=r(164),a=r(108),i=r(29);e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DYNAMIC_PASSWORD=10,t.DYNAMIC_TOKEN=20,t.SECOND_AUTH_PASSWORD=30,t.CA_AUTH=40,t.QYS=50,t.REAL_ID_AUTH=60,t.SECOND_AUTH_DIALOG="secondAuthDialog",t.AUTH_DETAIL_DIALOG="authDetailDialog"},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var n=r(139),o=r(101);e.exports=Object.keys||function(e){return n(e,o)}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){e.exports=!0},function(e,t,r){"use strict";var n=r(229)(!0);r(142)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){var n=r(266),o=r(22),a=Object.prototype,i=a.hasOwnProperty,s=a.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(e){return o(e)&&i.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},function(e,t,r){(function(e){var n=r(24),o=r(267),a="object"==typeof t&&t&&!t.nodeType&&t,i=a&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===a,l=s?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||o;e.exports=u}).call(t,r(78)(e))},function(e,t){function r(e){return function(t){return e(t)}}e.exports=r},function(e,t,r){function n(e){return"symbol"==typeof e||a(e)&&o(e)==i}var o=r(36),a=r(22),i="[object Symbol]";e.exports=n},function(e,t,r){function n(e,t,r){return t===t?i(e,t,r):o(e,a,r)}var o=r(154),a=r(271),i=r(272);e.exports=n},function(e,t){function r(e,t){return e===t||e!==e&&t!==t}e.exports=r},function(e,t){function r(e){return e}e.exports=r},function(e,t,r){function n(e){return i(e)?o(e,!0):a(e)}var o=r(164),a=r(320),i=r(29);e.exports=n},function(e,t,r){function n(e,t,r,n){var i=!r;r||(r={});for(var s=-1,l=t.length;++s<l;){var c=t[s],u=n?n(r[c],e[c],c,r,e):void 0;void 0===u&&(u=e[c]),i?a(r,c,u):o(r,c,u)}return r}var o=r(179),a=r(120);e.exports=n},function(e,t,r){function n(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?s(e)?a(e[0],e[1]):o(e):l(e)}var o=r(354),a=r(357),i=r(65),s=r(14),l=r(360);e.exports=n},function(e,t,r){e.exports={default:r(394),__esModule:!0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEMID=t.checkCAAuth=t.sendCAMessage=t.getTamperDatas=t.checkProtectDatas=t.doSecondAuth=t.getDynamicPassword=t.getSecondAuthConfig=void 0;var n=r(0);t.getSecondAuthConfig=function(e){return n.WeaTools.callApi("/api/workflow/secondauth/getSecondAuthConfig","POST",e)},t.getDynamicPassword=function(e){return n.WeaTools.callApi("/api/workflow/secondauth/getDynamicPassword","POST",e)},t.doSecondAuth=function(e){return n.WeaTools.callApi("/api/workflow/secondauth/doSecondAuth","POST",e)},t.checkProtectDatas=function(e){return n.WeaTools.callApi("/api/workflow/secondauth/checkProtectDatas","POST",e)},t.getTamperDatas=function(e){return n.WeaTools.callApi("/api/workflow/secondauth/getTamperDatas","POST",e)},t.sendCAMessage=function(e){return n.WeaTools.callApi("/api/workflow/secondauth/sendCAMessage","POST",e)},t.checkCAAuth=function(e){return n.WeaTools.callApi("/api/workflow/secondauth/checkCAAuth","POST",e)},t.getEMID=function(){return n.WeaTools.callApi("/api/workflow/secondauth/getEMID","POST",{})}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(8),i=n(a),s=r(3),l=n(s),c=r(1),u=n(c),d=r(2),f=n(d),p=r(4),h=n(p),m=r(5),v=n(m),g=r(9),w=n(g),y=r(10),b=r(0),_=r(6),S=r(11),k=r(40);!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(k);r(43);var E=r(30),I=n(E),C=r(15),R=n(C),x=(S.WeaTableNew.WeaTable,b.WeaLocaleProvider.getLabel),P=(0,y.observer)(o=function(e){function t(e){(0,u.default)(this,t);var r=(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return r.createBrowserConfig=function(e,t,n,o,a,i){var s=r.getSecLevleInfo(),l=r.state[o]||[];return{name:i||"Browser",show:w.default.createElement("div",{className:"wea-cowork-rich-button"},w.default.createElement("i",{className:n}),l.length>0&&w.default.createElement("div",{className:"red-point"}),w.default.createElement("span",{className:"button-text"},t)),title:t,memorise:!0,type:e,isSingle:a,replaceDatas:l,completeParams:{secretLevel:s.secLevel},dataParams:{secretLevel:s.secLevel},onBeforeFocusCheck:r.onBeforeFocusCheck}},r.onBeforeFocusCheck=function(e){var t=r.getSecLevleInfo(),n=t.secLevel,o=t.isOpenSec,a=t.tip;!n&&o?_.message.error(a):e&&e()},r.onToolsChange=function(){var e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]),t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if("image"==t){return e.reduce(function(e,t){return e+'<img src="'+t.imgSrc+'"/>&#8203'},"")}var n="";switch(t){case 37:n="relateddocList4E9";break;case 152:n="relatedwfList4E9";break;case 18:n="relatedcusList4E9";break;case 135:n="relatemutilprjs4E9";break;case"prjtsk":n="relatedprjList4E9"}var o={};return o[n]=e,r.setState(o),r.focus()," "},r.focus=function(){var e=r;e.timer=setTimeout(function(){clearTimeout(e.timer),e.refs.rich&&e.refs.rich.focus("last")},100)},r.getSubmitParams=function(){var e=r.state,t=e.richValue,n=e.anonymous,o=e.relatedaccList4E9,a=void 0===o?[]:o,i=e.relatedcusList4E9,s=void 0===i?[]:i,l=e.relateddocList4E9,c=void 0===l?[]:l,u=e.relatedprjList4E9,d=void 0===u?[]:u,f=e.relatedwfList4E9,p=void 0===f?[]:f,h=e.relatemutilprjs4E9,m=void 0===h?[]:h;t=r.refs.rich.getData();var v={remark:t,isAnonymous:n};return v.relatedprj=d.map(function(e){return e.id}).join(),v.relatedcus=s.map(function(e){return e.id}).join(),v.relatedwf=p.map(function(e){return e.id}).join(),v.relateddoc=c.map(function(e){return e.id}).join(),v.projectIDs=m.map(function(e){return e.id}).join(),v.relatedacc=a.map(function(e){return e.fileid||e.id}).join(),v},r.submit=function(){r.setState({disableSubmit:!0}),!1===r.props.submit(r.getSubmitParams(),function(){r.setState({richValue:"",disableSubmit:!1}),r.refs.rich&&r.refs.rich.setData(""),r.clear(),r.props.clearReplyInfo&&r.props.clearReplyInfo()})&&r.setState({disableSubmit:!1})},r.clear=function(){r.setState((0,i.default)({},r.initValue))},r.cancel=function(){(0,R.default)(r.props.cancel)&&r.props.cancel(r.state.richValue)},r.getSecLevleInfo=function(){if(window.WfForm&&window.WfForm.getGlobalStore()){var e=window.WfForm.getGlobalStore(),t=e.secLevelInfo;return void 0===t?{}:t}return{}},r.initValue={richValue:"",anonymous:0,relatedaccList4E9:[],relatedcusList4E9:[],relateddocList4E9:[],relatedprjList4E9:[],relatedwfList4E9:[],relatemutilprjs4E9:[]},r.state=(0,i.default)({disableSubmit:!1},r.initValue,{richValue:e.richValue,anonymous:e.anonymous,placeholder:e.placeholder||"",relatedaccList4E9:e.relatedaccList4E9||[],relatedcusList4E9:e.relatedcusList4E9||[],relateddocList4E9:e.relateddocList4E9||[],relatedprjList4E9:e.relatedprjList4E9||[],relatedwfList4E9:e.relatedwfList4E9||[],relatemutilprjs4E9:e.relatemutilprjs4E9||[]}),r}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){var t={};e.richValue!=this.props.richValue&&(t.richValue=e.richValue),(0,I.default)(e.relatedaccList4E9,this.props.relatedaccList4E9)||(t.relatedaccList4E9=e.relatedaccList4E9),(0,I.default)(e.relatedcusList4E9,this.props.relatedcusList4E9)||(t.relatedcusList4E9=e.relatedcusList4E9),(0,I.default)(e.relateddocList4E9,this.props.relateddocList4E9)||(t.relateddocList4E9=e.relateddocList4E9),(0,I.default)(e.relatedprjList4E9,this.props.relatedprjList4E9)||(t.relatedprjList4E9=e.relatedprjList4E9),(0,I.default)(e.relatedwfList4E9,this.props.relatedwfList4E9)||(t.relatedwfList4E9=e.relatedwfList4E9),(0,I.default)(e.relatemutilprjs4E9,this.props.relatemutilprjs4E9)||(t.relatemutilprjs4E9=e.relatemutilprjs4E9),e.placeholder!==this.props.placeholder&&(t.placeholder=e.placeholder),this.setState(t)}},{key:"componentUnMount",value:function(){this.setState({anonymous:0})}},{key:"componentDidUpdate",value:function(){var e=this;this.timer=setTimeout(function(){clearTimeout(e.timer)},1)}},{key:"initExtentsConfig",value:function(){var e=this.props.requestid,t=void 0===e?-1:e,r=[];return r.push({name:"At",position:"last",tipTitle:x(530014,"在交流输入框中输入@可直接选择@对象"),request:{url:"/api/workflow/forward/getReqWfNodeOperators?isDistinct=1",type:"GET",params:{requestid:t}}}),r}},{key:"render",value:function(){var e=this,t=this.state,r=t.richValue,n=(t.anonymous,t.disableSubmit),o=t.placeholder,a=this.props,s=a.noBottomInfo,l=a.appStatus,c=a.noNeedCancelBtn,u=void 0!==c&&c,d=a.noNeedSubmitBtn,f=void 0!==d&&d,p=this.getSecLevleInfo(),h=[];if(!s&&(1==l.doc&&h.push(this.createBrowserConfig(37,x(126529,"文档"),"icon-coms-content-o","relateddocList4E9",!1)),1==l.workflow&&h.push(this.createBrowserConfig(152,x(131692,"流程"),"icon-coms-Workflow-o","relatedwfList4E9",!1)),1==l.crm&&h.push(this.createBrowserConfig(18,x(84236,"客户"),"icon-coms-currency-Customer","relatedcusList4E9",!1)),1==l.project&&h.push(this.createBrowserConfig(135,x(22245,"项目"),"icon-coms-project","relatemutilprjs4E9",!1)),1==l.task&&h.push(this.createBrowserConfig("prjtsk",x(1332,"任务"),"icon-coms-currency-Task","relatedprjList4E9",!1)),1==l.attachment)){var m=this.state.relatedaccList4E9||[];m=m.map(function(e){return(0,i.default)({fileExtendName:e.docextendname,fileid:e.id,filelink:e.url,filename:e.name,filesize:e.downName,loadlink:e.downUrl},e)}),h.push({name:"Upload",type:"list",show:w.default.createElement("div",{className:"wea-cowork-rich-button wea-cowork-upload-button"},w.default.createElement("i",{className:"icon-coms-currency-Enclosure",title:x(128095," 上传附件")}),m.length>0&&w.default.createElement("div",{className:"red-point"}),w.default.createElement("span",{className:"button-text",title:x(385751,"附件上传(最大)")+l.maxFileSize+x(83528,"M/个")+")"},x(132024,"附件"))),uploadUrl:"/api/cowork/base/uploadOperate?secId="+l.accCatelog,maxUploadSize:l.maxFileSize,category:l.accCatelog,onListChange:function(t,r){e.setState({relatedaccList4E9:r})},datas:m,secLevel:p.secLevel,secLevelInfo:p.tip,showSecLevel:p.isOpenSec,casProtect:p.isOpenSec,allowEditSec:!1})}var v=this.initExtentsConfig(v),g=[];return f||g.push(w.default.createElement(_.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@3gifrd@submit",className:"wea-button-release",disabled:n,onClick:this.submit,style:{marginLeft:"10px",top:"2px"}},w.default.createElement("span",null,w.default.createElement("span",{className:"icon-coms-Release"}),w.default.createElement("span",null,x(615," 提交"))))),u||g.push(w.default.createElement(_.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@kpl65m@cancel",onClick:this.cancel,style:{marginLeft:"10px",top:"2px"}},w.default.createElement("span",{ref:"cancel"},x(201,"取消")))),w.default.createElement("div",{className:"wf-resources"},w.default.createElement(b.WeaRichText,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaRichText@x8ga6a",ls:!0,value:r,ckConfig:{toolbar:[{name:"document",items:["Source"]},{name:"paragraph",items:["JustifyLeft","JustifyCenter","JustifyRight","-","NumberedList","BulletedList"]},{name:"styles",items:["Format","Font","FontSize"]},{name:"colors",items:["TextColor"]},{name:"basicstyles",items:["Bold","Italic","Underline","Strike"]},{name:"insert",items:["Image","Table","Smiley"]},{name:"tools",items:["Maximize"]}],extraPlugins:"autogrow",height:150,autoGrow_minHeight:150,autoGrow_maxHeight:600,removePlugins:"resize",uploadUrl:"/api/doc/upload/uploadFile",placeholder:o},ref:"rich",className:"wea-workflow-rich-text",bottomBarConfig:h,bootomBarStyle:{},bottomBarRight:g.length>0&&{Component:g},onStatusChange:function(t){"ready"==t&&e.focus()},onToolsChange:this.onToolsChange,extentsConfig:v}))}}]),t}(w.default.Component))||o;t.default=b.WeaTools.tryCatch(w.default,function(e){return w.default.createElement(b.WeaErrorPage,{ecId:"_WeaErrorPage@poiwoa",msg:e.error?e.error:x(383324,"对不起，该页面异常，请联系管理员")})},{error:""})(P)},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){var n=r(27).f,o=r(38),a=r(17)("toStringTag");e.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},function(e,t,r){r(232);for(var n=r(16),o=r(37),a=r(49),i=r(17)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var c=s[l],u=n[c],d=u&&u.prototype;d&&!d[i]&&o(d,i,c),a[c]=a.Array}},function(e,t){function r(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}var n=Object.prototype;e.exports=r},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){var n=r(268),o=r(61),a=r(80),i=a&&a.isTypedArray,s=i?o(i):n;e.exports=s},function(e,t,r){(function(e){var n=r(148),o="object"==typeof t&&t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=a&&a.exports===o,s=i&&n.process,l=function(){try{var e=a&&a.require&&a.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=l}).call(t,r(78)(e))},function(e,t,r){function n(e){return null==e?"":o(e)}var o=r(152);e.exports=n},function(e,t,r){function n(e){var t=this.__data__=new o(e);this.size=t.size}var o=r(83),a=r(283),i=r(284),s=r(285),l=r(286),c=r(287);n.prototype.clear=a,n.prototype.delete=i,n.prototype.get=s,n.prototype.has=l,n.prototype.set=c,e.exports=n},function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var o=r(278),a=r(279),i=r(280),s=r(281),l=r(282);n.prototype.clear=o,n.prototype.delete=a,n.prototype.get=i,n.prototype.has=s,n.prototype.set=l,e.exports=n},function(e,t,r){function n(e,t){for(var r=e.length;r--;)if(o(e[r][0],t))return r;return-1}var o=r(64);e.exports=n},function(e,t,r){var n=r(41),o=n(Object,"create");e.exports=o},function(e,t,r){function n(e,t){var r=e.__data__;return o(t)?r["string"==typeof t?"string":"hash"]:r.map}var o=r(296);e.exports=n},function(e,t){function r(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}e.exports=r},function(e,t,r){function n(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}var o=r(62),a=1/0;e.exports=n},function(e,t,r){function n(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return o(s(r)?i(r):[r],a(t,1))}var o=r(87),a=r(185),i=r(122),s=r(14);e.exports=n},function(e,t,r){e.exports={default:r(365),__esModule:!0}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(8),i=n(a),s=r(3),l=n(s),c=r(1),u=n(c),d=r(2),f=n(d),p=r(4),h=n(p),m=r(5),v=n(m),g=r(9),w=n(g),y=r(10),b=r(0),_=r(6),S=r(11),k=r(40);!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(k);r(43);var E=r(30),I=n(E),C=r(15),R=n(C),x=b.WeaLocaleProvider.getLabel,P=(S.WeaTableNew.WeaTable,(0,y.observer)(o=function(e){function t(e){(0,u.default)(this,t);var r=(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return r.createBrowserConfig=function(e,t,n,o,a,i){var s=r.state[o]||[];return{name:i||"Browser",show:w.default.createElement("div",{className:"wea-cowork-rich-button"},w.default.createElement("i",{className:n}),s.length>0&&w.default.createElement("div",{className:"red-point"}),w.default.createElement("span",{className:"button-text"},t)),title:t,memorise:!0,type:e,isSingle:a,replaceDatas:s}},r.onToolsChange=function(){var e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]),t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if("image"==t){return e.reduce(function(e,t){return e+'<img src="'+t.imgSrc+'"/>&#8203'},"")}var n="";switch(t){case 37:n="relateddocList4E9";break;case 152:n="relatedwfList4E9";break;case 18:n="relatedcusList4E9";break;case 135:n="relatemutilprjs4E9";break;case"prjtsk":n="relatedprjList4E9"}var o={};return o[n]=e,r.setState(o)," "},r.focus=function(){var e=r;e.timer=setTimeout(function(){clearTimeout(e.timer),e.refs.rich&&e.refs.rich.focus("last")},100)},r.getSubmitParams=function(){var e=r.state,t=e.richValue,n=e.anonymous,o=e.relatedaccList4E9,a=void 0===o?[]:o,i=e.relatedcusList4E9,s=void 0===i?[]:i,l=e.relateddocList4E9,c=void 0===l?[]:l,u=e.relatedprjList4E9,d=void 0===u?[]:u,f=e.relatedwfList4E9,p=void 0===f?[]:f,h=e.relatemutilprjs4E9,m=void 0===h?[]:h;t=r.refs.rich.getData();var v={remark:t,isAnonymous:n};return v.relatedprj=d.map(function(e){return e.id}).join(),v.relatedcus=s.map(function(e){return e.id}).join(),v.relatedwf=p.map(function(e){return e.id}).join(),v.relateddoc=c.map(function(e){return e.id}).join(),v.projectIDs=m.map(function(e){return e.id}).join(),v.relatedacc=a.map(function(e){return e.fileid||e.id}).join(),v},r.submit=function(){r.props.submit(r.getSubmitParams(),function(){r.setState({richValue:""}),r.refs.rich&&r.refs.rich.setData(""),r.clear(),r.props.clearReplyInfo&&r.props.clearReplyInfo()})},r.clear=function(){var e={richValue:"",anonymous:0,relatedaccList4E9:[],relatedcusList4E9:[],relateddocList4E9:[],relatedprjList4E9:[],relatedwfList4E9:[],relatemutilprjs4E9:[]};r.setState((0,i.default)({},e))},r.cancel=function(){(0,R.default)(r.props.cancel)&&r.props.cancel(r.state.richValue)},r.state={disableSubmit:!1,richValue:e.richValue,anonymous:e.anonymous,placeholder:e.placeholder||"",relatedaccList4E9:e.relatedaccList4E9||[],relatedcusList4E9:e.relatedcusList4E9||[],relateddocList4E9:e.relateddocList4E9||[],relatedprjList4E9:e.relatedprjList4E9||[],relatedwfList4E9:e.relatedwfList4E9||[],relatemutilprjs4E9:e.relatemutilprjs4E9||[]},r}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){this.focus()}},{key:"componentWillReceiveProps",value:function(e){var t={};e.placeholder!=this.props.placeholder&&(t.placeholder=e.placeholder),(0,I.default)(e.relatedaccList4E9,this.props.relatedaccList4E9)||(t.relatedaccList4E9=e.relatedaccList4E9),(0,I.default)(e.relatedcusList4E9,this.props.relatedcusList4E9)||(t.relatedcusList4E9=e.relatedcusList4E9),(0,I.default)(e.relateddocList4E9,this.props.relateddocList4E9)||(t.relateddocList4E9=e.relateddocList4E9),(0,I.default)(e.relatedprjList4E9,this.props.relatedprjList4E9)||(t.relatedprjList4E9=e.relatedprjList4E9),(0,I.default)(e.relatedwfList4E9,this.props.relatedwfList4E9)||(t.relatedwfList4E9=e.relatedwfList4E9),(0,I.default)(e.relatemutilprjs4E9,this.props.relatemutilprjs4E9)||(t.relatemutilprjs4E9=e.relatemutilprjs4E9),this.setState(t),this.focus()}},{key:"componentDidUpdate",value:function(){var e=this,t=this;this.timer=setTimeout(function(){clearTimeout(t.timer),e.focus()},1)}},{key:"componentUnMount",value:function(){this.setState({anonymous:0})}},{key:"initExtentsConfig",value:function(){var e=this.props.logParams.requestid,t=this.props.store,r=t.refRequestId,n=void 0===r?"":r,o=t.isSubReqeuestid,a=e;"function"==typeof o&&1==o()&&(a=n);var i=[];return i.push({name:"At",position:"last",tipTitle:x(530014,"在交流输入框中输入@可直接选择@对象"),request:{url:"/api/workflow/forward/getReqWfNodeOperators?isDistinct=1",type:"GET",params:{requestid:a}}}),i}},{key:"render",value:function(){var e=this,t=this.state,r=t.richValue,n=(t.anonymous,t.disableSubmit,t.placeholder),o=this.props,a=o.noBottomInfo,s=o.appStatus,l=o.noNeedCancelBtn,c=void 0!==l&&l,u=o.noNeedSubmitBtn,d=void 0!==u&&u,f=o.type,p=[];if(!a&&(1==s.doc&&p.push(this.createBrowserConfig(37,x(126529,"文档"),"icon-coms-content-o","relateddocList4E9",!1)),1==s.workflow&&p.push(this.createBrowserConfig(152,x(131692,"流程"),"icon-coms-Workflow-o","relatedwfList4E9",!1)),1==s.crm&&p.push(this.createBrowserConfig(18,x(84236,"客户"),"icon-coms-currency-Customer","relatedcusList4E9",!1)),1==s.project&&p.push(this.createBrowserConfig(135,x(22245,"项目"),"icon-coms-project","relatemutilprjs4E9",!1)),1==s.task&&p.push(this.createBrowserConfig("prjtsk",x(1332,"任务"),"icon-coms-currency-Task","relatedprjList4E9",!1)),1==s.attachment)){var h=this.state.relatedaccList4E9||[];h=h.map(function(e){return(0,i.default)({fileExtendName:e.docextendname,fileid:e.id,filelink:e.url,filename:e.name,filesize:e.downName,loadlink:e.downUrl},e)}),p.push({name:"Upload",type:"list",show:w.default.createElement("div",{className:"wea-cowork-rich-button wea-cowork-upload-button"},w.default.createElement("i",{className:"icon-coms-currency-Enclosure",title:x(128095," 上传附件")}),w.default.createElement("span",{className:"button-text",title:x(385751,"附件上传(最大)")+s.maxFileSize+x(83528,"M/个")+")"},x(132024,"附件"))),uploadUrl:"/api/cowork/base/uploadOperate?secId="+s.accCatelog,maxUploadSize:s.maxFileSize,category:s.accCatelog,onListChange:function(t,r){e.setState({relatedaccList4E9:r})},datas:h})}var m=this.initExtentsConfig(m),v=[];return d||v.push(w.default.createElement(_.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@dhtu5s@submit",className:"wea-button-release",onClick:this.submit,style:{marginLeft:"10px",top:"2px"}},w.default.createElement("span",null,w.default.createElement("span",{className:"icon-coms-Release"}),w.default.createElement("span",null,x(615," 提交"))))),c||v.push(w.default.createElement(_.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@f2iueq@cancel",onClick:this.cancel,style:{marginLeft:"10px",top:"2px"}},w.default.createElement("span",{ref:"cancel"},x(201,"取消")))),w.default.createElement("div",{className:"wf-resources  "+f},w.default.createElement(b.WeaRichText,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaRichText@b7o306",ls:!0,value:r,ckConfig:{toolbar:[{name:"document",items:["Source"]},{name:"paragraph",items:["JustifyLeft","JustifyCenter","JustifyRight","-","NumberedList","BulletedList"]},{name:"styles",items:["Format","Font","FontSize"]},{name:"colors",items:["TextColor"]},{name:"basicstyles",items:["Bold","Italic","Underline","Strike"]},{name:"insert",items:["Image","Table","Smiley"]},{name:"tools",items:["Maximize"]}],extraPlugins:"autogrow",height:150,autoGrow_minHeight:150,autoGrow_maxHeight:150,removePlugins:"resize",uploadUrl:"/api/doc/upload/uploadFile",placeholder:n},ref:"rich",className:"wea-workflow-rich-text",bottomBarConfig:p,bootomBarStyle:{},bottomBarRight:v.length>0&&{Component:v},onStatusChange:function(t){"ready"==t&&e.focus()},onToolsChange:this.onToolsChange,extentsConfig:m}))}}]),t}(w.default.Component))||o);t.default=b.WeaTools.tryCatch(w.default,function(e){return w.default.createElement(b.WeaErrorPage,{ecId:"_WeaErrorPage@2dr3ov",msg:e.error?e.error:x(383324,"对不起，该页面异常，请联系管理员")})},{error:""})(P)},function(e,t,r){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,s,l=n(e),c=1;c<arguments.length;c++){r=Object(arguments[c]);for(var u in r)a.call(r,u)&&(l[u]=r[u]);if(o){s=o(r);for(var d=0;d<s.length;d++)i.call(r,s[d])&&(l[s[d]]=r[s[d]])}}return l}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getBranchLastGroup=t.judgeRemindTime=t.checkEditRight=t.getElementBranchLevel=t.getCurrentElementPoint=t.getLastObjById=t.isExistThisElement=t.getFreeObjById=t.checkCurrentNodeIsPassed=t.getFirstParentHaveNext=void 0;var o=r(7),a=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(o),r(6)),i=r(0),s=r(19),l=(n(s),r(21)),c=(n(l),r(171)),u=n(c),d=r(81),f=(n(d),i.WeaLocaleProvider.getLabel),p={},h=(t.getFirstParentHaveNext=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0;if(null!=t&&""!=t){var o=m(t,r)||{};n=o.hasNext?o:e(o.parentid)}return n},t.checkCurrentNodeIsPassed=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],e.nodeElement),r=void 0!==t&&t,n=e.nodeEntity,o=void 0===n?{}:n,a=(e.groupStatus,!1);if(r){var i=o.nodeStatus;a="0"!=(void 0===i?"0":i)||a}else{var s=h(e);a=s||a}return a},function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(t.nodeElement,t.nodeEntity,t.parallelNodeGroupDatas),n=void 0===r?[]:r,o=!1;return n.map(function(t){if(t.nodeElement){var r=t.nodeEntity,n=void 0===r?{}:r,a=n.nodeStatus;o="0"!=(void 0===a?"0":a)||o}else o=e(t)}),o}),m=t.getFreeObjById=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments[1],n=p.workflowNewDesignStore,o=void 0===n?{}:n,a=o.wfFreeDatas,i=void 0===a?{}:a;r=r||i;var s=null;if(r.id&&r.id==t&&(s=r),r.hasNext){var l=e(t,r.next);s=l||s}return r.parallelNodeGroupDatas&&r.parallelNodeGroupDatas.length>0&&r.parallelNodeGroupDatas.map(function(r){var n=e(t,r);s=n||s}),s};t.isExistThisElement=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments[1],n=p.workflowNewDesignStore,o=void 0===n?{}:n,a=o.wfFreeDatas,i=void 0===a?{}:a;r=r||i;var s=!1;if(t.indexOf("virtual")>-1&&(t=t.split("_")[0]),t==r.id)s=!0;else{if(r.hasNext){var l=e(t,r.next);l&&(s=l)}r.nodeElement||r.parallelNodeGroupDatas.map(function(r){var n=e(t,r);n&&(s=n)})}return s},t.getLastObjById=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null;if(r.hasNext)if(r.next.id==t)n=r;else{var o=e(t,r.next);n=o||n}if(!r.nodeElement){(r.parallelNodeGroupDatas||[]).map(function(r){var o=e(t,r);n=o||n})}return n},t.getCurrentElementPoint=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=void 0,o=t[r];if(e.nodeElement){n={};for(var a in o){var i=a.split("_"),s=i[0];"resource"!=i[0]&&"subcom"!=i[0]&&"group"!=i[0]&&"dept"!=i[0]||(s=s+"_"+i[1]),s==e.id&&(n=o[a])}}else{n=[];for(var l in o){l.split("_")[0]==e.id&&(l.indexOf("_branch_")>-1&&(n[0]=o[l]),l.indexOf("_merge_")>-1&&(n[1]=o[l]))}}return n},t.getElementBranchLevel=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=p.workflowNewDesignStore,o=void 0===n?{}:n,a=o.wfFreeDatas,i=1;if(r.parentid==t.id)i=1;else{var s=m(r.parentid,a);if(s&&r.parentid){i+=e(t,s)}}return i},t.checkEditRight=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("true"==(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).isReadOnlyModel)return!0;var t=e.nodeChartEntity,r=void 0===t?{}:t,n=r.edit;return!(void 0!==n&&n)},t.judgeRemindTime=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],r=arguments[2],n=arguments[3];e[r];e[r]=t;var o=e.advanceRemind,i=void 0===o?0:o,s=e.overflowtimetype,l=void 0===s?0:s,c=e.overflowtimehour,d=void 0===c?0:c,p=e.overflowtimeminute,h=void 0===p?0:p;if("overflowtimetype"==r&&"0"==l){var m={overtimeToNextOperator:"0",afterLoopRemind:"0",afterRemindInterval:"5",beforeLoopRemind:"0",beforeRemindInterval:"5",advanceRemind:"0",overflowtimehour:0,overflowtimeminute:0,overflowtimedate:""};return n.updateFields({advanceRemind:"0",overflowtimehour:0,overflowtimeminute:0,overflowtimedate:""},!1),m}var v=(0,u.default)(i),g=(0,u.default)(l),w=[0,1,2].indexOf(g)<0&&v>g;return w||(w=1==g&&v>60*(0,u.default)(d)+(0,u.default)(h)),w||(w=0==g&&0!=v),w&&a.message.warning(f(506879,"超时时间未设置或设置的超时时间小于提前提醒时间！"),5),{}},t.getBranchLastGroup=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.next,n=void 0===r?{}:r,o=t.hasNext;return void 0!==o&&o?e(n):t}},function(e,t,r){var n=r(34),o=r(16).document,a=n(o)&&n(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},function(e,t,r){var n=r(34);e.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){var n=r(98),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(100)("keys"),o=r(73);e.exports=function(e){return n[e]||(n[e]=o(e))}},function(e,t,r){var n=r(12),o=r(16),a=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:r(57)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){var n=r(20),o=r(12),a=r(47);e.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],i={};i[e]=t(r),n(n.S+n.F*a(function(){r(1)}),"Object",i)}},function(e,t,r){var n=r(23),o=r(231),a=r(101),i=r(99)("IE_PROTO"),s=function(){},l=function(){var e,t=r(94)("iframe"),n=a.length;for(t.style.display="none",r(144).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;n--;)delete l.prototype[a[n]];return l()};e.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[i]=e):r=l(),void 0===t?r:o(r,t)}},function(e,t,r){t.f=r(17)},function(e,t,r){var n=r(16),o=r(12),a=r(57),i=r(105),s=r(27).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=a?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:i.f(e)})}},function(e,t,r){var n=r(74),o=r(54),a=r(39),i=r(95),s=r(38),l=r(137),c=Object.getOwnPropertyDescriptor;t.f=r(28)?c:function(e,t){if(e=a(e),t=i(t,!0),l)try{return c(e,t)}catch(e){}if(s(e,t))return o(!n.f.call(e,t),e[t])}},function(e,t,r){function n(e){if(!o(e))return a(e);var t=[];for(var r in Object(e))s.call(e,r)&&"constructor"!=r&&t.push(r);return t}var o=r(77),a=r(256),i=Object.prototype,s=i.hasOwnProperty;e.exports=n},function(e,t,r){var n=r(41),o=r(24),a=n(o,"Map");e.exports=a},function(e,t){function r(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}var n=9007199254740991;e.exports=r},function(e,t){function r(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}e.exports=r},function(e,t,r){function n(e,t,r,i,s){return e===t||(null==e||null==t||!a(e)&&!a(t)?e!==e&&t!==t:o(e,t,r,i,n,s))}var o=r(277),a=r(22);e.exports=n},function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var o=r(288),a=r(295),i=r(297),s=r(298),l=r(299);n.prototype.clear=o,n.prototype.delete=a,n.prototype.get=i,n.prototype.has=s,n.prototype.set=l,e.exports=n},function(e,t){function r(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}e.exports=r},function(e,t,r){var n=r(162),o=r(163),a=Object.prototype,i=a.propertyIsEnumerable,s=Object.getOwnPropertySymbols,l=s?function(e){return null==e?[]:(e=Object(e),n(s(e),function(t){return i.call(e,t)}))}:o;e.exports=l},function(e,t){function r(e,t){var r=typeof e;return!!(t=null==t?n:t)&&("number"==r||"symbol"!=r&&o.test(e))&&e>-1&&e%1==0&&e<t}var n=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=r},function(e,t,r){function n(e,t){if(o(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!a(e))||(s.test(e)||!i.test(e)||null!=t&&e in Object(t))}var o=r(14),a=r(62),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=n},function(e,t,r){function n(e){var t=o(e),r=t%1;return t===t?r?t-r:t:0}var o=r(317);e.exports=n},function(e,t,r){var n=r(318),o=n();e.exports=o},function(e,t,r){function n(e,t,r){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var o=r(174);e.exports=n},function(e,t,r){function n(e){var t=new e.constructor(e.byteLength);return new o(t).set(new o(e)),t}var o=r(159);e.exports=n},function(e,t){function r(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}e.exports=r},function(e,t,r){var n=r(147),o=n(Object.getPrototypeOf,Object);e.exports=o},function(e,t,r){function n(e,t,r,n){e=a(e)?e:l(e),r=r&&!n?s(r):0;var u=e.length;return r<0&&(r=c(u+r,0)),i(e)?r<=u&&e.indexOf(t,r)>-1:!!u&&o(e,t,r)>-1}var o=r(63),a=r(29),i=r(169),s=r(118),l=r(352),c=Math.max;e.exports=n},function(e,t,r){function n(e,t){return e&&e.length?a(e,o(t,3),!0):[]}var o=r(68),a=r(362);e.exports=n},function(e,t,r){function n(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var l=null==r?0:i(r);return l<0&&(l=s(n+l,0)),o(e,a(t,3),l)}var o=r(154),a=r(68),i=r(118),s=Math.max;e.exports=n},function(e,t,r){var n=r(128),o=r(17)("iterator"),a=r(49);e.exports=r(12).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||a[n(e)]}},function(e,t,r){var n=r(56),o=r(17)("toStringTag"),a="Arguments"==n(function(){return arguments}()),i=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=i(t=Object(e),o))?r:a?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doApprove=t.getResource=t.doSaveReply=t.getContentList=t.doDelete=t.doEditContent=t.doSaveContent=t.getInitParams=void 0;var n=r(0);t.getInitParams=function(e){return n.WeaTools.callApi("/api/workflow/communication/getInitParams","POST",e)},t.doSaveContent=function(e){return n.WeaTools.callApi("/api/workflow/communication/doSaveContent","POST",e)},t.doEditContent=function(e){return n.WeaTools.callApi("/api/workflow/communication/doEditContent","POST",e)},t.doDelete=function(e){return n.WeaTools.callApi("/api/workflow/communication/doDelete","POST",e)},t.getContentList=function(e){return n.WeaTools.callApi("/api/workflow/communication/getContentList","POST",e)},t.doSaveReply=function(e){return n.WeaTools.callApi("/api/workflow/communication/doSaveReply","POST",e)},t.getResource=function(e){return n.WeaTools.callApi("/api/workflow/communication/getResource","POST",e)},t.doApprove=function(e){return n.WeaTools.callApi("/api/workflow/communication/doApprove","POST",e)}},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,n){r&&(0,G.default)(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function i(e,t,r,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,l,c,u,d,f,p,h,m,v,g,w,y,b,_,S,k,E,I,C,R,x,P,N,D,O,L,T,F,A,M,W,j,B,z,q,U,V=r(13),G=o(V),H=r(26),K=o(H),Q=r(8),$=o(Q),J=r(1),Y=o(J),X=r(7),Z=r(404),ee=n(Z),te=r(11),re=r(6),ne=r(405),oe=o(ne),ae=r(0),ie=r(70),se=r(53),le=n(se),ce=ae.WeaLocaleProvider.getLabel,ue=(s=(0,X.action)("修改签字意见引用列表"),l=(0,X.action)("更新remindtype"),c=(0,X.action)("修改公共组私人组参数"),u=function e(){var t=this;(0,Y.default)(this,e),a(this,"loading",d,this),a(this,"isClear",f,this),a(this,"selectOperatorsMax",p,this),a(this,"signinput",h,this),a(this,"loaded",m,this),a(this,"isshowoperategroup",v,this),a(this,"isshownodeoperators",g,this),a(this,"isdisabledbtns",w,this),a(this,"operatorDatas",y,this),a(this,"formParams",b,this),a(this,"isFormSignature",_,this),this.initRemarkContent=!1,a(this,"showForward",S,this),this.fromform=!1,this.submititems=[],this.unsubmititems=[],a(this,"allitems",k,this),a(this,"operatorname",E,this),a(this,"callBackActions",I,this),a(this,"addGroupForm",C,this),this.addFormConditions=[],a(this,"hrmgroups",R,this),a(this,"remarkMap",x,this),a(this,"hrmSqlWhere",P,this),a(this,"remindInfo",N,this),a(this,"remindTypes",D,this),a(this,"fwLimitInfo",O,this),a(this,"replyNoticeInfo",L,this),this.chuanyueInfo={},this.secondAuthStore=null,this.secondAuthParams={},this.filterRequestAction=null,this.showAuthDialog=null,this.closeForwarDialog=null,a(this,"ops",T,this),a(this,"groupId",F,this),a(this,"groupType",A,this),a(this,"addGroupModalVisible",M,this),a(this,"setShowForward",W,this),this.setSecondAuthParams=function(e,r,n,o,a){t.secondAuthParams=e||null,t.secondAuthStore=r||null,t.filterRequestAction=n&&"function"==typeof n?n:null,t.closeForwarDialog=o&&"function"==typeof o?o:null,t.showAuthDialog=a&&"function"==typeof a?a:null},a(this,"initData",j,this),this.loadHrmGroupData=function(){var e=t.formParams.requestid,r=void 0===e?-1:e;ee.loadHrmGroupData({requestid:r}).then(function(e){var r=e.datas,n=void 0===r?[]:r;t.hrmgroups=n})},this.handleVisibleChange=function(e){t.initRemarkContent=!1,t.isshowoperategroup=e,t.isshownodeoperators=!1,e&&t.loadHrmGroupData()},this.handleShowNodeOperator=function(e){t.initRemarkContent=!1,t.isshowoperategroup=!1,t.isshownodeoperators=e},this.setOperatorIds=function(e){if(t.initRemarkContent=!1,e.isAllUser){t.selectOperatorsMax?e.count<t.selectOperatorsMax&&(t.isdisabledbtns=!0):t.isdisabledbtns=!0;var r=[{type:"all",lastname:ce(1340,"所有人"),ids:e.ids,count:e.count,id:"all_users"}];t.setOperatorDatas(r)}else e.isLoad?ee.loadResources({types:e.ids}).then(function(e){var r=e.datas,n=void 0===r?[]:r;t.setOperatorDatas(n)}):t.setOperatorDatas(e.datas)},this.dropAllUserGroup=function(){t.initRemarkContent=!1,t.isdisabledbtns=!1},this.setFormParams=function(e){t.initRemarkContent=!1,t.formParams=(0,$.default)({},t.formParams,e)},this.setOperatorDatas=function(e){t.initRemarkContent=!1,t.operatorDatas=e},this.doSubmitPost=function(e){var r=t.secondAuthStore,n=t.secondAuthParams,o=t.filterRequestAction,a=t.showAuthDialog;if(r&&n&&o&&a){var i=n.workflowid,s=n.nodeid,l=n.requestid,c=(n.f_weaver_belongto_userid,n.f_weaver_belongto_usertype,r.isAuthSuccess),u=r.isProtectSuccess,d=t;if(1==c||1==u){var f=(r.isEnableAuth,r.secondAuthType),p=r.isEnableProtect,h=r.protectType,m=r.params,v=m.authKey,g=m.qysSignWay,w=void 0===g?2:g;if(1!=u&&1==p){if(h==le.CA_AUTH||h==le.QYS&&1==w){if(r.setCAAuthData({isProtectDialog:1}),r.setCallbackFunc(d.doSubmitPost),r.setCallbackParam(e),h==le.CA_AUTH&&f==le.QYS&&1==w||f==le.CA_AUTH&&h==le.QYS&&1==w){var y=e,b=y.remark;(0,ie.getSecondAuthConfig)({workflowid:i,nodeid:s,requestid:l,remark:b}).then(function(e){var t=e.authKey,n=e.sourcestr;r.setCAAuthData({authKey:t,sourcestr:n}),r.setParams(e),h==le.QYS&&1==w?window.QYSUKeyUtil.showSignWin(r):a(le.SECOND_AUTH_DIALOG)})}else h==le.QYS&&1==w?window.QYSUKeyUtil.showSignWin(r):a(le.SECOND_AUTH_DIALOG);return}if(h==le.QYS&&2==w){return r.setCAAuthData({isProtectDialog:1}),void a(le.SECOND_AUTH_DIALOG)}}if(h==le.QYS||f==le.QYS){var _=r.params,S=_.qysSealId,k=_.qysSealImg,E=_.qysCertDetails;e=(0,$.default)({},e,{qysSealId:S,qysSealImg:k,qysCertDetails:E})}1==p&&(h==le.CA_AUTH||h==le.QYS&&1==w)&&(e=(0,$.default)({},e,{authKey:v,isProtectSuccess:u})),e.protectType=h,e.secondAuthType=f,e.isAuthSuccess=c,e.isEnableProtect=p,e.qysSignWay=w,t.doSubmitPost0(e)}else{var I=e,C=I.remark;(0,ie.getSecondAuthConfig)({workflowid:i,nodeid:s,requestid:l,remark:C}).then(function(o){var c=o.isEnableAuth,u=void 0===c?0:c,f=o.secondAuthType,p=void 0===f?0:f,h=o.isEnableProtect,m=void 0===h?0:h,v=o.protectType,g=void 0===v?0:v,w=o.qysSignWay,y=void 0===w?2:w,b=o.authOperations,_=void 0===b?[]:b,S=o.message,k=void 0===S?"":S;if("0"==o.success&&k)return void re.Modal.warning({content:k,okText:ce(83446,"确定"),showClose:!1});if(t.filterRequestAction(e,n,_)||!1)if(r.setDialogData({isEnableAuth:u,secondAuthType:p,isEnableProtect:m,protectType:g}),1==u)if(p==le.REAL_ID_AUTH){var E={mouldCode:"WORKFLOW",itemCode:"NODE_SUBMIT",requestid:l,workflowid:i,nodeid:s};window.doCheckSecondaryVerify4ec(E,function(t){"-1"!==t.status&&d.doSubmitPost0(e)})}else{var I=0;if((p==le.CA_AUTH&&1==m&&g==le.CA_AUTH||p==le.QYS&&1==m&&g==le.QYS)&&(I=10),r.setCAAuthData({isProtectDialog:I}),p==le.CA_AUTH||g==le.CA_AUTH&&1==m||(p==le.QYS||g==le.QYS&&1==m)&&1==y){var C=o.authKey,R=o.sourcestr;r.setCAAuthData({authKey:C,sourcestr:R})}r.setCallbackFunc(d.doSubmitPost.bind(d)),r.setCallbackParam(e),r.setParams(o),p==le.QYS&&1==y?window.QYSUKeyUtil.showSignWin(r):a(le.SECOND_AUTH_DIALOG)}else if(1==m){if(g==le.CA_AUTH||g==le.QYS&&1==y){var x=o.authKey,P=o.sourcestr;r.setCAAuthData({authKey:x,sourcestr:P,isProtectDialog:1})}else r.setCAAuthData({isProtectDialog:1});r.setCallbackFunc(d.doSubmitPost.bind(d)),r.setCallbackParam(e),r.setParams(o),g==le.QYS&&1==y?window.QYSUKeyUtil.showSignWin(r):a(le.SECOND_AUTH_DIALOG)}else d.doSubmitPost0(e);else d.doSubmitPost0(e)})}}else t.doSubmitPost0(e)},this.doSubmitPost0=function(e){t.initRemarkContent=!1;var r=t;t.loading=!0;e.requestid;e=(0,$.default)({},e,{remindTypes:t.remindTypes});var n=t.closeForwarDialog;window.console,ee.forwardSubmit(e).then(function(e){window.console,r.loading=!1;var o=e.forwardflag,a=e.message;if(t.secondAuthStore&&t.secondAuthStore.resetStore(),r.fromform){if(!e.success){var i=e.msg;return void re.Modal.warning({okText:ce(83446,"确定"),onOk:function(){try{e.needReload&&window.wfform.reloadPage()}catch(e){}},content:i})}var s=t.callBackActions,l=s.setTabKey,c=(s.changeSubmitParam,s.wfListReLoad),u=s.batchControlVariableMap,d=s.closeRequestPage,f=s.refreshRightMenu;if("1"==o||"4"==o){if("function"===typeof l&&l("form"),"function"===typeof u){u({isRelaodLogList:!0,reloadLogListParams:{pgnumber:1,atmet:"",maxrequestlogid:0}})}"function"===typeof f&&f({})}else{var p="2"==o?ce("84512","流程意见征询成功"):ce("84513","流程转办成功");"5"==o&&(p=ce("513018","征询转办成功")),a&&""!=a&&(p=a),re.Modal.warning({content:p,okText:ce(83446,"确定"),showClose:!1,onOk:function(){"function"===typeof c&&c(),"function"===typeof d&&d(!1)}})}}else{var h=t.callBackActions.callBackfun;"function"===typeof h&&h()}t.formParams.isShowReplyNotice=0,r.setShowForward({showForward:!1,requestid:-1}),n&&"function"==typeof n&&n();try{window.wfform.controlSecFieldOptions()}catch(e){}}).catch(function(e){r.loading=!1}),window.console},this.initNodeOperatorsData=function(e){var r=[],n=[],o=[];e&&e.map(function(e){var t=!0,a=!0,i=!0,s={id:e.uid,lastname:e.data,jobtitlename:e.jobtitlename,icon:e.icon,type:"resource",departmentname:e.departmentname,subcompanyname:e.subcompanyname,supsubcompanyname:e.supsubcompanyname};r.map(function(r){r.nodeid==e.nodeid&&(r.users.push(s),r.names=r.names?r.names+"  "+e.data:e.data,t=!1)}),t&&r.push({nodeid:e.nodeid,nodename:e.nodename,names:e.data,users:[s]}),"1"==e.handed&&(n.map(function(t){t.nodeid==e.nodeid&&(t.users.push(s),t.names=t.names?t.names+"  "+e.data:e.data,a=!1)}),a&&n.push({nodeid:e.nodeid,nodename:e.nodename,ids:e.uid,names:e.data,users:[s]})),"0"==e.handed&&(o.map(function(t){t.nodeid==e.nodeid&&(t.users.push(s),t.names=t.names?t.names+"  "+e.data:e.data,i=!1)}),i&&o.push({nodeid:e.nodeid,nodename:e.nodename,ids:e.uid,names:e.data,users:[s]}))}),t.submititems=t.removeDupUser(n),t.unsubmititems=t.removeDupUser(o),t.allitems=t.removeDupUser(r)},this.removeDupUser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return e.map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.users;e.users=(0,oe.default)(r,"id"),t.push(e)}),t},this.showNodeAllOperatorName=function(e){t.operatorname=e},this.controllAddModal=function(e){if(e){t.addGroupForm.isFormInit||ee.getHrmGroupForm({cmd:"base"}).then(function(e){var r=e.conditions,n=void 0===r?[]:r;t.addFormConditions=n,t.addGroupForm.initFormFields(n),t.addGroupForm.updateFields({sn:{value:0}})})}t.addGroupModalVisible=e},this.saveGroup=function(){var e=t.addGroupForm.getFormParams();t.formParams.requestid;e.cmd="base",ee.saveGroup(e).then(function(e){t.controllAddModal(!1),t.addGroupForm.resetConditionValue(),t.loadHrmGroupData()})},this.clearSignInput=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.loading=!1,t.operatorDatas=[],t.forwardremark="";var r=t.formParams,n=r.remark,o=r.workflowRequestLogId,a={field5:"",IsSubmitedOpinion:"1",IsBeForwardTodo:"1",isShowReplyNotice:t.formParams.isShowReplyNotice,takOverMins:30};e&&(a.remark=n,a.workflowRequestLogId=o),t.formParams=a,t.isdisabledbtns=!1,t.isClear=!0,t.signinput={},t.requestid=-1,t.loaded=!1,t.remarkMap=X.observable.map?X.observable.map({}):asMap({})},a(this,"setRemarkList",B,this),a(this,"updateRemindType",z,this),a(this,"setOptParams",q,this),this.opsHandler=function(e,r,n){r.stopPropagation&&r.stopPropagation(),r.preventDefault&&r.preventDefault();var o={};"delete"==e?re.Modal.confirm({title:ce(131329,"信息确认"),content:ce(385625,"确定要删除选择的记录吗？"),onOk:function(){ae.WeaTools.callApi("/api/hrm/group/delete","POST",{cmd:"base",groupid:n.id}).then(function(e){}).catch(r)}}):o={ops:e,groupId:n.id,groupType:"true"===n.isPrivate?1:0,addGroupModalVisible:!0},t.setOptParams(o)},a(this,"setSignInput",U,this),this.setShowForward=this.setShowForward,this.initData=this.initData,this.handleVisibleChange=this.handleVisibleChange,this.handleShowNodeOperator=this.handleShowNodeOperator,this.setOperatorIds=this.setOperatorIds,this.dropAllUserGroup=this.dropAllUserGroup,this.setFormParams=this.setFormParams,this.setOperatorDatas=this.setOperatorDatas,this.clearSignInput=this.clearSignInput,this.doSubmitPost=this.doSubmitPost,this.showNodeAllOperatorName=this.showNodeAllOperatorName,this.controllAddModal=this.controllAddModal,this.saveGroup=this.saveGroup,this.updateRemindType=this.updateRemindType,this.setOptParams=this.setOptParams},d=i(u.prototype,"loading",[X.observable],{enumerable:!0,initializer:function(){return!1}}),f=i(u.prototype,"isClear",[X.observable],{enumerable:!0,initializer:function(){return!1}}),p=i(u.prototype,"selectOperatorsMax",[X.observable],{enumerable:!0,initializer:function(){return 100}}),h=i(u.prototype,"signinput",[X.observable],{enumerable:!0,initializer:function(){return{}}}),m=i(u.prototype,"loaded",[X.observable],{enumerable:!0,initializer:function(){return!1}}),v=i(u.prototype,"isshowoperategroup",[X.observable],{enumerable:!0,initializer:function(){return!1}}),g=i(u.prototype,"isshownodeoperators",[X.observable],{enumerable:!0,initializer:function(){return!1}}),w=i(u.prototype,"isdisabledbtns",[X.observable],{enumerable:!0,initializer:function(){return!1}}),y=i(u.prototype,"operatorDatas",[X.observable],{enumerable:!0,initializer:function(){return[]}}),b=i(u.prototype,"formParams",[X.observable],{enumerable:!0,initializer:function(){return{IsSubmitedOpinion:"1",IsBeForwardTodo:"1",field5:"",isShowReplyNotice:0,takOverMins:30}}}),_=i(u.prototype,"isFormSignature",[X.observable],{enumerable:!0,initializer:null}),S=i(u.prototype,"showForward",[X.observable],{enumerable:!0,initializer:function(){return!1}}),k=i(u.prototype,"allitems",[X.observable],{enumerable:!0,initializer:function(){return[]}}),E=i(u.prototype,"operatorname",[X.observable],{enumerable:!0,initializer:function(){return""}}),I=i(u.prototype,"callBackActions",[X.observable],{enumerable:!0,initializer:function(){return{}}}),C=i(u.prototype,"addGroupForm",[X.observable],{enumerable:!0,initializer:function(){return new te.WeaForm}}),R=i(u.prototype,"hrmgroups",[X.observable],{enumerable:!0,initializer:function(){return[]}}),x=i(u.prototype,"remarkMap",[X.observable],{enumerable:!0,initializer:function(){return X.observable.map?X.observable.map({}):asMap({})}}),P=i(u.prototype,"hrmSqlWhere",[X.observable],{enumerable:!0,initializer:function(){return""}}),N=i(u.prototype,"remindInfo",[X.observable],{enumerable:!0,initializer:function(){return{}}}),D=i(u.prototype,"remindTypes",[X.observable],{enumerable:!0,initializer:function(){return""}}),O=i(u.prototype,"fwLimitInfo",[X.observable],{enumerable:!0,initializer:function(){return{}}}),L=i(u.prototype,"replyNoticeInfo",[X.observable],{enumerable:!0,initializer:function(){return{}}}),T=i(u.prototype,"ops",[X.observable],{enumerable:!0,initializer:function(){return""}}),F=i(u.prototype,"groupId",[X.observable],{enumerable:!0,initializer:function(){return""}}),A=i(u.prototype,"groupType",[X.observable],{enumerable:!0,initializer:function(){return""}}),M=i(u.prototype,"addGroupModalVisible",[X.observable],{enumerable:!0,initializer:function(){return!1}}),W=i(u.prototype,"setShowForward",[X.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("showForward"in t){var n=t.showForward,o=void 0!==n&&n,a=t.fromform,i=void 0!==a&&a,s=t.forwardOperators,l=t.forwardflag,c=void 0===l?"1":l,u=t.isClickCloseBtn,d=void 0!==u&&u;o&&(e.initRemarkContent=!0),e.showForward=o,e.fromform=i,r&&(e.callBackActions=r),delete t.showForward,delete t.fromform,delete t.isClickCloseBtn;t["forward_token_"+t.requestid+"_"+t.f_weaver_belongto_userid]=(new Date).getTime(),e.setFormParams(t),!e.loaded&&o&&e.initData(),s&&""!=s&&e.setOperatorIds({ids:s,isAllUser:!1,isLoad:!0});var f={isClear:!1,initRemarkContent:!0};"3"===c&&(f.operatorDatas=[],f.field5=""),o||(e.initRemarkContent=!1,""!=e.operatorname&&(e.operatorname=""),e.clearSignInput(d))}}}}),j=i(u.prototype,"initData",[X.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=e.formParams,r=t.requestid,n=void 0===r?-1:r,o=t.workflowid,a=void 0===o?"":o,i=t.nodeid,s=void 0===i?"":i,l=t.forwardflag,c=void 0===l?"":l;ee.getSignInput(e.formParams).then(function(t){var r=t.IsSubmitedOpinion,n=t.IsBeForwardTodo,o=t.chuanyueInfo,a=void 0===o?{}:o,i=a.isSubmitSign,s=void 0===i?"0":i,l=a.isChuanyue,c=void 0===l?"0":l,u=a.isRemind,d=void 0===u?"0":u;e.setFormParams({IsSubmitedOpinion:r,IsBeForwardTodo:n,isSubmitSign:s,isChuanyue:c,isRemind:d}),e.signinput=t,e.isFormSignature=t.isFormSignature,e.chuanyueInfo=a,e.loaded=!0}),ee.getSelectMaxRight().then(function(t){e.selectOperatorsMax=t.right?void 0:100}),ee.getOperators(n).then(function(t){var r=t.operators,n=void 0===r?[]:r;e.hrmSqlWhere=t.hrmSqlWhere,e.initNodeOperatorsData(n)}),ee.loadRemindInfo({requestid:n}).then(function(t){e.remindInfo=t,e.remindTypes=t.value}),"1"==c&&ee.getReplyNoticeInfo({requestid:n}).then(function(t){e.replyNoticeInfo=t,e.setFormParams({isShowReplyNotice:t.replyNotice})}),ee.getFwLimitBrowserSet({type:"canChoiceOperator",wfid:a,nodeid:s,fwtype:c}).then(function(t){var r=t.isopen,n=void 0===r?"":r,o=t.choiceoperator,a=void 0===o?"":o;e.fwLimitInfo={isopen:n,choiceoperator:a}})}}}),B=i(u.prototype,"setRemarkList",[s],{enumerable:!0,initializer:function(){var e=this;return function(t){var r=t||(X.observable.map?X.observable.map({}):asMap({}));e.remarkMap=X.observable.map?X.observable.map(r):asMap(r)}}}),z=i(u.prototype,"updateRemindType",[l],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e.remindTypes=t}}}),q=i(u.prototype,"setOptParams",[c],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,K.default)(t).forEach(function(r){e[r]=t[r]})}}}),U=i(u.prototype,"setSignInput",[X.action],{enumerable:!0,initializer:function(){var e=this;return function(t){e.signinput=(0,$.default)({},e.signinput,{val:t})}}}),u);t.default=ue},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=r(18),i=n(a),s=r(3),l=n(s),c=r(1),u=n(c),d=r(2),f=n(d),p=r(4),h=n(p),m=r(5),v=n(m),g=r(9),w=n(g),y=r(10),b=(r(7),r(11)),_=r(6),S=r(0),k=r(411),E=r(412),I=(n(E),S.WeaLocaleProvider.getLabel),C=(0,y.observer)(o=function(e){function t(e){(0,u.default)(this,t);var r=(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return r.doStatusChange=function(e){"ready"===e&&(window.CK_REF.wfphraseEdit=r.refs.WeaRichText_phrase)},r.onKeyDown=function(e){e.stopPropagation()},r.buttonBtnChange=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=(arguments.length>4&&void 0!==arguments[4]&&arguments[4],[]);return"Upload"===e&&"image"===r?(t.map(function(e){var t="/weaver/weaver.file.FileDownload?fileid="+e.fileidCode;n.push("<img src='"+t+"' data-imgsrc='"+t+"' alt=''/>&#8203;")}),n.join(",")):" "},r.doSave=function(){var e=r.props.store,t=(e.isRequired,e.form),n=e.phraseDescValue,o=e.setStates,a=n;if(window.CK_REF.wfphraseEdit&&(a=window.CK_REF.wfphraseEdit.getData(),o({phraseDescValue:a})),!a)return void _.Modal.warning({title:I(131329,"信息确认"),okText:I(33703,"确认"),content:I(384146,"必要信息不完整，红色*为必填项")});var i=r.props.saveCallBack,s=t.getFormParams(),l=s.groupid,c=void 0===l?"":l,u=s.dsporder,d=void 0===u?0:u;if("1"==c&&d<0)return void _.Modal.warning({title:I(131329,"信息确认"),okText:I(33703,"确认"),content:I(385772,"显示顺序不能为负数！")});e.onSave(i)},r.onChange=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=r.props.store,n=t.richTextOnChange,o=t.setStates;n(e),o({isRequired:""===e?"required":""})},r.getDialogBtns=function(){var e=r.props.store;return[w.default.createElement(_.Button,{ecId:(r&&r.props&&r.props.ecId||"")+"_Button@eo59iw@save",type:"primary",disabled:e.saveDisable,onClick:r.doSave},I(30986,"保存")),w.default.createElement(S.WeaMoreButton,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaMoreButton@5lrzfp@more",datas:r.getMoreBtns()})]},r.getDialogBtns,r.state={showCollect:!1},r}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentWillUnmount",value:function(){(0,this.props.store.clearStore)()}},{key:"render",value:function(){var e=this,t=this.props,r=t.store,n=t.visiable,o=t.setVisiable,a=(t.maxRows,t.minRows,t.controlLayout),s=r.onCancelEdit,l=r.form,c=r.success,u=r.conditions,d=(r.richTextOnChange,r.phraseDescValue),f=r.useTextAreaSignInput,p=r.isRequired,h=r.loading,m=r.phraseEditDialogTitle,v=l.getFormParams(),g=this.state.showCollect,y=[],E=[];if(this.initExtentsConfig(E),h){var I=w.default.createElement(_.Icon,{ecId:(this&&this.props&&this.props.ecId||"")+"_Icon@6uz6xl",type:"loading",style:{fontSize:24},spin:!0});y.push(w.default.createElement("div",{style:{width:"100%",height:"100px",marginTop:"280px",textAlign:"center"}},w.default.createElement(_.Spin,{ecId:(this&&this.props&&this.props.ecId||"")+"_Spin@cvw1eg@ec1",wrapperClassName:"wf-phrase-loading",size:"large",indicator:I})))}else-1==c?y.push(w.default.createElement(S.WeaAlertPage,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaAlertPage@srh0yb@ec2",icon:w.default.createElement("i",{className:"icon-coms-locking",style:{color:"rgb(203, 203, 203)"}}),iconSize:120,paddingTop:"15%"},w.default.createElement("div",{style:{color:"rgb(154, 154, 154)",paddingTop:"10px"}},"对不起，您暂时没有权限 ！"))):0==c?y.push(w.default.createElement(S.WeaAlertPage,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaAlertPage@r1dfui@ec3",icon:w.default.createElement("i",{className:"icon-coms-locking",style:{color:"rgb(203, 203, 203)"}}),iconSize:120,paddingTop:"15%"},w.default.createElement("div",{style:{color:"rgb(154, 154, 154)",paddingTop:"10px"}},"发生异常，请刷新重新或联系管理员"))):l.isFormInit&&u&&u.map(function(t,r){0==r?y.push(w.default.createElement(S.WeaSearchGroup,{ecId:(e&&e.props&&e.props.ecId||"")+"_WeaSearchGroup@zar1ot@"+r,needTigger:!0,title:t.title,center:!0,showGroup:t.defaultshow},t.items&&t.items.map(function(t){var r="object"===(0,i.default)(t.domkey)?t.domkey[0]:t.domkey;return"dsporder"===t.domkey[0]&&(t.regExp=/^(-{0,1}|(-{0,1}[0-9]{1,}[.]?[0-9]*))$/),w.default.createElement(_.Row,{ecId:(e&&e.props&&e.props.ecId||"")+"_Row@8wbhtl@"+r},w.default.createElement(S.WeaFormItem,{ecId:(e&&e.props&&e.props.ecId||"")+"_WeaFormItem@el88pj@"+r,label:""+t.label,labelCol:{span:""+t.labelcol},wrapperCol:{span:""+t.fieldcol},error:l.getError(t),tipPosition:"bottom"},w.default.createElement(b.WeaSwitch,{ecId:(e&&e.props&&e.props.ecId||"")+"_WeaSwitch@ig8met@"+r,fieldConfig:t,form:l,formParams:v})))}))):y.push(w.default.createElement(S.WeaSearchGroup,{ecId:(e&&e.props&&e.props.ecId||"")+"_WeaSearchGroup@uwi8mr@group1",needTigger:!0,title:w.default.createElement(k.RichTextTitle,{ecId:(e&&e.props&&e.props.ecId||"")+"_RichTextTitle@tpqkdc@ec1",isRequired:d?"":p}),showGroup:t.defaultshow},1==f?w.default.createElement(S.WeaRichText.Textarea,{ecId:(e&&e.props&&e.props.ecId||"")+"_undefined@rg7vde@ec2",viewAttr:"2",value:d,onChange:e.onChange,onToolsChange:e.buttonBtnChange,bottomBarConfig:[],extentsConfig:[],onKeyDown:e.onKeyDown,ref:"WeaRichText_phrase"}):w.default.createElement(S.WeaRichText,{ecId:(e&&e.props&&e.props.ecId||"")+"_WeaRichText@s8v5ex@ec3",key:"_wfphrase-edit",value:d,ckConfig:e.getCkConfig(),extentsConfig:E,onToolsChange:e.buttonBtnChange,onStatusChange:e.doStatusChange,ref:"WeaRichText_phrase",layout:window})))});return w.default.createElement(S.WeaDialog,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@126ltd",title:m,visible:n,key:n,icon:"icon-coms-workflow",iconBgcolor:"#0079DE",onCancel:function(){s(),o(!1)},buttons:this.getDialogBtns(),style:{width:800,height:600},draggable:!0,hasScroll:!0,layout:a,parentClassName:"wf-add-common-sign-dialog"},w.default.createElement(S.WeaRightMenu,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaRightMenu@rzsvfv",datas:this.getMoreBtns()},y),w.default.createElement(S.WeaCollect,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaCollect@m1vwaf",visible:g,favname:"",favouritetype:"5",importantlevel:1,onClose:function(){return e.setState({showCollect:!1})},submitBack:function(e){}}))}},{key:"getCkConfig",value:function(){return{height:240,removePlugins:"resize",toolbar:[{name:"document",items:["Source"]},{name:"basicstyles",items:["Bold","Italic","Underline","Strike"]},{name:"styles",items:["Font","FontSize"]},{name:"colors",items:["TextColor","BGColor"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]},{name:"links",items:["Link","Unlink"]},{name:"tools",items:["Maximize"]},{name:"insert",items:["Table","-","Undo","Redo"]}],uploadUrl:"/api/doc/upload/uploadFile"}}},{key:"initExtentsConfig",value:function(e){e.push({name:"Upload",type:"image",show:w.default.createElement("div",{className:"wea-cb-item"},w.default.createElement("span",{className:"wea-cbi-icon cke_button_icon cke_button__image_icon"})),uploadUrl:"/api/doc/upload/uploadFile",category:"all",limitType:"jpg,gif,png",title:I(20001,"上传图片"),needLoading:!1})}},{key:"getMoreBtns",value:function(){var e=this;return[{key:"save",icon:w.default.createElement("i",{className:"icon-workflow-Right-menu-Preservation"}),content:I(30986,"保存"),onClick:function(){e.doSave()}},{key:"coll",icon:w.default.createElement("i",{className:"icon-coms-Collection"}),content:I(28111,"收藏"),onClick:function(){e.setState({showCollect:!0})}}]}}]),t}(w.default.Component))||o;t.default=C},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r,n){r&&(0,w.default)(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function a(e,t,r,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,s,l,c,u,d,f,p,h,m,v,g=r(13),w=n(g),y=r(26),b=n(y),_=r(8),S=n(_),k=r(1),E=n(k),I=r(7),C=r(6),R=r(0),x=r(11),P=r(414),N=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(P),D=R.WeaLocaleProvider.getLabel,O=(i=function e(){var t=this;(0,E.default)(this,e),o(this,"visiable",s,this),o(this,"phraseDescValue",l,this),o(this,"saveDisable",c,this),o(this,"useTextAreaSignInput",u,this),o(this,"isRequired",d,this),o(this,"success",f,this),o(this,"form",p,this),o(this,"loading",h,this),o(this,"phraseEditDialogTitle",m,this),this.conditions=[],this.phraseId="",this.loadLabels=function(){R.WeaTools.callApi("/api/workflow/label/loadPhraseEditLabels","GET",{}).then(function(e){t.phraseEditDialogTitle=e.phraseEditDialogTitle})},this.onEdit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments[1],n={id:e};t.loading=!0,N.doEdit(n).then(function(n){t.loading=!1,t.phraseEditDialogTitle=n.phraseEditDialogTitle,t.form.resetForm(),t.form.initFormFields(n.conditions);var o=r||n.phraseDescValue;t.isRequired=""===o?"required":"",t.setStates({conditions:n.conditions,phraseDescValue:o,visiable:!0,phraseId:e,success:n.success,useTextAreaSignInput:n.useTextAreaSignInput||0})})},this.onSave=function(e){if(t.realLength(t.phraseDescValue)>4e3)return void C.Modal.warning({title:D(131329,"信息确认"),okText:D(33703,"确认"),content:D(385840,"文本长度不能超过4000(1个中文字符等于3个长度)")});t.form.validateForm().then(function(r){if(r.isValid){t.saveDisable=!0;var n={id:t.phraseId,phraseDesc:t.phraseDescValue},o=(0,S.default)({},t.form.getFormParams(),n);N.doSave(o).then(function(r){C.message.success(r.msg),t.saveDisable=!1,e&&e({workflowPhrases:o.phraseShort,workflowPhrasesContent:o.phraseDesc,status:1,groupid:o.groupid,right:1},t.phraseId),t.onCancelEdit()})}else r.showErrors()})},this.clearStore=function(){t.phraseDescValue="",t.isRequired="required",t.phraseId=""},this.onCancelEdit=function(){t.visiable=!1,t.phraseDescValue="",t.phraseId=""},this.richTextOnChange=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t.phraseDescValue=e},this.realLength=function(e){for(var t=0,r=0;r<=e.length-1;r++)t+=1,e.charCodeAt(r)>127&&(t+=2);return t},o(this,"setStates",v,this),this.onEdit=this.onEdit,this.onCancelEdit=this.onCancelEdit,this.richTextOnChange=this.richTextOnChange,this.loadLabels=this.loadLabels,this.loadLabels()},s=a(i.prototype,"visiable",[I.observable],{enumerable:!0,initializer:function(){return!1}}),l=a(i.prototype,"phraseDescValue",[I.observable],{enumerable:!0,initializer:function(){return""}}),c=a(i.prototype,"saveDisable",[I.observable],{enumerable:!0,initializer:function(){return!1}}),u=a(i.prototype,"useTextAreaSignInput",[I.observable],{enumerable:!0,initializer:function(){return 0}}),d=a(i.prototype,"isRequired",[I.observable],{enumerable:!0,initializer:function(){return"required"}}),f=a(i.prototype,"success",[I.observable],{enumerable:!0,initializer:function(){return-1}}),p=a(i.prototype,"form",[I.observable],{enumerable:!0,initializer:function(){return new x.WeaForm}}),h=a(i.prototype,"loading",[I.observable],{enumerable:!0,initializer:function(){return!1}}),m=a(i.prototype,"phraseEditDialogTitle",[I.observable],{enumerable:!0,initializer:function(){return""}}),v=a(i.prototype,"setStates",[I.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,b.default)(t).forEach(function(r){e[r]=t[r]})}}}),i);t.default=O},function(e,t,r){"use strict";function n(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=o(t),this.reject=o(r)}var o=r(72);e.exports.f=function(e){return new n(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doWorkflowAddShareBatch=t.doWorkflowDeleteSharePost=t.doWorkflowAddSharePost=t.doWorkflowShareListPost=t.getWfRequestList=t.getShareCondition=void 0;var n=r(0);t.getShareCondition=function(e){return n.WeaTools.callApi("/api/workflow/share/getShareCondition","GET",e)},t.getWfRequestList=function(e){return n.WeaTools.callApi("/api/workflow/reqlist/getList","POST",e)},t.doWorkflowShareListPost=function(e){return n.WeaTools.callApi("/api/workflow/share/sharelist","POST",e)},t.doWorkflowAddSharePost=function(e){return n.WeaTools.callApi("/api/workflow/share/addshare","POST",e)},t.doWorkflowDeleteSharePost=function(e){return n.WeaTools.callApi("/api/workflow/share/deleteshare","POST",e)},t.doWorkflowAddShareBatch=function(e){return n.WeaTools.callApi("/api/workflow/share/addbatchshare","POST",e)}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(8),a=n(o),i=r(3),s=n(i),l=r(1),c=n(l),u=r(2),d=n(u),f=r(4),p=n(f),h=r(5),m=n(h),v=r(0),g=r(457),w=(n(g),r(15)),y=n(w),b=r(45),_=r(71),S=n(_),k=r(211),E=n(k),I=r(458),C=n(I),R=r(6),x=r(7),P=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(x),N=v.WeaLocaleProvider.getLabel,D=function(e){function t(e){(0,c.default)(this,t);var r=(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return r.collect=function(){r.operate("collect")},r.edit=function(){var e=r.props.contentInfo,t=void 0===e?{}:e,n=t.relatedaccList4E9,o=void 0===n?[]:n,a=t.relatedcusList4E9,i=void 0===a?[]:a,s=t.relateddocList4E9,l=void 0===s?[]:s,c=t.relatedprjList4E9,u=void 0===c?[]:c,d=t.relatedwfList4E9,f=void 0===d?[]:d,p=t.relatemutilprjs4E9,h=void 0===p?[]:p;r.setState({edit:!0,editType:"edit",editValues:{richValue:t.showRemark,relatedaccList4E9:o,relatedcusList4E9:i,relateddocList4E9:l,relatedprjList4E9:u,relatedwfList4E9:f,relatemutilprjs4E9:h}})},r.del=function(){var e=r;R.Modal.confirm({content:React.createElement("div",{className:"wea-list-confirm"},React.createElement("p",null,N(388758,"确认要删除吗？"))),onOk:function(){var t=e.state.value;e.setState({edit:!1}),e.operate("delContent",t)}})},r.valueChange=function(e){r.setState({value:e})},r.approve=function(){r.operate("doApproveDiscuss")},r.quote=function(){r.setState({edit:!0,editType:"quote",placeholder:N("519982","引用内容")})},r.comment=function(){r.setState({edit:!0,editType:"comment",placeholder:N("519983","评论内容")})},r.setTop=function(){r.operate("dotop")},r.cancelTop=function(){r.operate("canceltop")},r.zan=function(){r.operate("agree")},r.operate=function(e,t){(0,y.default)(r.props.operate)&&r.props.operate({id:r.props.contentInfo.contentId,operationType:e})},r.submit=function(e,t){var n=r.state.editType,o=r.props.contentInfo,i=(0,a.default)({},e);return i.replyType=n,i.contentId=o.contentId,(0,y.default)(r.props.submit)&&r.props.submit(i,r.cancel.bind(r,t))},r.cancel=function(e){r.setState({edit:!1,editType:"",editValues:{},quoteFlag:!1}),(0,y.default)(e)&&e()},r.check=function(e){(0,y.default)(r.props.check)&&r.props.check(r.props.id,e)},r.state={edit:!1,editType:"",editValues:{},value:"1",placeholder:""},r}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){var e=ReactDOM.findDOMNode(this);(0,b.imgZoom)(e,".wea-cl-content")}},{key:"componentDidUpdate",value:function(e,t){var r=ReactDOM.findDOMNode(this);(0,b.imgZoom)(r,".wea-cl-content")}},{key:"render",value:function(){var e=this.props,t=(e.approvalAtatus,e.contentInfo),r=void 0===t?{}:t,n=(e.remark,e.floorNum,e.showDate,e.id),o=(e.quoteVo,e.commonList,e.zanCount,e.batchOperate,e.checked,e.hasCoworkHref,e.coworkid,e.name,e.canReply),i=e.requestid,s=e.hasSubmitRight,l=void 0!==s&&s,c=this.props,u=(c.isAnonymous,c.isDel,c.isMeCollected,c.isMeZaned,c.istop),d=c.isCanAnonymous,f=this.props,p=(f.relatedaccList4E9,f.relatedcusList4E9,f.relateddocList4E9,f.relatedprjList4E9,f.relatedwfList4E9,f.relatemutilprjs4E9,r.createUserType),h=void 0===p?"1":p,m=(r.createUser,r.isagent),g=r.agentOperatorName,w=r.agentOperatorid,y=this.state,_=y.edit,k=y.editType,I=y.editValues,R=(r.createUserName,r.userUrl,P.toJS(r.replys));return React.createElement("div",{className:"wea-cowork-reply-item"},(!_||"edit"!=k)&&React.createElement("div",null,React.createElement("div",{className:"cowork-reply-header"},"1"==h&&React.createElement(v.WeaAvatar,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaAvatar@re7xwewe",userId:r.createUser}),"2"==h&&React.createElement("img",{src:r.userUrl,className:"content-text-left-user-img"})),React.createElement("div",{className:"cowork-reply-content",style:{paddingLeft:"53px"}},React.createElement("div",null,React.createElement("span",{className:"cowork-reply-user"},"1"==h&&(m?[React.createElement("a",{href:"javaScript:openhrm("+w+");",onClick:window.pointerXY},g+"->"),React.createElement("a",{href:"javaScript:openhrm("+r.createUser+");",onClick:window.pointerXY},r.createUserName)]:React.createElement("a",{href:"javaScript:openhrm("+r.createUser+");",onClick:window.pointerXY},r.createUserName)),"2"==h&&(m?[React.createElement("a",{href:"javaScript: window.open('/spa/crm/static/index.html#/main/crm/customerView?customerId="+w+"&_key=jfzmyh', '_blank')"},g+"->"),React.createElement("a",{href:"javaScript: window.open('/spa/crm/static/index.html#/main/crm/customerView?customerId="+r.createUser+"&_key=jfzmyh', '_blank')"},""+r.createUserName)]:React.createElement("a",{href:"javaScript: window.open('/spa/crm/static/index.html#/main/crm/customerView?customerId="+r.createUser+"&_key=jfzmyh', '_blank')"},r.createUserName))),React.createElement("span",{className:"fr"},1==u&&React.createElement("span",{className:"fr-top"},"Top"),"#",r.flowNum)),React.createElement("div",{className:"cowork-reply-remark"},r.quoteVo&&React.createElement(E.default,(0,a.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_QuoteItem@3ykyvp"},r.quoteVo)),React.createElement("div",{className:"wea-cl-content",dangerouslySetInnerHTML:{__html:'<div class="wea-ckeditor-content">'+r.showRemark+"</div>"}})),React.createElement("div",{className:"workflow-resource-list"},(0,b.createReplyBottomAtt)(N(857,"相关文档")+":",r.relateddocList4E9,function(){},"doc"),(0,b.createReplyBottomAtt)(N(1044,"相关流程")+":",r.relatedwfList4E9,function(){},"wf"),(0,b.createReplyBottomAtt)(N(783,"相关客户")+":",r.relatedcusList4E9,function(){},"crm"),(0,b.createReplyBottomAtt)(N(782,"相关项目")+":",r.relatemutilprjs4E9,function(){},"project"),(0,b.createReplyBottomAtt)(N(33414,"相关任务")+":",r.relatedprjList4E9,function(){},"task"),(0,b.createReplyBottomAtt)(N(33414,"相关附件")+":",r.relatedaccList4E9,function(){},"acc")),React.createElement("div",{className:"bottom-operate"},React.createElement("span",{className:"reply-time"},r.showDate),React.createElement("div",{className:"fr"},1!=r.isDelete&&l&&r.canModify&&O(N(93,"编辑"),"icon-cooperation-edit",this.edit),1!=r.isDelete&&l&&r.canModify&&O(N(91,"删除"),"icon-cooperation-delete",this.del),1!=r.isDelete&&l&&O(N(19422,"引用"),"icon-cooperation-Quote",this.quote),1!=r.isDelete&&l&&O(N(675,"评论"),"icon-coms-New-SMS",this.comment),1!=r.isDelete&&l&&(1==r.approved?O(N(382631,"已点赞")+"("+r.approveNum+")","icon-coms-satisfaction",this.zan):O(N(32942,"赞")+"("+r.approveNum+")","icon-coms-Good",this.zan))),React.createElement("div",{className:"clear-both"})),Array.isArray(R)&&R.length>0&&React.createElement(C.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_ReplyList@phr8sc",appStatus:this.props.appStatus,requestid:i,contentId:r.contentId,operate:this.props.operate,list:R,submit:this.props.submit,topdiscussid:n,isCanAnonymous:d,canReply:o,hasSubmitRight:l}))),_&&React.createElement(S.default,(0,a.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_CommunicationRichText@8vut0r",appStatus:this.props.appStatus,requestid:i,hasSubmit:!0,ref:"richText",submit:this.submit,cancel:this.cancel,isCanAnonymous:d,editType:k},I,{placeholder:this.state.placeholder})))}}]),t}(React.Component),O=function(e,t,r){return React.createElement("span",{className:"icon",onClick:r},React.createElement("i",{className:t}),React.createElement("span",{className:"text"},e))};t.default=D},function(e,t,r){"use strict";t.__esModule=!0;var n=r(13),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t,r){return t in e?(0,o.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){e.exports=!r(28)&&!r(47)(function(){return 7!=Object.defineProperty(r(94)("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){e.exports={default:r(220),__esModule:!0}},function(e,t,r){var n=r(38),o=r(39),a=r(223)(!1),i=r(99)("IE_PROTO");e.exports=function(e,t){var r,s=o(e),l=0,c=[];for(r in s)r!=i&&n(s,r)&&c.push(r);for(;t.length>l;)n(s,r=t[l++])&&(~a(c,r)||c.push(r));return c}},function(e,t,r){var n=r(56);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,r){var n=r(38),o=r(48),a=r(99)("IE_PROTO"),i=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?i:null}},function(e,t,r){"use strict";var n=r(57),o=r(20),a=r(143),i=r(37),s=r(49),l=r(230),c=r(75),u=r(141),d=r(17)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,r,h,m,v,g){l(r,t,h);var w,y,b,_=function(e){if(!f&&e in I)return I[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},S=t+" Iterator",k="values"==m,E=!1,I=e.prototype,C=I[d]||I["@@iterator"]||m&&I[m],R=C||_(m),x=m?k?_("entries"):R:void 0,P="Array"==t?I.entries||C:C;if(P&&(b=u(P.call(new e)))!==Object.prototype&&b.next&&(c(b,S,!0),n||"function"==typeof b[d]||i(b,d,p)),k&&C&&"values"!==C.name&&(E=!0,R=function(){return C.call(this)}),n&&!g||!f&&!E&&I[d]||i(I,d,R),s[t]=R,s[S]=p,m)if(w={values:k?R:_("values"),keys:v?R:_("keys"),entries:x},g)for(y in w)y in I||a(I,y,w[y]);else o(o.P+o.F*(f||E),t,w);return w}},function(e,t,r){e.exports=r(37)},function(e,t,r){var n=r(16).document;e.exports=n&&n.documentElement},function(e,t,r){var n=r(139),o=r(101).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},function(e,t){},function(e,t){function r(e,t){return function(r){return e(t(r))}}e.exports=r},function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(t,r(149))},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"===typeof window&&(r=window)}e.exports=r},function(e,t){function r(e){if(null!=e){try{return o.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var n=Function.prototype,o=n.toString;e.exports=r},function(e,t,r){var n=r(41),o=r(24),a=n(o,"Set");e.exports=a},function(e,t,r){function n(e){if("string"==typeof e)return e;if(i(e))return a(e,n)+"";if(s(e))return u?u.call(e):"";var t=e+"";return"0"==t&&1/e==-l?"-0":t}var o=r(51),a=r(111),i=r(14),s=r(62),l=1/0,c=o?o.prototype:void 0,u=c?c.toString:void 0;e.exports=n},function(e,t){function r(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),r=r>o?o:r,r<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(o);++n<o;)a[n]=e[n+t];return a}e.exports=r},function(e,t){function r(e,t,r,n){for(var o=e.length,a=r+(n?1:-1);n?a--:++a<o;)if(t(e[a],a,e))return a;return-1}e.exports=r},function(e,t){function r(e){return n.test(e)}var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=r},function(e,t,r){function n(e,t,r,n,c,u){var d=r&s,f=e.length,p=t.length;if(f!=p&&!(d&&p>f))return!1;var h=u.get(e);if(h&&u.get(t))return h==t;var m=-1,v=!0,g=r&l?new o:void 0;for(u.set(e,t),u.set(t,e);++m<f;){var w=e[m],y=t[m];if(n)var b=d?n(y,w,m,t,e,u):n(w,y,m,e,t,u);if(void 0!==b){if(b)continue;v=!1;break}if(g){if(!a(t,function(e,t){if(!i(g,t)&&(w===e||c(w,e,r,n,u)))return g.push(t)})){v=!1;break}}else if(w!==y&&!c(w,y,r,n,u)){v=!1;break}}return u.delete(e),u.delete(t),v}var o=r(157),a=r(302),i=r(158),s=1,l=2;e.exports=n},function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new o;++t<r;)this.add(e[t])}var o=r(113),a=r(300),i=r(301);n.prototype.add=n.prototype.push=a,n.prototype.has=i,e.exports=n},function(e,t){function r(e,t){return e.has(t)}e.exports=r},function(e,t,r){var n=r(24),o=n.Uint8Array;e.exports=o},function(e,t,r){function n(e){return o(e,i,a)}var o=r(161),a=r(115),i=r(52);e.exports=n},function(e,t,r){function n(e,t,r){var n=t(e);return a(e)?n:o(n,r(e))}var o=r(87),a=r(14);e.exports=n},function(e,t){function r(e,t){for(var r=-1,n=null==e?0:e.length,o=0,a=[];++r<n;){var i=e[r];t(i,r,e)&&(a[o++]=i)}return a}e.exports=r},function(e,t){function r(){return[]}e.exports=r},function(e,t,r){function n(e,t){var r=i(e),n=!r&&a(e),u=!r&&!n&&s(e),f=!r&&!n&&!u&&c(e),p=r||n||u||f,h=p?o(e.length,String):[],m=h.length;for(var v in e)!t&&!d.call(e,v)||p&&("length"==v||u&&("offset"==v||"parent"==v)||f&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||l(v,m))||h.push(v);return h}var o=r(306),a=r(59),i=r(14),s=r(60),l=r(116),c=r(79),u=Object.prototype,d=u.hasOwnProperty;e.exports=n},function(e,t,r){function n(e,t,r){t=o(t,e);for(var n=-1,u=t.length,d=!1;++n<u;){var f=c(t[n]);if(!(d=null!=e&&r(e,f)))break;e=e[f]}return d||++n!=u?d:!!(u=null==e?0:e.length)&&l(u)&&s(f,u)&&(i(e)||a(e))}var o=r(166),a=r(59),i=r(14),s=r(116),l=r(110),c=r(88);e.exports=n},function(e,t,r){function n(e,t){return o(e)?e:a(e,t)?[e]:i(s(e))}var o=r(14),a=r(117),i=r(309),s=r(81);e.exports=n},function(e,t,r){function n(e,t,r){var n=null==e?void 0:o(e,t);return void 0===n?r:n}var o=r(168);e.exports=n},function(e,t,r){function n(e,t){t=o(t,e);for(var r=0,n=t.length;null!=e&&r<n;)e=e[a(t[r++])];return r&&r==n?e:void 0}var o=r(166),a=r(88);e.exports=n},function(e,t,r){function n(e){return"string"==typeof e||!a(e)&&i(e)&&o(e)==s}var o=r(36),a=r(14),i=r(22),s="[object String]";e.exports=n},function(e,t){function r(e){return function(t){return null==t?void 0:t[e]}}e.exports=r},function(e,t,r){function n(e){if("number"==typeof e)return e;if(a(e))return i;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var r=c.test(e);return r||u.test(e)?d(e.slice(2),r?2:8):l.test(e)?i:+e}var o=r(25),a=r(62),i=NaN,s=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,d=parseInt;e.exports=n},function(e,t,r){function n(e,t){return null==e?e:o(e,a(t),i)}var o=r(119),a=r(319),i=r(66);e.exports=n},function(e,t,r){function n(e,t,r){(void 0===r||a(e[t],r))&&(void 0!==r||t in e)||o(e,t,r)}var o=r(120),a=r(64);e.exports=n},function(e,t,r){var n=r(41),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,r){(function(e){function n(e,t){if(t)return e.slice();var r=e.length,n=c?c(r):new e.constructor(r);return e.copy(n),n}var o=r(24),a="object"==typeof t&&t&&!t.nodeType&&t,i=a&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===a,l=s?o.Buffer:void 0,c=l?l.allocUnsafe:void 0;e.exports=n}).call(t,r(78)(e))},function(e,t,r){function n(e,t){var r=t?o(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var o=r(121);e.exports=n},function(e,t,r){function n(e){return"function"!=typeof e.constructor||i(e)?{}:o(a(e))}var o=r(325),a=r(123),i=r(77);e.exports=n},function(e,t){function r(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}e.exports=r},function(e,t,r){function n(e,t,r){var n=e[t];s.call(e,t)&&a(n,r)&&(void 0!==r||t in e)||o(e,t,r)}var o=r(120),a=r(64),i=Object.prototype,s=i.hasOwnProperty;e.exports=n},function(e,t,r){function n(e,t){return i(a(e,t,o),e+"")}var o=r(65),a=r(330),i=r(332);e.exports=n},function(e,t,r){function n(e,t,r){if(!s(r))return!1;var n=typeof t;return!!("number"==n?a(r)&&i(t,r.length):"string"==n&&t in r)&&o(r[t],e)}var o=r(64),a=r(29),i=r(116),s=r(25);e.exports=n},function(e,t,r){var n=r(87),o=r(123),a=r(115),i=r(163),s=Object.getOwnPropertySymbols,l=s?function(e){for(var t=[];e;)n(t,a(e)),e=o(e);return t}:i;e.exports=l},function(e,t,r){function n(e){return e===e&&!o(e)}var o=r(25);e.exports=n},function(e,t){function r(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}e.exports=r},function(e,t,r){function n(e,t,r,i,s){var l=-1,c=e.length;for(r||(r=a),s||(s=[]);++l<c;){var u=e[l];t>0&&r(u)?t>1?n(u,t-1,r,i,s):o(s,u):i||(s[s.length]=u)}return s}var o=r(87),a=r(363);e.exports=n},function(e,t){e.exports=l},function(e,t){},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(136),a=n(o),i=r(8),s=n(i),l=r(3),c=n(l),u=r(1),d=n(u),f=r(2),p=n(f),h=r(4),m=n(h),v=r(5),g=n(v),w=r(0),y=r(6),b=r(15),_=(n(b),r(373)),S=n(_),k=r(91),E=n(k),I=w.WeaLocaleProvider.getLabel,C=function(e){function t(e){(0,d.default)(this,t);var r=(0,m.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return r.onCancel=function(){var e={replyInfo:{signReplyData:{},signReplyFlag:!1,replyRemarkStr:""}};r.setState((0,s.default)({visible:!1},e))},r.submit=function(){var e=r.props,t=e.store.saveReplyOthers,n=e.replyInfo,o=e.submitCallBackFun,a=r.refs.replyRich.state,i=a.richValue,s=a.anonymous,l=a.relatedaccList4E9,c=void 0===l?[]:l,u=a.relatedcusList4E9,d=void 0===u?[]:u,f=a.relateddocList4E9,p=void 0===f?[]:f,h=a.relatedprjList4E9,m=void 0===h?[]:h,v=a.relatedwfList4E9,g=void 0===v?[]:v,w=a.relatemutilprjs4E9,b=void 0===w?[]:w;i=r.refs.replyRich.refs.rich.getEditor().getData(),i=i.replace(/​/gi,"");var _=i;if(""!=i&&i.indexOf("<img")<0&&(_=i.replace(/<\/?[^>]*>/g,""),_=_.replace(/[\u200B-\u200D\uFEFF]/g,""),_=_.replace(/\n/g,""),_=_.replace("&#8203;","").replace(/&nbsp;/g,""),_=_.trim()),!_)return y.message.error(I(382648,"请输入交流内容")),!1;var S={remark:i,isAnonymous:s};S.relatedprj=m.map(function(e){return e.id}).join(),S.relatedcus=d.map(function(e){return e.id}).join(),S.relatedwf=g.map(function(e){return e.id}).join(),S.relateddoc=p.map(function(e){return e.id}).join(),S.projectIDs=b.map(function(e){return e.id}).join(),S.relatedacc=c.map(function(e){return e.fileid||e.id}).join(),t({replyInfo:n,richParams:S},o),""!=i&&r.onCancel()},r.state={visible:!0,replyInfo:{signReplyData:r.props.replyInfo||{},signReplyFlag:!0,signReplyStr:r.props.replyRemarkStr||""}},r}return(0,g.default)(t,e),(0,p.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.replyInfo,r=e.replyRemarkStr;this.setState({visible:!0,replyInfo:{signReplyData:t,signReplyFlag:!0,signReplyStr:r}})}},{key:"render",value:function(){var e,t=this,r=this.state,n=r.visible,o=r.replyInfo,i=this.props.store,s=i.appStatus,l=[React.createElement(y.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@uxegtk@confirm",type:"primary",onClick:function(){t.submit()}},I(83446,"确定")),React.createElement(y.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@33xp5x@close",type:"ghost",onClick:function(){t.onCancel()}},I("309","关闭"))],c=o.signReplyData.displayname;return o.signReplyData.isexsAgent&&(c=o.signReplyData.displaybyagentname+"->"+c),c=I(385534,"回复")+": "+c,React.createElement(w.WeaDialog,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@6hdv7p",title:c,className:"reply-dialog",visible:n,buttons:l,onCancel:function(){t.onCancel()},icon:"icon-coms-workflow",iconBgcolor:"rgb(0,121,222)",style:{width:1e3},draggable:!0},React.createElement("div",{className:"cowork-reply-remark"},React.createElement(S.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_QuoteItem@ouklk1",signReplyInfo:o,store:i,isFromLoglist:!0}),React.createElement(E.default,(e={ecId:(this&&this.props&&this.props.ecId||"")+"_CommunicationRichText@2z50xt",editorId:"replyRichremark",ref:"replyRich",appStatus:{},submit:this.submit,cancel:this.onCancel,noNeedSubmitBtn:!0,noNeedCancelBtn:!0},(0,a.default)(e,"appStatus",s),(0,a.default)(e,"logParams",i.logItemBaseParams),(0,a.default)(e,"store",this.props.store),e))))}}]),t}(React.Component);t.default=C},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(3),i=n(a),s=r(1),l=n(s),c=r(2),u=n(c),d=r(4),f=n(d),p=r(5),h=n(p),m=r(9),v=n(m),g=r(10),w=r(0),y=r(11),b=r(40);!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(b);r(43);var _=r(91),S=(n(_),r(374)),k=n(S),E=r(6),I=(y.WeaTableNew.WeaTable,w.WeaLocaleProvider.getLabel),C=(0,g.observer)(o=function(e){function t(){var e,r,n,o;(0,l.default)(this,t);for(var a=arguments.length,s=Array(a),c=0;c<a;c++)s[c]=arguments[c];return r=n=(0,f.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(s))),n.submit=function(e,t){var r=n.props.logid,o=e.remark;if(""!=e.remark&&e.remark.indexOf("<img")<0&&(o=e.remark.replace(/<\/?[^>]*>/g,""),o=o.replace(/[\u200B-\u200D\uFEFF]/g,""),o=o.replace(/\n/g,""),o=o.replace("&#8203;","").replace(/&nbsp;/g,""),o=o.trim()),!o)return E.message.error(I(382648,"请输入交流内容")),!1;var a=n.props.logListStore;"edit"==e.replyType?a.editContent(e,r,t):a.saveReply(e,r,t)},n.imgLoad=function(){var e=n.props.logid;window.formImgLazyLoad&&window.formImgLazyLoad(jQuery(".wea-workflow-communication-list-"+e))},o=r,(0,f.default)(n,o)}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.imgLoad()}},{key:"componentDidUpdate",value:function(e,t){this.imgLoad()}},{key:"render",value:function(){var e=this,t=this.props,r=t.commentList,n=void 0===r?[]:r,o=t.logListStore,a=t.logid,i=t.isFromPortal,s=void 0!==i&&i,l=t.isprint,c=void 0===l?"0":l,u=t.hasSubmitRight,d=void 0!==u&&u;return v.default.createElement("div",null,v.default.createElement("div",{className:"wea-workflow-communication-list wea-workflow-communication-list-"+a},n.map(function(t,r){return v.default.createElement(k.default,{ecId:(e&&e.props&&e.props.ecId||"")+"_ContentItem@xvg6qh@"+r,isFromPortal:s,appStatus:o.appStatus,contentInfo:t,submit:e.submit,operate:o.delContent,logid:a,logParams:o.logItemBaseParams,isprint:c,hasSubmitRight:d,store:e.props.logListStore})})))}}]),t}(v.default.Component))||o;t.default=w.WeaTools.tryCatch(v.default,function(e){return v.default.createElement(w.WeaErrorPage,{ecId:"_WeaErrorPage@iaakt6",msg:e.error?e.error:I(383324,"对不起，该页面异常，请联系管理员")})},{error:""})(C)},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,n){r&&(0,ae.default)(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function i(e,t,r,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,l,c,u,d,f,p,h,m,v,g,w,y,b,_,S,k,E,I,C,R,x,P,N,D,O,L,T,F,A,M,W,j,B,z,q,U,V,G,H,K,Q,$,J,Y,X,Z,ee,te,re,ne,oe=r(13),ae=o(oe),ie=r(26),se=o(ie),le=r(31),ce=o(le),ue=r(90),de=o(ue),fe=r(8),pe=o(fe),he=r(1),me=o(he),ve=r(2),ge=o(ve),we=r(7),ye=n(we),be=r(11),_e=r(35),Se=n(_e),ke=r(126),Ee=(o(ke),r(89)),Ie=o(Ee),Ce=r(125),Re=(o(Ce),r(129)),xe=n(Re),Pe=r(15),Ne=o(Pe),De=r(6),Oe=r(0),Le=r(19),Te=o(Le),Fe=Oe.WeaLocaleProvider.getLabel,Ae=(s=(0,we.action)("加载签字意见权限相关"),l=(0,we.action)("加载签字意见内容"),c=(0,we.action)("获取富文本相关底部设置项"),u=(0,we.action)("刷新当前tab页的appstatus"),d=(0,we.action)("加载签字意见评论内容"),f=(0,we.action)("改变分页状态管理器"),p=(0,we.action)("保存被回复人的签字意见文本"),h=(0,we.action)("保存一级回复"),m=(0,we.action)("保存二级子回复"),v=(0,we.action)("刷新评论内容"),g=(0,we.action)("更新请求参数"),w=(0,we.action)("签字意见高级搜索"),y=(0,we.action)("修改每页显示数量"),b=(0,we.action)("切换tab页"),_=function(){function e(){var t=this;(0,me.default)(this,e),a(this,"loading",S,this),a(this,"searchForm",k,this),this.refRequestId=0,a(this,"logListTabKey",E,this),a(this,"isShowUserheadimg",I,this),a(this,"logList",C,this),this.logCount=0,a(this,"logParams",R,this),this.requestLogParams={},this.relLogParams={},this.commonParams={},a(this,"pageStatusMap",x,this),a(this,"showSearchDrop",P,this),a(this,"appStatus",N,this),a(this,"initLog",D,this),a(this,"communicateSettingKey",O,this),a(this,"loadLogBaseInfo",L,this),this.canReloadLoglistFlag=!0,a(this,"loadMarkInfo",T,this),a(this,"hasSubmitRight",F,this),a(this,"getAppStatus",A,this),a(this,"refAppStatus",M,this),a(this,"getComment",W,this),a(this,"changePageStatus",j,this),a(this,"setReplyMark",B,this),a(this,"saveReplyOthers",z,this),this.isSubReqeuestid=function(){var e=t.refRequestId,r=t.requestLogParams.allrequestInfos;for(var n in r)if(r[n].requestid==e)return 1;return 0},this.delContent=function(e,r){xe.doDelete((0,pe.default)({},t.logParams,e)).then(function(e){!1===e.canDelete?(De.message.destroy(),De.message.error(Fe("512478","已超过规定时间或有新内容，无法删除")),t.loadMarkInfo()):t.loadMarkInfo()})},a(this,"saveReply",q,this),this.editContent=function(e,r,n){xe.doEditContent((0,pe.default)({},t.baseParam,e)).then(function(e){!1===e.canModify&&(De.message.destroy(),De.message.error("已超过规定时间或有新内容，无法编辑！")),t.reflashContentList(r),(0,Ne.default)(n)&&n()})},a(this,"reflashContentList",U,this),a(this,"setState",V,this),a(this,"updateLogParams",G,this),a(this,"advanceSearch",H,this),a(this,"setLogPagesize",K,this),a(this,"changeLogListTab",Q,this),a(this,"controllShowUserImg",$,this),a(this,"loadRefReqSignInfo",J,this),a(this,"scrollLoadSign",Y,this),a(this,"controllSearchDrop",X,this),a(this,"clearFormFields",Z,this),a(this,"setLoging",ee,this),a(this,"setShowUserHeadImg",te,this),a(this,"setRequestLogParams",re,this),a(this,"setLogData",ne,this),this.initLog=this.initLog,this.loadLogBaseInfo=this.loadLogBaseInfo,this.loadMarkInfo=this.loadMarkInfo,this.updateLogParams=this.updateLogParams,this.changeLogListTab=this.changeLogListTab,this.controllShowUserImg=this.controllShowUserImg,this.loadRefReqSignInfo=this.loadRefReqSignInfo,this.scrollLoadSign=this.scrollLoadSign,this.controllSearchDrop=this.controllSearchDrop,this.clearFormFields=this.clearFormFields,this.setLogPagesize=this.setLogPagesize,this.advanceSearch=this.advanceSearch,this.setShowUserHeadImg=this.setShowUserHeadImg,this.setLoging=this.setLoging,this.setLogData=this.setLogData,this.setRequestLogParams=this.setRequestLogParams}return(0,ge.default)(e,[{key:"queryLogParams",get:function(){return(0,pe.default)({isFromWfForm:1},this.logListTabKey>2?this.relLogParams:this.logParams,this.searchForm.getFormParams())}},{key:"logItemBaseParams",get:function(){return{authStr:this.commonParams.authStr,authSignatureStr:this.commonParams.authSignatureStr,signatureAttributesStr:this.commonParams.signatureAttributesStr,signatureSecretKey:this.commonParams.signatureSecretKey,f_weaver_belongto_userid:this.commonParams.f_weaver_belongto_userid,f_weaver_belongto_usertype:this.commonParams.f_weaver_belongto_usertype,requestid:this.commonParams.requestid,workflowid:this.commonParams.workflowid,forward:this.commonParams.forward,isShowUserheadimg:this.isShowUserheadimg}}},{key:"currentPage",get:function(){return this.logListTabKey>2?this.relLogParams.pgnumber:this.logParams.pgnumber}}]),e}(),S=i(_.prototype,"loading",[we.observable],{enumerable:!0,initializer:function(){return!1}}),k=i(_.prototype,"searchForm",[we.observable],{enumerable:!0,initializer:function(){return new be.WeaForm}}),E=i(_.prototype,"logListTabKey",[we.observable],{enumerable:!0,initializer:function(){return 1}}),I=i(_.prototype,"isShowUserheadimg",[we.observable],{enumerable:!0,initializer:function(){return!0}}),C=i(_.prototype,"logList",[we.observable],{enumerable:!0,initializer:function(){return[]}}),R=i(_.prototype,"logParams",[we.observable],{enumerable:!0,initializer:function(){return{}}}),x=i(_.prototype,"pageStatusMap",[we.observable],{enumerable:!0,initializer:function(){return we.observable.map?we.observable.map({}):(0,we.asMap)({})}}),P=i(_.prototype,"showSearchDrop",[we.observable],{enumerable:!0,initializer:function(){return!1}}),N=i(_.prototype,"appStatus",[we.observable],{enumerable:!0,initializer:function(){return{}}}),i(_.prototype,"queryLogParams",[we.computed],(0,de.default)(_.prototype,"queryLogParams"),_.prototype),i(_.prototype,"logItemBaseParams",[we.computed],(0,de.default)(_.prototype,"logItemBaseParams"),_.prototype),i(_.prototype,"currentPage",[we.computed],(0,de.default)(_.prototype,"currentPage"),_.prototype),D=i(_.prototype,"initLog",[we.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.commonParams=t;var r=["requestid","requestType","workflowid","nodeid","signatureAttributesStr","signatureSecretKey","f_weaver_belongto_userid","f_weaver_belongto_usertype","authStr","authSignatureStr","isprint","wfTestStr","isurger"];e.relLogParams={signatureAttributesStr:t.signatureAttributesStr,signatureSecretKey:t.signatureSecretKey,f_weaver_belongto_userid:t.f_weaver_belongto_userid,f_weaver_belongto_usertype:t.f_weaver_belongto_usertype,wfTestStr:t.wfTestStr,authStr:t.authStr,authSignatureStr:t.authSignatureStr,fromCommunication:t.fromCommunication};var n={};r.map(function(e){n[e]=t[e]}),n.submit=t.requestType,n.pgnumber=1,n.maxrequestlogid=0,n.fromCommunication=t.fromCommunication,e.communicateSettingKey.isOpenCommunication=t.isOpenCommunication,e.logParams=n,e.getAppStatus(e.logParams),e.loadLogBaseInfo()}}}),O=i(_.prototype,"communicateSettingKey",[we.observable],{enumerable:!0,initializer:function(){return{isShowSignCommunicate:"0",isExpendCommunicate:"0",isOpenCommunication:"0"}}}),L=i(_.prototype,"loadLogBaseInfo",[s],{enumerable:!0,initializer:function(){var e=this;return function(){e.loading=!0;var t=["viewLogIds","creatorNodeId","isHideInput","isFormSignature","maxrequestlogid","wfsignlddtcnt","orderbytype","logpagesize","loadmethod"],r=["isShowSignCommunicate","isExpendCommunicate"];Se.getRequestLogBaseInfo(e.logListTabKey>2?e.relLogParams:e.logParams).then(function(n){if(1==e.logListTabKey){e.setRequestLogParams(n);var o=n.txStatus,a=void 0===o?"":o,i=n.logCondition;e.searchForm.initFormFields(i),e.setShowUserHeadImg("1"==a)}var s={};t.map(function(e){s[e]=n[e]}),r.map(function(t){n[t]&&(e.communicateSettingKey[t]=n[t])}),e.updateLogParams(s,!0)})}}}),T=i(_.prototype,"loadMarkInfo",[l],{enumerable:!0,initializer:function(){var e=this;return function(){if(e.loading||e.setLoging(!0),e.canReloadLoglistFlag){e.canReloadLoglistFlag=!1;var t=e.queryLogParams;Se.getRequestLogList(t).then(function(t){var r=t.maxrequestlogid,n=t.totalCount,o=t.loglist;if(e.canReloadLoglistFlag=!0,e.updateLogParams({maxrequestlogid:r}),e.setLogData(o,n),e.setLoging(!1),e.logParams.isprint&&1==e.logParams.isprint&&printPreViewPage(),window.WfForm&&WfForm.getGlobalStore&&WfForm.getGlobalStore().urlParams){1==WfForm.getGlobalStore().urlParams.mulPrintMode&&top.window.printReqStore.setPrintBtnDisabled(!0)}e.getComment(),"0"!=e.communicateSettingKey.isOpenCommunication&&"0"!=e.communicateSettingKey.isShowSignCommunicate&&e.refAppStatus((0,pe.default)({},e.logParams,{isSubReqeuestid:e.isSubReqeuestid(),refRequestId:e.refRequestId}))})}}}}),F=i(_.prototype,"hasSubmitRight",[we.observable],{enumerable:!0,initializer:function(){return!1}}),A=i(_.prototype,"getAppStatus",[c],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};xe.getInitParams(t).then(function(t){e.appStatus=t.appStatus,e.hasSubmitRight=t.hasSubmitRight})}}}),M=i(_.prototype,"refAppStatus",[u],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};xe.getInitParams(t).then(function(t){e.appStatus=t.appStatus})}}}),W=i(_.prototype,"getComment",[d],{enumerable:!0,initializer:function(){var e=this;return function(t){var r=["requestid","workflowid","f_weaver_belongto_userid","f_weaver_belongto_usertype","authStr","authSignatureStr","isurger"],n={};r.map(function(t){n[t]=e.logParams[t]}),e.logList.map(function(t,r){n=(0,pe.default)({},n,{type:"list",requestLogId:t.logid,refRequestId:e.refRequestId,isSubReqeuestid:e.isSubReqeuestid()},e.queryLogParams),t.hasCommunicationQuote&&xe.getContentList(n).then(function(n){var o=n.contentList;e.logList[r]=(0,pe.default)({},t,{commentList:o})})})}}}),j=i(_.prototype,"changePageStatus",[f],{enumerable:!0,initializer:function(){var e=this;return function(t,r){var n=e.pageStatusMap.get(t);n.currentPage=r,e.pageStatusMap.set(t,n)}}}),B=i(_.prototype,"setReplyMark",[p],{enumerable:!0,initializer:function(){var e=this;return function(t){e.signReplyText=t}}}),z=i(_.prototype,"saveReplyOthers",[h],{enumerable:!0,initializer:function(){var e=this;return function(t,r){var n=t.replyInfo,o=void 0===n?{}:n,a=t.richParams,i={},s=a.remark;if(""!=a.remark&&a.remark.indexOf("<img")<0&&(s=a.remark.replace(/<\/?[^>]*>/g,""),s=s.replace(/[\u200B-\u200D\uFEFF]/g,""),s=s.replace(/\n/g,""),s=s.replace("&#8203;","").replace(/&nbsp;/g,""),s=s.trim()),!s)return De.message.destroy(),De.message.error(Fe(382648,"请输入交流内容")),!1;var l={reply_man:o.displayname,log_useid:o.displayid,log_displaydepid:o.displaydepid,log_displaydepname:o.displaydepname,log_operatedate:o.log_operatedate,log_operatetime:o.log_operatetime,log_nodename:o.log_nodename,operationname:o.operationname,sign_logid:o.logid,signReplyText:e.signReplyText,log_userType:"0"==o.displaytype?"1":"1"==o.displaytype?"2":""};i=(0,pe.default)({},l,a,e.logParams,{quote_type:"quoteSign",refRequestId:e.refRequestId,isSubReqeuestid:e.isSubReqeuestid()}),xe.doSaveContent(i).then(function(t){t.result&&e.loadMarkInfo(),(0,Ne.default)(r)&&r()})}}}),q=i(_.prototype,"saveReply",[m],{enumerable:!0,initializer:function(){var e=this;return function(t,r,n){var o=(0,pe.default)({},t,{refRequestId:e.refRequestId,isSubReqeuestid:e.isSubReqeuestid()},e.logParams);xe.doSaveReply(o).then(function(t){t.result&&e.reflashContentList(r),(0,Ne.default)(n)&&n()})}}}),U=i(_.prototype,"reflashContentList",[v],{enumerable:!0,initializer:function(){var e=this;return function(t){var r={};r=(0,pe.default)({type:"list",requestLogId:t},e.logParams,{refRequestId:e.refRequestId,isSubReqeuestid:e.isSubReqeuestid()}),xe.getContentList(r).then(function(r){var n=(0,Te.default)((0,we.toJS)(e.logList));n.map(function(e,o){e.logid==t&&(n[o].commentList=[].concat((0,ce.default)(r.contentList)))}),e.logList=n})}}}),V=i(_.prototype,"setState",[we.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments[1];return(0,se.default)(t).forEach(function(r){e.status[r]=t[r]}),(0,Ne.default)(r)&&r(),e}}}),G=i(_.prototype,"updateLogParams",[g],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.logListTabKey>2?e.relLogParams=(0,pe.default)({},e.relLogParams,t):e.logParams=(0,pe.default)({},e.logParams,t),r&&e.loadMarkInfo()}}}),H=i(_.prototype,"advanceSearch",[w],{enumerable:!0,initializer:function(){var e=this;return function(){e.updateLogParams({maxrequestlogid:"",pgnumber:1}),e.loadMarkInfo()}}}),K=i(_.prototype,"setLogPagesize",[y],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Se.updateRequestLogPageSize(t).then(function(r){var n={pgnumber:1,maxrequestlogid:0,wfsignlddtcnt:t.logpagesize};e.updateLogParams(n,!0)})}}}),Q=i(_.prototype,"changeLogListTab",[b],{enumerable:!0,initializer:function(){var e=this;return function(t,r){e.refRequestId=r,e.logListTabKey=t}}}),$=i(_.prototype,"controllShowUserImg",[we.action],{enumerable:!0,initializer:function(){var e=this;return function(){e.isShowUserheadimg=!e.isShowUserheadimg,Se.updateUserTxStatus({txstatus:e.isShowUserheadimg?"1":"0"})}}}),J=i(_.prototype,"loadRefReqSignInfo",[we.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.relLogParams=(0,pe.default)({},e.relLogParams,t),e.loadLogBaseInfo()}}}),Y=i(_.prototype,"scrollLoadSign",[we.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.updateLogParams(t),e.loading=!0,Se.getRequestLogList(e.queryLogParams).then(function(t){var r=t.loglist,n=void 0===r?[]:r,o=t.maxrequestlogid,a=t.totalCount,i=(0,Ie.default)(ye.toJS(e.logList),n);e.setLogData(i,a),e.updateLogParams({maxrequestlogid:o}),e.setLoging(!1),e.getComment()})}}}),X=i(_.prototype,"controllSearchDrop",[we.action],{enumerable:!0,initializer:function(){var e=this;return function(t){e.showSearchDrop=t}}}),Z=i(_.prototype,"clearFormFields",[we.action],{enumerable:!0,initializer:function(){var e=this;return function(){e.searchForm.resetConditionValue()}}}),ee=i(_.prototype,"setLoging",[we.action],{enumerable:!0,initializer:function(){var e=this;return function(t){e.loading=t}}}),te=i(_.prototype,"setShowUserHeadImg",[we.action],{enumerable:!0,initializer:function(){var e=this;return function(t){e.isShowUserheadimg=t}}}),re=i(_.prototype,"setRequestLogParams",[we.action],{enumerable:!0,initializer:function(){var e=this;return function(t){e.requestLogParams=t}}}),ne=i(_.prototype,"setLogData",[we.action],{enumerable:!0,initializer:function(){var e=this;return function(t,r){e.logCount=r,e.logList=t}}}),_);t.default=Ae},function(e,t,r){e.exports={default:r(380),__esModule:!0}},function(e,t,r){var n=r(23);e.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){var a=e.return;throw void 0!==a&&n(a.call(e)),t}}},function(e,t,r){var n=r(49),o=r(17)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||a[o]===e)}},function(e,t,r){var n=r(17)("iterator"),o=!1;try{var a=[7][n]();a.return=function(){o=!0},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var a=[7],i=a[n]();i.next=function(){return{done:r=!0}},a[n]=function(){return i},e(a)}catch(e){}return r}},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=r(32),s=o(i),l=r(8),c=o(l),u=r(3),d=o(u),f=r(1),p=o(f),h=r(2),m=o(h),v=r(4),g=o(v),w=r(5),y=o(w);r(384);var b=r(9),_=o(b),S=r(10),k=r(6),E=r(0),I=r(385),C=o(I),R=r(388),x=o(R),P=r(92),N=o(P),D=r(44),O=n(D),L=r(197),T=o(L),F=r(203),A=o(F),M=r(42),W=(o(M),r(30)),j=(o(W),r(7)),B=n(j),z=(k.Modal.warning,k.Modal.confirm),q=E.WeaLocaleProvider.getLabel,U=(0,S.observer)(a=function(e){function t(e){(0,p.default)(this,t);var r=(0,g.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return r.hasBottomConfig=function(){var e=r.props.wfForwardStore,t=e.signinput,n=void 0===t?{}:t,o=(n.use_textarea_signinput,n.isannexupload_edit),a=n.isSignDoc_edit,i=n.isSignWorkflow_edit,s=n.remarkInfo,l=void 0===s?{}:s,c=(n.isFormSignature,n.isSignLocation_edit),u=l.handWrittenSignSwitch,d=!1;return 1!=o&&1!=a&&1!=i&&1!=c&&1!=u||(d=!0),d},r.onRightMenuClick=function(e){r.submitEvent()},r.doChangeEvent=function(e,t,n){var o=r.props.wfForwardStore,a=o.setFormParams,i=o.setOperatorDatas,s=o.formParams;s.field5,s.forwardflag;a({field5:e}),i([])},r.submitEvent=function(){var e=r.props.wfForwardStore,t=r.props.globalStore,n="";if(t){n=t.submitParam.openByDefaultBrowser}var o=(e.operatorDatas,e.signinput),a=void 0===o?{}:o,i=e.formParams,s=void 0===i?{}:i,l=e.requestType,c=e.currentnodetype,u=e.doSubmitPost,d=s.field5,f=s.IsSubmitedOpinion,p=s.IsBeForwardTodo,h=s.forwardflag,m=void 0===h?"1":h,v=(a.signMustInputTypes,a.isSignMustInput,a.isFormSignature),g=void 0===v?"":v,w=a.customBtnInfo,y=void 0===w?{}:w,b=y.overTimeTakInfo,_=void 0===b?{}:b,S=y.btnNameInfo,E=void 0===S?{}:S,I=r.getSignInputInfo(),C=!0;if(r.verifyRemarkMustInput(a,m)&&"1"!=g){var R=window.CK_REF.forwardremark.getEditor().getData();C=O.chekcremark(R,I)}else if(0==I&&"1"==g)return;if(!C&&"1"!=g||""==d)return void k.message.warning(q(384146,"必要信息不完整，红色*号为必填项！"),2);if(1==s.isOpenTakOvertime&&!s.takOverHours&&!s.takOverMins)return void k.message.warning(_&&_[3],2);var x={};x.openByDefaultBrowser=n,"3"==c?(x.IsBeForwardSubmitNotaries=f,x.IsBeForward=p):"1"==l?(x.IsSubmitedOpinion=f,x.IsBeForwardTodo=p):(x.IsBeForwardSubmitAlready=f,x.IsBeForwardAlready=p);var P=(0,N.default)({},{operate:"save",field5:d},x,s,I);"1"!==a.needconfirm||"2"!=m&&"3"!=m?u(P):z({zIndex:1050,content:q("519085","确认是否{1}？").replace("{1}","2"==m?E[2]:E[3]),onOk:function(){u(P)},onCancel:function(){}})},r.contentUtil=function(e){var t=e.substr(0,e.indexOf("<div _quotoContent='true'"));e=e.slice(e.indexOf("<div _quotoContent='true'"));var r="["+q(528760,"图片")+"]";return e=e.replace(/<img.*?>/g,r),e=e.replace(/<[^>]*>|<\/[^>]*>/gm,""),e=e.replace(/\r|\n|\\s/gm,""),e='<div class="remark-quote">'+e+"</div>",e=t+e+"</div>"},r.getRemarkDom=function(){var e=r.props.wfForwardStore,t=e.remarkMap,n=[];return t.forEach(function(e,t,o){var a=_.default.createElement("div",{className:"remark_list_dom",style:{position:"relative"}},_.default.createElement("div",{dangerouslySetInnerHTML:{__html:r.contentUtil(e)}}),_.default.createElement(k.Icon,{ecId:(r&&r.props&&r.props.ecId||"")+"_Icon@tb2va6@"+t,type:"cross",className:"wf-req-sign-input-delete",onClick:r.deleteItem.bind(r,t)}));""!==e&&n.push(a)}),n},r.cancelEvent=function(){var e=r.props.wfForwardStore,t=e.setFormParams,n=e.closeForwarDialog,o=e.callBackActions,a=void 0===o?{}:o,i=e.signinput;e.setSignInput,i.isFormSignature,i.isSignMustInput;if(window.CK_REF&&window.CK_REF.forwardremark&&window.CK_REF.forwardremark.getEditor()){t({remark:window.CK_REF.forwardremark.getEditor().getData().replace(/​/gi,"")})}if(1==i.isFormSignature){var s=window.saveAutograph(!1,!0);"wfWeaAutographCompforwardremark"==s.indexOfAutograph&&t({workflowRequestLogId:s.recordId})}e.setShowForward({showForward:!1,requestid:-1,isClickCloseBtn:!0}),n&&"function"==typeof n&&n();var l=a.callBackfun;"function"===typeof l&&l()},r}return(0,y.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.wfForwardStore,n=t.inOdoc,o=void 0!==n&&n,a=r.showForward,i=r.isshownodeoperators,l=r.isshowoperategroup,u=r.signinput,d=void 0===u?{}:u,f=(r.operatorDatas,r.loading),p=(r.selectOperatorsMax,r.loaded),h=r.isdisabledbtns,m=r.isClear,v=r.formParams,g=void 0===v?{}:v,w=r.initRemarkContent,y=r.remarkMap,b=r.chuanyueInfo,S=r.remindTypes,I=r.replyNoticeInfo,R=void 0===I?{}:I,P=r.fwLimitInfo,N=void 0===P?{}:P,D=r.isFormSignature,O=r.ForceRenderFile,L=r.remindInfo,F=d.use_textarea_signinput,M=d.isannexupload_edit,W=d.isSignDoc_edit,B=d.isSignWorkflow_edit,z=d.remarkInfo,U=void 0===z?{}:z,V=d.isSignLocation_edit,G=U.handWrittenSignSwitch,H=R.showReplyNotice,K=R.noticeLabel,Q=N.isopen,$=void 0===Q?"":Q,J=N.choiceoperator,Y=void 0===J?"":J,X=g.IsSubmitedOpinion,Z=g.IsBeForwardTodo,ee=(g.field5,g.forwardflag),te=void 0===ee?"1":ee,re=g.feedbacksign,ne=void 0===re?"":re,oe=g.requestid,ae=void 0===oe?-1:oe,ie=g.isSubmitSign,se=void 0===ie?"0":ie,le=g.isChuanyue,ce=void 0===le?"0":le,ue=g.isRemind,de=void 0===ue?"0":ue,fe=g.remark,pe=void 0===fe?"":fe,he=g.isOpenTakOvertime,me=void 0===he?"0":he,ve=g.isShowReplyNotice,ge=g.isMulitTak,we=g.workflowRequestLogId,ye=r.handleVisibleChange,be=r.handleShowNodeOperator,_e=(r.setOperatorIds,r.dropAllUserGroup),Se=b.submitSignName,ke=b.chuanyueName,Ee=b.remindName,Ie=d.isforwardrights,Ce=void 0===Ie?"":Ie,Re=d.requestname,xe=void 0===Re?"":Re,Pe=d.isHideInput,Ne=void 0===Pe?"":Pe,De=d.IsSubmitedOpinionShowname,Oe=void 0===De?q("81777","可提交意见"):De,Le=d.IsBeForwardTodoShowname,Te=void 0===Le?q("81776","可转发"):Le,Fe=d.customBtnInfo,Ae=void 0===Fe?{}:Fe,Me=g.secLevelInfo?g.secLevelInfo:d.secLevelInfo,We=Ae.receiveLabelInfo,je=void 0===We?{}:We,Be=Ae.nodeOperatorTitleInfo,ze=void 0===Be?{}:Be,qe=Ae.overTimeTakInfo,Ue=void 0===qe?{}:qe,Ve=je[te]||"",Ge=ze[te]||"",He=this.verifyRemarkMustInput(d,te),Ke="1"==Ce?479:439,Qe="1"==Ne;Qe&&(Ke-=175),L=(0,c.default)({},L,{value:S});var $e=q("24965","转发接收人");"2"==te&&($e=q("126454","意见征询接收人")),"3"==te&&($e=q("386179","转办接收人")),"4"==te&&($e=q(382672,"传阅接收人")),"5"==te&&($e=q(510498,"征询转办接收人")),Ve.length>0&&($e=Ve),"4"==ne&&($e=q("386180","意见反馈接收人"));var Je=!1,Ye=0;y.forEach(function(e,t,r){t&&Ye++}),Je=!("{}"===(0,s.default)((0,j.toJS)(y))||""===(0,j.toJS)(y).key_0&&Ye<=1);var Xe=_.default.createElement("span",{style:{color:"#A0A0A0"}},q(388045,"您当前正在代理"),_.default.createElement("a",{href:"javaScript:openhrm("+d.tempbeagenter+");",onClick:function(e){return window.pointerXY(e)},title:d.tempbeagentername},_.default.createElement("span",{style:{color:"#4D7AD8",verticalAlign:"initial",cursor:"pointer",marginLeft:"0"}},d.tempbeagentername)),q(84398,"进行操作")),Ze="195px";Ze=1==D?this.hasBottomConfig()?1==F?"290px":"300px":"260px":1==F?"260px":1==G||M||W||B||1==V?"250px":"195px";var et=("1"==Ce||1==H)&&"1"==te;return _.default.createElement("div",null,_.default.createElement(E.WeaDialog,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@ek7zn3",title:this.getTopTitle(xe,te,Qe),visible:a,parentClassName:"wf-req-forward-dialog",style:{width:Qe?800:1100,padding:"10px 20px"},maskClosable:!1,onCancel:this.cancelEvent,buttons:[_.default.createElement(k.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@2acct3@submit",type:"primary",size:"large",disabled:f,onClick:this.submitEvent},q("725","提交")),_.default.createElement(k.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@qa2dp5@cancel",type:"ghost",size:"large",disabled:f,onClick:this.cancelEvent},q("309","关闭"))],icon:"icon-coms-workflow",iconBgcolor:"#0079DE",loadCss:!0,initLoadCss:!0,layout:"undefined"!=typeof jQuery(".wf-req")[0]||o?jQuery(".wf-req")[0]:jQuery("#container")[0]},_.default.createElement("div",{className:"wea-req-forward-modal",style:{width:"100%",height:"100%"}},_.default.createElement(E.WeaPopoverHrm,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaPopoverHrm@vyk6y2"},_.default.createElement(E.WeaRightMenu,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaRightMenu@tmzdra",width:165,datas:this.getRightMenu(),onClick:this.onRightMenuClick},_.default.createElement("div",null,_.default.createElement(A.default,(0,c.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_RemindTypelist@jvuep2"},L,{callbackFun:function(e){r.updateRemindType(e)}}))),_.default.createElement(k.Spin,{ecId:(this&&this.props&&this.props.ecId||"")+"_Spin@thwvft",spinning:f},_.default.createElement("iframe",{className:f?"wf-forward-iframe ":"wf-forward-iframe-hide"}),_.default.createElement("div",{className:"wea-req-forward-content"},_.default.createElement("div",{className:"wea-req-forward-content-receive clearfix"},_.default.createElement("div",{className:"label"},_.default.createElement("span",null,"*"),_.default.createElement("span",null,$e)),_.default.createElement("div",{className:"input"},a&&_.default.createElement(E.WeaBrowser,(0,c.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_WeaBrowser@85cfkn"},this.getUserBrowserProps(),{onChange:this.doChangeEvent,dropAllUserGroup:_e}))),"3"!=te&&("1"!=$||"1"==$&&"1"==Y)&&_.default.createElement("div",{className:"btns"},"1"!=$&&_.default.createElement(k.Popover,{ecId:(this&&this.props&&this.props.ecId||"")+"_Popover@xsbidv",placement:"bottomLeft",title:"",content:_.default.createElement(C.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_OGroup@lh0fyh",wfForwardStore:r}),trigger:"click",onVisibleChange:ye,visible:l,overlayClassName:"wea-req-forward-customer-me"},_.default.createElement(k.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@uvi52z",type:"large",disabled:h,title:q("84511","快捷选择人员")},_.default.createElement("i",{className:"icon-customer-me"}))),("1"!=$||"1"==$&&"1"==Y)&&_.default.createElement(k.Popover,{ecId:(this&&this.props&&this.props.ecId||"")+"_Popover@j5rjwe",placement:"bottomLeft",title:"",content:_.default.createElement(x.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_NodeOperator@o01nlr",wfForwardStore:r,nodeOperatorTitle:Ge}),trigger:"click",onVisibleChange:be,visible:i,overlayClassName:"wea-req-forward-node-operator"},_.default.createElement(k.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@8cf46d",type:"large",style:{"margin-left":"5px"},disabled:h,title:Ge.length>0?Ge:q("84509","选择节点参与人作为转发对象")},_.default.createElement("img",{src:"/images/forward_btn_operator.png"}))))),2==te&&!ge&&_.default.createElement("div",{className:"wea-req-forward-content-takovertime"},_.default.createElement("span",null,Ue&&Ue[1]),_.default.createElement(E.WeaCheckbox,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaCheckbox@yq390o",value:me,display:"switch",style:{display:"inline"},onChange:this.updateFormParams.bind(this,"isOpenTakOvertime")}),1==me&&_.default.createElement("div",{className:"timeset"},_.default.createElement(E.WeaInputNumber,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaInputNumber@f9qbso",defaultValue:0,min:0,max:23,onChange:this.updateFormParams.bind(this,"takOverHours")}),_.default.createElement("span",{className:"text"},q("391","小时")),_.default.createElement(E.WeaInputNumber,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaInputNumber@d3a2b4",defaultValue:30,min:0,max:59,onChange:this.updateFormParams.bind(this,"takOverMins")}),_.default.createElement("span",{className:"text"},Ue&&Ue[2]))),et&&_.default.createElement("div",{className:"wea-req-forward-content-right"},_.default.createElement("div",null,_.default.createElement("span",{className:"label"},q("81768","接收人权限")),"1"==Ce&&_.default.createElement(k.Checkbox,{ecId:(this&&this.props&&this.props.ecId||"")+"_Checkbox@agmplq",checked:"1"==X,onChange:this.updateFormParams.bind(this,"IsSubmitedOpinion")},Oe),"1"==Ce&&_.default.createElement(k.Checkbox,{ecId:(this&&this.props&&this.props.ecId||"")+"_Checkbox@3gm0s1",checked:"1"==Z,onChange:this.updateFormParams.bind(this,"IsBeForwardTodo")},Te),1==H&&_.default.createElement(k.Checkbox,{ecId:(this&&this.props&&this.props.ecId||"")+"_Checkbox@opx3zu",checked:"1"==ve,onChange:this.updateFormParams.bind(this,"isShowReplyNotice")},K))),"4"==te&&_.default.createElement("div",{className:"wea-req-forward-content-right"},_.default.createElement("div",null,_.default.createElement("span",{className:"label"},q(391412,"接收人设置")),_.default.createElement(k.Checkbox,{ecId:(this&&this.props&&this.props.ecId||"")+"_Checkbox@o4kybb",checked:"1"==se,onChange:this.updateFormParams.bind(this,"isSubmitSign")},Se),_.default.createElement(k.Checkbox,{ecId:(this&&this.props&&this.props.ecId||"")+"_Checkbox@rlpsd0",checked:"1"==ce,onChange:this.updateFormParams.bind(this,"isChuanyue")},ke),_.default.createElement(k.Checkbox,{ecId:(this&&this.props&&this.props.ecId||"")+"_Checkbox@ryttqr",checked:"1"==de,onChange:this.updateFormParams.bind(this,"isRemind")},Ee))),_.default.createElement("div",{className:"wea-req-forward-content-remark",style:{display:Qe?"none":"block"}},_.default.createElement("div",{className:"label wrap-remark-list",style:{background:Je?"#F9F8F7":"#ffffff",cursor:"default",paddingBottom:Je?"10px":"0"}},_.default.createElement("i",{className:"icon-coms-Need-feedback",style:{marginRight:"10px",fontSize:"15px",color:"#AFAFAF ",lineHeight:"40px",display:"inline-block",verticalAlign:"bottom"}}),_.default.createElement("span",{style:{"margin-left":"1"==d.isSignMustInput?"0px":"5px",color:"#A0A0A0"}},q("17614","签字意见")),He&&_.default.createElement("span",{style:{color:"red",marginLeft:"10px",verticalAlign:"bottom"}},"(",q(18019,"必填"),")"),_.default.createElement("span",{style:{"margin-left":"25px","font-weight":"normal",color:"#A0A0A0"}},d.tempbeagenter!=d.fileuserid?Xe:""),this.getRemarkDom()),_.default.createElement("div",{className:"remark",id:"forwardremark_div",style:{height:Ze}},p&&!Qe&&_.default.createElement(T.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_SignInputck@abvafa",markInfo:d,isShowSignInput:!0,editorId:"forwardremark",maxHeight:150,visible:a,ref:"formwardRemarkCK",isClear:m,requestid:ae,initRemarkContent:w,remark:pe,workflowRequestLogId:we,globalStore:this.props.globalStore,layout:window,saveCallBack:function(){r.initData(),e.props.globalStore.loadMarkInfo()},secLevelInfo:Me,ForceRenderFile:O}))),Qe&&_.default.createElement("div",{style:{width:"100%",height:"60px"}}))))))))}},{key:"getUserBrowserProps",value:function(){var e=this.props,t=e.wfForwardStore,r=e.globalStore,n=void 0===r?{}:r,o=t.selectOperatorsMax,a=t.operatorDatas,i=t.formParams,s=void 0===i?{}:i,l=t.hrmSqlWhere,u=t.signinput,d=void 0===u?{}:u,f=n.commonParam,p=void 0===f?{}:f,h=s.field5,m=s.forwardflag,v=void 0===m?"1":m,g=s.f_weaver_belongto_userid,w=void 0===g?"":g,y=s.f_weaver_belongto_usertype,b=void 0===y?"":y,_=p.workflowid,S=void 0===_?"":_,k=p.nodeid,E=void 0===k?"":k,I=p.beagenter,C=void 0===I?"":I,R=C;""==S&&(S=s.workflowid,E=s.nodeid,R=s.agentorbyagentid);var x=d.hrmBrowser,P=void 0===x?{}:x;P=(0,j.toJS)(P);var N=(0,c.default)({},P,{linkUrl:"/hrm/resource/HrmResource.jsp?id=",isAutoComplete:1,isMultCheckbox:!1,isDetail:!1,viewAttr:2,value:h,zIndex:1050,isShowGroup:!0,forwardflag:v});N.type=17,N.isSingle=!1,N.maxLength=o,N.title=q("83496","多人力资源"),N.appendDatas=B.toJS(a),delete N.replaceDatas;var D={};return D=l?{sqlwhere:l,bdf_wfid:S,workflowid:S,nodeid:E,forwardflag:v}:{bdf_wfid:S,workflowid:S,nodeid:E,forwardflag:v},D=(0,c.default)({},D,{agentorbyagentid:R,f_weaver_belongto_userid:w,f_weaver_belongto_usertype:b}),N.dataParams=(0,c.default)({},D,P.dataParams),N.completeParams=(0,c.default)({},D,P.completeParams),N.conditionDataParams=(0,c.default)({},D,P.conditionDataParams),N}},{key:"updateFormParams",value:function(e,t){var r=this.props.wfForwardStore,n=r.setFormParams,o={};o[e]="IsSubmitedOpinion"===e||"IsBeForwardTodo"===e||"isSubmitSign"===e||"isChuanyue"===e||"isShowReplyNotice"===e||"isRemind"===e?t.target.checked?1:0:t,n(o)}},{key:"onCKEditorChange",value:function(e){}},{key:"getRightMenu",value:function(){var e=this.props.wfForwardStore,t=e.loading,r=[];return r.push({icon:_.default.createElement("i",{className:"icon-workflow-Right-menu-Need-feedback"}),content:q("725","提交"),disabled:t}),r}},{key:"getTopTitle",value:function(e,t,r){var n=this.props.wfForwardStore,o=n.formParams,a=void 0===o?{}:o,i=n.signinput,s=void 0===i?{}:i,l=a.feedbacksign,c=void 0===l?"":l,u=s.customBtnInfo,d=void 0===u?{}:u,f=d.titlenameprefixInfo,p=void 0===f?{}:f,h=p[t]||"",m=q("24964","流程转发")+"：";return"2"==t&&(m=q("82578","意见征询")+"："),"3"==t&&(m=q("23746","流程转办")+"："),"4"==t&&(m=q(382671,"流程传阅")+"："),"5"==t&&(m=q(507272,"征询转办")+"："),h.length>0&&(m=h),"4"==c&&(m=q("33956","意见反馈")+"："),_.default.createElement(k.Row,{ecId:(this&&this.props&&this.props.ecId||"")+"_Row@y8x4a3"},_.default.createElement(k.Col,{ecId:(this&&this.props&&this.props.ecId||"")+"_Col@16m77u",span:"22",style:{lineHeight:"45px",width:r?"700px":"1000px"}},_.default.createElement("div",{className:"wf-forward-title",style:{width:r?"635px":"935px"},title:e,dangerouslySetInnerHTML:{__html:m+e}})))}},{key:"verifyRemarkMustInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",r=e.signMustInputTypes,n=void 0===r?[]:r,o=e.isSignMustInput,a=void 0===o?"":o;e.isFormSignature;return"1"==a||"2"==a&&n.indexOf("forwardflag"+t)>-1}},{key:"deleteItem",value:function(e,t){this.props.wfForwardStore.remarkMap.delete(e)}},{key:"getSignInputInfo",value:function(){var e=this.props.wfForwardStore,t=e.formParams,r=void 0===t?{}:t,n=e.signinput,o=void 0===n?{}:n,a=e.remarkMap,i=o.isHideInput,s=void 0===i?"":i,l=o.extendParams,c=void 0===l?{}:l,u=o.use_textarea_signinput,d=void 0===u?0:u,f=o.isFormSignature,p=void 0===f?"":f;o.isSignMustInput;if("1"==s)return{};var h=this.refs.formwardRemarkCK.state,m=r.requestid,v=void 0===m?-1:m,g=r.forwardflag,w=void 0===g?"1":g,y=h.signworkflowids,b=void 0===y?"":y,_=h.signdocids,S=void 0===_?"":_,E=h.remarkLocation,I=void 0===E?"":E,C=h.annexdocinfos,R=void 0===C?[]:C,x=(h.signdocreplacedata,h.signworkflowreplacedata,h.signhandwrittenid),P=[];R.map(function(e){return P.push(e.fileid)});var N={signworkflowids:b,signdocids:S,remarkLocation:I,"field-annexupload":P.join(","),"field-annexupload-request":v,handWrittenSign:x};if("1"==p){var D=this.verifyRemarkMustInput(o,w);if(window.saveAutographMul&&window.saveAutographMul.wfWeaAutographCompforwardremark){var L=window.saveAutographMul.wfWeaAutographCompforwardremark(D);if(!0===L||-1==L);else{if(isNaN(L)||!(parseInt(L)>0))return"-2"==L?k.message.warning(q(386186,'"签字意见"未填写'),2):k.message.warning(q(528568,"签章保存失败"),2),!1;N.workflowRequestLogId=L}}}else{var T=window.CK_REF.forwardremark.getEditor().getData(),F=T.replace(/​/gi,""),A=c.wfSignDefaultFontFamily,M=void 0===A?"":A,W=c.wfSignDefaultFontSize,j=void 0===W?"":W;F=O.appendDefaultSytle(F,M,j,d);var B="";a.forEach(function(e,t,r){B+=e}),F=B+F,N.remark=F}return N}}]),t}(_.default.Component))||a;t.default=U},function(e,t,r){var n=r(392),o=r(393),a=o(n);e.exports=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a,i,s=r(191),l=n(s),c=r(18),u=n(c),d=r(69),f=n(d),p=r(32),h=n(p),m=r(8),v=n(m),g=r(3),w=n(g),y=r(1),b=n(y),_=r(2),S=n(_),k=r(4),E=n(k),I=r(5),C=n(I);r(396);var R=r(0),x=r(11),P=r(42),N=n(P),D=r(397),O=n(D),L=r(400),T=(n(L),r(402)),F=n(T),A=r(415),M=n(A),W=r(417),j=n(W),B=r(6),z=r(44),q=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(z),U=r(92),V=(n(U),r(35)),G=r(419),H=x.WeaAutograph.Component,K=R.WeaLocaleProvider.getLabel,Q=(a=o=function(e){function t(e){(0,b.default)(this,t);var r=(0,E.default)(this,(t.__proto__||(0,w.default)(t)).call(this,e));i.call(r);var n=e.remark,o=void 0===n?"":n,a=e.workflowRequestLogId,s=void 0===a?"-1":a,l=e.markInfo,c=void 0===l?{}:l,u=e.signdocids,d=void 0===u?"":u,f=e.signdocreplacedata,p=void 0===f?[]:f,h=e.signworkflowids,m=void 0===h?"":h,v=e.signworkflowreplacedata,g=void 0===v?[]:v,y=e.annexdocids,_=void 0===y?"":y,S=e.annexdocinfos,k=void 0===S?[]:S,I=e.remarkLocation,C=void 0===I?"":I,R=e.belongTest,P=c.extendParams,N=void 0===P?{}:P,D=c.remarkInfo,O=void 0===D?{}:D,L=N.signinputPhraseDirection,T=N.signinputPhraseWidth,F=O.signHandWritten,A=void 0===F?{}:F,M=O.signHandWrittenColor,W=void 0===M?"#010102":M,j=O.signHandWrittenBrush,B=void 0===j?"md":j,z={remark:o,visibleComponent:"",hasInitListUploadComponent:!1,signdocids:d,signdocreplacedata:p,workflowRequestLogId:s,signHandWrittenColor:W,signHandWrittenBrush:B,signHandWritten:A,signhandwrittenid:A.fileid,signworkflowids:m,signworkflowreplacedata:g,annexdocids:_,annexdocinfos:k,remarkLocation:C,remarkLocationInfo:C||{},autographStore:new x.WeaAutograph.AutographStore,signinputPhraseDirection:L,signinputPhraseOffset:-34,triangleLeft:T/2,operators:[],signatureVisiable:!1,belongTest:R,signHandWrittenHW:{height:1e3,width:574}},q=e.editorId,U=e.visible,V=void 0!==U&&U;r.state=r.initForwardRemarkData(q,V,z);var G=e.changeRemarkInfo;return G&&G({annexdocids:r.state.annexdocids,signdocids:r.state.signdocids,annexdocinfos:r.state.annexdocinfos,handWrittenSign:r.state.signhandwrittenid}),window.CK_REF||(window.CK_REF={}),r}return(0,C.default)(t,e),(0,S.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,r=e.editorId,n=e.visible,o=void 0!==n&&n,a=e.isClear,i=void 0!==a&&a,s=e.initRemarkContent,l=void 0!==s&&s;e.markInfo;(l||"updateEdit"===r)&&this.setState(this.initForwardRemarkData(r,o)),i&&!this.props.isClear&&this.setState({remark:"",signdocids:"",signHandWritten:{},signhandwrittenid:"",signdocreplacedata:[],signworkflowids:"",signworkflowreplacedata:[],annexdocids:"",annexdocinfos:[],remarkLocation:""}),"remark"===r&&!i&&window.CK_REF&&window.CK_REF.remark&&window.CK_REF.remark.props&&window.CK_REF.remark.props.isfwclear&&"1"===window.CK_REF.remark.props.isfwclear&&this.setState({remark:"<p>"+window.CK_REF.remark.props.value+"</p>"},function(){var e=t.refs.WeaRichText.getEditor().document.$,r=t;$(e).off("click").on("click",function(e){r.setState({visibleComponent:""})})});var c=this.state.annexdocinfos,u=void 0===c?[]:c;if(this.props.ForceRenderFile!==e.ForceRenderFile&&u&&u.length>0){var d={};d.secLevelInfo=e.secLevelInfo,d.annexdocinfos=u,(0,G.changeFileSec)(d).then(function(e){var r=e.annexdocinfos;e.info||t.setState({annexdocinfos:r})})}}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.remark!==t.remark||this.state.signdocids!==t.signdocids||this.state.signworkflowids!==t.signworkflowids||this.state.annexdocinfos!==t.annexdocinfos||this.state.remarkLocation!==t.remarkLocation||this.state.visibleComponent!==t.visibleComponent||this.state.signHandWritten!==t.signHandWritten||this.state.signhandwrittenid!==t.signhandwrittenid||this.state.hasInitListUploadComponent!==t.hasInitListUploadComponent||this.state.signatureVisiable!==t.signatureVisiable||this.props.isShowSignInput!==e.isShowSignInput||this.props.visible!==e.visible||this.props.reRender!==e.reRender||this.props.secLevelInfo!==e.secLevelInfo||this.props.ForceRenderFile!==e.ForceRenderFile}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.markInfo,r=void 0===t?{}:t,n=(e.visible,e.isEditorFocus),o=void 0!==n&&n,a=e.controlVariableMap,i=e.isShowSignInput;r.use_textarea_signinput;if(!this.judgeIsSignature()&&this.refs.WeaRichText){var s=this.refs.WeaRichText.getEditor();o&&s&&(s.focus("last"),"function"===typeof a&&a("isEditorFocus",!1))}i&&this.setWfPhraseExtendParams()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.markInfo,r=void 0===t?{}:t,n=(e.editorId,r.isannexupload_edit),o=void 0===n?"":n,a=r.annexsecId,i=void 0===a?"":a;"1"===o&&(0===(0,N.default)(i).length||i<=0)&&B.message.warning(K("386190","请设置签字意见附件上传目录"),5);var s=1e3,l=574;document.body.offsetWidth<=1200&&(s=760),document.body.offsetHeight<=624&&(l=document.body.offsetHeight/2-document.body.offsetHeight/2%40+54),this.setState({signHandWrittenHW:{height:l,width:s}})}},{key:"render",value:function(){return this.judgeIsSignature()?this.renderSignature():this.renderRichText()}}]),t}(React.Component),i=function(){var e=this;this.judgeIsSignature=function(){var t=e.props.markInfo;return 1==(void 0===t?{}:t).isFormSignature},this.renderRichText=function(){var t=window.localStorage.languageidweaver,r=8==t?125:150,n=e.props,o=n.isShowSignInput,a=void 0!==o&&o,i=n.editorId,s=n.ls,l=void 0!==s&&s,c=n.ckConfig,u=void 0===c?{}:c,d=n.extentsConfig,f=void 0===d?[]:d,p=n.bottomBarConfig,h=void 0===p?[]:p,m=n.maxHeight,g=void 0===m?0:m,w=n.markInfo,y=void 0===w?{}:w,b=n.secLevelInfo,_=void 0===b?{}:b,S=e.state,k=S.remark,E=void 0===k?"":k,I=S.signatureVisiable,C=S.belongTest,x=y.extendParams,P=void 0===x?{}:x,D=y.use_textarea_signinput,O=y.isannexupload_edit,L=y.remarkInfo,T=void 0===L?{}:L,F=T.handWrittenSignSwitch,A=P.wfSignDefaultFontFamily,M=void 0===A?"":A,W=P.wfSignDefaultFontSize,j=void 0===W?"":W;e.initButtomConfig(h),e.initExtentsConfig(f),u.toolbar=[{name:"document",items:["Source"]},{name:"basicstyles",items:["Bold","Italic","Underline","Strike"]},{name:"styles",items:["Font","FontSize"]},{name:"colors",items:["TextColor","BGColor"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]},{name:"links",items:["Link","Unlink"]},{name:"tools",items:["Maximize"]},{name:"insert",items:["Table","-","Undo","Redo","Image"]}],"remark"===i&&(u.extraPlugins="autogrow"),u.height=r,u.autoGrow_minHeight=r,g>0&&(u.autoGrow_maxHeight=g),"freeWorkflowSimple"==i&&(u.autoGrow_maxHeight=150),u.removePlugins="resize",u.uploadUrl="/api/doc/upload/uploadFile",u.fontSize_sizes="8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px",u.startupFocus=!1;var B={},z=10;if(M&&(u.font_defaultFamily=M,1==D&&M.indexOf("/")>-1&&(B.fontFamily=M.split("/")[1])),j&&(u.fontSize_defaultSize=j,1==D&&j.indexOf("/")>-1)){var q=parseInt(j.split("/")[0]);B.fontSize=q,z=parseInt(r/q)}var U=y.annexmainId,V=y.annexsubId,G=y.annexsecId,H=U+","+V+","+G,K={id:i,ref:i,ls:l,ckConfig:u,value:E,scrollContainer:".wea-new-top-req-content",dropToUploadFile:!0,dropUploadFileUrl:"/api/doc/upload/uploadFile2Doc?category="+H,dropUploadFileParams:{isFirstUploadFile:9,secretLevel:_.secLevel||"",secretLevelValidity:_.secValidity||""},dropToUploadImg:!0,dropUploadImgUrl:"/api/doc/upload/uploadFile"};return(0===(0,N.default)(G).length||G<=0||!O)&&(K.dropToUploadFile=!1,K.dropUploadFileUrl=""),C&&(K.layout=e.props.layout),React.createElement("div",{style:{display:a?"block":"none"},id:i,className:"remark_div_ck"},1==D?React.createElement("div",{className:1==F?"wf-weaRichText-Textarea wf-hasBottomBarRight":"wf-weaRichText-Textarea"},React.createElement(R.WeaRichText.Textarea,{ecId:(e&&e.props&&e.props.ecId||"")+"_undefined@k5k1md",viewAttr:"2",value:E,onChange:e.doOnChangeEvent,bottomBarConfig:h,onToolsChange:e.buttonBtnChange,onKeyDown:e.onKeyDown,maxRows:z,minRows:z,textareaStyle:B,ref:"WeaRichText",onStatusChange:e.doStatusChange})," "):React.createElement("div",{className:1==F?"wf-weaRichText-ck wf-hasBottomBarRight":"wf-weaRichText-ck"},React.createElement(R.WeaRichText,(0,v.default)({ecId:(e&&e.props&&e.props.ecId||"")+"_WeaRichText@ch9swv"},K,{bottomBarConfig:h,extentsConfig:f,onBlur:e.doOnChangeEvent,onStatusChange:e.doStatusChange,onToolsChange:e.buttonBtnChange,ref:"WeaRichText"}))),I&&e.getHandWrittenDom())},this.getHandWrittenDom=function(){var t=e.state,r=t.signHandWritten,n=void 0===r?{}:r,o=t.signatureVisiable,a=t.signHandWrittenColor,i=t.signHandWrittenBrush,s=t.signHandWrittenHW;return React.createElement(M.default,{ecId:(e&&e.props&&e.props.ecId||"")+"_Wfsignature@yl51tl",visiable:o,datas:n,signHandWrittenColor:a,signHandWrittenBrush:i,changeVisiable:e.changeSignatureVisiable,onOk:e.onSignatureOk,signHandWrittenHW:s})},this.onSignatureOk=function(t,r,n){var o={handWrittenSign:""};if(t.isEmpty)e.setState({signHandWritten:(0,v.default)({},t,{brush:r,color:n}),signhandwrittenid:""}),e.props.changeRemarkInfo&&e.props.changeRemarkInfo(o),e.changeSignatureVisiable(!1);else{var a=B.message.loading(K(533182,"正在保存中..."),0);t.modeType=t.mode,t.color=n,t.brush=r,t.singleTrimUrls||(t.singleTrimUrls=t.trimUrls),(0,V.saveMobileSignAnnex)({type:3,data:(0,h.default)(t)}).then(function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=i.fileid,l=void 0===s?[]:s;t.fileid=l,e.setState({signHandWritten:(0,v.default)({},t,{brush:r,color:n}),signhandwrittenid:l}),o.handWrittenSign=l,o=(0,v.default)({},o,{signHandWritten:(0,v.default)({},t,{brush:r,color:n}),signhandwrittenid:l}),e.props.changeRemarkInfo&&e.props.changeRemarkInfo(o),setTimeout(a,0),e.changeSignatureVisiable(!1)})}},this.changeSignatureVisiable=function(t){e.setState({signatureVisiable:t})},this.onKeyDown=function(e){e.stopPropagation()},this.renderSignature=function(){var t=e.props,r=t.isShowSignInput,n=void 0!==r&&r,o=t.editorId,a=t.markInfo,i=void 0===a?{}:a,s=t.bottomBarConfig,l=void 0===s?[]:s,c=e.state,u=c.autographStore,d=c.workflowRequestLogId,f=c.signatureVisiable;u.setMobxState({recordId:d}),e.initButtomConfig(l);var p={requestid:i.requestid,workflowid:i.workflowid,nodeid:i.nodeid};return React.createElement("div",{tabindex:"50",onBlur:e.autographOnBlur,style:{display:n?"block":"none",outline:"0",hidefocus:"true"},id:o,className:"remark_div_Signature"},React.createElement(H,{ecId:(e&&e.props&&e.props.ecId||"")+"_WeaAutographComp@6n7zys",recordId:d,params:p,weaworkflow_autograph_store:u,bottomBarConfig:l,onStatusChange:e.triggerLoadReady,onToolsChange:e.buttonBtnChange,ref:function(e){return window["wfWeaAutographComp"+o]=e},indexOfAutograph:"wfWeaAutographComp"+o}),f&&e.getHandWrittenDom())},this.autographOnBlur=function(t){e.props.onAutographBlur&&e.props.onAutographBlur()},this.doOnChangeEvent=function(t){var r=e.props.markInfo;1==(void 0===r?{}:r).use_textarea_signinput&&e.setState({remark:t}),window.WfForm&&(wfform.getLayoutStore().existChangeFormData=!0,wfform.getLayoutStore().existChangeFormDataByUser=!0),e.props.onChange&&e.props.onChange({remark:t},!0)},this.buttonBtnChange=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments[5],s=arguments[6],l=[],c={},u={},d=e.props,p=d.requestid,h=void 0===p?-1:p,m=d.markInfo,v=void 0===m?{}:m,g=e.state.annexdocinfos,w=void 0===g?[]:g,y=v.use_textarea_signinput,b=v.fileuserid||"";if("Browser"===t)37===o?(c.signdocids=r,c.signdocreplacedata=n,u.signdocids=r,e.setState(c)):152===o&&(c.signworkflowids=r,c.signworkflowreplacedata=n,u.signworkflowids=r,e.setState(c)),n.map(function(e){l.push(37===o?"<a href='"+(window.ecologyContentPath||"")+"/docs/docs/DocDsp.jsp?id="+e.id+"&isrequest=1&requestid="+h+"' unselectable='off' contenteditable='false'  target='_blank' title='"+e.name+'\'   style="color:#2777c1;" >'+e.name+"</a>&nbsp;&nbsp;":"<a href='"+(window.ecologyContentPath||"")+"/workflow/request/ViewRequestForwardSPA.jsp?f_weaver_belongto_userid="+b+"&f_weaver_belongto_usertype=0&requestid="+e.id+"&isrequest=1' unselectable='off' contenteditable='false'  target='_blank' style=\"color:#2777c1;\">"+e.name+"</a>&nbsp;&nbsp;")});else if("Upload"===t){if("file"!==o)return n.map(function(e){var t="/weaver/weaver.file.FileDownload?fileid="+e.fileidCode;l.push("<img src='"+t+"' data-imgsrc='"+t+"' alt=''/>&#8203;")}),e.judgeIsSignature()?" ":l.join("");var _=[];if(i||s)_=n;else{var S=w.concat(n),k=!0,E=!1,I=void 0;try{for(var C,R=(0,f.default)(S);!(k=(C=R.next()).done);k=!0){var x=C.value,P=!0,N=!0,D=!1,O=void 0;try{for(var L,T=(0,f.default)(_);!(N=(L=T.next()).done);N=!0){var F=L.value;x.fileid==F.fileid&&(P=!1)}}catch(e){D=!0,O=e}finally{try{!N&&T.return&&T.return()}finally{if(D)throw O}}P&&_.push(x)}}catch(e){E=!0,I=e}finally{try{!k&&R.return&&R.return()}finally{if(E)throw I}}}var A=[];_.map(function(e){A.push(e.fileid)}),c["field-annexupload"]=A.join(","),c.annexdocinfos=_,a?_.map(function(e){e.fileid===a&&l.push("<a href='javascript:void(0);' ccteim=\"d_"+(new Date).getTime()+'" class="a_'+e.fileid+'" onclick="parent.openFullWindowHaveBar(\'/docs/docs/DocDsp.jsp?id='+e.fileid+"&isrequest=1&requestid="+h+"&desrequestid=0')\" unselectable='off' contenteditable='false' style=\"color:#2777c1;\">"+e.filename+"</a>&nbsp;&nbsp;")}):e.setState({"field-annexupload":A,annexdocinfos:_,visibleComponent:"Upload"}),u["field-annexupload"]=A.join(",")}return e.props.changeRemarkInfo&&e.props.changeRemarkInfo(u),e.setState(c),!e.judgeIsSignature()&&l.length>0&&1!=y&&e.appendHtmlToCKEditor("<p>"+l.join("")+"</p>","last")," "},this.appendHtmlToCKEditor=function(t,r){var n=e.props.markInfo,o=void 0===n?{}:n,a=e.state.remark,i=void 0===a?"":a;if(1==o.use_textarea_signinput)e.setState({remark:i+t});else if(t+="<br>",r){var s=e;e.refs.WeaRichText.insertHTML(q.convertSpecialChar(t),r),s.setState({visibleComponent:""})}else e.refs.WeaRichText.insertHTML(q.convertSpecialChar(t))},this.addAtInfo=function(t){var r=t;e.appendHtmlToCKEditor(r)},this.updateWeaRichText=function(t,r){var n=e.props.markInfo,o=void 0===n?{}:n,a=o.use_textarea_signinput,i=e.refs.WeaRichText.props.value;1!=a&&(i="<div>"+i+"</div>");var s=$(i);if(s.length>0){null!=t&&""!=t||!r?$(s).find("a[class='a_"+r+"']").text(t):$(s).find("a[class='a_"+r+"']").text("");var l=s[0].innerHTML;e.setState({remark:l},function(){var t=e.refs.WeaRichText.getEditor().document.$,r=e;$(t).off("click").on("click",function(e){r.setState({visibleComponent:""})})}),e.props.onChange&&e.props.onChange({remark:l},!1);var c=e.props,u=c.globalStore,d=c.editorId;if("remark"===d&&(window.CK_REF.remark.props.isfwclear="0"),"remark"!==d&&u&&window.CK_REF&&window.CK_REF.remark&&window.CK_REF.remark.props){var f=u.markInfo,p=void 0===f?{}:f,h=window.CK_REF.remark.props.value;window.CK_REF.remark.props.isfwclear="1";var m=jQuery(h);m[0]&&m.find("a[class='a_"+r+"']").text(t),m.length>0&&(p.remark=""+jQuery(m)[0].innerHTML,p.remarkInfo.remark=""+jQuery(m)[0].innerHTML,window.CK_REF.remark.props.value=""+jQuery(m)[0].innerHTML,u.setMarkInfo(p))}}},this.fnchangeRemarkInfo=function(t){e.setState(t)},this.onBeforeFocusCheck=function(t){var r=e.props.secLevelInfo,n=void 0===r?{}:r,o=n.secLevel,a=n.isOpenSec,i=n.tip;!o&&a?B.message.error(i):t&&t()},this.onUploading=function(t){"uploaded"===t&&e.setState({hasInitListUploadComponent:!0})},this.initButtomConfig=function(t){!!window.WfForm&&WfForm.renderSignEditorBottomBar(t);var r=e.props,n=r.markInfo,o=void 0===n?{}:n,a=r.editorId,i=(r.isInForm,r.globalStore,r.secLevelInfo),s=void 0===i?{}:i,l=e.props,c=l.changeRemarkInfo,d=l.isdragula,f=void 0===d||d,p=l.isrename,h=void 0===p||p,m=o.isannexupload_edit,g=o.isSignDoc_edit,w=o.isSignWorkflow_edit,y=o.phraseInfo,b=void 0===y?[]:y,_=o.extendParams,S=void 0===_?{}:_,k=o.use_textarea_signinput,E=o.isSignLocation_edit,I=void 0!==E&&E,C=o.remarkInfo,x=void 0===C?{}:C,P=e.state,D=P.visibleComponent,L=void 0===D?"":D,T=P.signinputPhraseDirection,A=P.signinputPhraseOffset,M=P.triangleLeft,W=P.remarkLocationInfo,q=x.handWrittenSignSwitch,U=o.fileuserid||"",V="1"==o.fileloginyype?"0":"1";"function"!=typeof c&&(c=e.fnchangeRemarkInfo);var G=[],H={},Q=o.btnLabelName,$=void 0===Q?{}:Q;if("string"===typeof W){var J=(0,z.getLocationInfoData)(W);J.longitude&&J.latitude&&J.name&&(G=[J.longitude,J.latitude],H={name:J.name})}else"object"===("undefined"===typeof W?"undefined":(0,u.default)(W))&&W.position&&W.info&&(G=W.position||[],H={name:W.info.name||""});var Y={};if(Y.isFirstUploadFile="9",1==q){var X=e.state.signHandWritten,Z=X.fileid,ee=void 0===Z?0:Z,te={name:"Component",show:React.createElement("div",{className:"handWrittenCom",onClick:function(t){e.changeSignatureVisiable(!0)}},React.createElement("span",{className:"icon-coms02-Handwritten-signature-approval"}),$.handWrittenDot,ee>0&&React.createElement("span",{className:"show-dot"}))};t.push(te)}if(m){var re=o.annexmainId,ne=o.annexsubId,oe=o.annexsecId,ae=o.annexmaxUploadImageSize,ie=e.state.hasInitListUploadComponent;if(0===(0,N.default)(oe).length||oe<=0);else{var se=e.state,le=se.annexdocinfos,ce=void 0===le?[]:le,ue=se.visibleComponent,de=void 0===ue?"":ue,fe=re+","+ne+","+oe;0!==ce.length||ie?t.push({name:"Component",show:React.createElement(O.default,{ecId:(e&&e.props&&e.props.ecId||"")+"_FileUpload@tyujl3@ec2",editorId:a,updateWeaRichText:e.updateWeaRichText,annexdocinfos:ce,onChange:e.buttonBtnChange,category:fe,annexmaxUploadImageSize:ae,visible:"Upload"===de,showComponent:e.showComponent,changeRemarkInfo:c,isdragula:f,isrename:h,secLevelInfo:s})}):t.push({name:"Upload",show:React.createElement("div",{className:"wea-cb-item",title:""+K(385751,"附件上传(最大")+ae+"M/"+K(27591,"个")+")"},React.createElement(B.Icon,{ecId:(e&&e.props&&e.props.ecId||"")+"_Icon@16vvnh@ec1",className:"wea-cbi-icon",type:"paper-clip"}),React.createElement("span",{className:"wea-cbi-text"},K(156,"附件"))),uploadId:a+"_upload",uploadUrl:"/api/doc/upload/uploadFile2Doc?category="+fe,category:fe,maxUploadSize:ae,style:{display:"inline-block",padding:0},datas:ce,uploadParams:(0,v.default)({},Y),secLevel:s.secLevel,secLevelInfo:s.tip,showSecLevel:s.isOpenSec,casProtect:s.isOpenSec,allowEditSec:s.allowEditFileSec,needModifyDocSec:!1,onUploading:e.onUploading})}}if(g){var pe=e.state.signdocreplacedata,he=void 0===pe?[]:pe;t.push({name:"Browser",show:React.createElement("div",{className:"wea-cb-item",onClick:function(){return e.setState({visibleComponent:""})}},React.createElement("span",{className:"wea-cbi-icon icon-coms-content-o",style:{position:"relative"}},he.length>0&&React.createElement("div",{className:"red-point"})),React.createElement("span",{className:"wea-cbi-text"},K(22243,"文档"))),type:37,title:K(6163,"多文档"),hasAdvanceSerach:!0,idSeparator:",",isAutoComplete:0,isDetail:0,isMultCheckbox:!1,isSingle:!1,linkUrl:"/docs/docs/DocDsp.jsp?isrequest=1&id=",pageSize:10,viewAttr:2,zIndex:1050,replaceDatas:he,icon:"icon-coms-doc",iconBgcolor:"#df583a",memorise:!0,completeParams:{secretLevel:s.secLevel},dataParams:{secretLevel:s.secLevel},onBeforeFocusCheck:e.onBeforeFocusCheck})}if(w){var me=e.state.signworkflowreplacedata,ve=void 0===me?[]:me;t.push({name:"Browser",show:React.createElement("div",{className:"wea-cb-item",onClick:function(){return e.setState({visibleComponent:""})}},React.createElement("span",{className:"wea-cbi-icon icon-coms-Workflow-o",style:{position:"relative"}},ve.length>0&&React.createElement("div",{className:"red-point"})),React.createElement("span",{className:"wea-cbi-text"},$.signworkflow)),type:152,hasAdvanceSerach:!0,isDetail:0,isMultCheckbox:!1,isSingle:!1,linkUrl:(window.ecologyContentPath||"")+"/workflow/request/ViewRequest.jsp?isrequest=1&requestid=",tabs:[{dataParams:{f_weaver_belongto_userid:U,f_weaver_belongto_usertype:V},isSearch:!1,key:"1",name:K(332,"全部"),selected:!1},{dataParams:{collReq:"1",f_weaver_belongto_userid:U,f_weaver_belongto_usertype:V},isSearch:!1,key:"2",name:K(18030,"我的收藏"),selected:!1}],title:K(33924,"多流程"),viewAttr:2,zIndex:1050,replaceDatas:ve,icon:"icon-coms-workflow",iconBgcolor:"#0079DE",memorise:!0,completeParams:{secretLevel:s.secLevel},dataParams:{secretLevel:s.secLevel},onBeforeFocusCheck:e.onBeforeFocusCheck})}if(I&&t.push({name:"Component",show:React.createElement(j.default,{ecId:(e&&e.props&&e.props.ecId||"")+"_WfMapLocation@kj7yag@ec3",location:G,locationInfo:H,onMapLocationChange:e.mapLocationChange})}),1==k&&!e.judgeIsSignature()){var ge=e.state.belongTest;t.push({name:"Component",show:React.createElement("div",null,React.createElement("div",{style:{marginRight:"20px"}},React.createElement(F.default,{ecId:(e&&e.props&&e.props.ecId||"")+"_WfPhrase@8wysgv@ec4",remark:e.state.remark,visiableAdd_phrase:e.props.visiableAdd_phrase,setVisiableAdd_phrase:e.props.setVisiableAdd_phrase,saveCallBack:e.props.saveCallBack,appendHtmlToCKEditor:e.appendHtmlToCKEditor,extendParams:S,phraseInfo:b,editorId:a,visible:"WfPhrase"===L,signinputPhraseDirection:"remark"===a?T:"top",signinputPhraseOffset:A,triangleLeft:M,belongTest:ge,use_textarea_signinput:k,onAddPhrase:e.doOnChangeEvent,showComponent:e.showComponent})),React.createElement("div",{style:{position:"absolute",top:"6px",right:"10px"}},React.createElement(R.WeaHelpfulTip,{ecId:(e&&e.props&&e.props.ecId||"")+"_WeaHelpfulTip@ah4v1n@ec5",title:K(513575,"当前签字意见框是textarea类型的，不支持含html格式的批示语内容显示"),placement:"top",width:210})))})}},this.initExtentsConfig=function(t){var r=e.props,n=r.markInfo,o=void 0===n?{}:n,a=r.editorId,i=r.requestid,s=void 0===i?-1:i,l=o.phraseInfo,c=void 0===l?[]:l,u=o.extendParams,d=void 0===u?{}:u,f=o.use_textarea_signinput,p=e.state,h=p.visibleComponent,m=void 0===h?"":h,v=p.signinputPhraseDirection,g=p.signinputPhraseOffset,w=p.triangleLeft,y=p.belongTest;t.push({name:"At",position:"last",tipTitle:K(124785,"在签字意见框中输入@可直接选择节点参与人"),request:{url:"/api/workflow/forward/getReqWfNodeOperators?isDistinct=1",type:"GET",params:{requestid:s}}}),t.push({name:"Component",show:React.createElement(F.default,{ecId:(e&&e.props&&e.props.ecId||"")+"_WfPhrase@qj4ton@ec6",remark:e.state.remark,visiableAdd_phrase:e.props.visiableAdd_phrase,setVisiableAdd_phrase:e.props.setVisiableAdd_phrase,saveCallBack:e.props.saveCallBack,appendHtmlToCKEditor:e.appendHtmlToCKEditor,extendParams:d,phraseInfo:c,editorId:a,visible:"WfPhrase"===m,signinputPhraseDirection:v,signinputPhraseOffset:g,triangleLeft:w,belongTest:y,use_textarea_signinput:f,showComponent:e.showComponent})})},this.mapLocationChange=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r="",n=e.props.changeRemarkInfo,o=new Date;r+=o.getTime()+",",t.position.length>=2&&t.info?(t.position.map(function(e){r+=e+","}),t.info.address&&(r+=t.info.name),e.setState({remarkLocation:r,remarkLocationInfo:t}),n&&n({remarkLocation:r})):(e.setState({remarkLocation:"",remarkLocationInfo:{}}),n&&n({remarkLocation:""}))},this.showComponent=function(t){"WfPhrase"==t&&e.setWfPhraseExtendParams(),e.setState({visibleComponent:t})},this.triggerLoadReady=function(){var t=e.props.loadReady;"function"===typeof t&&t()},this.doStatusChange=function(t){var r=e.props.markInfo,n=void 0===r?{}:r,o=n.use_textarea_signinput;if("ready"===t){e.triggerLoadReady();var a=e,i=e.props.editorId;if("remark"===i){var s=e.props.controlVariableMap;$("#container").bind("click",function(e){$(e.target).parents(".wea-ckeditor-fileupload,.wf-ckeditor-wfat,.wf-ckeditor-wfphrase,.wf-signature-dialog").length<=0&&a.setState({visibleComponent:""});var t=window.CK_REF.remark&&window.CK_REF.remark.getData(),r=(0,l.default)($(e.target))[0].localName;$(e.target).parents("#remark").length<=0&&0===(0,N.default)(t).length&&$(".wf-req-sign-input").find(".remark_list_dom").length<=0&&!("a"===r||"span"===r)&&$(e.target).parents(".wea-popover-hrm-wrapper").length<1&&$(e.target).parents(".wf-signature-dialog").length<1&&("function"===typeof this.setWfPhraseExtendParams&&this.setWfPhraseExtendParams(),"function"===typeof s&&s("isShowSignInput",!1))})}if("forwardremark"===i&&$(".wf-req-forward-dialog .ant-modal-content").bind("click",function(e){$(e.target).parents(".wea-ckeditor-fileupload,.wf-ckeditor-wfat,.wf-ckeditor-wfphrase").length<=0&&a.setState({visibleComponent:""})}),1!=o)var c=e.refs.WeaRichText.getEditor(),u=(e.refs.WeaRichText.editor.container.getId(),0),d=c.document.$,f=setInterval(function(){$(d).off("click").on("click",function(e){a.setState({visibleComponent:""})}),++u>10&&clearInterval(f)},500);window.CK_REF[i]=e.refs.WeaRichText}},this.setWfPhraseExtendParams=function(){var t=e.props,r=t.markInfo,n=void 0===r?{}:r,o=t.editorId,a=e.state.signinputPhraseDirection,i=n.phraseInfo,s=void 0===i?[]:i,l=n.extendParams,c=void 0===l?{}:l,u=c.signinputPhraseWidth,d=void 0===u?305:u;if("remark"===o){var f=jQuery(".wf-req-form-wrapper")&&jQuery(".wf-ckeditor-wfphrase")&&jQuery(".wf-ckeditor-wfphrase").offset()?jQuery(".wf-req-form-wrapper").height()+jQuery(".wf-req-form-wrapper").offset().top-jQuery(".wf-ckeditor-wfphrase").offset().top-jQuery(".wf-ckeditor-wfphrase").height():0,p=s.length>5?240:30*s.length+90;if(p>f&&"bottom"===a&&e.setState({signinputPhraseDirection:"top"}),p<=f&&"top"===a&&e.setState({signinputPhraseDirection:"bottom"}),jQuery(".wf-ckeditor-wfphrase").length<=0)return;var h="remark"===o?jQuery("#remark_div .wf-ckeditor-wfphrase"):jQuery("#forwardremark .wf-ckeditor-wfphrase"),m=h.width()?h.width():1,v=h.offset()&&h.offset().left?h.offset().left:0;if(jQuery(".wf-req-form-main").parents(".wf-req-form-left").length>0||jQuery(".wf-req-form-main").parents(".wf-req-form-right").length>0)if(jQuery(".wf-req-form-main").parents(".wf-req-form-left").length>0)if(d/2>=v+m/2-jQuery(".wf-req-form-main").offset().left)e.setState({signinputPhraseOffset:jQuery(".wf-req-form-main").offset().left-v+5,triangleLeft:v+m/2-jQuery(".wf-req-form-main").offset().left});else if(jQuery(".wf-req-form-right").offset().left-(v+m/2)<d/2){var g=v+d-jQuery(".wf-req-form-right").offset().left;e.setState({signinputPhraseOffset:-g-5,triangleLeft:g+m/2})}else d/2>=v+m/2?e.setState({signinputPhraseOffset:0,triangleLeft:m/2}):e.setState({signinputPhraseOffset:-117,triangleLeft:d/2});else if(d/2>=v+m/2-jQuery(".wf-req-form-main").offset().left)e.setState({signinputPhraseOffset:jQuery(".wf-req-form-main").offset().left-v+5,triangleLeft:v+m/2-jQuery(".wf-req-form-main").offset().left});else if(jQuery(".wf-req-form-main").offset().left+jQuery(".wf-req-form-main").width()-(v+m/2)<d/2){var w=d-(jQuery(".wf-req-form-main").offset().left+jQuery(".wf-req-form-main").width())+v;e.setState({signinputPhraseOffset:-w-5,triangleLeft:w+m/2})}else d/2>=v+m/2?e.setState({signinputPhraseOffset:0,triangleLeft:m/2}):e.setState({signinputPhraseOffset:-117,triangleLeft:d/2});else d/2>=v+m/2?e.setState({signinputPhraseOffset:0,triangleLeft:m/2}):e.setState({signinputPhraseOffset:-117,triangleLeft:d/2})}else{if(jQuery(".wf-ckeditor-wfphrase").length<=0)return;var y="remark"===o?jQuery("#remark_div .wf-ckeditor-wfphrase"):jQuery("#forwardremark .wf-ckeditor-wfphrase"),b=y.width()?y.width():1;y.offset()&&y.offset().left&&y.offset().left;e.setState({signinputPhraseOffset:-d/2+b/2,triangleLeft:d/2})}},this.initAutoAt=function(t){var r=e.props.editorId,n=e,o=e.refs.WeaRichText;try{var a=window.__atdata;if(1!=window.__atdataready||!a)return void setTimeout(function(){n.initAutoAt(t)},1e3);var i=",",s=jQuery.map(a,function(e,t){if(-1==i.indexOf(","+e.uid+","))return i+=e.uid+",",{id:e.uid,name:e.data,py:e.datapy}}),l={at:"@",data:s,tpl:"<li data-value='@${name}'>${name}</li>",insert_tpl:"<a href='/hrm/HrmTab.jsp?_fromURL=HrmResource&id=${id}' atsome='@${id}' contenteditable='false' style='cursor:pointer;text-decoration:none !important;margin-right:8px;color:#2777c1!important;' target='_blank'>${atwho-data-value}</a>",limit:100,show_the_at:!0,start_with_space:!1,with_repeat_matcher:!1,search_key_py:"py",ckeditor:o,editorId:r};jQuery(t.contentDocument.body).atwho("setIframe",t).atwho(l);var c=jQuery(".atwho-view");c&&c.perfectScrollbar({horizrailenabled:!1,zindex:11111})}catch(e){}},this.initForwardRemarkData=function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(("forwardremark"===t||"freeWorkflowSimple"===t)&&r&&window.REMARK_CK_REF&&window.REMARK_CK_REF.refs.signInput){var o=window.REMARK_CK_REF.refs.signInput.state,a=o.signdocids,i=void 0===a?"":a,s=o.signdocreplacedata,l=void 0===s?[]:s,c=o.signworkflowids,d=void 0===c?"":c,f=o.signworkflowreplacedata,p=void 0===f?[]:f,h=o.remarkLocation,m=void 0===h?"":h,v=o.annexdocinfos,g=void 0===v?[]:v,w=o.signHandWritten,y=o.remarkLocationInfo,b=e.props.markInfo,_=void 0===b?{}:b,S=_.extendParams,k=void 0===S?{}:S,E=_.use_textarea_signinput,I=void 0===E?0:E,C=_.isFormSignature;if(window.CK_REF&&window.CK_REF.remark||1==C){var R=k.wfSignDefaultFontFamily,x=void 0===R?"":R,P=k.wfSignDefaultFontSize,D=void 0===P?"":P,O="";if(1==C){if("object"===(0,u.default)(window.saveAutographMul)&&window.saveAutographMul&&window.saveAutographMul.wfWeaAutographCompremark){var L=window.saveAutographMul.wfWeaAutographCompremark(!1,!0),T=n.workflowRequestLogId,F=void 0===T?"":T;n.workflowRequestLogId=-1!=F?F:L.recordId}}else{O=window.CK_REF.remark&&window.CK_REF.remark.getData(),0==I&&(O=q.appendDefaultSytle(O,x,D));var A=n.remark,M=void 0===A?"":A;(0,N.default)(O).length>0&&(n.remark=M||O)}((0,N.default)(O).length>0||l.length>0||p.length>0||g.length>0||(0,N.default)(m).length>0||w.fileid>0||void 0==w.fileid)&&(n.signdocids=i,n.signdocreplacedata=l,n.signHandWritten=w,n.signhandwrittenid=w.fileid||0,n.signworkflowids=d,n.signworkflowreplacedata=p,n.remarkLocation=m,n.remarkLocationInfo=y,n.annexdocinfos=g)}}if("updateEdit"==t&&window["REMARK_CK_REF"+t]&&window["REMARK_CK_REF"+t].props){var W=window["REMARK_CK_REF"+t].props,j=W.signdocids,B=void 0===j?"":j,z=W.signdocreplacedata,U=void 0===z?[]:z,V=W.signworkflowids,G=void 0===V?"":V,H=W.signworkflowreplacedata,K=void 0===H?[]:H,Q=W.remarkLocation,$=void 0===Q?"":Q,J=W.annexdocinfos,Y=void 0===J?[]:J,X=W.signHandWritten,Z=void 0===X?{}:X,ee=W.remarkLocationInfo,te=W.remark,re=void 0===te?"":te,ne=Z.fileid;((0,N.default)(re).length>0||U.length>0||K.length>0||Y.length>0||(0,N.default)($).length>0||ne>0||void 0==ne)&&(n.remark=re,n.signdocids=B,n.signdocreplacedata=U,n.signHandWritten=Z,n.signhandwrittenid=ne,n.signworkflowids=G,n.signworkflowreplacedata=K,n.remarkLocation=$,n.remarkLocationInfo=ee,n.annexdocinfos=Y)}return n},this.getAtOperators=function(){var t=e.props.requestid,r=void 0===t?-1:t;R.WeaTools.callApi("/api/workflow/forward/getReqWfNodeOperators","get",{requestid:r}).then(function(t){var r=t.operators,n=void 0===r?[]:r;e.setState({operators:n})})},this.setMode=function(t){if("source"===t){var r=e.props.editorId;window.ATWHO_APP[r].shutdown(),window.ATWHO_APP[r].$inputor.data("atwho",null)}if("wysiwyg"===t){e.refs.WeaRichText.editor.container.getId()}}},a);t.default=Q},function(e,t,r){(function(e,n){var o;(function(){function a(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function i(e,t,r,n){for(var o=-1,a=null==e?0:e.length;++o<a;){var i=e[o];t(n,i,r(i),e)}return n}function s(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function l(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function c(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function u(e,t){for(var r=-1,n=null==e?0:e.length,o=0,a=[];++r<n;){var i=e[r];t(i,r,e)&&(a[o++]=i)}return a}function d(e,t){return!!(null==e?0:e.length)&&S(e,t,0)>-1}function f(e,t,r){for(var n=-1,o=null==e?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1}function p(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}function h(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}function m(e,t,r,n){var o=-1,a=null==e?0:e.length;for(n&&a&&(r=e[++o]);++o<a;)r=t(r,e[o],o,e);return r}function v(e,t,r,n){var o=null==e?0:e.length;for(n&&o&&(r=e[--o]);o--;)r=t(r,e[o],o,e);return r}function g(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function w(e){return e.split("")}function y(e){return e.match(Mt)||[]}function b(e,t,r){var n;return r(e,function(e,r,o){if(t(e,r,o))return n=r,!1}),n}function _(e,t,r,n){for(var o=e.length,a=r+(n?1:-1);n?a--:++a<o;)if(t(e[a],a,e))return a;return-1}function S(e,t,r){return t===t?$(e,t,r):_(e,E,r)}function k(e,t,r,n){for(var o=r-1,a=e.length;++o<a;)if(n(e[o],t))return o;return-1}function E(e){return e!==e}function I(e,t){var r=null==e?0:e.length;return r?N(e,t)/r:Le}function C(e){return function(t){return null==t?re:t[e]}}function R(e){return function(t){return null==e?re:e[t]}}function x(e,t,r,n,o){return o(e,function(e,o,a){r=n?(n=!1,e):t(r,e,o,a)}),r}function P(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}function N(e,t){for(var r,n=-1,o=e.length;++n<o;){var a=t(e[n]);a!==re&&(r=r===re?a:r+a)}return r}function D(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function O(e,t){return p(t,function(t){return[t,e[t]]})}function L(e){return function(t){return e(t)}}function T(e,t){return p(t,function(t){return e[t]})}function F(e,t){return e.has(t)}function A(e,t){for(var r=-1,n=e.length;++r<n&&S(t,e[r],0)>-1;);return r}function M(e,t){for(var r=e.length;r--&&S(t,e[r],0)>-1;);return r}function W(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}function j(e){return"\\"+Er[e]}function B(e,t){return null==e?re:e[t]}function z(e){return mr.test(e)}function q(e){return vr.test(e)}function U(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}function V(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function G(e,t){return function(r){return e(t(r))}}function H(e,t){for(var r=-1,n=e.length,o=0,a=[];++r<n;){var i=e[r];i!==t&&i!==le||(e[r]=le,a[o++]=r)}return a}function K(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function Q(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=[e,e]}),r}function $(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}function J(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}function Y(e){return z(e)?Z(e):zr(e)}function X(e){return z(e)?ee(e):w(e)}function Z(e){for(var t=pr.lastIndex=0;pr.test(e);)++t;return t}function ee(e){return e.match(pr)||[]}function te(e){return e.match(hr)||[]}var re,ne=200,oe="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ae="Expected a function",ie="__lodash_hash_undefined__",se=500,le="__lodash_placeholder__",ce=1,ue=2,de=4,fe=1,pe=2,he=1,me=2,ve=4,ge=8,we=16,ye=32,be=64,_e=128,Se=256,ke=512,Ee=30,Ie="...",Ce=800,Re=16,xe=1,Pe=2,Ne=1/0,De=9007199254740991,Oe=1.7976931348623157e308,Le=NaN,Te=4294967295,Fe=Te-1,Ae=Te>>>1,Me=[["ary",_e],["bind",he],["bindKey",me],["curry",ge],["curryRight",we],["flip",ke],["partial",ye],["partialRight",be],["rearg",Se]],We="[object Arguments]",je="[object Array]",Be="[object AsyncFunction]",ze="[object Boolean]",qe="[object Date]",Ue="[object DOMException]",Ve="[object Error]",Ge="[object Function]",He="[object GeneratorFunction]",Ke="[object Map]",Qe="[object Number]",$e="[object Null]",Je="[object Object]",Ye="[object Proxy]",Xe="[object RegExp]",Ze="[object Set]",et="[object String]",tt="[object Symbol]",rt="[object Undefined]",nt="[object WeakMap]",ot="[object WeakSet]",at="[object ArrayBuffer]",it="[object DataView]",st="[object Float32Array]",lt="[object Float64Array]",ct="[object Int8Array]",ut="[object Int16Array]",dt="[object Int32Array]",ft="[object Uint8Array]",pt="[object Uint8ClampedArray]",ht="[object Uint16Array]",mt="[object Uint32Array]",vt=/\b__p \+= '';/g,gt=/\b(__p \+=) '' \+/g,wt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,yt=/&(?:amp|lt|gt|quot|#39);/g,bt=/[&<>"']/g,_t=RegExp(yt.source),St=RegExp(bt.source),kt=/<%-([\s\S]+?)%>/g,Et=/<%([\s\S]+?)%>/g,It=/<%=([\s\S]+?)%>/g,Ct=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rt=/^\w*$/,xt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pt=/[\\^$.*+?()[\]{}|]/g,Nt=RegExp(Pt.source),Dt=/^\s+|\s+$/g,Ot=/^\s+/,Lt=/\s+$/,Tt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ft=/\{\n\/\* \[wrapped with (.+)\] \*/,At=/,? & /,Mt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Wt=/\\(\\)?/g,jt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Bt=/\w*$/,zt=/^[-+]0x[0-9a-f]+$/i,qt=/^0b[01]+$/i,Ut=/^\[object .+?Constructor\]$/,Vt=/^0o[0-7]+$/i,Gt=/^(?:0|[1-9]\d*)$/,Ht=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Kt=/($^)/,Qt=/['\n\r\u2028\u2029\\]/g,$t="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Jt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Yt="["+Jt+"]",Xt="["+$t+"]",Zt="[a-z\\xdf-\\xf6\\xf8-\\xff]",er="[^\\ud800-\\udfff"+Jt+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",tr="\\ud83c[\\udffb-\\udfff]",rr="(?:\\ud83c[\\udde6-\\uddff]){2}",nr="[\\ud800-\\udbff][\\udc00-\\udfff]",or="[A-Z\\xc0-\\xd6\\xd8-\\xde]",ar="(?:"+Zt+"|"+er+")",ir="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",sr="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",rr,nr].join("|")+")[\\ufe0e\\ufe0f]?"+ir+")*",lr="[\\ufe0e\\ufe0f]?"+ir+sr,cr="(?:"+["[\\u2700-\\u27bf]",rr,nr].join("|")+")"+lr,ur="(?:"+["[^\\ud800-\\udfff]"+Xt+"?",Xt,rr,nr,"[\\ud800-\\udfff]"].join("|")+")",dr=RegExp("['’]","g"),fr=RegExp(Xt,"g"),pr=RegExp(tr+"(?="+tr+")|"+ur+lr,"g"),hr=RegExp([or+"?"+Zt+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[Yt,or,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[Yt,or+ar,"$"].join("|")+")",or+"?"+ar+"+(?:['’](?:d|ll|m|re|s|t|ve))?",or+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",cr].join("|"),"g"),mr=RegExp("[\\u200d\\ud800-\\udfff"+$t+"\\ufe0e\\ufe0f]"),vr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,gr=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],wr=-1,yr={};yr[st]=yr[lt]=yr[ct]=yr[ut]=yr[dt]=yr[ft]=yr[pt]=yr[ht]=yr[mt]=!0,yr[We]=yr[je]=yr[at]=yr[ze]=yr[it]=yr[qe]=yr[Ve]=yr[Ge]=yr[Ke]=yr[Qe]=yr[Je]=yr[Xe]=yr[Ze]=yr[et]=yr[nt]=!1;var br={};br[We]=br[je]=br[at]=br[it]=br[ze]=br[qe]=br[st]=br[lt]=br[ct]=br[ut]=br[dt]=br[Ke]=br[Qe]=br[Je]=br[Xe]=br[Ze]=br[et]=br[tt]=br[ft]=br[pt]=br[ht]=br[mt]=!0,br[Ve]=br[Ge]=br[nt]=!1;var _r={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},Sr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},kr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Er={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ir=parseFloat,Cr=parseInt,Rr="object"==typeof e&&e&&e.Object===Object&&e,xr="object"==typeof self&&self&&self.Object===Object&&self,Pr=Rr||xr||Function("return this")(),Nr="object"==typeof t&&t&&!t.nodeType&&t,Dr=Nr&&"object"==typeof n&&n&&!n.nodeType&&n,Or=Dr&&Dr.exports===Nr,Lr=Or&&Rr.process,Tr=function(){try{var e=Dr&&Dr.require&&Dr.require("util").types;return e||Lr&&Lr.binding&&Lr.binding("util")}catch(e){}}(),Fr=Tr&&Tr.isArrayBuffer,Ar=Tr&&Tr.isDate,Mr=Tr&&Tr.isMap,Wr=Tr&&Tr.isRegExp,jr=Tr&&Tr.isSet,Br=Tr&&Tr.isTypedArray,zr=C("length"),qr=R(_r),Ur=R(Sr),Vr=R(kr),Gr=function e(t){function r(e){if(tl(e)&&!pf(e)&&!(e instanceof w)){if(e instanceof o)return e;if(fu.call(e,"__wrapped__"))return Xa(e)}return new o(e)}function n(){}function o(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=re}function w(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Te,this.__views__=[]}function R(){var e=new w(this.__wrapped__);return e.__actions__=Lo(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Lo(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Lo(this.__views__),e}function $(){if(this.__filtered__){var e=new w(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Z(){var e=this.__wrapped__.value(),t=this.__dir__,r=pf(e),n=t<0,o=r?e.length:0,a=Sa(0,o,this.__views__),i=a.start,s=a.end,l=s-i,c=n?s:i-1,u=this.__iteratees__,d=u.length,f=0,p=qu(l,this.__takeCount__);if(!r||!n&&o==l&&p==l)return vo(e,this.__actions__);var h=[];e:for(;l--&&f<p;){c+=t;for(var m=-1,v=e[c];++m<d;){var g=u[m],w=g.iteratee,y=g.type,b=w(v);if(y==Pe)v=b;else if(!b){if(y==xe)continue e;break e}}h[f++]=v}return h}function ee(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Mt(){this.__data__=Xu?Xu(null):{},this.size=0}function $t(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Jt(e){var t=this.__data__;if(Xu){var r=t[e];return r===ie?re:r}return fu.call(t,e)?t[e]:re}function Yt(e){var t=this.__data__;return Xu?t[e]!==re:fu.call(t,e)}function Xt(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Xu&&t===re?ie:t,this}function Zt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function er(){this.__data__=[],this.size=0}function tr(e){var t=this.__data__,r=Hr(t,e);return!(r<0)&&(r==t.length-1?t.pop():Cu.call(t,r,1),--this.size,!0)}function rr(e){var t=this.__data__,r=Hr(t,e);return r<0?re:t[r][1]}function nr(e){return Hr(this.__data__,e)>-1}function or(e,t){var r=this.__data__,n=Hr(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function ar(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ir(){this.size=0,this.__data__={hash:new ee,map:new(Qu||Zt),string:new ee}}function sr(e){var t=wa(this,e).delete(e);return this.size-=t?1:0,t}function lr(e){return wa(this,e).get(e)}function cr(e){return wa(this,e).has(e)}function ur(e,t){var r=wa(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function pr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new ar;++t<r;)this.add(e[t])}function hr(e){return this.__data__.set(e,ie),this}function mr(e){return this.__data__.has(e)}function vr(e){var t=this.__data__=new Zt(e);this.size=t.size}function _r(){this.__data__=new Zt,this.size=0}function Sr(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function kr(e){return this.__data__.get(e)}function Er(e){return this.__data__.has(e)}function Rr(e,t){var r=this.__data__;if(r instanceof Zt){var n=r.__data__;if(!Qu||n.length<ne-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ar(n)}return r.set(e,t),this.size=r.size,this}function xr(e,t){var r=pf(e),n=!r&&ff(e),o=!r&&!n&&mf(e),a=!r&&!n&&!o&&bf(e),i=r||n||o||a,s=i?D(e.length,au):[],l=s.length;for(var c in e)!t&&!fu.call(e,c)||i&&("length"==c||o&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Na(c,l))||s.push(c);return s}function Nr(e){var t=e.length;return t?e[Jn(0,t-1)]:re}function Dr(e,t){return Qa(Lo(e),Xr(t,0,e.length))}function Lr(e){return Qa(Lo(e))}function Tr(e,t,r){(r===re||zs(e[t],r))&&(r!==re||t in e)||Jr(e,t,r)}function zr(e,t,r){var n=e[t];fu.call(e,t)&&zs(n,r)&&(r!==re||t in e)||Jr(e,t,r)}function Hr(e,t){for(var r=e.length;r--;)if(zs(e[r][0],t))return r;return-1}function Kr(e,t,r,n){return ud(e,function(e,o,a){t(n,e,r(e),a)}),n}function Qr(e,t){return e&&To(t,Al(t),e)}function $r(e,t){return e&&To(t,Ml(t),e)}function Jr(e,t,r){"__proto__"==t&&Nu?Nu(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Yr(e,t){for(var r=-1,n=t.length,o=Xc(n),a=null==e;++r<n;)o[r]=a?re:Ll(e,t[r]);return o}function Xr(e,t,r){return e===e&&(r!==re&&(e=e<=r?e:r),t!==re&&(e=e>=t?e:t)),e}function Zr(e,t,r,n,o,a){var i,l=t&ce,c=t&ue,u=t&de;if(r&&(i=o?r(e,n,o,a):r(e)),i!==re)return i;if(!el(e))return e;var d=pf(e);if(d){if(i=Ia(e),!l)return Lo(e,i)}else{var f=Sd(e),p=f==Ge||f==He;if(mf(e))return ko(e,l);if(f==Je||f==We||p&&!o){if(i=c||p?{}:Ca(e),!l)return c?Ao(e,$r(i,e)):Fo(e,Qr(i,e))}else{if(!br[f])return o?e:{};i=Ra(e,f,l)}}a||(a=new vr);var h=a.get(e);if(h)return h;a.set(e,i),yf(e)?e.forEach(function(n){i.add(Zr(n,t,r,n,e,a))}):gf(e)&&e.forEach(function(n,o){i.set(o,Zr(n,t,r,o,e,a))});var m=u?c?ha:pa:c?Ml:Al,v=d?re:m(e);return s(v||e,function(n,o){v&&(o=n,n=e[o]),zr(i,o,Zr(n,t,r,o,e,a))}),i}function en(e){var t=Al(e);return function(r){return tn(r,e,t)}}function tn(e,t,r){var n=r.length;if(null==e)return!n;for(e=nu(e);n--;){var o=r[n],a=t[o],i=e[o];if(i===re&&!(o in e)||!a(i))return!1}return!0}function rn(e,t,r){if("function"!=typeof e)throw new iu(ae);return Id(function(){e.apply(re,r)},t)}function nn(e,t,r,n){var o=-1,a=d,i=!0,s=e.length,l=[],c=t.length;if(!s)return l;r&&(t=p(t,L(r))),n?(a=f,i=!1):t.length>=ne&&(a=F,i=!1,t=new pr(t));e:for(;++o<s;){var u=e[o],h=null==r?u:r(u);if(u=n||0!==u?u:0,i&&h===h){for(var m=c;m--;)if(t[m]===h)continue e;l.push(u)}else a(t,h,n)||l.push(u)}return l}function on(e,t){var r=!0;return ud(e,function(e,n,o){return r=!!t(e,n,o)}),r}function an(e,t,r){for(var n=-1,o=e.length;++n<o;){var a=e[n],i=t(a);if(null!=i&&(s===re?i===i&&!fl(i):r(i,s)))var s=i,l=a}return l}function sn(e,t,r,n){var o=e.length;for(r=wl(r),r<0&&(r=-r>o?0:o+r),n=n===re||n>o?o:wl(n),n<0&&(n+=o),n=r>n?0:yl(n);r<n;)e[r++]=t;return e}function ln(e,t){var r=[];return ud(e,function(e,n,o){t(e,n,o)&&r.push(e)}),r}function cn(e,t,r,n,o){var a=-1,i=e.length;for(r||(r=Pa),o||(o=[]);++a<i;){var s=e[a];t>0&&r(s)?t>1?cn(s,t-1,r,n,o):h(o,s):n||(o[o.length]=s)}return o}function un(e,t){return e&&fd(e,t,Al)}function dn(e,t){return e&&pd(e,t,Al)}function fn(e,t){return u(t,function(t){return Ys(e[t])})}function pn(e,t){t=_o(t,e);for(var r=0,n=t.length;null!=e&&r<n;)e=e[$a(t[r++])];return r&&r==n?e:re}function hn(e,t,r){var n=t(e);return pf(e)?n:h(n,r(e))}function mn(e){return null==e?e===re?rt:$e:Pu&&Pu in nu(e)?_a(e):za(e)}function vn(e,t){return e>t}function gn(e,t){return null!=e&&fu.call(e,t)}function wn(e,t){return null!=e&&t in nu(e)}function yn(e,t,r){return e>=qu(t,r)&&e<zu(t,r)}function bn(e,t,r){for(var n=r?f:d,o=e[0].length,a=e.length,i=a,s=Xc(a),l=1/0,c=[];i--;){var u=e[i];i&&t&&(u=p(u,L(t))),l=qu(u.length,l),s[i]=!r&&(t||o>=120&&u.length>=120)?new pr(i&&u):re}u=e[0];var h=-1,m=s[0];e:for(;++h<o&&c.length<l;){var v=u[h],g=t?t(v):v;if(v=r||0!==v?v:0,!(m?F(m,g):n(c,g,r))){for(i=a;--i;){var w=s[i];if(!(w?F(w,g):n(e[i],g,r)))continue e}m&&m.push(g),c.push(v)}}return c}function _n(e,t,r,n){return un(e,function(e,o,a){t(n,r(e),o,a)}),n}function Sn(e,t,r){t=_o(t,e),e=Ua(e,t);var n=null==e?e:e[$a(gi(t))];return null==n?re:a(n,e,r)}function kn(e){return tl(e)&&mn(e)==We}function En(e){return tl(e)&&mn(e)==at}function In(e){return tl(e)&&mn(e)==qe}function Cn(e,t,r,n,o){return e===t||(null==e||null==t||!tl(e)&&!tl(t)?e!==e&&t!==t:Rn(e,t,r,n,Cn,o))}function Rn(e,t,r,n,o,a){var i=pf(e),s=pf(t),l=i?je:Sd(e),c=s?je:Sd(t);l=l==We?Je:l,c=c==We?Je:c;var u=l==Je,d=c==Je,f=l==c;if(f&&mf(e)){if(!mf(t))return!1;i=!0,u=!1}if(f&&!u)return a||(a=new vr),i||bf(e)?ca(e,t,r,n,o,a):ua(e,t,l,r,n,o,a);if(!(r&fe)){var p=u&&fu.call(e,"__wrapped__"),h=d&&fu.call(t,"__wrapped__");if(p||h){var m=p?e.value():e,v=h?t.value():t;return a||(a=new vr),o(m,v,r,n,a)}}return!!f&&(a||(a=new vr),da(e,t,r,n,o,a))}function xn(e){return tl(e)&&Sd(e)==Ke}function Pn(e,t,r,n){var o=r.length,a=o,i=!n;if(null==e)return!a;for(e=nu(e);o--;){var s=r[o];if(i&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<a;){s=r[o];var l=s[0],c=e[l],u=s[1];if(i&&s[2]){if(c===re&&!(l in e))return!1}else{var d=new vr;if(n)var f=n(c,u,l,e,t,d);if(!(f===re?Cn(u,c,fe|pe,n,d):f))return!1}}return!0}function Nn(e){return!(!el(e)||Fa(e))&&(Ys(e)?wu:Ut).test(Ja(e))}function Dn(e){return tl(e)&&mn(e)==Xe}function On(e){return tl(e)&&Sd(e)==Ze}function Ln(e){return tl(e)&&Zs(e.length)&&!!yr[mn(e)]}function Tn(e){return"function"==typeof e?e:null==e?Cc:"object"==typeof e?pf(e)?Bn(e[0],e[1]):jn(e):Tc(e)}function Fn(e){if(!Aa(e))return Bu(e);var t=[];for(var r in nu(e))fu.call(e,r)&&"constructor"!=r&&t.push(r);return t}function An(e){if(!el(e))return Ba(e);var t=Aa(e),r=[];for(var n in e)("constructor"!=n||!t&&fu.call(e,n))&&r.push(n);return r}function Mn(e,t){return e<t}function Wn(e,t){var r=-1,n=qs(e)?Xc(e.length):[];return ud(e,function(e,o,a){n[++r]=t(e,o,a)}),n}function jn(e){var t=ya(e);return 1==t.length&&t[0][2]?Wa(t[0][0],t[0][1]):function(r){return r===e||Pn(r,e,t)}}function Bn(e,t){return Oa(e)&&Ma(t)?Wa($a(e),t):function(r){var n=Ll(r,e);return n===re&&n===t?Fl(r,e):Cn(t,n,fe|pe)}}function zn(e,t,r,n,o){e!==t&&fd(t,function(a,i){if(o||(o=new vr),el(a))qn(e,t,i,r,zn,n,o);else{var s=n?n(Ga(e,i),a,i+"",e,t,o):re;s===re&&(s=a),Tr(e,i,s)}},Ml)}function qn(e,t,r,n,o,a,i){var s=Ga(e,r),l=Ga(t,r),c=i.get(l);if(c)return void Tr(e,r,c);var u=a?a(s,l,r+"",e,t,i):re,d=u===re;if(d){var f=pf(l),p=!f&&mf(l),h=!f&&!p&&bf(l);u=l,f||p||h?pf(s)?u=s:Us(s)?u=Lo(s):p?(d=!1,u=ko(l,!0)):h?(d=!1,u=xo(l,!0)):u=[]:cl(l)||ff(l)?(u=s,ff(s)?u=_l(s):el(s)&&!Ys(s)||(u=Ca(l))):d=!1}d&&(i.set(l,u),o(u,l,n,a,i),i.delete(l)),Tr(e,r,u)}function Un(e,t){var r=e.length;if(r)return t+=t<0?r:0,Na(t,r)?e[t]:re}function Vn(e,t,r){var n=-1;return t=p(t.length?t:[Cc],L(ga())),P(Wn(e,function(e,r,o){return{criteria:p(t,function(t){return t(e)}),index:++n,value:e}}),function(e,t){return No(e,t,r)})}function Gn(e,t){return Hn(e,t,function(t,r){return Fl(e,r)})}function Hn(e,t,r){for(var n=-1,o=t.length,a={};++n<o;){var i=t[n],s=pn(e,i);r(s,i)&&ro(a,_o(i,e),s)}return a}function Kn(e){return function(t){return pn(t,e)}}function Qn(e,t,r,n){var o=n?k:S,a=-1,i=t.length,s=e;for(e===t&&(t=Lo(t)),r&&(s=p(e,L(r)));++a<i;)for(var l=0,c=t[a],u=r?r(c):c;(l=o(s,u,l,n))>-1;)s!==e&&Cu.call(s,l,1),Cu.call(e,l,1);return e}function $n(e,t){for(var r=e?t.length:0,n=r-1;r--;){var o=t[r];if(r==n||o!==a){var a=o;Na(o)?Cu.call(e,o,1):po(e,o)}}return e}function Jn(e,t){return e+Fu(Gu()*(t-e+1))}function Yn(e,t,r,n){for(var o=-1,a=zu(Tu((t-e)/(r||1)),0),i=Xc(a);a--;)i[n?a:++o]=e,e+=r;return i}function Xn(e,t){var r="";if(!e||t<1||t>De)return r;do{t%2&&(r+=e),(t=Fu(t/2))&&(e+=e)}while(t);return r}function Zn(e,t){return Cd(qa(e,t,Cc),e+"")}function eo(e){return Nr($l(e))}function to(e,t){var r=$l(e);return Qa(r,Xr(t,0,r.length))}function ro(e,t,r,n){if(!el(e))return e;t=_o(t,e);for(var o=-1,a=t.length,i=a-1,s=e;null!=s&&++o<a;){var l=$a(t[o]),c=r;if(o!=i){var u=s[l];c=n?n(u,l,s):re,c===re&&(c=el(u)?u:Na(t[o+1])?[]:{})}zr(s,l,c),s=s[l]}return e}function no(e){return Qa($l(e))}function oo(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),r=r>o?o:r,r<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=Xc(o);++n<o;)a[n]=e[n+t];return a}function ao(e,t){var r;return ud(e,function(e,n,o){return!(r=t(e,n,o))}),!!r}function io(e,t,r){var n=0,o=null==e?n:e.length;if("number"==typeof t&&t===t&&o<=Ae){for(;n<o;){var a=n+o>>>1,i=e[a];null!==i&&!fl(i)&&(r?i<=t:i<t)?n=a+1:o=a}return o}return so(e,t,Cc,r)}function so(e,t,r,n){t=r(t);for(var o=0,a=null==e?0:e.length,i=t!==t,s=null===t,l=fl(t),c=t===re;o<a;){var u=Fu((o+a)/2),d=r(e[u]),f=d!==re,p=null===d,h=d===d,m=fl(d);if(i)var v=n||h;else v=c?h&&(n||f):s?h&&f&&(n||!p):l?h&&f&&!p&&(n||!m):!p&&!m&&(n?d<=t:d<t);v?o=u+1:a=u}return qu(a,Fe)}function lo(e,t){for(var r=-1,n=e.length,o=0,a=[];++r<n;){var i=e[r],s=t?t(i):i;if(!r||!zs(s,l)){var l=s;a[o++]=0===i?0:i}}return a}function co(e){return"number"==typeof e?e:fl(e)?Le:+e}function uo(e){if("string"==typeof e)return e;if(pf(e))return p(e,uo)+"";if(fl(e))return ld?ld.call(e):"";var t=e+"";return"0"==t&&1/e==-Ne?"-0":t}function fo(e,t,r){var n=-1,o=d,a=e.length,i=!0,s=[],l=s;if(r)i=!1,o=f;else if(a>=ne){var c=t?null:wd(e);if(c)return K(c);i=!1,o=F,l=new pr}else l=t?[]:s;e:for(;++n<a;){var u=e[n],p=t?t(u):u;if(u=r||0!==u?u:0,i&&p===p){for(var h=l.length;h--;)if(l[h]===p)continue e;t&&l.push(p),s.push(u)}else o(l,p,r)||(l!==s&&l.push(p),s.push(u))}return s}function po(e,t){return t=_o(t,e),null==(e=Ua(e,t))||delete e[$a(gi(t))]}function ho(e,t,r,n){return ro(e,t,r(pn(e,t)),n)}function mo(e,t,r,n){for(var o=e.length,a=n?o:-1;(n?a--:++a<o)&&t(e[a],a,e););return r?oo(e,n?0:a,n?a+1:o):oo(e,n?a+1:0,n?o:a)}function vo(e,t){var r=e;return r instanceof w&&(r=r.value()),m(t,function(e,t){return t.func.apply(t.thisArg,h([e],t.args))},r)}function go(e,t,r){var n=e.length;if(n<2)return n?fo(e[0]):[];for(var o=-1,a=Xc(n);++o<n;)for(var i=e[o],s=-1;++s<n;)s!=o&&(a[o]=nn(a[o]||i,e[s],t,r));return fo(cn(a,1),t,r)}function wo(e,t,r){for(var n=-1,o=e.length,a=t.length,i={};++n<o;){var s=n<a?t[n]:re;r(i,e[n],s)}return i}function yo(e){return Us(e)?e:[]}function bo(e){return"function"==typeof e?e:Cc}function _o(e,t){return pf(e)?e:Oa(e,t)?[e]:Rd(kl(e))}function So(e,t,r){var n=e.length;return r=r===re?n:r,!t&&r>=n?e:oo(e,t,r)}function ko(e,t){if(t)return e.slice();var r=e.length,n=Su?Su(r):new e.constructor(r);return e.copy(n),n}function Eo(e){var t=new e.constructor(e.byteLength);return new _u(t).set(new _u(e)),t}function Io(e,t){var r=t?Eo(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function Co(e){var t=new e.constructor(e.source,Bt.exec(e));return t.lastIndex=e.lastIndex,t}function Ro(e){return sd?nu(sd.call(e)):{}}function xo(e,t){var r=t?Eo(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Po(e,t){if(e!==t){var r=e!==re,n=null===e,o=e===e,a=fl(e),i=t!==re,s=null===t,l=t===t,c=fl(t);if(!s&&!c&&!a&&e>t||a&&i&&l&&!s&&!c||n&&i&&l||!r&&l||!o)return 1;if(!n&&!a&&!c&&e<t||c&&r&&o&&!n&&!a||s&&r&&o||!i&&o||!l)return-1}return 0}function No(e,t,r){for(var n=-1,o=e.criteria,a=t.criteria,i=o.length,s=r.length;++n<i;){var l=Po(o[n],a[n]);if(l){if(n>=s)return l;return l*("desc"==r[n]?-1:1)}}return e.index-t.index}function Do(e,t,r,n){for(var o=-1,a=e.length,i=r.length,s=-1,l=t.length,c=zu(a-i,0),u=Xc(l+c),d=!n;++s<l;)u[s]=t[s];for(;++o<i;)(d||o<a)&&(u[r[o]]=e[o]);for(;c--;)u[s++]=e[o++];return u}function Oo(e,t,r,n){for(var o=-1,a=e.length,i=-1,s=r.length,l=-1,c=t.length,u=zu(a-s,0),d=Xc(u+c),f=!n;++o<u;)d[o]=e[o];for(var p=o;++l<c;)d[p+l]=t[l];for(;++i<s;)(f||o<a)&&(d[p+r[i]]=e[o++]);return d}function Lo(e,t){var r=-1,n=e.length;for(t||(t=Xc(n));++r<n;)t[r]=e[r];return t}function To(e,t,r,n){var o=!r;r||(r={});for(var a=-1,i=t.length;++a<i;){var s=t[a],l=n?n(r[s],e[s],s,r,e):re;l===re&&(l=e[s]),o?Jr(r,s,l):zr(r,s,l)}return r}function Fo(e,t){return To(e,bd(e),t)}function Ao(e,t){return To(e,_d(e),t)}function Mo(e,t){return function(r,n){var o=pf(r)?i:Kr,a=t?t():{};return o(r,e,ga(n,2),a)}}function Wo(e){return Zn(function(t,r){var n=-1,o=r.length,a=o>1?r[o-1]:re,i=o>2?r[2]:re;for(a=e.length>3&&"function"==typeof a?(o--,a):re,i&&Da(r[0],r[1],i)&&(a=o<3?re:a,o=1),t=nu(t);++n<o;){var s=r[n];s&&e(t,s,n,a)}return t})}function jo(e,t){return function(r,n){if(null==r)return r;if(!qs(r))return e(r,n);for(var o=r.length,a=t?o:-1,i=nu(r);(t?a--:++a<o)&&!1!==n(i[a],a,i););return r}}function Bo(e){return function(t,r,n){for(var o=-1,a=nu(t),i=n(t),s=i.length;s--;){var l=i[e?s:++o];if(!1===r(a[l],l,a))break}return t}}function zo(e,t,r){function n(){return(this&&this!==Pr&&this instanceof n?a:e).apply(o?r:this,arguments)}var o=t&he,a=Vo(e);return n}function qo(e){return function(t){t=kl(t);var r=z(t)?X(t):re,n=r?r[0]:t.charAt(0),o=r?So(r,1).join(""):t.slice(1);return n[e]()+o}}function Uo(e){return function(t){return m(_c(tc(t).replace(dr,"")),e,"")}}function Vo(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=cd(e.prototype),n=e.apply(r,t);return el(n)?n:r}}function Go(e,t,r){function n(){for(var i=arguments.length,s=Xc(i),l=i,c=va(n);l--;)s[l]=arguments[l];var u=i<3&&s[0]!==c&&s[i-1]!==c?[]:H(s,c);return(i-=u.length)<r?ra(e,t,Qo,n.placeholder,re,s,u,re,re,r-i):a(this&&this!==Pr&&this instanceof n?o:e,this,s)}var o=Vo(e);return n}function Ho(e){return function(t,r,n){var o=nu(t);if(!qs(t)){var a=ga(r,3);t=Al(t),r=function(e){return a(o[e],e,o)}}var i=e(t,r,n);return i>-1?o[a?t[i]:i]:re}}function Ko(e){return fa(function(t){var r=t.length,n=r,a=o.prototype.thru;for(e&&t.reverse();n--;){var i=t[n];if("function"!=typeof i)throw new iu(ae);if(a&&!s&&"wrapper"==ma(i))var s=new o([],!0)}for(n=s?n:r;++n<r;){i=t[n];var l=ma(i),c="wrapper"==l?yd(i):re;s=c&&Ta(c[0])&&c[1]==(_e|ge|ye|Se)&&!c[4].length&&1==c[9]?s[ma(c[0])].apply(s,c[3]):1==i.length&&Ta(i)?s[l]():s.thru(i)}return function(){var e=arguments,n=e[0];if(s&&1==e.length&&pf(n))return s.plant(n).value();for(var o=0,a=r?t[o].apply(this,e):n;++o<r;)a=t[o].call(this,a);return a}})}function Qo(e,t,r,n,o,a,i,s,l,c){function u(){for(var g=arguments.length,w=Xc(g),y=g;y--;)w[y]=arguments[y];if(h)var b=va(u),_=W(w,b);if(n&&(w=Do(w,n,o,h)),a&&(w=Oo(w,a,i,h)),g-=_,h&&g<c){var S=H(w,b);return ra(e,t,Qo,u.placeholder,r,w,S,s,l,c-g)}var k=f?r:this,E=p?k[e]:e;return g=w.length,s?w=Va(w,s):m&&g>1&&w.reverse(),d&&l<g&&(w.length=l),this&&this!==Pr&&this instanceof u&&(E=v||Vo(E)),E.apply(k,w)}var d=t&_e,f=t&he,p=t&me,h=t&(ge|we),m=t&ke,v=p?re:Vo(e);return u}function $o(e,t){return function(r,n){return _n(r,e,t(n),{})}}function Jo(e,t){return function(r,n){var o;if(r===re&&n===re)return t;if(r!==re&&(o=r),n!==re){if(o===re)return n;"string"==typeof r||"string"==typeof n?(r=uo(r),n=uo(n)):(r=co(r),n=co(n)),o=e(r,n)}return o}}function Yo(e){return fa(function(t){return t=p(t,L(ga())),Zn(function(r){var n=this;return e(t,function(e){return a(e,n,r)})})})}function Xo(e,t){t=t===re?" ":uo(t);var r=t.length;if(r<2)return r?Xn(t,e):t;var n=Xn(t,Tu(e/Y(t)));return z(t)?So(X(n),0,e).join(""):n.slice(0,e)}function Zo(e,t,r,n){function o(){for(var t=-1,l=arguments.length,c=-1,u=n.length,d=Xc(u+l),f=this&&this!==Pr&&this instanceof o?s:e;++c<u;)d[c]=n[c];for(;l--;)d[c++]=arguments[++t];return a(f,i?r:this,d)}var i=t&he,s=Vo(e);return o}function ea(e){return function(t,r,n){return n&&"number"!=typeof n&&Da(t,r,n)&&(r=n=re),t=gl(t),r===re?(r=t,t=0):r=gl(r),n=n===re?t<r?1:-1:gl(n),Yn(t,r,n,e)}}function ta(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=bl(t),r=bl(r)),e(t,r)}}function ra(e,t,r,n,o,a,i,s,l,c){var u=t&ge,d=u?i:re,f=u?re:i,p=u?a:re,h=u?re:a;t|=u?ye:be,(t&=~(u?be:ye))&ve||(t&=~(he|me));var m=[e,t,o,p,d,h,f,s,l,c],v=r.apply(re,m);return Ta(e)&&Ed(v,m),v.placeholder=n,Ha(v,e,t)}function na(e){var t=ru[e];return function(e,r){if(e=bl(e),(r=null==r?0:qu(wl(r),292))&&Wu(e)){var n=(kl(e)+"e").split("e");return n=(kl(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"),+(n[0]+"e"+(+n[1]-r))}return t(e)}}function oa(e){return function(t){var r=Sd(t);return r==Ke?V(t):r==Ze?Q(t):O(t,e(t))}}function aa(e,t,r,n,o,a,i,s){var l=t&me;if(!l&&"function"!=typeof e)throw new iu(ae);var c=n?n.length:0;if(c||(t&=~(ye|be),n=o=re),i=i===re?i:zu(wl(i),0),s=s===re?s:wl(s),c-=o?o.length:0,t&be){var u=n,d=o;n=o=re}var f=l?re:yd(e),p=[e,t,r,n,o,u,d,a,i,s];if(f&&ja(p,f),e=p[0],t=p[1],r=p[2],n=p[3],o=p[4],s=p[9]=p[9]===re?l?0:e.length:zu(p[9]-c,0),!s&&t&(ge|we)&&(t&=~(ge|we)),t&&t!=he)h=t==ge||t==we?Go(e,t,s):t!=ye&&t!=(he|ye)||o.length?Qo.apply(re,p):Zo(e,t,r,n);else var h=zo(e,t,r);return Ha((f?hd:Ed)(h,p),e,t)}function ia(e,t,r,n){return e===re||zs(e,cu[r])&&!fu.call(n,r)?t:e}function sa(e,t,r,n,o,a){return el(e)&&el(t)&&(a.set(t,e),zn(e,t,re,sa,a),a.delete(t)),e}function la(e){return cl(e)?re:e}function ca(e,t,r,n,o,a){var i=r&fe,s=e.length,l=t.length;if(s!=l&&!(i&&l>s))return!1;var c=a.get(e);if(c&&a.get(t))return c==t;var u=-1,d=!0,f=r&pe?new pr:re;for(a.set(e,t),a.set(t,e);++u<s;){var p=e[u],h=t[u];if(n)var m=i?n(h,p,u,t,e,a):n(p,h,u,e,t,a);if(m!==re){if(m)continue;d=!1;break}if(f){if(!g(t,function(e,t){if(!F(f,t)&&(p===e||o(p,e,r,n,a)))return f.push(t)})){d=!1;break}}else if(p!==h&&!o(p,h,r,n,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function ua(e,t,r,n,o,a,i){switch(r){case it:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case at:return!(e.byteLength!=t.byteLength||!a(new _u(e),new _u(t)));case ze:case qe:case Qe:return zs(+e,+t);case Ve:return e.name==t.name&&e.message==t.message;case Xe:case et:return e==t+"";case Ke:var s=V;case Ze:var l=n&fe;if(s||(s=K),e.size!=t.size&&!l)return!1;var c=i.get(e);if(c)return c==t;n|=pe,i.set(e,t);var u=ca(s(e),s(t),n,o,a,i);return i.delete(e),u;case tt:if(sd)return sd.call(e)==sd.call(t)}return!1}function da(e,t,r,n,o,a){var i=r&fe,s=pa(e),l=s.length;if(l!=pa(t).length&&!i)return!1;for(var c=l;c--;){var u=s[c];if(!(i?u in t:fu.call(t,u)))return!1}var d=a.get(e);if(d&&a.get(t))return d==t;var f=!0;a.set(e,t),a.set(t,e);for(var p=i;++c<l;){u=s[c];var h=e[u],m=t[u];if(n)var v=i?n(m,h,u,t,e,a):n(h,m,u,e,t,a);if(!(v===re?h===m||o(h,m,r,n,a):v)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var g=e.constructor,w=t.constructor;g!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof w&&w instanceof w)&&(f=!1)}return a.delete(e),a.delete(t),f}function fa(e){return Cd(qa(e,re,ci),e+"")}function pa(e){return hn(e,Al,bd)}function ha(e){return hn(e,Ml,_d)}function ma(e){for(var t=e.name+"",r=ed[t],n=fu.call(ed,t)?r.length:0;n--;){var o=r[n],a=o.func;if(null==a||a==e)return o.name}return t}function va(e){return(fu.call(r,"placeholder")?r:e).placeholder}function ga(){var e=r.iteratee||Rc;return e=e===Rc?Tn:e,arguments.length?e(arguments[0],arguments[1]):e}function wa(e,t){var r=e.__data__;return La(t)?r["string"==typeof t?"string":"hash"]:r.map}function ya(e){for(var t=Al(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,Ma(o)]}return t}function ba(e,t){var r=B(e,t);return Nn(r)?r:re}function _a(e){var t=fu.call(e,Pu),r=e[Pu];try{e[Pu]=re;var n=!0}catch(e){}var o=mu.call(e);return n&&(t?e[Pu]=r:delete e[Pu]),o}function Sa(e,t,r){for(var n=-1,o=r.length;++n<o;){var a=r[n],i=a.size;switch(a.type){case"drop":e+=i;break;case"dropRight":t-=i;break;case"take":t=qu(t,e+i);break;case"takeRight":e=zu(e,t-i)}}return{start:e,end:t}}function ka(e){var t=e.match(Ft);return t?t[1].split(At):[]}function Ea(e,t,r){t=_o(t,e);for(var n=-1,o=t.length,a=!1;++n<o;){var i=$a(t[n]);if(!(a=null!=e&&r(e,i)))break;e=e[i]}return a||++n!=o?a:!!(o=null==e?0:e.length)&&Zs(o)&&Na(i,o)&&(pf(e)||ff(e))}function Ia(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&fu.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function Ca(e){return"function"!=typeof e.constructor||Aa(e)?{}:cd(ku(e))}function Ra(e,t,r){var n=e.constructor;switch(t){case at:return Eo(e);case ze:case qe:return new n(+e);case it:return Io(e,r);case st:case lt:case ct:case ut:case dt:case ft:case pt:case ht:case mt:return xo(e,r);case Ke:return new n;case Qe:case et:return new n(e);case Xe:return Co(e);case Ze:return new n;case tt:return Ro(e)}}function xa(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(Tt,"{\n/* [wrapped with "+t+"] */\n")}function Pa(e){return pf(e)||ff(e)||!!(Ru&&e&&e[Ru])}function Na(e,t){var r=typeof e;return!!(t=null==t?De:t)&&("number"==r||"symbol"!=r&&Gt.test(e))&&e>-1&&e%1==0&&e<t}function Da(e,t,r){if(!el(r))return!1;var n=typeof t;return!!("number"==n?qs(r)&&Na(t,r.length):"string"==n&&t in r)&&zs(r[t],e)}function Oa(e,t){if(pf(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!fl(e))||(Rt.test(e)||!Ct.test(e)||null!=t&&e in nu(t))}function La(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Ta(e){var t=ma(e),n=r[t];if("function"!=typeof n||!(t in w.prototype))return!1;if(e===n)return!0;var o=yd(n);return!!o&&e===o[0]}function Fa(e){return!!hu&&hu in e}function Aa(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||cu)}function Ma(e){return e===e&&!el(e)}function Wa(e,t){return function(r){return null!=r&&(r[e]===t&&(t!==re||e in nu(r)))}}function ja(e,t){var r=e[1],n=t[1],o=r|n,a=o<(he|me|_e),i=n==_e&&r==ge||n==_e&&r==Se&&e[7].length<=t[8]||n==(_e|Se)&&t[7].length<=t[8]&&r==ge;if(!a&&!i)return e;n&he&&(e[2]=t[2],o|=r&he?0:ve);var s=t[3];if(s){var l=e[3];e[3]=l?Do(l,s,t[4]):s,e[4]=l?H(e[3],le):t[4]}return s=t[5],s&&(l=e[5],e[5]=l?Oo(l,s,t[6]):s,e[6]=l?H(e[5],le):t[6]),s=t[7],s&&(e[7]=s),n&_e&&(e[8]=null==e[8]?t[8]:qu(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o,e}function Ba(e){var t=[];if(null!=e)for(var r in nu(e))t.push(r);return t}function za(e){return mu.call(e)}function qa(e,t,r){return t=zu(t===re?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=zu(n.length-t,0),s=Xc(i);++o<i;)s[o]=n[t+o];o=-1;for(var l=Xc(t+1);++o<t;)l[o]=n[o];return l[t]=r(s),a(e,this,l)}}function Ua(e,t){return t.length<2?e:pn(e,oo(t,0,-1))}function Va(e,t){for(var r=e.length,n=qu(t.length,r),o=Lo(e);n--;){var a=t[n];e[n]=Na(a,r)?o[a]:re}return e}function Ga(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}function Ha(e,t,r){var n=t+"";return Cd(e,xa(n,Ya(ka(n),r)))}function Ka(e){var t=0,r=0;return function(){var n=Uu(),o=Re-(n-r);if(r=n,o>0){if(++t>=Ce)return arguments[0]}else t=0;return e.apply(re,arguments)}}function Qa(e,t){var r=-1,n=e.length,o=n-1;for(t=t===re?n:t;++r<t;){var a=Jn(r,o),i=e[a];e[a]=e[r],e[r]=i}return e.length=t,e}function $a(e){if("string"==typeof e||fl(e))return e;var t=e+"";return"0"==t&&1/e==-Ne?"-0":t}function Ja(e){if(null!=e){try{return du.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ya(e,t){return s(Me,function(r){var n="_."+r[0];t&r[1]&&!d(e,n)&&e.push(n)}),e.sort()}function Xa(e){if(e instanceof w)return e.clone();var t=new o(e.__wrapped__,e.__chain__);return t.__actions__=Lo(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Za(e,t,r){t=(r?Da(e,t,r):t===re)?1:zu(wl(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var o=0,a=0,i=Xc(Tu(n/t));o<n;)i[a++]=oo(e,o,o+=t);return i}function ei(e){for(var t=-1,r=null==e?0:e.length,n=0,o=[];++t<r;){var a=e[t];a&&(o[n++]=a)}return o}function ti(){var e=arguments.length;if(!e)return[];for(var t=Xc(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return h(pf(r)?Lo(r):[r],cn(t,1))}function ri(e,t,r){var n=null==e?0:e.length;return n?(t=r||t===re?1:wl(t),oo(e,t<0?0:t,n)):[]}function ni(e,t,r){var n=null==e?0:e.length;return n?(t=r||t===re?1:wl(t),t=n-t,oo(e,0,t<0?0:t)):[]}function oi(e,t){return e&&e.length?mo(e,ga(t,3),!0,!0):[]}function ai(e,t){return e&&e.length?mo(e,ga(t,3),!0):[]}function ii(e,t,r,n){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&Da(e,t,r)&&(r=0,n=o),sn(e,t,r,n)):[]}function si(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=null==r?0:wl(r);return o<0&&(o=zu(n+o,0)),_(e,ga(t,3),o)}function li(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=n-1;return r!==re&&(o=wl(r),o=r<0?zu(n+o,0):qu(o,n-1)),_(e,ga(t,3),o,!0)}function ci(e){return(null==e?0:e.length)?cn(e,1):[]}function ui(e){return(null==e?0:e.length)?cn(e,Ne):[]}function di(e,t){return(null==e?0:e.length)?(t=t===re?1:wl(t),cn(e,t)):[]}function fi(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var o=e[t];n[o[0]]=o[1]}return n}function pi(e){return e&&e.length?e[0]:re}function hi(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=null==r?0:wl(r);return o<0&&(o=zu(n+o,0)),S(e,t,o)}function mi(e){return(null==e?0:e.length)?oo(e,0,-1):[]}function vi(e,t){return null==e?"":ju.call(e,t)}function gi(e){var t=null==e?0:e.length;return t?e[t-1]:re}function wi(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=n;return r!==re&&(o=wl(r),o=o<0?zu(n+o,0):qu(o,n-1)),t===t?J(e,t,o):_(e,E,o,!0)}function yi(e,t){return e&&e.length?Un(e,wl(t)):re}function bi(e,t){return e&&e.length&&t&&t.length?Qn(e,t):e}function _i(e,t,r){return e&&e.length&&t&&t.length?Qn(e,t,ga(r,2)):e}function Si(e,t,r){return e&&e.length&&t&&t.length?Qn(e,t,re,r):e}function ki(e,t){var r=[];if(!e||!e.length)return r;var n=-1,o=[],a=e.length;for(t=ga(t,3);++n<a;){var i=e[n];t(i,n,e)&&(r.push(i),o.push(n))}return $n(e,o),r}function Ei(e){return null==e?e:Hu.call(e)}function Ii(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&Da(e,t,r)?(t=0,r=n):(t=null==t?0:wl(t),r=r===re?n:wl(r)),oo(e,t,r)):[]}function Ci(e,t){return io(e,t)}function Ri(e,t,r){return so(e,t,ga(r,2))}function xi(e,t){var r=null==e?0:e.length;if(r){var n=io(e,t);if(n<r&&zs(e[n],t))return n}return-1}function Pi(e,t){return io(e,t,!0)}function Ni(e,t,r){return so(e,t,ga(r,2),!0)}function Di(e,t){if(null==e?0:e.length){var r=io(e,t,!0)-1;if(zs(e[r],t))return r}return-1}function Oi(e){return e&&e.length?lo(e):[]}function Li(e,t){return e&&e.length?lo(e,ga(t,2)):[]}function Ti(e){var t=null==e?0:e.length;return t?oo(e,1,t):[]}function Fi(e,t,r){return e&&e.length?(t=r||t===re?1:wl(t),oo(e,0,t<0?0:t)):[]}function Ai(e,t,r){var n=null==e?0:e.length;return n?(t=r||t===re?1:wl(t),t=n-t,oo(e,t<0?0:t,n)):[]}function Mi(e,t){return e&&e.length?mo(e,ga(t,3),!1,!0):[]}function Wi(e,t){return e&&e.length?mo(e,ga(t,3)):[]}function ji(e){return e&&e.length?fo(e):[]}function Bi(e,t){return e&&e.length?fo(e,ga(t,2)):[]}function zi(e,t){return t="function"==typeof t?t:re,e&&e.length?fo(e,re,t):[]}function qi(e){if(!e||!e.length)return[];var t=0;return e=u(e,function(e){if(Us(e))return t=zu(e.length,t),!0}),D(t,function(t){return p(e,C(t))})}function Ui(e,t){if(!e||!e.length)return[];var r=qi(e);return null==t?r:p(r,function(e){return a(t,re,e)})}function Vi(e,t){return wo(e||[],t||[],zr)}function Gi(e,t){return wo(e||[],t||[],ro)}function Hi(e){var t=r(e);return t.__chain__=!0,t}function Ki(e,t){return t(e),e}function Qi(e,t){return t(e)}function $i(){return Hi(this)}function Ji(){return new o(this.value(),this.__chain__)}function Yi(){this.__values__===re&&(this.__values__=vl(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?re:this.__values__[this.__index__++]}}function Xi(){return this}function Zi(e){for(var t,r=this;r instanceof n;){var o=Xa(r);o.__index__=0,o.__values__=re,t?a.__wrapped__=o:t=o;var a=o;r=r.__wrapped__}return a.__wrapped__=e,t}function es(){var e=this.__wrapped__;if(e instanceof w){var t=e;return this.__actions__.length&&(t=new w(this)),t=t.reverse(),t.__actions__.push({func:Qi,args:[Ei],thisArg:re}),new o(t,this.__chain__)}return this.thru(Ei)}function ts(){return vo(this.__wrapped__,this.__actions__)}function rs(e,t,r){var n=pf(e)?c:on;return r&&Da(e,t,r)&&(t=re),n(e,ga(t,3))}function ns(e,t){return(pf(e)?u:ln)(e,ga(t,3))}function os(e,t){return cn(us(e,t),1)}function as(e,t){return cn(us(e,t),Ne)}function is(e,t,r){return r=r===re?1:wl(r),cn(us(e,t),r)}function ss(e,t){return(pf(e)?s:ud)(e,ga(t,3))}function ls(e,t){return(pf(e)?l:dd)(e,ga(t,3))}function cs(e,t,r,n){e=qs(e)?e:$l(e),r=r&&!n?wl(r):0;var o=e.length;return r<0&&(r=zu(o+r,0)),dl(e)?r<=o&&e.indexOf(t,r)>-1:!!o&&S(e,t,r)>-1}function us(e,t){return(pf(e)?p:Wn)(e,ga(t,3))}function ds(e,t,r,n){return null==e?[]:(pf(t)||(t=null==t?[]:[t]),r=n?re:r,pf(r)||(r=null==r?[]:[r]),Vn(e,t,r))}function fs(e,t,r){var n=pf(e)?m:x,o=arguments.length<3;return n(e,ga(t,4),r,o,ud)}function ps(e,t,r){var n=pf(e)?v:x,o=arguments.length<3;return n(e,ga(t,4),r,o,dd)}function hs(e,t){return(pf(e)?u:ln)(e,xs(ga(t,3)))}function ms(e){return(pf(e)?Nr:eo)(e)}function vs(e,t,r){return t=(r?Da(e,t,r):t===re)?1:wl(t),(pf(e)?Dr:to)(e,t)}function gs(e){return(pf(e)?Lr:no)(e)}function ws(e){if(null==e)return 0;if(qs(e))return dl(e)?Y(e):e.length;var t=Sd(e);return t==Ke||t==Ze?e.size:Fn(e).length}function ys(e,t,r){var n=pf(e)?g:ao;return r&&Da(e,t,r)&&(t=re),n(e,ga(t,3))}function bs(e,t){if("function"!=typeof t)throw new iu(ae);return e=wl(e),function(){if(--e<1)return t.apply(this,arguments)}}function _s(e,t,r){return t=r?re:t,t=e&&null==t?e.length:t,aa(e,_e,re,re,re,re,t)}function Ss(e,t){var r;if("function"!=typeof t)throw new iu(ae);return e=wl(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=re),r}}function ks(e,t,r){t=r?re:t;var n=aa(e,ge,re,re,re,re,re,t);return n.placeholder=ks.placeholder,n}function Es(e,t,r){t=r?re:t;var n=aa(e,we,re,re,re,re,re,t);return n.placeholder=Es.placeholder,n}function Is(e,t,r){function n(t){var r=f,n=p;return f=p=re,w=t,m=e.apply(n,r)}function o(e){return w=e,v=Id(s,t),y?n(e):m}function a(e){var r=e-g,n=e-w,o=t-r;return b?qu(o,h-n):o}function i(e){var r=e-g,n=e-w;return g===re||r>=t||r<0||b&&n>=h}function s(){var e=ef();if(i(e))return l(e);v=Id(s,a(e))}function l(e){return v=re,_&&f?n(e):(f=p=re,m)}function c(){v!==re&&gd(v),w=0,f=g=p=v=re}function u(){return v===re?m:l(ef())}function d(){var e=ef(),r=i(e);if(f=arguments,p=this,g=e,r){if(v===re)return o(g);if(b)return gd(v),v=Id(s,t),n(g)}return v===re&&(v=Id(s,t)),m}var f,p,h,m,v,g,w=0,y=!1,b=!1,_=!0;if("function"!=typeof e)throw new iu(ae);return t=bl(t)||0,el(r)&&(y=!!r.leading,b="maxWait"in r,h=b?zu(bl(r.maxWait)||0,t):h,_="trailing"in r?!!r.trailing:_),d.cancel=c,d.flush=u,d}function Cs(e){return aa(e,ke)}function Rs(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new iu(ae);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var i=e.apply(this,n);return r.cache=a.set(o,i)||a,i};return r.cache=new(Rs.Cache||ar),r}function xs(e){if("function"!=typeof e)throw new iu(ae);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Ps(e){return Ss(2,e)}function Ns(e,t){if("function"!=typeof e)throw new iu(ae);return t=t===re?t:wl(t),Zn(e,t)}function Ds(e,t){if("function"!=typeof e)throw new iu(ae);return t=null==t?0:zu(wl(t),0),Zn(function(r){var n=r[t],o=So(r,0,t);return n&&h(o,n),a(e,this,o)})}function Os(e,t,r){var n=!0,o=!0;if("function"!=typeof e)throw new iu(ae);return el(r)&&(n="leading"in r?!!r.leading:n,o="trailing"in r?!!r.trailing:o),Is(e,t,{leading:n,maxWait:t,trailing:o})}function Ls(e){return _s(e,1)}function Ts(e,t){return sf(bo(t),e)}function Fs(){if(!arguments.length)return[];var e=arguments[0];return pf(e)?e:[e]}function As(e){return Zr(e,de)}function Ms(e,t){return t="function"==typeof t?t:re,Zr(e,de,t)}function Ws(e){return Zr(e,ce|de)}function js(e,t){return t="function"==typeof t?t:re,Zr(e,ce|de,t)}function Bs(e,t){return null==t||tn(e,t,Al(t))}function zs(e,t){return e===t||e!==e&&t!==t}function qs(e){return null!=e&&Zs(e.length)&&!Ys(e)}function Us(e){return tl(e)&&qs(e)}function Vs(e){return!0===e||!1===e||tl(e)&&mn(e)==ze}function Gs(e){return tl(e)&&1===e.nodeType&&!cl(e)}function Hs(e){if(null==e)return!0;if(qs(e)&&(pf(e)||"string"==typeof e||"function"==typeof e.splice||mf(e)||bf(e)||ff(e)))return!e.length;var t=Sd(e);if(t==Ke||t==Ze)return!e.size;if(Aa(e))return!Fn(e).length;for(var r in e)if(fu.call(e,r))return!1;return!0}function Ks(e,t){return Cn(e,t)}function Qs(e,t,r){r="function"==typeof r?r:re;var n=r?r(e,t):re;return n===re?Cn(e,t,re,r):!!n}function $s(e){if(!tl(e))return!1;var t=mn(e);return t==Ve||t==Ue||"string"==typeof e.message&&"string"==typeof e.name&&!cl(e)}function Js(e){return"number"==typeof e&&Wu(e)}function Ys(e){if(!el(e))return!1;var t=mn(e);return t==Ge||t==He||t==Be||t==Ye}function Xs(e){return"number"==typeof e&&e==wl(e)}function Zs(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=De}function el(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function tl(e){return null!=e&&"object"==typeof e}function rl(e,t){return e===t||Pn(e,t,ya(t))}function nl(e,t,r){return r="function"==typeof r?r:re,Pn(e,t,ya(t),r)}function ol(e){return ll(e)&&e!=+e}function al(e){if(kd(e))throw new eu(oe);return Nn(e)}function il(e){return null===e}function sl(e){return null==e}function ll(e){return"number"==typeof e||tl(e)&&mn(e)==Qe}function cl(e){if(!tl(e)||mn(e)!=Je)return!1;var t=ku(e);if(null===t)return!0;var r=fu.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&du.call(r)==vu}function ul(e){return Xs(e)&&e>=-De&&e<=De}function dl(e){return"string"==typeof e||!pf(e)&&tl(e)&&mn(e)==et}function fl(e){return"symbol"==typeof e||tl(e)&&mn(e)==tt}function pl(e){return e===re}function hl(e){return tl(e)&&Sd(e)==nt}function ml(e){return tl(e)&&mn(e)==ot}function vl(e){if(!e)return[];if(qs(e))return dl(e)?X(e):Lo(e);if(xu&&e[xu])return U(e[xu]());var t=Sd(e);return(t==Ke?V:t==Ze?K:$l)(e)}function gl(e){if(!e)return 0===e?e:0;if((e=bl(e))===Ne||e===-Ne){return(e<0?-1:1)*Oe}return e===e?e:0}function wl(e){var t=gl(e),r=t%1;return t===t?r?t-r:t:0}function yl(e){return e?Xr(wl(e),0,Te):0}function bl(e){if("number"==typeof e)return e;if(fl(e))return Le;if(el(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=el(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Dt,"");var r=qt.test(e);return r||Vt.test(e)?Cr(e.slice(2),r?2:8):zt.test(e)?Le:+e}function _l(e){return To(e,Ml(e))}function Sl(e){return e?Xr(wl(e),-De,De):0===e?e:0}function kl(e){return null==e?"":uo(e)}function El(e,t){var r=cd(e);return null==t?r:Qr(r,t)}function Il(e,t){return b(e,ga(t,3),un)}function Cl(e,t){return b(e,ga(t,3),dn)}function Rl(e,t){return null==e?e:fd(e,ga(t,3),Ml)}function xl(e,t){return null==e?e:pd(e,ga(t,3),Ml)}function Pl(e,t){return e&&un(e,ga(t,3))}function Nl(e,t){return e&&dn(e,ga(t,3))}function Dl(e){return null==e?[]:fn(e,Al(e))}function Ol(e){return null==e?[]:fn(e,Ml(e))}function Ll(e,t,r){var n=null==e?re:pn(e,t);return n===re?r:n}function Tl(e,t){return null!=e&&Ea(e,t,gn)}function Fl(e,t){return null!=e&&Ea(e,t,wn)}function Al(e){return qs(e)?xr(e):Fn(e)}function Ml(e){return qs(e)?xr(e,!0):An(e)}function Wl(e,t){var r={};return t=ga(t,3),un(e,function(e,n,o){Jr(r,t(e,n,o),e)}),r}function jl(e,t){var r={};return t=ga(t,3),un(e,function(e,n,o){Jr(r,n,t(e,n,o))}),r}function Bl(e,t){return zl(e,xs(ga(t)))}function zl(e,t){if(null==e)return{};var r=p(ha(e),function(e){return[e]});return t=ga(t),Hn(e,r,function(e,r){return t(e,r[0])})}function ql(e,t,r){t=_o(t,e);var n=-1,o=t.length;for(o||(o=1,e=re);++n<o;){var a=null==e?re:e[$a(t[n])];a===re&&(n=o,a=r),e=Ys(a)?a.call(e):a}return e}function Ul(e,t,r){return null==e?e:ro(e,t,r)}function Vl(e,t,r,n){return n="function"==typeof n?n:re,null==e?e:ro(e,t,r,n)}function Gl(e,t,r){var n=pf(e),o=n||mf(e)||bf(e);if(t=ga(t,4),null==r){var a=e&&e.constructor;r=o?n?new a:[]:el(e)&&Ys(a)?cd(ku(e)):{}}return(o?s:un)(e,function(e,n,o){return t(r,e,n,o)}),r}function Hl(e,t){return null==e||po(e,t)}function Kl(e,t,r){return null==e?e:ho(e,t,bo(r))}function Ql(e,t,r,n){return n="function"==typeof n?n:re,null==e?e:ho(e,t,bo(r),n)}function $l(e){return null==e?[]:T(e,Al(e))}function Jl(e){return null==e?[]:T(e,Ml(e))}function Yl(e,t,r){return r===re&&(r=t,t=re),r!==re&&(r=bl(r),r=r===r?r:0),t!==re&&(t=bl(t),t=t===t?t:0),Xr(bl(e),t,r)}function Xl(e,t,r){return t=gl(t),r===re?(r=t,t=0):r=gl(r),e=bl(e),yn(e,t,r)}function Zl(e,t,r){if(r&&"boolean"!=typeof r&&Da(e,t,r)&&(t=r=re),r===re&&("boolean"==typeof t?(r=t,t=re):"boolean"==typeof e&&(r=e,e=re)),e===re&&t===re?(e=0,t=1):(e=gl(e),t===re?(t=e,e=0):t=gl(t)),e>t){var n=e;e=t,t=n}if(r||e%1||t%1){var o=Gu();return qu(e+o*(t-e+Ir("1e-"+((o+"").length-1))),t)}return Jn(e,t)}function ec(e){return Hf(kl(e).toLowerCase())}function tc(e){return(e=kl(e))&&e.replace(Ht,qr).replace(fr,"")}function rc(e,t,r){e=kl(e),t=uo(t);var n=e.length;r=r===re?n:Xr(wl(r),0,n);var o=r;return(r-=t.length)>=0&&e.slice(r,o)==t}function nc(e){return e=kl(e),e&&St.test(e)?e.replace(bt,Ur):e}function oc(e){return e=kl(e),e&&Nt.test(e)?e.replace(Pt,"\\$&"):e}function ac(e,t,r){e=kl(e),t=wl(t);var n=t?Y(e):0;if(!t||n>=t)return e;var o=(t-n)/2;return Xo(Fu(o),r)+e+Xo(Tu(o),r)}function ic(e,t,r){e=kl(e),t=wl(t);var n=t?Y(e):0;return t&&n<t?e+Xo(t-n,r):e}function sc(e,t,r){e=kl(e),t=wl(t);var n=t?Y(e):0;return t&&n<t?Xo(t-n,r)+e:e}function lc(e,t,r){return r||null==t?t=0:t&&(t=+t),Vu(kl(e).replace(Ot,""),t||0)}function cc(e,t,r){return t=(r?Da(e,t,r):t===re)?1:wl(t),Xn(kl(e),t)}function uc(){var e=arguments,t=kl(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function dc(e,t,r){return r&&"number"!=typeof r&&Da(e,t,r)&&(t=r=re),(r=r===re?Te:r>>>0)?(e=kl(e),e&&("string"==typeof t||null!=t&&!wf(t))&&!(t=uo(t))&&z(e)?So(X(e),0,r):e.split(t,r)):[]}function fc(e,t,r){return e=kl(e),r=null==r?0:Xr(wl(r),0,e.length),t=uo(t),e.slice(r,r+t.length)==t}function pc(e,t,n){var o=r.templateSettings;n&&Da(e,t,n)&&(t=re),e=kl(e),t=If({},t,o,ia);var a,i,s=If({},t.imports,o.imports,ia),l=Al(s),c=T(s,l),u=0,d=t.interpolate||Kt,f="__p += '",p=ou((t.escape||Kt).source+"|"+d.source+"|"+(d===It?jt:Kt).source+"|"+(t.evaluate||Kt).source+"|$","g"),h="//# sourceURL="+(fu.call(t,"sourceURL")?(t.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++wr+"]")+"\n";e.replace(p,function(t,r,n,o,s,l){return n||(n=o),f+=e.slice(u,l).replace(Qt,j),r&&(a=!0,f+="' +\n__e("+r+") +\n'"),s&&(i=!0,f+="';\n"+s+";\n__p += '"),n&&(f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),u=l+t.length,t}),f+="';\n";var m=fu.call(t,"variable")&&t.variable;m||(f="with (obj) {\n"+f+"\n}\n"),f=(i?f.replace(vt,""):f).replace(gt,"$1").replace(wt,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Kf(function(){return tu(l,h+"return "+f).apply(re,c)});if(v.source=f,$s(v))throw v;return v}function hc(e){return kl(e).toLowerCase()}function mc(e){return kl(e).toUpperCase()}function vc(e,t,r){if((e=kl(e))&&(r||t===re))return e.replace(Dt,"");if(!e||!(t=uo(t)))return e;var n=X(e),o=X(t);return So(n,A(n,o),M(n,o)+1).join("")}function gc(e,t,r){if((e=kl(e))&&(r||t===re))return e.replace(Lt,"");if(!e||!(t=uo(t)))return e;var n=X(e);return So(n,0,M(n,X(t))+1).join("")}function wc(e,t,r){if((e=kl(e))&&(r||t===re))return e.replace(Ot,"");if(!e||!(t=uo(t)))return e;var n=X(e);return So(n,A(n,X(t))).join("")}function yc(e,t){var r=Ee,n=Ie;if(el(t)){var o="separator"in t?t.separator:o;r="length"in t?wl(t.length):r,n="omission"in t?uo(t.omission):n}e=kl(e);var a=e.length;if(z(e)){var i=X(e);a=i.length}if(r>=a)return e;var s=r-Y(n);if(s<1)return n;var l=i?So(i,0,s).join(""):e.slice(0,s);if(o===re)return l+n;if(i&&(s+=l.length-s),wf(o)){if(e.slice(s).search(o)){var c,u=l;for(o.global||(o=ou(o.source,kl(Bt.exec(o))+"g")),o.lastIndex=0;c=o.exec(u);)var d=c.index;l=l.slice(0,d===re?s:d)}}else if(e.indexOf(uo(o),s)!=s){var f=l.lastIndexOf(o);f>-1&&(l=l.slice(0,f))}return l+n}function bc(e){return e=kl(e),e&&_t.test(e)?e.replace(yt,Vr):e}function _c(e,t,r){return e=kl(e),t=r?re:t,t===re?q(e)?te(e):y(e):e.match(t)||[]}function Sc(e){var t=null==e?0:e.length,r=ga();return e=t?p(e,function(e){if("function"!=typeof e[1])throw new iu(ae);return[r(e[0]),e[1]]}):[],Zn(function(r){for(var n=-1;++n<t;){var o=e[n];if(a(o[0],this,r))return a(o[1],this,r)}})}function kc(e){return en(Zr(e,ce))}function Ec(e){return function(){return e}}function Ic(e,t){return null==e||e!==e?t:e}function Cc(e){return e}function Rc(e){return Tn("function"==typeof e?e:Zr(e,ce))}function xc(e){return jn(Zr(e,ce))}function Pc(e,t){return Bn(e,Zr(t,ce))}function Nc(e,t,r){var n=Al(t),o=fn(t,n);null!=r||el(t)&&(o.length||!n.length)||(r=t,t=e,e=this,o=fn(t,Al(t)));var a=!(el(r)&&"chain"in r)||!!r.chain,i=Ys(e);return s(o,function(r){var n=t[r];e[r]=n,i&&(e.prototype[r]=function(){var t=this.__chain__;if(a||t){var r=e(this.__wrapped__);return(r.__actions__=Lo(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,h([this.value()],arguments))})}),e}function Dc(){return Pr._===this&&(Pr._=gu),this}function Oc(){}function Lc(e){return e=wl(e),Zn(function(t){return Un(t,e)})}function Tc(e){return Oa(e)?C($a(e)):Kn(e)}function Fc(e){return function(t){return null==e?re:pn(e,t)}}function Ac(){return[]}function Mc(){return!1}function Wc(){return{}}function jc(){return""}function Bc(){return!0}function zc(e,t){if((e=wl(e))<1||e>De)return[];var r=Te,n=qu(e,Te);t=ga(t),e-=Te;for(var o=D(n,t);++r<e;)t(r);return o}function qc(e){return pf(e)?p(e,$a):fl(e)?[e]:Lo(Rd(kl(e)))}function Uc(e){var t=++pu;return kl(e)+t}function Vc(e){return e&&e.length?an(e,Cc,vn):re}function Gc(e,t){return e&&e.length?an(e,ga(t,2),vn):re}function Hc(e){return I(e,Cc)}function Kc(e,t){return I(e,ga(t,2))}function Qc(e){return e&&e.length?an(e,Cc,Mn):re}function $c(e,t){return e&&e.length?an(e,ga(t,2),Mn):re}function Jc(e){return e&&e.length?N(e,Cc):0}function Yc(e,t){return e&&e.length?N(e,ga(t,2)):0}t=null==t?Pr:Gr.defaults(Pr.Object(),t,Gr.pick(Pr,gr));var Xc=t.Array,Zc=t.Date,eu=t.Error,tu=t.Function,ru=t.Math,nu=t.Object,ou=t.RegExp,au=t.String,iu=t.TypeError,su=Xc.prototype,lu=tu.prototype,cu=nu.prototype,uu=t["__core-js_shared__"],du=lu.toString,fu=cu.hasOwnProperty,pu=0,hu=function(){var e=/[^.]+$/.exec(uu&&uu.keys&&uu.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),mu=cu.toString,vu=du.call(nu),gu=Pr._,wu=ou("^"+du.call(fu).replace(Pt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yu=Or?t.Buffer:re,bu=t.Symbol,_u=t.Uint8Array,Su=yu?yu.allocUnsafe:re,ku=G(nu.getPrototypeOf,nu),Eu=nu.create,Iu=cu.propertyIsEnumerable,Cu=su.splice,Ru=bu?bu.isConcatSpreadable:re,xu=bu?bu.iterator:re,Pu=bu?bu.toStringTag:re,Nu=function(){try{var e=ba(nu,"defineProperty");return e({},"",{}),e}catch(e){}}(),Du=t.clearTimeout!==Pr.clearTimeout&&t.clearTimeout,Ou=Zc&&Zc.now!==Pr.Date.now&&Zc.now,Lu=t.setTimeout!==Pr.setTimeout&&t.setTimeout,Tu=ru.ceil,Fu=ru.floor,Au=nu.getOwnPropertySymbols,Mu=yu?yu.isBuffer:re,Wu=t.isFinite,ju=su.join,Bu=G(nu.keys,nu),zu=ru.max,qu=ru.min,Uu=Zc.now,Vu=t.parseInt,Gu=ru.random,Hu=su.reverse,Ku=ba(t,"DataView"),Qu=ba(t,"Map"),$u=ba(t,"Promise"),Ju=ba(t,"Set"),Yu=ba(t,"WeakMap"),Xu=ba(nu,"create"),Zu=Yu&&new Yu,ed={},td=Ja(Ku),rd=Ja(Qu),nd=Ja($u),od=Ja(Ju),ad=Ja(Yu),id=bu?bu.prototype:re,sd=id?id.valueOf:re,ld=id?id.toString:re,cd=function(){function e(){}return function(t){if(!el(t))return{};if(Eu)return Eu(t);e.prototype=t;var r=new e;return e.prototype=re,r}}();r.templateSettings={escape:kt,evaluate:Et,interpolate:It,variable:"",imports:{_:r}},r.prototype=n.prototype,r.prototype.constructor=r,o.prototype=cd(n.prototype),o.prototype.constructor=o,w.prototype=cd(n.prototype),w.prototype.constructor=w,ee.prototype.clear=Mt,ee.prototype.delete=$t,ee.prototype.get=Jt,ee.prototype.has=Yt,ee.prototype.set=Xt,Zt.prototype.clear=er,Zt.prototype.delete=tr,Zt.prototype.get=rr,Zt.prototype.has=nr,Zt.prototype.set=or,ar.prototype.clear=ir,ar.prototype.delete=sr,ar.prototype.get=lr,ar.prototype.has=cr,ar.prototype.set=ur,pr.prototype.add=pr.prototype.push=hr,pr.prototype.has=mr,vr.prototype.clear=_r,vr.prototype.delete=Sr,vr.prototype.get=kr,vr.prototype.has=Er,vr.prototype.set=Rr;var ud=jo(un),dd=jo(dn,!0),fd=Bo(),pd=Bo(!0),hd=Zu?function(e,t){return Zu.set(e,t),e}:Cc,md=Nu?function(e,t){return Nu(e,"toString",{configurable:!0,enumerable:!1,value:Ec(t),writable:!0})}:Cc,vd=Zn,gd=Du||function(e){return Pr.clearTimeout(e)},wd=Ju&&1/K(new Ju([,-0]))[1]==Ne?function(e){return new Ju(e)}:Oc,yd=Zu?function(e){return Zu.get(e)}:Oc,bd=Au?function(e){return null==e?[]:(e=nu(e),u(Au(e),function(t){return Iu.call(e,t)}))}:Ac,_d=Au?function(e){for(var t=[];e;)h(t,bd(e)),e=ku(e);return t}:Ac,Sd=mn;(Ku&&Sd(new Ku(new ArrayBuffer(1)))!=it||Qu&&Sd(new Qu)!=Ke||$u&&"[object Promise]"!=Sd($u.resolve())||Ju&&Sd(new Ju)!=Ze||Yu&&Sd(new Yu)!=nt)&&(Sd=function(e){var t=mn(e),r=t==Je?e.constructor:re,n=r?Ja(r):"";if(n)switch(n){case td:return it;case rd:return Ke;case nd:return"[object Promise]";case od:return Ze;case ad:return nt}return t});var kd=uu?Ys:Mc,Ed=Ka(hd),Id=Lu||function(e,t){return Pr.setTimeout(e,t)},Cd=Ka(md),Rd=function(e){var t=Rs(e,function(e){return r.size===se&&r.clear(),e}),r=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(xt,function(e,r,n,o){t.push(n?o.replace(Wt,"$1"):r||e)}),t}),xd=Zn(function(e,t){return Us(e)?nn(e,cn(t,1,Us,!0)):[]}),Pd=Zn(function(e,t){var r=gi(t);return Us(r)&&(r=re),Us(e)?nn(e,cn(t,1,Us,!0),ga(r,2)):[]}),Nd=Zn(function(e,t){var r=gi(t);return Us(r)&&(r=re),Us(e)?nn(e,cn(t,1,Us,!0),re,r):[]}),Dd=Zn(function(e){var t=p(e,yo);return t.length&&t[0]===e[0]?bn(t):[]}),Od=Zn(function(e){var t=gi(e),r=p(e,yo);return t===gi(r)?t=re:r.pop(),r.length&&r[0]===e[0]?bn(r,ga(t,2)):[]}),Ld=Zn(function(e){var t=gi(e),r=p(e,yo);return t="function"==typeof t?t:re,t&&r.pop(),r.length&&r[0]===e[0]?bn(r,re,t):[]}),Td=Zn(bi),Fd=fa(function(e,t){var r=null==e?0:e.length,n=Yr(e,t);return $n(e,p(t,function(e){return Na(e,r)?+e:e}).sort(Po)),n}),Ad=Zn(function(e){return fo(cn(e,1,Us,!0))}),Md=Zn(function(e){var t=gi(e);return Us(t)&&(t=re),fo(cn(e,1,Us,!0),ga(t,2))}),Wd=Zn(function(e){var t=gi(e);return t="function"==typeof t?t:re,fo(cn(e,1,Us,!0),re,t)}),jd=Zn(function(e,t){return Us(e)?nn(e,t):[]}),Bd=Zn(function(e){return go(u(e,Us))}),zd=Zn(function(e){var t=gi(e);return Us(t)&&(t=re),go(u(e,Us),ga(t,2))}),qd=Zn(function(e){var t=gi(e);return t="function"==typeof t?t:re,go(u(e,Us),re,t)}),Ud=Zn(qi),Vd=Zn(function(e){var t=e.length,r=t>1?e[t-1]:re;return r="function"==typeof r?(e.pop(),r):re,Ui(e,r)}),Gd=fa(function(e){var t=e.length,r=t?e[0]:0,n=this.__wrapped__,a=function(t){return Yr(t,e)};return!(t>1||this.__actions__.length)&&n instanceof w&&Na(r)?(n=n.slice(r,+r+(t?1:0)),n.__actions__.push({func:Qi,args:[a],thisArg:re}),new o(n,this.__chain__).thru(function(e){return t&&!e.length&&e.push(re),e})):this.thru(a)}),Hd=Mo(function(e,t,r){fu.call(e,r)?++e[r]:Jr(e,r,1)}),Kd=Ho(si),Qd=Ho(li),$d=Mo(function(e,t,r){fu.call(e,r)?e[r].push(t):Jr(e,r,[t])}),Jd=Zn(function(e,t,r){var n=-1,o="function"==typeof t,i=qs(e)?Xc(e.length):[];return ud(e,function(e){i[++n]=o?a(t,e,r):Sn(e,t,r)}),i}),Yd=Mo(function(e,t,r){Jr(e,r,t)}),Xd=Mo(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]}),Zd=Zn(function(e,t){if(null==e)return[];var r=t.length;return r>1&&Da(e,t[0],t[1])?t=[]:r>2&&Da(t[0],t[1],t[2])&&(t=[t[0]]),Vn(e,cn(t,1),[])}),ef=Ou||function(){return Pr.Date.now()},tf=Zn(function(e,t,r){var n=he;if(r.length){var o=H(r,va(tf));n|=ye}return aa(e,n,t,r,o)}),rf=Zn(function(e,t,r){var n=he|me;if(r.length){var o=H(r,va(rf));n|=ye}return aa(t,n,e,r,o)}),nf=Zn(function(e,t){return rn(e,1,t)}),of=Zn(function(e,t,r){return rn(e,bl(t)||0,r)});Rs.Cache=ar;var af=vd(function(e,t){t=1==t.length&&pf(t[0])?p(t[0],L(ga())):p(cn(t,1),L(ga()));var r=t.length;return Zn(function(n){for(var o=-1,i=qu(n.length,r);++o<i;)n[o]=t[o].call(this,n[o]);return a(e,this,n)})}),sf=Zn(function(e,t){var r=H(t,va(sf));return aa(e,ye,re,t,r)}),lf=Zn(function(e,t){var r=H(t,va(lf));return aa(e,be,re,t,r)}),cf=fa(function(e,t){return aa(e,Se,re,re,re,t)}),uf=ta(vn),df=ta(function(e,t){return e>=t}),ff=kn(function(){return arguments}())?kn:function(e){return tl(e)&&fu.call(e,"callee")&&!Iu.call(e,"callee")},pf=Xc.isArray,hf=Fr?L(Fr):En,mf=Mu||Mc,vf=Ar?L(Ar):In,gf=Mr?L(Mr):xn,wf=Wr?L(Wr):Dn,yf=jr?L(jr):On,bf=Br?L(Br):Ln,_f=ta(Mn),Sf=ta(function(e,t){return e<=t}),kf=Wo(function(e,t){if(Aa(t)||qs(t))return void To(t,Al(t),e);for(var r in t)fu.call(t,r)&&zr(e,r,t[r])}),Ef=Wo(function(e,t){To(t,Ml(t),e)}),If=Wo(function(e,t,r,n){To(t,Ml(t),e,n)}),Cf=Wo(function(e,t,r,n){To(t,Al(t),e,n)}),Rf=fa(Yr),xf=Zn(function(e,t){e=nu(e);var r=-1,n=t.length,o=n>2?t[2]:re;for(o&&Da(t[0],t[1],o)&&(n=1);++r<n;)for(var a=t[r],i=Ml(a),s=-1,l=i.length;++s<l;){var c=i[s],u=e[c];(u===re||zs(u,cu[c])&&!fu.call(e,c))&&(e[c]=a[c])}return e}),Pf=Zn(function(e){return e.push(re,sa),a(Tf,re,e)}),Nf=$o(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=mu.call(t)),e[t]=r},Ec(Cc)),Df=$o(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=mu.call(t)),fu.call(e,t)?e[t].push(r):e[t]=[r]},ga),Of=Zn(Sn),Lf=Wo(function(e,t,r){zn(e,t,r)}),Tf=Wo(function(e,t,r,n){zn(e,t,r,n)}),Ff=fa(function(e,t){var r={};if(null==e)return r;var n=!1;t=p(t,function(t){return t=_o(t,e),n||(n=t.length>1),t}),To(e,ha(e),r),n&&(r=Zr(r,ce|ue|de,la));for(var o=t.length;o--;)po(r,t[o]);return r}),Af=fa(function(e,t){return null==e?{}:Gn(e,t)}),Mf=oa(Al),Wf=oa(Ml),jf=Uo(function(e,t,r){return t=t.toLowerCase(),e+(r?ec(t):t)}),Bf=Uo(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),zf=Uo(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),qf=qo("toLowerCase"),Uf=Uo(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}),Vf=Uo(function(e,t,r){return e+(r?" ":"")+Hf(t)}),Gf=Uo(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),Hf=qo("toUpperCase"),Kf=Zn(function(e,t){try{return a(e,re,t)}catch(e){return $s(e)?e:new eu(e)}}),Qf=fa(function(e,t){return s(t,function(t){t=$a(t),Jr(e,t,tf(e[t],e))}),e}),$f=Ko(),Jf=Ko(!0),Yf=Zn(function(e,t){return function(r){return Sn(r,e,t)}}),Xf=Zn(function(e,t){return function(r){return Sn(e,r,t)}}),Zf=Yo(p),ep=Yo(c),tp=Yo(g),rp=ea(),np=ea(!0),op=Jo(function(e,t){return e+t},0),ap=na("ceil"),ip=Jo(function(e,t){return e/t},1),sp=na("floor"),lp=Jo(function(e,t){return e*t},1),cp=na("round"),up=Jo(function(e,t){return e-t},0);return r.after=bs,r.ary=_s,r.assign=kf,r.assignIn=Ef,r.assignInWith=If,r.assignWith=Cf,r.at=Rf,r.before=Ss,r.bind=tf,r.bindAll=Qf,r.bindKey=rf,r.castArray=Fs,r.chain=Hi,r.chunk=Za,r.compact=ei,r.concat=ti,r.cond=Sc,r.conforms=kc,r.constant=Ec,r.countBy=Hd,r.create=El,r.curry=ks,r.curryRight=Es,r.debounce=Is,r.defaults=xf,r.defaultsDeep=Pf,r.defer=nf,r.delay=of,r.difference=xd,r.differenceBy=Pd,r.differenceWith=Nd,r.drop=ri,r.dropRight=ni,r.dropRightWhile=oi,r.dropWhile=ai,r.fill=ii,r.filter=ns,r.flatMap=os,r.flatMapDeep=as,r.flatMapDepth=is,r.flatten=ci,r.flattenDeep=ui,r.flattenDepth=di,r.flip=Cs,r.flow=$f,r.flowRight=Jf,r.fromPairs=fi,r.functions=Dl,r.functionsIn=Ol,r.groupBy=$d,r.initial=mi,r.intersection=Dd,r.intersectionBy=Od,r.intersectionWith=Ld,r.invert=Nf,r.invertBy=Df,r.invokeMap=Jd,r.iteratee=Rc,r.keyBy=Yd,r.keys=Al,r.keysIn=Ml,r.map=us,r.mapKeys=Wl,r.mapValues=jl,r.matches=xc,r.matchesProperty=Pc,r.memoize=Rs,r.merge=Lf,r.mergeWith=Tf,r.method=Yf,r.methodOf=Xf,r.mixin=Nc,r.negate=xs,r.nthArg=Lc,r.omit=Ff,r.omitBy=Bl,r.once=Ps,r.orderBy=ds,r.over=Zf,r.overArgs=af,r.overEvery=ep,r.overSome=tp,r.partial=sf,r.partialRight=lf,r.partition=Xd,r.pick=Af,r.pickBy=zl,r.property=Tc,r.propertyOf=Fc,r.pull=Td,r.pullAll=bi,r.pullAllBy=_i,r.pullAllWith=Si,r.pullAt=Fd,r.range=rp,r.rangeRight=np,r.rearg=cf,r.reject=hs,r.remove=ki,r.rest=Ns,r.reverse=Ei,r.sampleSize=vs,r.set=Ul,r.setWith=Vl,r.shuffle=gs,r.slice=Ii,r.sortBy=Zd,r.sortedUniq=Oi,r.sortedUniqBy=Li,r.split=dc,r.spread=Ds,r.tail=Ti,r.take=Fi,r.takeRight=Ai,r.takeRightWhile=Mi,r.takeWhile=Wi,r.tap=Ki,r.throttle=Os,r.thru=Qi,r.toArray=vl,r.toPairs=Mf,r.toPairsIn=Wf,r.toPath=qc,r.toPlainObject=_l,r.transform=Gl,r.unary=Ls,r.union=Ad,r.unionBy=Md,r.unionWith=Wd,r.uniq=ji,r.uniqBy=Bi,r.uniqWith=zi,r.unset=Hl,r.unzip=qi,r.unzipWith=Ui,r.update=Kl,r.updateWith=Ql,r.values=$l,r.valuesIn=Jl,r.without=jd,r.words=_c,r.wrap=Ts,r.xor=Bd,r.xorBy=zd,r.xorWith=qd,r.zip=Ud,r.zipObject=Vi,r.zipObjectDeep=Gi,r.zipWith=Vd,r.entries=Mf,r.entriesIn=Wf,r.extend=Ef,r.extendWith=If,Nc(r,r),r.add=op,r.attempt=Kf,r.camelCase=jf,r.capitalize=ec,r.ceil=ap,r.clamp=Yl,r.clone=As,r.cloneDeep=Ws,r.cloneDeepWith=js,r.cloneWith=Ms,r.conformsTo=Bs,r.deburr=tc,r.defaultTo=Ic,r.divide=ip,r.endsWith=rc,r.eq=zs,r.escape=nc,r.escapeRegExp=oc,r.every=rs,r.find=Kd,r.findIndex=si,r.findKey=Il,r.findLast=Qd,r.findLastIndex=li,r.findLastKey=Cl,r.floor=sp,r.forEach=ss,r.forEachRight=ls,r.forIn=Rl,r.forInRight=xl,r.forOwn=Pl,r.forOwnRight=Nl,r.get=Ll,r.gt=uf,r.gte=df,r.has=Tl,r.hasIn=Fl,r.head=pi,r.identity=Cc,r.includes=cs,r.indexOf=hi,r.inRange=Xl,r.invoke=Of,r.isArguments=ff,r.isArray=pf,r.isArrayBuffer=hf,r.isArrayLike=qs,r.isArrayLikeObject=Us,r.isBoolean=Vs,r.isBuffer=mf,r.isDate=vf,r.isElement=Gs,r.isEmpty=Hs,r.isEqual=Ks,r.isEqualWith=Qs,r.isError=$s,r.isFinite=Js,r.isFunction=Ys,r.isInteger=Xs,r.isLength=Zs,r.isMap=gf,r.isMatch=rl,r.isMatchWith=nl,r.isNaN=ol,r.isNative=al,r.isNil=sl,r.isNull=il,r.isNumber=ll,r.isObject=el,r.isObjectLike=tl,r.isPlainObject=cl,r.isRegExp=wf,r.isSafeInteger=ul,r.isSet=yf,r.isString=dl,r.isSymbol=fl,r.isTypedArray=bf,r.isUndefined=pl,r.isWeakMap=hl,r.isWeakSet=ml,r.join=vi,r.kebabCase=Bf,r.last=gi,r.lastIndexOf=wi,r.lowerCase=zf,r.lowerFirst=qf,r.lt=_f,r.lte=Sf,r.max=Vc,r.maxBy=Gc,r.mean=Hc,r.meanBy=Kc,r.min=Qc,r.minBy=$c,r.stubArray=Ac,r.stubFalse=Mc,r.stubObject=Wc,r.stubString=jc,r.stubTrue=Bc,r.multiply=lp,r.nth=yi,r.noConflict=Dc,r.noop=Oc,r.now=ef,r.pad=ac,r.padEnd=ic,r.padStart=sc,r.parseInt=lc,r.random=Zl,r.reduce=fs,r.reduceRight=ps,r.repeat=cc,r.replace=uc,r.result=ql,r.round=cp,r.runInContext=e,r.sample=ms,r.size=ws,r.snakeCase=Uf,r.some=ys,r.sortedIndex=Ci,r.sortedIndexBy=Ri,r.sortedIndexOf=xi,r.sortedLastIndex=Pi,r.sortedLastIndexBy=Ni,r.sortedLastIndexOf=Di,r.startCase=Vf,r.startsWith=fc,r.subtract=up,r.sum=Jc,r.sumBy=Yc,r.template=pc,r.times=zc,r.toFinite=gl,r.toInteger=wl,r.toLength=yl,r.toLower=hc,r.toNumber=bl,r.toSafeInteger=Sl,r.toString=kl,r.toUpper=mc,r.trim=vc,r.trimEnd=gc,r.trimStart=wc,r.truncate=yc,r.unescape=bc,r.uniqueId=Uc,r.upperCase=Gf,r.upperFirst=Hf,r.each=ss,r.eachRight=ls,r.first=pi,Nc(r,function(){var e={};return un(r,function(t,n){fu.call(r.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),r.VERSION="4.17.15",s(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){r[e].placeholder=r}),s(["drop","take"],function(e,t){w.prototype[e]=function(r){r=r===re?1:zu(wl(r),0);var n=this.__filtered__&&!t?new w(this):this.clone();return n.__filtered__?n.__takeCount__=qu(r,n.__takeCount__):n.__views__.push({size:qu(r,Te),type:e+(n.__dir__<0?"Right":"")}),n},w.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),s(["filter","map","takeWhile"],function(e,t){var r=t+1,n=r==xe||3==r;w.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ga(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}}),s(["head","last"],function(e,t){var r="take"+(t?"Right":"");w.prototype[e]=function(){return this[r](1).value()[0]}}),s(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");w.prototype[e]=function(){return this.__filtered__?new w(this):this[r](1)}}),w.prototype.compact=function(){return this.filter(Cc)},w.prototype.find=function(e){return this.filter(e).head()},w.prototype.findLast=function(e){return this.reverse().find(e)},w.prototype.invokeMap=Zn(function(e,t){return"function"==typeof e?new w(this):this.map(function(r){return Sn(r,e,t)})}),w.prototype.reject=function(e){return this.filter(xs(ga(e)))},w.prototype.slice=function(e,t){e=wl(e);var r=this;return r.__filtered__&&(e>0||t<0)?new w(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==re&&(t=wl(t),r=t<0?r.dropRight(-t):r.take(t-e)),r)},w.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},w.prototype.toArray=function(){return this.take(Te)},un(w.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),i=r[a?"take"+("last"==t?"Right":""):t],s=a||/^find/.test(t);i&&(r.prototype[t]=function(){var t=this.__wrapped__,l=a?[1]:arguments,c=t instanceof w,u=l[0],d=c||pf(t),f=function(e){var t=i.apply(r,h([e],l));return a&&p?t[0]:t};d&&n&&"function"==typeof u&&1!=u.length&&(c=d=!1);var p=this.__chain__,m=!!this.__actions__.length,v=s&&!p,g=c&&!m;if(!s&&d){t=g?t:new w(this);var y=e.apply(t,l);return y.__actions__.push({func:Qi,args:[f],thisArg:re}),new o(y,p)}return v&&g?e.apply(this,l):(y=this.thru(f),v?a?y.value()[0]:y.value():y)})}),s(["pop","push","shift","sort","splice","unshift"],function(e){var t=su[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);r.prototype[e]=function(){var e=arguments;if(o&&!this.__chain__){var r=this.value();return t.apply(pf(r)?r:[],e)}return this[n](function(r){return t.apply(pf(r)?r:[],e)})}}),un(w.prototype,function(e,t){var n=r[t];if(n){var o=n.name+"";fu.call(ed,o)||(ed[o]=[]),ed[o].push({name:t,func:n})}}),ed[Qo(re,me).name]=[{name:"wrapper",func:re}],w.prototype.clone=R,w.prototype.reverse=$,w.prototype.value=Z,r.prototype.at=Gd,r.prototype.chain=$i,r.prototype.commit=Ji,r.prototype.next=Yi,r.prototype.plant=Zi,r.prototype.reverse=es,r.prototype.toJSON=r.prototype.valueOf=r.prototype.value=ts,r.prototype.first=r.prototype.head,xu&&(r.prototype[xu]=Xi),r}();Pr._=Gr,(o=function(){return Gr}.call(t,r,t,n))!==re&&(n.exports=o)}).call(this)}).call(t,r(149),r(78)(e))},function(e,t,r){var n=r(23),o=r(72),a=r(17)("species");e.exports=function(e,t){var r,i=n(e).constructor;return void 0===i||void 0==(r=n(i)[a])?t:o(r)}},function(e,t,r){var n,o,a,i=r(46),s=r(425),l=r(144),c=r(94),u=r(16),d=u.process,f=u.setImmediate,p=u.clearImmediate,h=u.MessageChannel,m=u.Dispatch,v=0,g={},w=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},y=function(e){w.call(e.data)};f&&p||(f=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return g[++v]=function(){s("function"==typeof e?e:Function(e),t)},n(v),v},p=function(e){delete g[e]},"process"==r(56)(d)?n=function(e){d.nextTick(i(w,e,1))}:m&&m.now?n=function(e){m.now(i(w,e,1))}:h?(o=new h,a=o.port2,o.port1.onmessage=y,n=i(a.postMessage,a,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(n=function(e){u.postMessage(e+"","*")},u.addEventListener("message",y,!1)):n="onreadystatechange"in c("script")?function(e){l.appendChild(c("script")).onreadystatechange=function(){l.removeChild(this),w.call(e)}}:function(e){setTimeout(i(w,e,1),0)}),e.exports={set:f,clear:p}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){var n=r(23),o=r(34),a=r(133);e.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var r=a.f(e);return(0,r.resolve)(t),r.promise}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=r(3),i=n(a),s=r(1),l=n(s),c=r(2),u=n(c),d=r(4),f=n(d),p=r(5),h=n(p);r(432);var m=r(9),v=n(m),g=r(10),w=(r(6),r(0)),y=(r(11),w.WeaLocaleProvider.getLabel,(0,g.observer)(o=function(e){function t(){return(0,l.default)(this,t),(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this))}return(0,h.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.options,r=void 0===t?[]:t,n=e.value,o=void 0===n?"":n,a=e.callbackFun,i=e.isShow,s=e.process;return v.default.createElement("div",null,i&&v.default.createElement("div",{className:"wf-remind-typelist"},v.default.createElement("span",{style:{marginRight:"5px"}},s,":"),v.default.createElement(w.WeaSelect,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaSelect@a7jl2b",options:r,detailtype:2,value:o,onChange:function(e){a(e)}})))}}]),t}(v.default.Component))||o);t.default=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){var t=screen.availWidth-10,r=screen.availHeight-50,n="top=0,left=0,";n+="width="+t+",",n+="height="+r+",",n+="directories=no,status=yes,toolbar=no,location=no,",n+="menubar=no,scrollbars=yes,resizable=yes",window.open(e,"",n)};t.getLocationInfoData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={};if(e){var r=e.split(",");4===r.length&&(t.longitude=r[1],t.latitude=r[2],t.name=r[3]),3===r.length&&(t.longitude=r[0],t.latitude=r[1],t.name=r[2])}return t};window.openFullWindowForWfCenterRequest=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=r(3),i=n(a),s=r(1),l=n(s),c=r(2),u=n(c),d=r(4),f=n(d),p=r(5),h=n(p);r(437);var m=r(9),v=n(m),g=r(10),w=r(7),y=r(6),b=r(0),_=b.WeaLocaleProvider.getLabel,S=(0,g.observer)(o=function(e){function t(e){(0,l.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return r.selectRow=[],r.getDialogBtns=function(e){return[v.default.createElement(y.Button,{ecId:(r&&r.props&&r.props.ecId||"")+"_Button@0ig6qf@confirm",type:"primary",size:"large",disabled:e,onClick:r.doBack},_(826,"确定")),v.default.createElement(y.Button,{ecId:(r&&r.props&&r.props.ecId||"")+"_Button@xmyhxg@cancel",type:"ghost",size:"large",disabled:e,onClick:r.doCancel},_(31129,"取消"))]},r.getRightMenu=function(){return[{key:"add",icon:v.default.createElement("i",{className:"icon-coms-complete"}),content:_(826,"确定"),onClick:r.doBack}]},r.rowSelection=function(){return{onChange:function(e){r.selectRow=e}}},r.doBack=function(){r.props.wfForwardBackStore.doBack(r.selectRow)},r.doCancel=function(){r.props.wfForwardBackStore.setShowForwardBack(!1)},r.getReceiverNamesCom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],r=arguments[2],n=e.length<=10||t?e:e.slice(0,10);return v.default.createElement("div",null,v.default.createElement("div",{className:"browserDiv",dangerouslySetInnerHTML:{__html:n.join(" ")}}),e.length>9&&v.default.createElement("span",{className:"iconSpan",title:t?_(26985,"收起"):_(20234,"显示全部"),onClick:function(){r&&r()}},v.default.createElement("em",{className:t?"icon-coms-up":"icon-coms-down"})))},r.getOperaterNamesCom=function(e){return v.default.createElement("div",{className:"browserDiv",dangerouslySetInnerHTML:{__html:e}})},r.getDialogBtns,r.getReceiverNamesCom,r.getOperaterNamesCom,r.state={columns:[]},r}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.wfForwardBackStore,r=e.globalStore,n=void 0===r?{}:r,o=n.commonParam,a=void 0===o?{}:o,i=a.f_weaver_belongto_userid,s=void 0===i?"":i,l=a.f_weaver_belongto_usertype,c=void 0===l?"":l;t.initData({f_weaver_belongto_userid:s,f_weaver_belongto_usertype:c}),this.state.columns=[{title:v.default.createElement("span",null,_(390214,"转发人")),key:"operatorNames",dataIndex:"operatorNames",width:"25%"},{title:v.default.createElement("span",null,_(390215,"接收人")),key:"receiverNames",dataIndex:"receiverNames",width:"50%"},{title:v.default.createElement("span",null,_(390524,"转发时间")),key:"operateTime",dataIndex:"operateTime",width:"25%"}]}},{key:"render",value:function(){var e=this,t=this.props.wfForwardBackStore,r=t.showForwardBack,n=t.loading,o=t.tableDatas,a=void 0===o?[]:o;return a=(0,w.toJS)(a),a.map(function(t){var r=t.id,n=!!e.state[r];t.receiverNames=e.getReceiverNamesCom(t.receiverNames,n,function(){var t={};t[""+r]=!n,e.setState(t)}),t.operatorNames=e.getOperaterNamesCom(t.operatorNames)}),v.default.createElement("div",null,v.default.createElement(b.WeaDialog,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@i3138y",title:_(390216,"可收回的转发操作"),visible:r,onCancel:this.doCancel,draggable:!0,hasScroll:!0,style:{width:860,height:460},icon:"icon-coms-workflow",iconBgcolor:"#0079DE",layout:jQuery(".wf-req")[0]},v.default.createElement(b.WeaRightMenu,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaRightMenu@2sw7be",datas:this.getRightMenu()},v.default.createElement("div",{className:"wf-forward-back"},v.default.createElement(b.WeaTable,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaTable@sh2yio",columns:this.state.columns,dataSource:a,rowSelection:this.rowSelection(),pagination:!1})),v.default.createElement(b.WeaDialogFooter,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialogFooter@vntu2m",buttons:this.getDialogBtns(n)}))))}}]),t}(v.default.Component))||o;t.default=S},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r,n){r&&(0,m.default)(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function a(e,t,r,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,s,l,c,u,d,f,p,h=r(13),m=n(h),v=r(8),g=n(v),w=r(1),y=n(w),b=r(7),_=r(438),S=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(_),k=(r(11),r(6)),E=r(0),I=E.WeaLocaleProvider.getLabel,C=(i=function e(){var t=this;(0,y.default)(this,e),o(this,"loading",s,this),o(this,"showForwardBack",l,this),o(this,"tableDatas",c,this),this.requestid=-1,this.callBackActions={},o(this,"doBacknoSelectWarning",u,this),o(this,"initData",d,this),this.doBack=function(e){if(0==e.length)k.Modal.warning({okText:I(33703,"确认"),title:I(131329,"信息确认"),content:t.doBacknoSelectWarning});else{var r=t;k.Modal.confirm({okText:I(826,"确定"),cancelText:I(201,"取消"),title:I(131329,"信息确认"),content:I(388773," 您确定要收回选中的转发操作吗？"),onOk:function(){var t=[],n=(0,b.toJS)(r.tableDatas);e.map(function(e){t.push(n[e].id)});var o={selectRow:t};S.doBack(o).then(function(e){if(e.success){k.message.success(e.msg);var t=r.callBackActions,n=t.refreshRightMenu,o=t.controlDialogVisible,a=t.batchControlVariableMap,i=t.callbackFun;if("function"===typeof n&&n(),"function"===typeof o&&o(!1),"function"===typeof i&&i(),"function"===typeof a){a({isRelaodLogList:!0,reloadLogListParams:{pgnumber:1,atmet:"",maxrequestlogid:0}})}}else k.message.error(I("388077","收回转发失败！"))})},onCancel:function(){}})}},o(this,"setShowForwardBack",f,this),o(this,"setCallBackAction",p,this),this.setShowForwardBack=this.setShowForwardBack,this.setCallBackAction=this.setCallBackAction,this.initData=this.initData,this.doBack=this.doBack},s=a(i.prototype,"loading",[b.observable],{enumerable:!0,initializer:function(){return!1}}),l=a(i.prototype,"showForwardBack",[b.observable],{enumerable:!0,initializer:function(){return!1}}),c=a(i.prototype,"tableDatas",[b.observable],{enumerable:!0,initializer:function(){return[]}}),u=a(i.prototype,"doBacknoSelectWarning",[b.observable],{enumerable:!0,initializer:function(){return""}}),d=a(i.prototype,"initData",[b.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=(0,g.default)({},t,{requestId:e.requestid}),S.getForwardDatas(t).then(function(t){e.tableDatas=t.tableDatas}),E.WeaTools.callApi("/api/workflow/label/loadForWardBackLabels","GET",{}).then(function(t){e.doBacknoSelectWarning=t.doBacknoSelectWarning})}}}),f=a(i.prototype,"setShowForwardBack",[b.action],{enumerable:!0,initializer:function(){var e=this;return function(t,r){e.showForwardBack=t,e.requestid=r,t&&e.initData();var n=e.callBackActions.controlDialogVisible;"function"===typeof n&&n(!1)}}}),p=a(i.prototype,"setCallBackAction",[b.action],{enumerable:!0,initializer:function(){var e=this;return function(t){e.callBackActions=t}}}),i);t.default=C},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(31),a=n(o),i=r(8),s=n(i),l=r(3),c=n(l),u=r(1),d=n(u),f=r(2),p=n(f),h=r(4),m=n(h),v=r(5),g=n(v);r(439);var w=r(6),y=r(0),b=r(44),_=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(b),r(44)),S=r(131),k=n(S),E=r(132),I=n(E),C=r(42),R=(n(C),r(440)),x=n(R),P=r(441),N=n(P),D=y.WeaLocaleProvider.getLabel,O=new I.default,L=function(e){function t(e){(0,d.default)(this,t);var r=(0,m.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return r.changeEditPhrases=function(e){r.setState({editPhrases:e})},r.clickPhrases=function(e,t){var n=t&&t[e].desc;r.setState({showPhrases:!1,editPhrases:!1}),r.refs.WeaRichText.insertHTML((0,_.convertSpecialChar)(n+"<br>"),"last"),y.WeaTools.callApi("/api/workflow/userDefaultSetting/updateFrequency","POST",{id:t[e].id,groupid:t[e].groupid})},r.changeSignContent=function(e){r.setState({signContent:e})},r.doStatusChange=function(e){"ready"===e&&r.setState({disabled:!1})},r.handleVisibleChange=function(e){r.setState({isshowoperategroup:e})},r.setOperatorIds=function(e){if(r.initRemarkContent=!1,e.isAllUser){var t=!1;r.selectOperatorsMax?e.count<r.selectOperatorsMax&&(t=!0):t=!0;var n=[{type:"all",lastname:D(1340,"所有人"),ids:e.ids,count:e.count,id:"all_users"}];r.setOperatorDatas(n,t)}else e.isLoad?y.WeaTools.callApi("/api/workflow/forward/getForwardOrgResource","GET",{types:e.ids}).then(function(e){var t=e.datas,n=void 0===t?[]:t;r.setOperatorDatas(n)}):r.setOperatorDatas(e.datas)},r.setOperatorDatas=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r.setState({appendOperatorDatas:e,isdisabledbtns:t})},r.dropAllUserGroup=function(){r.setState({isdisabledbtns:!1})},r.state={signContent:"",showPhrases:!1,editPhrases:!1,showModal:!1,disabled:!0,searchValue:"",phrasesDatas:[],phrasesDatas_back:[],appendOperatorDatas:[],isshowoperategroup:!1,selectOperatorsMax:void 0,isdisabledbtns:!1},r}return(0,g.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.loadPhrasesDatas(),y.WeaTools.callApi("/api/workflow/forward/getForwardMaxUserCount","GET",{}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.selectOperatorsMax=t.right?void 0:100})}},{key:"loadPhrasesDatas",value:function(){var e=this,t=this.state.phrasesDatas_back;y.WeaTools.callApi("/api/workflow/reqform/getPhrases","POST").then(function(r){r.phrasesDatas;e.state.searchValue&&t.filter(function(t){return t.short.includes(e.state.searchValue)||t.desc.includes(e.state.searchValue)}),e.setState({phrasesDatas:r.phrasesDatas,phrasesDatas_back:r.phrasesDatas,searchValue:""}),e.refs.phrasesRef&&e.refs.phrasesRef.setState({phrasesDatas:r.phrasesDatas,phrasesDatas_back:r.phrasesDatas,searchValue:""})})}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.visible||this.setState({signContent:"",operatorDatas:[],operatorIds:"",isdisabledbtns:!1}),this.props.visible!==e.visible&&"batchForward"==e.actionType&&y.WeaTools.callApi("/api/workflow/forward/getBatchForwardInfo","GET",{}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.allowAllPersonGroup,n=void 0!==r&&r;t.setState({allowAllPersonGroup:n})})}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.visible!==e.visible||this.props.loading!==e.loading||this.state.signContent!==t.signContent||this.state.showPhrases!==t.showPhrases||this.state.editPhrases!==t.editPhrases||this.state.disabled!==t.disabled||this.state.isshowoperategroup!==t.isshowoperategroup||this.state.operatorDatas!==t.operatorDatas||this.state.isdisabledbtns!==t.isdisabledbtns||this.state.allowAllPersonGroup!==t.allowAllPersonGroup}},{key:"render",value:function(){var e=this,t=this.props,r=t.visible,n=t.loading,o=void 0!==n&&n,i=t.actionType,l=void 0===i?"":i,c=this.state,u=c.signContent,d=c.showPhrases,f=(c.editPhrases,c.phrasesDatas,c.isshowoperategroup),p=c.isdisabledbtns,h=void 0!==p&&p,m=c.allowAllPersonGroup,v={};v.toolbar=[],v.height=260,v.removePlugins="resize";var g=D("383485","填写签字意见"),b={width:740,height:345};return"batchForward"==l&&(g=D(30468,"流程批量转发"),b={width:740},v.height=200),React.createElement(y.WeaDialog,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@l67dk2",parentClassName:"wf-batch-submit",visible:r,icon:"icon-coms-workflow",iconBgcolor:"#0079DE",title:g,onCancel:this.cancelEvent.bind(this),buttons:this.getBottomButtons(),style:b,loading:o,layout:jQuery("#container")[0],moreBtn:{datas:this.getMoreButtons(),collectParams:{favname:g,favouritetype:"2",importantlevel:1}}},React.createElement("div",{className:"wf-batch-submit-area"},"batchForward"==l&&React.createElement("div",{className:"wf-batch-forward-operators clearfix"},React.createElement("div",{className:"batch-forward-label"},React.createElement("span",null,"*"),React.createElement("span",null,D("24965","转发接收人"))),React.createElement("div",{className:"batch-forward-input"},React.createElement(y.WeaBrowser,(0,s.default)({},this.getUserBrowserProps(),{onChange:function(t,r,n){e.setState({operatorDatas:n,operatorIds:t,appendOperatorDatas:[]})},dropAllUserGroup:this.dropAllUserGroup}))),React.createElement("div",{className:"btns"},React.createElement(w.Popover,{ecId:(this&&this.props&&this.props.ecId||"")+"_Popover@xsbidv",placement:"bottomLeft",title:"",content:React.createElement(N.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_userCommonGroup@lh0fyh",handleVisibleChange:this.handleVisibleChange,setOperatorIds:this.setOperatorIds,isdisabledbtns:h,allowAllPersonGroup:m}),trigger:"click",onVisibleChange:function(t){return e.handleVisibleChange(t)},visible:f,overlayClassName:"wea-req-forward-customer-me"},React.createElement(w.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@uvi52z",type:"large",disabled:h,title:D("84511","快捷选择人员")},React.createElement("i",{className:"icon-customer-me"}))))),React.createElement("div",{className:"wf-batch-submit-btn-part"},"batchForward"==l&&React.createElement("div",{className:"wf-batch-submit-sign-input"},React.createElement("i",{className:"icon-coms-Need-feedback",style:{marginRight:"10px",fontSize:"15px",color:"#AFAFAF ",lineHeight:"32px",display:"inline-block",verticalAlign:"bottom"}}),React.createElement("span",{style:{color:"#A0A0A0"}},D(17614,"签字意见"))),React.createElement(w.Popover,{ecId:(this&&this.props&&this.props.ecId||"")+"_Popover@v44y4x",overlayClassName:"wf-phrases-popover",placement:"bottomLeft",trigger:"click",content:React.createElement(x.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_Content@0k7pea",ref:function(t){e.refs.phrasesRef=t},richRef:this.refs.WeaRichText,userPhraseEditStore:O,changeEditPhrases:this.changeEditPhrases,clickPhrases:this.clickPhrases}),visible:d,zIndex:"1050",onVisibleChange:function(t){e.setState({showPhrases:!d}),t||(e.setState({phrasesDatas:e.state.phrasesDatas_back,searchValue:""}),e.refs.phrasesRef&&e.refs.phrasesRef.setState({searchValue:""}),e.loadPhrasesDatas())}},React.createElement(w.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@owoxln",className:"batchForward"==l?"common-phrase-btn":"",disabled:this.state.disabled},React.createElement("i",{className:"icon-coms-Advice"}),React.createElement("span",null,D(22409,"常用批示语"))))),React.createElement("div",null,React.createElement(y.WeaRichText,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaRichText@c4ais4",ckConfig:v,value:u,ref:"WeaRichText",onChange:this.changeSignContent,onStatusChange:this.doStatusChange})),React.createElement(k.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_UserPhraseEdit@tbltfz",store:O,visiable:this.state.editPhrases,saveCallBack:function(t){e.setState({editPhrases:!1}),e.setState({phraseInfo:[].concat((0,a.default)(e.state.phrasesDatas),[t])}),e.loadPhrasesDatas()},setVisiable:function(t){e.setState({editPhrases:t})}})))}},{key:"getBottomButtons",value:function(){var e=this.props,t=e.loading,r=void 0!==t&&t,n=e.onSubmitText,o=void 0===n?"":n,a=[];return a.push(React.createElement(w.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@38r9so@submit",type:"primary",size:"large",disabled:r,onClick:this.submitEvent.bind(this)},""===o?D(725,"提交"):o)),a}},{key:"getMoreButtons",value:function(){var e=this,t=this.props,r=t.onSubmitText,n=void 0===r?"":r,o=t.iconClassName,a=void 0===o?"":o,i=t.loading;return[{key:"1",disabled:void 0!==i&&i,icon:React.createElement("i",{className:""===a?"icon-workflow-Right-menu-Approval":a}),content:""===n?D(725,"提交"):n,onClick:function(t){return e.submitEvent()}}]}},{key:"submitEvent",value:function(){var e=this.props.actionType,t=void 0===e?"":e,r=this.state,n=r.signContent,o=void 0===n?"":n,a=r.operatorIds,i=void 0===a?"":a;if("batchForward"===t&&""==i)return void w.message.warning(D(384146,"必要信息不完整，红色*号为必填项！"),2);this.props.onSubmit(o,i)}},{key:"cancelEvent",value:function(){this.setState({signContent:"",operatorIds:""}),this.props.onCancel()}},{key:"getUserBrowserProps",value:function(){var e=this.state,t=(e.operatorDatas,e.operatorIds,e.appendOperatorDatas),r=void 0===t?[]:t;return{linkUrl:"/hrm/resource/HrmResource.jsp?id=",isAutoComplete:1,isMultCheckbox:!1,isDetail:!1,viewAttr:2,zIndex:1050,isShowGroup:!0,type:17,isSingle:!1,maxLength:e.selectOperatorsMax,title:D("83496","多人力资源"),replaceNotCtrl:!1,icon:"icon-coms-hrm",iconBgcolor:"#217346",appendDatas:r}}}]),t}(React.Component);t.default=L},function(e,t){},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,n){r&&(0,m.default)(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function i(e,t,r,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,l,c,u,d,f,p,h=r(13),m=o(h),v=r(69),g=o(v),w=r(26),y=o(w),b=r(1),_=o(b),S=r(7),k=n(S),E=r(134),I=n(E),C=k.observable,R=k.action,x=(s=R("修改数据"),l=R("获取配置conditions"),c=function e(){(0,_.default)(this,e),a(this,"visible",u,this),a(this,"conditions",d,this),a(this,"setState",f,this),a(this,"getShareCondition",p,this),this.getShareCondition=this.getShareCondition,this.setState=this.setState},u=i(c.prototype,"visible",[C],{enumerable:!0,initializer:function(){return!1}}),d=i(c.prototype,"conditions",[C],{enumerable:!0,initializer:function(){return[]}}),f=i(c.prototype,"setState",[s],{enumerable:!0,initializer:function(){var e=this;return function(t,r){var n=(0,y.default)(t),o=!0,a=!1,i=void 0;try{for(var s,l=(0,g.default)(n);!(o=(s=l.next()).done);o=!0){var c=s.value;e[c]=t[c]}}catch(e){a=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw i}}"function"===typeof r&&r()}}}),p=i(c.prototype,"getShareCondition",[l],{enumerable:!0,initializer:function(){var e=this;return function(){I.getShareCondition().then(function(t){e.conditions=t.conditions})}}}),c);t.default=x},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=r(18),i=n(a),s=r(448),l=n(s),c=r(69),u=n(c),d=r(8),f=n(d),p=r(3),h=n(p),m=r(1),v=n(m),g=r(2),w=n(g),y=r(4),b=n(y),_=r(5),S=n(_),k=r(9),E=n(k),I=r(0),C=r(10),R=r(6),x=r(7),P=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(x),N=I.WeaLocaleProvider.getLabel,D=(0,C.observer)(o=function(e){function t(e){(0,v.default)(this,t);var r=(0,b.default)(this,(t.__proto__||(0,h.default)(t)).call(this,e));return r.onOk=function(e){var t=r.props.wfAddShareStore,n=t.conditions,o=e.objTypeValue,a=e.adviceValue,i=e.objValue,s=e.jobsLevel,c=e.relatedshareid_6,d=e.from_Level,p=e.to_Level,h=e.objValuespan,m=e.relatedshareid_6span;if(p<d)return void R.message.warning(N(385085,"安全级别设置有误，请重新设置"));var v=n[1][o],g={};v.forEach(function(e){g=(0,f.default)({},g,r.getLinkUrls(P.toJS(e),s))});var w=void 0;switch(Number(o)){case 194:w=6;break;case 0:w=3;break;case 17:w=5;break;case 65:w=2;break;case 278:w=7;break;default:w=1}var y=[],b=[];if(h){var _=!0,S=!1,k=void 0;try{for(var E,I=(0,u.default)(i.split(",").entries());!(_=(E=I.next()).done);_=!0){var C=(0,l.default)(E.value,2),x=C[0],D=C[1],O={id:D,link:""+g.objValue+D,name:h.split(",")[x]};y.push(O)}}catch(e){S=!0,k=e}finally{try{!_&&I.return&&I.return()}finally{if(S)throw k}}}if(c){var L=!0,T=!1,F=void 0;try{for(var A,M=(0,u.default)(c.split(",").entries());!(L=(A=M.next()).done);L=!0){var W=(0,l.default)(A.value,2),x=W[0],D=W[1],j={id:D,link:""+g.relatedshareid_6+D,name:m.split(",")[x]};b.push(j)}}catch(e){T=!0,F=e}finally{try{!L&&M.return&&M.return()}finally{if(T)throw F}}}"function"===typeof r.props.onOk&&r.props.onOk({permissiontype:w,iscanread:a,objValue:i,seclevel:d,seclevelMax:p,rolelevel:s,joblevel:s,relatedshareid_6:c},y,b),t.setState({visible:!1}),r.auth.onCancel()},r.getLinkUrls=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],r={},n=function e(n){if("SELECT_LINKAGE"===n.conditionType){var o=n.selectLinkageDatas,a=o[t];a&&e(a)}else"BROWSER"===n.conditionType&&n.browserConditionParam.linkUrl&&(r[n.domkey[0]]=n.browserConditionParam.linkUrl)};if("object"===("undefined"===typeof e?"undefined":(0,i.default)(e)))if("[object Array]"===Object.prototype.toString.call(e))e.forEach(function(e){n(e)});else for(var o in e)e.hasOwnProperty(o)&&n(e[o]);return r},r}return(0,S.default)(t,e),(0,w.default)(t,[{key:"componentDidMount",value:function(){this.props.wfAddShareStore.getShareCondition()}},{key:"render",value:function(){var e=this,t=this.props.wfAddShareStore,r=t.visible,n=t.conditions;return E.default.createElement(I.WeaAuth,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaAuth@1gleon",ref:function(t){return e.auth=t},visible:r,onOkClose:!1,height:300,width:600,conditions:P.toJS(n),title:N(383655,"添加共享"),icon:"icon-coms-workflow",iconBgcolor:"#0079DE",onOk:this.onOk,onCancel:function(){t.setState({visible:!1})}})}}]),t}(k.Component))||o;t.default=D},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),a=n(o),i=r(1),s=n(i),l=r(2),c=n(l),u=r(4),d=n(u),f=r(5),p=n(f),h=r(45),m=r(0),v=(r(7),m.WeaLocaleProvider.getLabel),g=function(e){function t(e){(0,s.default)(this,t);var r=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return r.setPanelHidden=function(){var e=r.props,t=e.clearReplyInfo,n=(e.valueChange,e.WfFormCommunicationStore.resetReplyParam);r.quotePanel.style.display="none",t(),n()},r}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=ReactDOM.findDOMNode(this);(0,h.imgZoom)(e,".wea-cl-content")}},{key:"componentDidUpdate",value:function(e,t){var r=ReactDOM.findDOMNode(this);(0,h.imgZoom)(r,".wea-cl-content")}},{key:"render",value:function(){var e=this.props,t=e.discussantInfo,r=void 0===t?{}:t,n=(e.remark,e.flowNum),o=e.showDate,a=(e.zanCount,e.batchOperate,e.showRemark),i=this.props,s=i.isSignLog,l=i.createUser,c=i.createUserName,u=i.createDate,d=i.createTime,f=i.createrDepName,p=i.logNodeName,m=i.logOperationName,g=i.createUserType,w=this.props,y=(w.isAnonymous,w.isDel,w.isMeCollected,w.isMeZaned,w.istop,w.agentOperatorid),b=w.agentOperatorName,_=w.isagent,S=this.props,k=S.relatedaccList4E9,E=void 0===k?[]:k,I=S.relatedcusList4E9,C=void 0===I?[]:I,R=S.relateddocList4E9,x=void 0===R?[]:R,P=S.relatedprjList4E9,N=void 0===P?[]:P,D=S.relatedwfList4E9,O=void 0===D?[]:D,L=S.relatemutilprjs4E9,T=void 0===L?[]:L;r.lastname,r.messagerurl;return React.createElement("div",null,React.createElement("div",{className:"wea-cowork-reply-item cowork-quote"},React.createElement("div",null,React.createElement("div",{className:"cowork-reply-content"},React.createElement("div",null,React.createElement("span",{className:"cowork-reply-user"},s?React.createElement("div",{class:"sign-reply-top"},React.createElement("span",{className:"quote-span"},v(385534,"回复")),"1"==g&&(_?[React.createElement("a",{href:"javaScript:openhrm("+y+");",onClick:window.pointerXY},b+"->"),React.createElement("a",{href:"javaScript:openhrm("+l+");",onClick:window.pointerXY},c)]:React.createElement("a",{href:"javaScript:openhrm("+l+");",onClick:window.pointerXY},c)),"2"==g&&(_?[React.createElement("a",{className:"ml5",href:"javaScript: window.open('/spa/crm/static/index.html#/main/crm/customerView?customerId="+y+"&_key=jfzmyh', '_blank')"},b+"->"),React.createElement("a",{className:"ml5",href:"javaScript: window.open('/spa/crm/static/index.html#/main/crm/customerView?customerId="+l+"&_key=jfzmyh', '_blank')"},c)]:React.createElement("a",{className:"ml5",href:"javaScript: window.open('/spa/crm/static/index.html#/main/crm/customerView?customerId="+l+"&_key=jfzmyh', '_blank')"},c)),React.createElement("span",{className:"reply-span reply-department"},f),React.createElement("span",{className:"reply-span reply-date"},u),React.createElement("span",{className:"reply-span reply-time"},d),React.createElement("span",{className:"reply-span right-words"},"["+p+"/"+m+"]")):React.createElement("div",null,React.createElement("span",{className:"quote-span"},v(19422,"引用"),"#",n),"1"==g&&React.createElement("a",{href:"javaScript:openhrm("+l+");",onClick:window.pointerXY},c),"2"==g&&React.createElement("a",{className:"ml5",href:"javaScript: window.open('/spa/crm/static/index.html#/main/crm/customerView?customerId="+l+"&_key=jfzmyh', '_blank')"},c),React.createElement("span",{className:"reply-time"},o)))),React.createElement("div",{className:"cowork-reply-remark"},React.createElement("div",{className:"wea-cl-content",dangerouslySetInnerHTML:{__html:'<div class="wea-ckeditor-content">'+a+"</div>"}})),React.createElement("div",{className:"workflow-resource-list"},(0,h.createReplyBottomAtt)(v(857,"相关文档")+":",x,function(){},"doc"),(0,h.createReplyBottomAtt)(v(1044,"相关流程")+":",O,function(){},"wf"),(0,h.createReplyBottomAtt)(v(783,"相关客户")+":",C,function(){},"crm"),(0,h.createReplyBottomAtt)(v(782,"相关项目")+":",T,function(){},"project"),(0,h.createReplyBottomAtt)(v(33414,"相关任务")+":",N,function(){},"task"),(0,h.createReplyBottomAtt)(v(33414,"相关附件")+":",E,function(){},"acc"))))))}}]),t}(React.Component);t.default=g},function(e,t){},function(e,t){},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(32),i=n(a),s=r(31),l=n(s),c=r(8),u=n(c),d=r(3),f=n(d),p=r(1),h=n(p),m=r(2),v=n(m),g=r(4),w=n(g),y=r(5),b=n(y),_=r(9),S=n(_),k=r(7),E=r(10),I=r(11),C=r(0),R=r(6);r(213);var x=(I.WeaTableNew.WeaTable,C.WeaLocaleProvider.getLabel),P=(0,E.observer)(o=function(e){function t(e){(0,h.default)(this,t);var r=(0,w.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e));return r.getMousePos=function(e){var t=e||window.event;r.setState({left:t.screenX,top:t.screenY-100})},r.getFontColor=function(e){return.299*parseInt(e.substring(1,3),16)+.587*parseInt(e.substring(3,5),16)+.114*parseInt(e.substring(5,7),16)>186?"#000000":"#ffffff"},r.showSettingColor=function(e,t){var n=r.props.followTypeSettingStore,o=(n.colorSetting,n.setFunc);n.colorValue;o("colorSetting",!0),o("operateId",e),o("colorValue",t)},r.willAdd=function(e,t){var n=r.color16(e);t=(0,u.default)({},t,{colorval:n}),e=[].concat((0,l.default)(e.slice(0,e.length-1)),[t]),r.setState({initialDatas:e})},r.color16=function(e){var t=!0,n=Math.floor(256*Math.random()),o=Math.floor(256*Math.random()),a=Math.floor(256*Math.random()),i="#"+(Array(6).join(0)+(n.toString(16)+o.toString(16)+a.toString(16))).slice(-6);if(e.map(function(e){e.colorval===i&&(t=!1)}),!1!==t)return i;i=r.color16(e)},r.willDelete=function(e,t){r.setState({willDeleteKeys:String(r.state.selectedRowKeys)}),r.setState({initialDatas:e})},r.onRowSelect=function(e){r.setState({selectedRowKeys:e})},r.getFooter=function(e){var t=r.props.followTypeSettingStore,n=(t.colorSetting,t.setFunc,[{key:"0",icon:S.default.createElement("i",{className:"icon-coms-Preservation"}),content:x(86,"保存"),onClick:function(){return r.handleSave("manage")}}]),o=[];return"manage"===e?o.push(S.default.createElement(R.Button,{ecId:(r&&r.props&&r.props.ecId||"")+"_Button@3wm4fk@save",type:"primary",onClick:function(){return r.handleSave("manage")}},x("30986","保存")),S.default.createElement(C.WeaMoreButton,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaMoreButton@qwk1y5@more",datas:n,collectParams:{favouritetype:2,objid:0,importantlevel:1}})):o.push(S.default.createElement(R.Button,{ecId:(r&&r.props&&r.props.ecId||"")+"_Button@wki3xd@save",type:"primary",onClick:function(){return r.handleSave("color")}},x("30986","保存"))),o},r.loadData=function(){var e=r.props.followTypeSettingStore,t=(e.colorSetting,e.setFunc,e.flowTypeData),n=(0,k.toJS)(t.columns[1]);t.columns[0].width="60%",t.columns[0].title=x("511463","关注类型名称"),n.title=x("511464","关注类型颜色"),t.columns[0].com[0].viewAttr=3,n.com[0].render=function(e,t,n,o){return S.default.createElement("div",{className:"customColor",style:{background:r.state.initialDatas[n].colorval,color:r.getFontColor(r.state.initialDatas[n].colorval)},onClick:function(){return r.showSettingColor(r.state.initialDatas[n].id,r.state.initialDatas[n].colorval)}},r.state.initialDatas[n].colorval)};var o=[];o.push(t.columns[0],n),r.setState({columns:o,initialDatas:(0,k.toJS)(t.datas)})},r.handleSave=function(e){var t=r.props.followTypeSettingStore,n=(t.colorSetting,t.setFunc),o=t.colorValue,a=t.operateId,s=t.saveAttentionTypeSet,l=(t.getAttentionTypeSet,t.openType),c=[];r.state.initialDatas.map(function(e,t){c.push(e.showname)});var u=c.sort();if("manage"===e){var d=(0,i.default)(r.state.initialDatas);if(0==r.table.doValidate().pass)return;for(var f=0;f<c.length;f++)if(u[f]==u[f+1])return void R.message.warning(u[f]+x("511462","该关注类型已存在"));switch(n("showDialog",!1),l){case"bqsz":s({data:d,delIds:r.state.willDeleteKeys,src:"saveData"},r.props.refresh);break;case"bdsz":s({data:d,delIds:r.state.willDeleteKeys,src:"saveData"},r.props.makeSureCallBack),r.timerID=setTimeout(function(){$(".wf_attention_div_btn").on("mouseover mouseout",function(e){var t=$(this).attr("id").substr($(this).attr("id").indexOf("_"));"mouseover"==e.type?jQuery("#attentionSpan"+t).css("display","inline-block"):"mouseout"==e.type&&jQuery("#attentionSpan"+t).css("display","none")})},2e3);break;default:s({data:d,delIds:r.state.willDeleteKeys,src:"saveData"})}}else{r.state.initialDatas.map(function(e){e.id==a&&(e.colorval=o)});var p=r.state.initialDatas;r.setState({initialDatas:p}),n("colorSetting",!1)}},r.getRowSelection=function(e){var t=r.props.followTypeSettingStore.flowTypeData.disabledArray,n=(0,u.default)({},e);return n.getCheckboxProps=function(e){var r=!1;return t.map(function(t){e.id==t&&(r=!0)}),{disabled:r}},n},r.onChange=function(e,t){r.setState({initialDatas:e})},r.addBtnClick=function(e){var t=r.props.followTypeSettingStore,n=t.saveAttentionTypeSet;t.getAttentionTypeSet;n({showname:e,src:"saveData2"})},r.onVisibleChange=function(){r.setState({visible:!1})},r.getTableProps=function(){var e=r.props.followTypeSettingStore;e.saveAttentionTypeSet,e.getAttentionTypeSet;return{scroll:{y:703}}},r.state={visible:!1,top:"",left:"",initialDatas:[],custom:{},columns:[],willDeleteKeys:"",selectedRowKeys:[],validator:{rules:{showname:"required"},errorMessage:{required:x("385869","此项必填")}}},r}return(0,b.default)(t,e),(0,v.default)(t,[{key:"componentWillMount",value:function(){this.props.followTypeSettingStore.getAttentionTypeSet(this)}},{key:"componentWillReceiveProps",value:function(e){}},{key:"componentDidMount",value:function(){var e=this;document.querySelector(".clickFollow").addEventListener("click",function(){e.getMousePos(),e.setState({visible:!0})})}},{key:"render",value:function(){var e=this,t=this.props.followTypeSettingStore,r=t.colorSetting,n=t.setFunc,o=t.colorValue,a=t.showDialog,i=[{key:"0",icon:S.default.createElement("i",{className:"icon-coms-Preservation"}),content:x(86,"保存"),onClick:function(){return e.handleSave("manage")}}];return S.default.createElement("div",{className:"clickFollow",style:{height:"100%"}},S.default.createElement(C.WeaDialog,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@980gxf",className:"followType",title:x("503952","关注类型设置"),visible:a,icon:"icon-coms-workflow",iconBgcolor:"#0079DE",closable:!0,hasScroll:!0,buttons:this.getFooter("manage"),onCancel:function(){n("showDialog",!1),e.setState({willDeleteKeys:""})},style:{height:"1200px",width:"800px"}},S.default.createElement(C.WeaRightMenu,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaRightMenu@v7ealb",datas:i,collectParams:{favouritetype:2,objid:0,importantlevel:1}},S.default.createElement(C.WeaTableEditable,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaTableEditable@0f2raz",ref:function(t){e.table=t},datas:this.state.initialDatas,columns:this.state.columns,draggable:!0,draggableType:"icon",showTitle:!0,showAdd:!0,showDelete:!0,showCopy:!1,showMove:!1,showCollapse:!1,buttonsType:"inline",validatePass:"",addButtonType:"normal",pushTitleIntoHeader:!1,showRowSelect:!0,validator:this.state.validator,getRowSelection:this.getRowSelection,tableProps:this.getTableProps(),willAdd:this.willAdd,willDelete:this.willDelete,onChange:this.onChange,onRowSelect:this.onRowSelect}))),S.default.createElement(C.WeaDialog,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@fc1xop",className:"colorset",title:x("511629","关注类型颜色设置"),visible:r,icon:"icon-coms-workflow",iconBgcolor:"#0079DE",closable:!0,hasScroll:!0,buttons:this.getFooter("color"),onCancel:function(){n("colorSetting",!1)},style:{height:"100px",width:"400px"}},S.default.createElement("div",{className:"color_picker"},S.default.createElement(C.WeaColorPicker,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaColorPicker@jr5vwe",value:o,onChange:function(e){return n("colorValue",e)}}))))}}]),t}(S.default.Component))||o;t.default=C.WeaTools.tryCatch(S.default,function(e){return S.default.createElement(C.WeaErrorPage,{ecId:"_WeaErrorPage@iqtoof",msg:e.error?e.error:x(383324," 对不起，该页面异常，请联系管理员 ")+"！"})},{error:""})(P)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=r(8),i=n(a),s=r(3),l=n(s),c=r(1),u=n(c),d=r(2),f=n(d),p=r(4),h=n(p),m=r(5),v=n(m),g=r(9),w=n(g),y=r(499),b=n(y),_=r(33),S=r(0),k=(0,_.observer)(o=function(e){function t(){(0,u.default)(this,t);var e=(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this));return e.state={hasLoad:!1},e}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=function(){if(window.weaExcelDesignEngine&&window.weaExcelDesignEngine.com)e.setState({hasLoad:!0});else{var t="?v="+(S.WeaTools&&S.WeaTools.ls&&S.WeaTools.ls.getStr("staticVersion")||0),r=["/spa/workflow/excelDesign/engine.js"+t,"css!/spa/workflow/excelDesign/engine.css"+t];(0,b.default)(r,function(){e.setState({hasLoad:!0})})}};window.setTimeout(t,300)}},{key:"render",value:function(){var e=this.state,t=e.hasLoad;e.store;if(t){var r=window.weaExcelDesignEngine.com.DesignCom;return w.default.createElement(r,(0,i.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_WfBatchShare@6c9mw5"},this.props))}return w.default.createElement("div",null)}}]),t}(w.default.Component))||o;t.default=k},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(8),i=n(a),s=r(3),l=n(s),c=r(1),u=n(c),d=r(2),f=n(d),p=r(4),h=n(p),m=r(5),v=n(m),g=r(0),w=r(33),y=r(6),b=r(19),_=n(b),S=r(14),k=n(S),E=r(21),I=n(E),C=r(501),R=n(C),x=r(7),P=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(x),N=r(44),D=r(93),O=r(507),L=n(O),T=r(508),F=n(T),A=P.toJS,M=g.WeaLocaleProvider.getLabel,W=(0,w.observer)(o=function(e){function t(e){(0,u.default)(this,t);var r=(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return r.componentDidMount=function(){var e=r.props,t=e.templateid,n=void 0===t?-1:t,o=e.modelSetModalShow,a=void 0!==o&&o;-1!=n?a&&r.initalFreeDatas(r.props):r.initalFreeDatas(r.props)},r.componentWillReceiveProps=function(e){var t=e.templateid,n=void 0===t?"":t,o=e.modelSetModalShow,a=void 0!==o&&o;""!=n&&!r.props.modelSetModalShow&&a&&r.initalFreeDatas(e)},r.state={},r}return(0,v.default)(t,e),(0,f.default)(t,[{key:"initalFreeDatas",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.workflowNewDesignStore,r=(e.currentRequestId,e.requestid),n=void 0===r?"":r,o=e.workflowid,a=void 0===o?"":o,i=e.nodeid,s=void 0===i?"":i,l=e.cellMaxHeight,c=void 0===l?0:l,u=e.createNodeInfo,d=void 0===u?{}:u,f=e.isFree,p=void 0===f?"":f,h=e.isAllowNodeFreeFlow,m=void 0===h?"1":h,v=e.templateid,g=void 0===v?-1:v,w=e.isFromHtmlPage,y=void 0!==w&&w,b=e.isFlowModel,_=e.f_weaver_belongto_userid,S=e.f_weaver_belongto_usertype,k=e.authSignatureStr,E=e.authStr,I=e.wfTestStr,C=e.belongTest,R=void 0===C?"0":C,x=e.wf_chart_ready_windowClose,P=e.showForecastNode,N=t.initalFreeWfDatas,D=t.setOrginWfNodesInfo;N({isFree:p,nodeid:s,workflowid:a,requestid:n,templateid:g,isAllowNodeFreeFlow:m,isFromHtmlPage:y,f_weaver_belongto_userid:_,f_weaver_belongto_usertype:S,wfTestStr:I,authSignatureStr:k,authStr:E,belongTest:R,showForecastNode:P},x),"1"!=b&&D({createNodeInfo:d,cellMaxHeight:c})}},{key:"componentWillUnmount",value:function(){(0,this.props.workflowNewDesignStore.clearMobxState)()}},{key:"render",value:function(){var e=this,t=this.props,r=t.workflowNewDesignStore,n=(t.cellMaxHeight,t.createNodeInfo,t.isReadOnlyModel),o=(t.isFromHtmlPage,t.isFlowModel),a=r.wfFreeDatas,i=r.wfFreeDatasPoints,s=(r.currentFreeWfEditState,r.isNeedChangeRow,r.clearCurrentChooseState,r.allValidNodesPostions),l=(r.componentNeedRender,0),c=0;for(var u in i){var d=i[u];for(var f in d){var p=d[f];l=l>p.x?l:p.x,c=c>p.y?c:p.y}}var h={width:l+100+"px",minWidth:"100%",height:c+80+"px",overflow:"auto"},m={right:"1"==o?"400px":0};n="true"==n;var v=[],g=[],w=[],y=[],b=P.toJS(a);if(b&&!(0,I.default)(b)){for(var _ in b)!function(t){b[t].map(function(r,n){if(!(0,I.default)(r)){var a=s[r.freeStartNodeid||1*t],i=void 0;"1"==o?i={x:0,y:0}:a.x;var l=e.renderSvgPath_vertical(r,i,!0,{},r,t+"_"+n);w=w.concat(l.filter(function(e){return!e.props.upLevel}).concat(l.filter(function(e){return e.props.upLevel}))),v=v.concat(e.drawElementNode(r,!0,t+"_"+n)),g=g.concat(e.drawGroupsElement(r,!0,t+"_"+n)),"1"!=o&&(y=y.concat(e.renderSupStartAndEndLine(r,t+"_"+n)))}})}(_)}return React.createElement("div",{className:"wf-design-free-svg-container"},React.createElement("div",{className:"wf-design-free-svg",style:m},React.createElement("svg",{width:"100%",height:"100%",version:"1.1",xmlns:"http://www.w3.org/2000/svg",style:h},w),React.createElement("div",{className:"wf-design-free-nodeInfo"},v),React.createElement("div",{className:"wf-design-free-brachGroups"},g),y,"1"!=o&&!n&&this.renderSignHideBtn()))}},{key:"drawGroupsElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,r=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:""),n=this.props,o=n.isReadOnlyModel,a=n.workflowNewDesignStore,i=a.wfFreeDatasPoints,s=(a.globalNextNodeEditPurview,a.currentPostParams),l=[],c=(s.nodeid,e.nodeElement),u=void 0!==c&&c,d=e.hasNext,f=void 0!==d&&d,p=e.next,h=void 0===p?{}:p,m=(e.nodeEntity,e.id),v=void 0===m?"":m,g=e.nodeChartEntity,w=void 0===g?{}:g,y=w.addNext,b=void 0!==y&&y;if(o="true"==o,!u){var _=e.parallelNodeGroupDatas||[];if(_.length>1){var S=(0,D.getCurrentElementPoint)(e,i,r)||[{},{}],E=(0,D.getCurrentElementPoint)(_[0],i,r),I=(0,D.getCurrentElementPoint)(_[_.length-1],i,r);E&&(0,k.default)(E)&&(E=E[0]),I&&(0,k.default)(I)&&(I=I[0]);var C={left:E.x-58+"px",top:(S[0]?S[0].y+10:-5)+"px",width:Math.abs(I.x-E.x)+140+"px",height:"180px"};!o&&b&&l.push(this.drawGroupsSupButton(S[1],e.id,r)),l.push(React.createElement(F.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_WorkflowFreeNodeGroup@8qow9z@"+v,groupStyle:C,groupsParams:e,isReadOnlyModel:o,isMobile:this.props.isMobile,workflowNewDesignStore:a,belongWhereTag:r})),_.map(function(e){t.drawGroupsElement(e,!1,r).map(function(e){l.push(e)})})}}if(f){this.drawGroupsElement(h,!1,r).map(function(e){l.push(e)})}return l}},{key:"drawGroupsSupButton",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments[2],n=this.props,o=n.workflowNewDesignStore,a=(n.nodeParams,n.isMobile),i=void 0===a?"0":a,s=o.beSerialNodes,l={display:"block",fontSize:"18px",marginTop:"-1px",marginLeft:"-2px",lineHeight:"16px"};return React.createElement("div",{className:"groups-element-sup-addBtn",title:M(506900,"添加串行节点"),style:{left:e.x-8+"px",top:e.y-8+"px",border:"1"==i?"none":"1px solid #979797",background:"1"==i?"none":"#FFFFFF"},onClick:function(){return s(t,r)}},React.createElement("span",{className:"icon-coms-Enlarge",style:"1"==i?l:{}}))}},{key:"drawElementNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,r=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:""),n=this.props,o=n.isFlowModel,a=void 0===o?"0":o,i=n.workflowNewDesignStore,s=n.isReadOnlyModel,l=i.wfFreeDatasPoints,c=e.nodeElement,u=void 0!==c&&c,d=e.hasNext,f=void 0!==d&&d,p=e.next,h=void 0===p?{}:p,m=e.nodeEntity,v=void 0===m?{}:m,g=e.id,w=void 0===g?"":g,y=[],b=(0,D.getCurrentElementPoint)(e,l,r);if(s="true"==s,u){var _="1"==a?{left:b.x-("1"==v.nodetype?39:"0"==v.nodetype?45:"3"==v.nodetype?20:54)+"px",top:b.y-("0"==v.nodetype||"3"==v.nodetype?48:35)+"px"}:{left:b.x-("1"==v.nodetype?39:54)+"px",top:b.y-35+"px"};y.push(React.createElement(L.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_WorkflowFreeNode@0fgnvz@"+w,nodeParams:e,nodeStyle:_,isReadOnlyModel:s,isFlowModel:this.props.isFlowModel,isMobile:this.props.isMobile,workflowNewDesignStore:i,belongWhereTag:r}))}else{var S=e.parallelNodeGroupDatas,k=[];S&&S.map(function(e){t.drawElementNode(e,!1,r).map(function(e){k.push(e)})}),k.map(function(e){y.push(e)})}if(f){this.drawElementNode(h,!1,r).map(function(e){y.push(e)})}return y}},{key:"renderSupStartAndEndLine",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.props,o=n.workflowNewDesignStore,a=(n.cellMaxHeight,n.createNodeInfo,n.isFree),s=o.wfFreeDatasPoints,l=o.circulationParams,c=o.allValidNodesPostions,u=o.allValidNodesNodeLinks,d=o.validWorkFlowDatas,f=o.currentSignSetNode,p=o.everyFreeNodeOffsetY,h=o.circulationOrginNode,m=(o.forecastNodeIds,t.freeStartNodeid),v=void 0===m?"":m,g=t.freeEndNodeid,w=void 0===g?"":g,y=(f.flowType,d.currentStartNode,c[v]),b=p[v]||0,S=(0,D.getBranchLastGroup)(t)||{},k=S.nodeChartEntity,E=void 0===k?{}:k,C=E.outLineStatus,R=void 0===C?0:C,x=t.nodeChartEntity||{},O=x.inLineStatus,L=void 0===O?0:O,T={};T=t.nodeElement?(0,D.getCurrentElementPoint)(t,s,r)||{}:(0,D.getCurrentElementPoint)(t,s,r)[0]||{};var F=[],M=l.noPassedLinkColor;if(!(0,I.default)(P.toJS(t))){var W=[];if(v==w){for(var j=A(h),B=j.allOrginNodes,z=void 0===B?[]:B,q="",U=0;U<z.length;U++){var V=z[U];if(V.nodeId==v){q=V.value;break}}W.push({id:"",descnode:v,linkname:"",linkinfo:q,ispass:1==R?"1":"0"})}else W=u[v]||[];(0,_.default)(A(W)).map(function(t,r){var n=(0,N.convertSpecialChar)(t.linkinfo),o=(0,_.default)(c[t.descnode]),s=1==R&&"1"==t.ispass,u={position:"absolute",borderBottom:"9px solid "+e.getStrockColor(w,s?1:0,l.noPassedLinkColor,t.descnode),borderLeft:"4px solid transparent",borderRight:"4px solid transparent",left:"-3.5px",top:"-1px"};v==t.descnode&&(o=(0,i.default)({},o,{x:o.x+5}));var d={width:"1px",position:"absolute"};if(0==r){var f="1"!=a&&v==w?y.x-5:y.x;F.push(React.createElement("div",{className:"free-wf-sup-line sup-line-start",style:(0,i.default)({},d,{left:f+"px",top:-y.y+"px",height:(T.x>y.x?y.y+10:y.y+b)+"px",background:e.getStrockColor(void 0,L,M,t.descnode)})})),F.push(React.createElement("div",{className:"free-wf-sup-line sup-line-start",style:(0,i.default)({},d,{width:"10px",left:f-5+"px",top:-y.y+"px",height:(T.x>y.x?y.y+10:y.y)+b+"px",background:"transparent"})}))}F.push(React.createElement("div",{className:"free-wf-sup-line sup-line-end",style:(0,i.default)({},d,{left:o.x+"px",height:o.y+b+"px",top:-o.y+"px",background:e.getStrockColor(w,s?1:0,M,t.descnode)}),title:n},React.createElement("span",{style:u}))),F.push(React.createElement("div",{className:"free-wf-sup-line sup-line-end",style:(0,i.default)({},d,{width:"10px",left:o.x-5+"px",height:o.y+b+"px",top:-o.y+"px",background:"transparent"}),title:n}))})}return F}},{key:"renderSvgPath_vertical",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",l=this.props,c=l.workflowNewDesignStore,u=(l.isSingle,l.isFlowModel),d=void 0===u?"0":u,f=l.isFree,p=c.wfFreeDatasPoints,h=c.circulationParams,m=c.allValidNodesPostions,v=e.freeStartNodeid,g=void 0===v?"":v,w=e.freeEndNodeid,y=void 0===w?"":w,b=m[g]||{};t=t||b;var _=e.nodeEntity,S=void 0===_?{}:_,k=e.nodeElement,E=(S.nodeStatus,S.nodetype),I=void 0===E?"":E,C=S.nodename,R=void 0===C?"":C,x=e.nodeChartEntity,P=void 0===x?{}:x,N=P.inLineStatus,O=void 0===N?0:N,L=P.outLineStatus,T=void 0===L?0:L,F=[];if(r){var A={};A=k?(0,D.getCurrentElementPoint)(e,p,s)||{}:(0,D.getCurrentElementPoint)(e,p,s)[0]||{};var M=this.getStrockColor(S.id,O),W={fill:"none",stroke:M,strokeWidth:"1",strokeMiterlimit:10},j={x:"1"!=f&&g==y?b.x-5:b.x,y:0},B={strokeWidth:10,stroke:"transparent",fill:"none"};if(A.x<=j.x)F.push(React.createElement("path",(0,i.default)({d:"M"+(A.x-.5)+" -0.5 L"+(A.x-.5)+" "+(A.y-.5)},W),React.createElement("title",null,R))),F.push(React.createElement("path",(0,i.default)({d:"M"+j.x+" 0.5 L"+A.x+" 0.5"},W,{stroke:this.getStrockColor(S.id,O,h.noPassedLinkColor)}),React.createElement("title",null,R))),F.push(React.createElement("path",(0,i.default)({d:"M"+(A.x-.5)+" -0.5 L"+(A.x-.5)+" "+(A.y-.5)},B),React.createElement("title",null,R))),F.push(React.createElement("path",(0,i.default)({d:"M"+j.x+" 0.5 L"+A.x+" 0.5"},B),React.createElement("title",null,R)));else if(A.x>j.x){if(F.push(React.createElement("path",(0,i.default)({d:"M"+(A.x-.5)+" 9.5 L"+(A.x-.5)+" "+(A.y-.5)},W),React.createElement("title",null,R))),Math.abs(A.x-j.x)>=2){F.push(React.createElement("path",(0,i.default)({d:"M"+(j.x+1)+" 9.5 L"+A.x+" 9.5"},W,{stroke:this.getStrockColor(S.id,O,h.noPassedLinkColor)}),React.createElement("title",null,R)))}F.push(React.createElement("path",(0,i.default)({d:"M"+(A.x-.5)+" 9.5 L"+(A.x-.5)+" "+(A.y-.5)},B),React.createElement("title",null,R))),F.push(React.createElement("path",(0,i.default)({d:"M"+j.x+" 9.5 L"+A.x+" 9.5"},B),React.createElement("title",null,R)))}k&&"1"!=d&&F.push(this.renderSvgArrow(A,"fill",1==O,!0,I,S.id));this.renderSvgPath_vertical(e,A,!1,n,a,s).map(function(e){F.push(e)})}else if(e.nodeElement){var z=(0,D.getCurrentElementPoint)(e,p,s),q=[],U={x:z.x,y:z.y};if(q=this.renderSvgLine_vertical([t,U],e,O),q.map(function(e){F.push(e)}),e.hasNext)q=this.renderSvgPath_vertical(e.next,U,!1,e,a,s),q.map(function(e){F.push(e)});else{var V=(0,D.getFreeObjById)(e.parentid,a);if(!e.parentid||!V){var G=this.drawLastSvgLine(0,1==T,U,I,a,s,T);G.map(function(e){F.push(e)})}if(""!=e.parentid&&null!=e.parentid&&null!=V){var H=(0,D.getCurrentElementPoint)(V,p,s);q=this.renderSvgLine_vertical([U,H[1]],e,T),q.map(function(e){F.push(e)})}}}else{var K=(0,D.getCurrentElementPoint)(e,p,s),Q=[];Q=this.renderSvgLine_vertical([t,K[0]],e,O),Q.map(function(e){F.push(e)});var $=e.parallelNodeGroupDatas;if($.map(function(t){Q=o.renderSvgPath_vertical(t,K[0],!1,e,a,s),Q.map(function(e){F.push(e)})}),e.hasNext)Q=this.renderSvgPath_vertical(e.next,K[1],!1,e,a,s),Q.map(function(e){F.push(e)});else{var J=(0,D.getFreeObjById)(e.parentid,a);if(!e.parentid||!J){var Y=(e.groupStatus,this.drawLastSvgLine(0,1==T,K[1],I,a,s));Y.map(function(e){F.push(e)})}if(null!=e.parentid&&null!=J){var X=(0,D.getCurrentElementPoint)(J,p,s);Q=this.renderSvgLine_vertical([K[1],X[1]],J,T),Q.map(function(e){F.push(e)})}}}return F}},{key:"renderSvgLine_vertical",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],n=this.props,o=n.workflowNewDesignStore,a=n.isFlowModel,s=void 0===a?"0":a,l=(o.svgPathLine,o.wfFreeDatas,o.circulationParams,o.forecastNodeIds,t.nodeEntity),c=void 0===l?{}:l,u=(t.groupStatus,t.nodeChartEntity,c.nodetype),d=void 0===u?"":u,f=c.nodename,p=void 0===f?"":f,h=1==r,m=this.getStrockColor(c.id,r);e=P.toJS(e);var v=[],g={fill:"none",stroke:m,strokeWidth:"1",strokeMiterlimit:10,upLevel:h},w={strokeWidth:10,stroke:"transparent",fill:"none"};if(2==e.length){var y=(0,_.default)(e[0])||{},b=(0,_.default)(e[1])||{};if(y.x==b.x&&y.y==b.y)return v;var S="";if(y.x==b.x)S="M"+(y.x-.5)+" "+(y.y-.5)+" L"+(b.x-.5)+" "+(b.y-.5);else{var k=[];if(y.virtual||b.virtual){y.virtual&&b.virtual?y.isBranch?k.push({x:b.x,y:y.y}):k.push({x:y.x,y:b.y}):y.virtual?k.push({x:b.x,y:y.y}):k.push({x:y.x,y:b.y});var E="";k.map(function(e){E+="L"+(e.x-.5)+" "+(e.y-.5)+" "}),S="M"+(y.x-.5)+" "+(y.y-.5)+" "+E+"L"+(b.x-.5)+" "+(b.y-.5)}}v.push(React.createElement("path",(0,i.default)({d:S},g),React.createElement("title",null,p))),v.push(React.createElement("path",(0,i.default)({d:S},w),React.createElement("title",null,p))),!t.nodeElement||b.virtual||"1"==s&&"3"==d||v.push(this.renderSvgArrow(b,"fill",h,!0,d,c.id))}return v}},{key:"renderSvgArrow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"notfill",r=arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments[4],a=arguments[5],s=this.props.workflowNewDesignStore,l=s.circulationParams,c=this.getStrockColor(a,r?1:0,l.noPassedLinkColor),u="",d={stroke:c,fill:c,strokeWidth:"1"},f=0,p=0;"0"==o||"3"==o?(f=-.5,p=.5):"2"==o||"4"==o?(f=-.5,p=13.5):(f=-.5,p=-1.5),"fill"!=t&&(d.fill="none");var h=e.x||"",m=e.y||"";return u=n?"M"+(e.x-4+f)+" "+(e.y-50-7+p)+" L"+(e.x+f)+" "+(e.y-50+p)+" L"+(e.x+4+f)+" "+(e.y-50-7+p):"M"+(h-7)+" "+(m-4)+" L"+h+" "+m+" L"+(h-7)+" "+(m+4),React.createElement("path",(0,i.default)({d:u},d,{style:{transform:d.transform,"-ms-transform":d.transform}}))}},{key:"drawLastSvgLine",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments[1]),t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3],n=arguments[4],o=this,a=arguments[5],s=(arguments[6],this.props),l=s.workflowNewDesignStore,c=s.isFlowModel,u=s.isFree,d=l.wfFreeDatasPoints,f=(l.wfFreeDatas,l.circulationParams),p=(l.currentPostParams,l.allValidNodesPostions),h=l.allValidNodesNodeLinks,m=l.currentSignSetNode,v=l.validWorkFlowDatas,g=l.everyFreeNodeOffsetY,w=l.circulationOrginNode,y=(l.forecastNodeIds,m.nodeName,m.nodeType,m.flowType,v.allValidNodes,v.currentStartNode,v.currentEndNodes,n.freeStartNodeid),b=n.freeEndNodeid,S=[];if(y==b){for(var k=A(w),E=k.allOrginNodes,I=void 0===E?[]:E,C="",x=0;x<I.length;x++){var P=I[x];if(P.nodeId==y){C=P.value;break}}S.push({id:"",descnode:y,linkname:"",linkinfo:C,ispass:e?"1":"0"})}else S=h[y]||[];if("1"==c)return[];var O=0,L=0,T=[],F=(0,_.default)(d[a]),M=g[y]||0;for(var W in F)!function(e){var t=e.split("_"),r=[],o="";t.map(function(e,n){n!=t.length-1&&r.push(e)}),o=r.join("_"),(0,D.isExistThisElement)(o,n)&&(O=O>F[e].x?O:F[e].x,L=L>F[e].y?L:F[e].y)}(W);var j=(0,R.default)(A(S),["ispass"]);return(0,_.default)(j).map(function(n,a){var s=(0,N.convertSpecialChar)(n.linkinfo),l=(0,_.default)(p[n.descnode]),c=e&&"1"==n.ispass,d={fill:"none",stroke:o.getStrockColor(b,c?1:0,f.noPassedLinkColor,n.descnode),strokeWidth:"1",strokeMiterlimit:10};"1"!=u&&y==n.descnode&&(l=(0,i.default)({},l,{x:l.x+6}));var h=[{x:t.x,y:t.y},{x:t.x,y:t.y+("1"==r?80:60)},{x:O+93,y:t.y+("1"==r?80:60)},{x:O+93,y:M}],m="";h.map(function(e,t){m+=0==t?"M"+(e.x-.5)+" "+(e.y-.5)+" ":"L"+(e.x-.5)+" "+(e.y-.5)+" "}),T.push(React.createElement("path",(0,i.default)({d:m},d),React.createElement("title",null,s)));var v=l.x>O+93||"1"==u?1:0;T.push(React.createElement("path",(0,i.default)({d:"M"+(O+93)+" "+(M+.5)+" L"+(l.x+v)+" "+(M+.5)},d,{stroke:o.getStrockColor(b,c?1:0,f.noPassedLinkColor,n.descnode)}),React.createElement("title",null,s)));var g={strokeWidth:10,stroke:"transparent",fill:"none"};T.push(React.createElement("path",(0,i.default)({d:m},g),React.createElement("title",null,s))),T.push(React.createElement("path",(0,i.default)({d:"M"+(O+93)+" "+(M+.5)+" L"+l.x+" "+(M+.5)},g),React.createElement("title",null,s)))}),T}},{key:"renderSignHideBtn",value:function(){var e=this,t=this.props,r=t.workflowNewDesignStore,n=t.cellMaxHeight,o=void 0===n?0:n,a=t.isFree,s=void 0===a?"":a,l=t.isFlowModel,c=t.isReadOnlyModel,u=t.isMobile,d=void 0===u?"0":u,f=(r.circulationOrginNode,r.currentSignSetNode),p=(r.rightDetailType,r.freeWfTrunkNodes),h=r.getFreeNodeSetting,m=(r.currentFlowingGroup,r.curFloatSignNodeId),v=r.setPopOperatorsPanemParams,g=r.setCurrentElement_mobile,w=r.validWorkFlowDatas,y=r.currentValidStartNodeId,b=w.allValidNodes,_=void 0===b?[]:b;c="true"==c;var S=[];return _.map(function(t){var n=t.geometry,a=void 0===n?{}:n,u=t.nodeId,w=void 0===u?"":u,b=t.style,_=void 0===b?"":b,k=a.x,E=void 0===k?0:k,C=a.y,R=void 0===C?0:C,x=a.width,P=void 0===x?0:x,N=a.height,D=void 0===N?0:N,O=(_.split(";").filter(function(e){return e.indexOf("strokeColor")>-1})[0].split("=")[1],{width:P+"px",height:D+"px",left:E+1+"px",top:-(o-R-1)+"px"}),L={left:P/2-11+"px",bottom:"-10px"};S.push(React.createElement("div",{className:"sign-hide-btn-area",style:O,onMouseEnter:function(){r.curFloatSignNodeId=w},onMouseLeave:function(){r.curFloatSignNodeId=""},onClick:function(e){var n=p.startGroup,o=void 0===n?{}:n,a=p.endGroup,l=void 0===a?{}:a,u=o.nodeEntity,m=void 0===u?{}:u,b=void 0;if(b=m.id==w?o:l,(0,I.default)(b)&&(b={nodename:t.value,nodetype:t.nodeType}),"0"==d)if(c){var _=e.pageX,S=e.pageY;v({position:{left:_,top:S},visible:!0,nodeinfo:b})}else if("1"==s)r.rightDetailType="node",h(b);else{if(y!=w)return;r.rightDetailType="signSet",r.currentChoosedBranchId="",r.currentChoosedItemId="";var k={nodeName:t.value,nodeType:t.nodeType};r.currentSignSetNode=(0,i.default)({},f,k)}else b.isAddSign="1"!=s,g(b,!1,y+"")}},"1"!=l&&!c&&m==w&&("0"==d||"1"==d&&"1"!=s)&&e.renderFloatAddButton(L)))}),S}},{key:"renderFloatAddButton",value:function(e){var t=this.props,r=(t.topParams,t.workflowNewDesignStore),n=(r.currentFreeWfEditState,r.wfFreeDatas,r.beSerialNodes),o=r.curFloatSignNodeId,a=r.circulationOrginNode,i=r.allowAddNewBranch,s=r.currentValidStartNodeId,l=r.validWorkFlowDatas,c=(l.currentStartNode,a.startOrginNodeId,[]);return o==s&&i&&c.push(React.createElement(y.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@slk6px@"+s,type:"ghost",onClick:function(){return n("root",s+"")}},React.createElement("span",{className:"icon-coms-Enlarge",title:M(506900,"添加串行节点")}))),React.createElement("div",{className:"float-sign-btn",style:e},c)}},{key:"getStrockColor",value:function(e,t,r,n){var o=this.props.workflowNewDesignStore,a=o.forecastNodeIds,i=o.circulationParams,s=!1;s=void 0!=n&&""!=n?a&&""!=a&&(","+a+",").indexOf(","+n+",")>-1:a&&""!=a&&(","+a+",").indexOf(","+e+",")>-1,void 0==e&&a&&""!=a&&(s=!0);return 1==t?i.passedLinkColor:s?i.forecastLinkColor:r||i.noPassedLinkColor}}]),t}(React.Component))||o;t.default=g.WeaTools.tryCatch(React,function(e){return React.createElement(g.WeaErrorPage,{ecId:"_WeaErrorPage@3tvdmz",msg:e.error?e.error:M(383324," 对不起，该页面异常，请联系管理员 ")+"！"})},{error:""})(W)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=r(136),a=n(o),i=r(8),s=n(i),l=r(3),c=n(l),u=r(1),d=n(u),f=r(2),p=n(f),h=r(4),m=n(h),v=r(5),g=n(v),w=r(9),y=n(w),b=r(10),_=r(0),S=r(251),k=n(S),E=r(254),I=n(E),C=r(255),R=n(C),x=r(364),P=n(x),N=r(367),D=n(N),O=r(190),L=n(O),T=r(195),F=n(T),A=r(130),M=n(A),W=r(197),j=n(W),B=r(433),z=n(B),q=r(445),U=n(q),V=r(207),G=n(V),H=r(446),K=n(H),Q=r(452),$=n(Q),J=r(453),Y=n(J),X=r(454),Z=n(X),ee=r(205),te=n(ee),re=r(206),ne=n(re),oe=r(455),ae=n(oe),ie=r(465),se=n(ie),le=r(466),ce=n(le),ue=r(473),de=n(ue),fe=r(474),pe=n(fe),he=r(482),me=n(he),ve=r(486),ge=n(ve),we=r(488),ye=n(we),be=r(203),_e=n(be),Se=r(490),ke=n(Se),Ee=r(131),Ie=n(Ee),Ce=r(132),Re=n(Ce),xe=r(492),Pe=n(xe),Ne=r(493),De=n(Ne),Oe=r(495),Le=n(Oe),Te=r(497),Fe=n(Te),Ae=r(216),Me=n(Ae),We=r(513);r(516);var je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(r){function n(e){(0,d.default)(this,n);var t=(0,m.default)(this,(n.__proto__||(0,c.default)(n)).call(this,e));return t.state={reRender:!1},t}return(0,g.default)(n,r),(0,p.default)(n,[{key:"componentDidMount",value:function(){var e=this;_.WeaLocaleProvider.getLocaleLabelByCode("workflow").then(function(){return e.setState({reRender:!0})})}},{key:"render",value:function(){this.state.reRender;return y.default.createElement(e,(0,s.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_Component@apu1vc",ref:t},this.props,this.state))}}]),n}(y.default.Component)};e.exports={WfFormModifyLogCom:je(k.default),WfFormModifyLogStore:I.default,WfFormResourceCom:je(R.default),WfFormResourceStore:P.default,WfFormLogListCom:je(D.default),WfFormLogListStore:L.default,WfForward:je(F.default),WFForwardStore:M.default,WfSignInput:je(j.default,"signInput"),WfCenterLogList:je(z.default),WfCenterLogListStore:U.default,WfBatchSubmit:je(G.default),WfFormShare:je(K.default),WfFormShareStore:Y.default,WfBatchShare:je($.default),WfBatchShareStore:Z.default,WfForwardBack:je(te.default),WfForwardBackStore:ne.default,WfFormCommunicationCom:je(ae.default),WfFormCommunicationStore:se.default,SecondAuthCom:je(ce.default),SecondAuthStore:new de.default,SecondAuthDetailCom:je(pe.default),WfMobileSettingCom:function(e,t,r){return function(n){function o(e){(0,d.default)(this,o);var n=(0,m.default)(this,(o.__proto__||(0,c.default)(o)).call(this,e));return n.state={reRender:!1,providerProps:(0,a.default)({},r,new t)},n}return(0,g.default)(o,n),(0,p.default)(o,[{key:"componentDidMount",value:function(){var e=this;_.WeaLocaleProvider.getLocaleLabelByCode("workflow").then(function(){return e.setState({reRender:!0})})}},{key:"render",value:function(){var t=this.state,r=(t.reRender,t.providerProps);return y.default.createElement(b.Provider,(0,s.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_Provider@bo8pcc"},r),y.default.createElement(e,(0,s.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_Component@6wgdx3"},this.props)))}}]),o}(y.default.Component)}(me.default,ge.default,"wfMobileSettingStore"),RemindSet:je(ye.default),RemindSetStore:ke.default,RemindTypelist:je(_e.default),UserPhraseEditStore:Re.default,UserPhraseEdit:je(Ie.default),TagTypeSelect:je(Pe.default),TagTypeSelectDialog:je(Le.default),FollowTypeSettingStore:De.default,WorkflowNewDesignStore:We.WorkflowNewDesignStore,FreeFlowDesignContainer:je(Fe.default),FreeFlowDesignSvg:je(Me.default)}},function(e,t,r){r(219);var n=r(12).Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},function(e,t,r){var n=r(20);n(n.S+n.F*!r(28),"Object",{defineProperty:r(27).f})},function(e,t,r){r(221),e.exports=r(12).Object.assign},function(e,t,r){var n=r(20);n(n.S+n.F,"Object",{assign:r(222)})},function(e,t,r){"use strict";var n=r(28),o=r(55),a=r(102),i=r(74),s=r(48),l=r(140),c=Object.assign;e.exports=!c||r(47)(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=c({},e)[r]||Object.keys(c({},t)).join("")!=n})?function(e,t){for(var r=s(e),c=arguments.length,u=1,d=a.f,f=i.f;c>u;)for(var p,h=l(arguments[u++]),m=d?o(h).concat(d(h)):o(h),v=m.length,g=0;v>g;)p=m[g++],n&&!f.call(h,p)||(r[p]=h[p]);return r}:c},function(e,t,r){var n=r(39),o=r(97),a=r(224);e.exports=function(e){return function(t,r,i){var s,l=n(t),c=o(l.length),u=a(i,c);if(e&&r!=r){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===r)return e||u||0;return!e&&-1}}},function(e,t,r){var n=r(98),o=Math.max,a=Math.min;e.exports=function(e,t){return e=n(e),e<0?o(e+t,0):a(e,t)}},function(e,t,r){r(226),e.exports=r(12).Object.getPrototypeOf},function(e,t,r){var n=r(48),o=r(141);r(103)("getPrototypeOf",function(){return function(e){return o(n(e))}})},function(e,t,r){e.exports={default:r(228),__esModule:!0}},function(e,t,r){r(58),r(76),e.exports=r(105).f("iterator")},function(e,t,r){var n=r(98),o=r(96);e.exports=function(e){return function(t,r){var a,i,s=String(o(t)),l=n(r),c=s.length;return l<0||l>=c?e?"":void 0:(a=s.charCodeAt(l),a<55296||a>56319||l+1===c||(i=s.charCodeAt(l+1))<56320||i>57343?e?s.charAt(l):a:e?s.slice(l,l+2):i-56320+(a-55296<<10)+65536)}}},function(e,t,r){"use strict";var n=r(104),o=r(54),a=r(75),i={};r(37)(i,r(17)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(i,{next:o(1,r)}),a(e,t+" Iterator")}},function(e,t,r){var n=r(27),o=r(23),a=r(55);e.exports=r(28)?Object.defineProperties:function(e,t){o(e);for(var r,i=a(t),s=i.length,l=0;s>l;)n.f(e,r=i[l++],t[r]);return e}},function(e,t,r){"use strict";var n=r(233),o=r(234),a=r(49),i=r(39);e.exports=r(142)(Array,"Array",function(e,t){this._t=i(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,r):"values"==t?o(0,e[r]):o(0,[r,e[r]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){e.exports={default:r(236),__esModule:!0}},function(e,t,r){r(237),r(146),r(242),r(243),e.exports=r(12).Symbol},function(e,t,r){"use strict";var n=r(16),o=r(38),a=r(28),i=r(20),s=r(143),l=r(238).KEY,c=r(47),u=r(100),d=r(75),f=r(73),p=r(17),h=r(105),m=r(106),v=r(239),g=r(240),w=r(23),y=r(34),b=r(48),_=r(39),S=r(95),k=r(54),E=r(104),I=r(241),C=r(107),R=r(102),x=r(27),P=r(55),N=C.f,D=x.f,O=I.f,L=n.Symbol,T=n.JSON,F=T&&T.stringify,A=p("_hidden"),M=p("toPrimitive"),W={}.propertyIsEnumerable,j=u("symbol-registry"),B=u("symbols"),z=u("op-symbols"),q=Object.prototype,U="function"==typeof L&&!!R.f,V=n.QObject,G=!V||!V.prototype||!V.prototype.findChild,H=a&&c(function(){return 7!=E(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=N(q,t);n&&delete q[t],D(e,t,r),n&&e!==q&&D(q,t,n)}:D,K=function(e){var t=B[e]=E(L.prototype);return t._k=e,t},Q=U&&"symbol"==typeof L.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof L},$=function(e,t,r){return e===q&&$(z,t,r),w(e),t=S(t,!0),w(r),o(B,t)?(r.enumerable?(o(e,A)&&e[A][t]&&(e[A][t]=!1),r=E(r,{enumerable:k(0,!1)})):(o(e,A)||D(e,A,k(1,{})),e[A][t]=!0),H(e,t,r)):D(e,t,r)},J=function(e,t){w(e);for(var r,n=v(t=_(t)),o=0,a=n.length;a>o;)$(e,r=n[o++],t[r]);return e},Y=function(e,t){return void 0===t?E(e):J(E(e),t)},X=function(e){var t=W.call(this,e=S(e,!0));return!(this===q&&o(B,e)&&!o(z,e))&&(!(t||!o(this,e)||!o(B,e)||o(this,A)&&this[A][e])||t)},Z=function(e,t){if(e=_(e),t=S(t,!0),e!==q||!o(B,t)||o(z,t)){var r=N(e,t);return!r||!o(B,t)||o(e,A)&&e[A][t]||(r.enumerable=!0),r}},ee=function(e){for(var t,r=O(_(e)),n=[],a=0;r.length>a;)o(B,t=r[a++])||t==A||t==l||n.push(t);return n},te=function(e){for(var t,r=e===q,n=O(r?z:_(e)),a=[],i=0;n.length>i;)!o(B,t=n[i++])||r&&!o(q,t)||a.push(B[t]);return a};U||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(r){this===q&&t.call(z,r),o(this,A)&&o(this[A],e)&&(this[A][e]=!1),H(this,e,k(1,r))};return a&&G&&H(q,e,{configurable:!0,set:t}),K(e)},s(L.prototype,"toString",function(){return this._k}),C.f=Z,x.f=$,r(145).f=I.f=ee,r(74).f=X,R.f=te,a&&!r(57)&&s(q,"propertyIsEnumerable",X,!0),h.f=function(e){return K(p(e))}),i(i.G+i.W+i.F*!U,{Symbol:L});for(var re="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;re.length>ne;)p(re[ne++]);for(var oe=P(p.store),ae=0;oe.length>ae;)m(oe[ae++]);i(i.S+i.F*!U,"Symbol",{for:function(e){return o(j,e+="")?j[e]:j[e]=L(e)},keyFor:function(e){if(!Q(e))throw TypeError(e+" is not a symbol!");for(var t in j)if(j[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),i(i.S+i.F*!U,"Object",{create:Y,defineProperty:$,defineProperties:J,getOwnPropertyDescriptor:Z,getOwnPropertyNames:ee,getOwnPropertySymbols:te});var ie=c(function(){R.f(1)});i(i.S+i.F*ie,"Object",{getOwnPropertySymbols:function(e){return R.f(b(e))}}),T&&i(i.S+i.F*(!U||c(function(){var e=L();return"[null]"!=F([e])||"{}"!=F({a:e})||"{}"!=F(Object(e))})),"JSON",{stringify:function(e){for(var t,r,n=[e],o=1;arguments.length>o;)n.push(arguments[o++]);if(r=t=n[1],(y(t)||void 0!==e)&&!Q(e))return g(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!Q(t))return t}),n[1]=t,F.apply(T,n)}}),L.prototype[M]||r(37)(L.prototype,M,L.prototype.valueOf),d(L,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},function(e,t,r){var n=r(73)("meta"),o=r(34),a=r(38),i=r(27).f,s=0,l=Object.isExtensible||function(){return!0},c=!r(47)(function(){return l(Object.preventExtensions({}))}),u=function(e){i(e,n,{value:{i:"O"+ ++s,w:{}}})},d=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,n)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[n].i},f=function(e,t){if(!a(e,n)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[n].w},p=function(e){return c&&h.NEED&&l(e)&&!a(e,n)&&u(e),e},h=e.exports={KEY:n,NEED:!1,fastKey:d,getWeak:f,onFreeze:p}},function(e,t,r){var n=r(55),o=r(102),a=r(74);e.exports=function(e){var t=n(e),r=o.f;if(r)for(var i,s=r(e),l=a.f,c=0;s.length>c;)l.call(e,i=s[c++])&&t.push(i);return t}},function(e,t,r){var n=r(56);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(39),o=r(145).f,a={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(e){return i.slice()}};e.exports.f=function(e){return i&&"[object Window]"==a.call(e)?s(e):o(n(e))}},function(e,t,r){r(106)("asyncIterator")},function(e,t,r){r(106)("observable")},function(e,t,r){e.exports={default:r(245),__esModule:!0}},function(e,t,r){r(246),e.exports=r(12).Object.setPrototypeOf},function(e,t,r){var n=r(20);n(n.S,"Object",{setPrototypeOf:r(247).set})},function(e,t,r){var n=r(34),o=r(23),a=function(e,t){if(o(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r(46)(Function.call,r(107).f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return a(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:a}},function(e,t,r){e.exports={default:r(249),__esModule:!0}},function(e,t,r){r(250);var n=r(12).Object;e.exports=function(e,t){return n.create(e,t)}},function(e,t,r){var n=r(20);n(n.S,"Object",{create:r(104)})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=r(8),i=n(a),s=r(3),l=n(s),c=r(1),u=n(c),d=r(2),f=n(d),p=r(4),h=n(p),m=r(5),v=n(m),g=r(9),w=n(g),y=r(10),b=r(0),_=r(6),S=r(252),k=n(S);r(253);var E=b.WeaLocaleProvider.getLabel,I=(0,y.observer)(o=function(e){function t(e){return(0,u.default)(this,t),(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e))}return(0,v.default)(t,e),(0,f.default)(t,[{key:"getFooter",value:function(){var e=[],t=this.props.wfFormModifyLogStore,r=t.isAll,n=t.loading;return e.push(w.default.createElement(_.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@pyust7@shownode",type:"primary",disabled:n,onClick:function(){t.switchLogRange(!r)}},r?E("386171","显示当前节点"):E("386172","显示全部节点"))),e}},{key:"render",value:function(){var e=this,t=this.props.wfFormModifyLogStore,r=this.props.belForm,n=t.loading,o=t.nodeLogs,a=t.showDialog,s=this.props.height?this.props.height:"100%",l=r?{draggable:!1,mask:!1,parentClassName:"wf-modifylog-outerdialog"}:{};return w.default.createElement(b.WeaDialog,(0,i.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@vo4057",title:E("21621","表单修改日志"),icon:"icon-coms-workflow",iconBgcolor:"#0079DE",visible:a,loading:n,onCancel:function(){t.controlDialog(!1)},buttons:this.getFooter(),style:{width:"1000px",height:"560px"}},l),w.default.createElement("div",{className:"wf-modifylog",style:{height:s,overflowY:"auto"}},o&&o.length>0?w.default.createElement("div",{className:"wf-modifylog-content"},o.map(function(t,r){return w.default.createElement(_.Card,{ecId:(e&&e.props&&e.props.ecId||"")+"_Card@tn5dsq@"+r,title:t.length>0?t[0].nodename:"",style:{marginTop:(0==r?0:32)+"px"}},t.map(function(t,r){return w.default.createElement(k.default,{ecId:(e&&e.props&&e.props.ecId||"")+"_LogItem@jqtjhw@"+r,data:mobx.toJS(t),index:r})}))})):w.default.createElement("div",{style:{height:"100%"}},!n&&w.default.createElement(b.WeaAlertPage,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaAlertPage@gs6de6",icon:"icon-coms-blank"},w.default.createElement("div",null,E("83553","暂无数据"))))))}}]),t}(w.default.Component))||o;t.default=I},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(3),a=n(o),i=r(1),s=n(i),l=r(2),c=n(l),u=r(4),d=n(u),f=r(5),p=n(f),h=r(0),m=h.WeaLocaleProvider.getLabel,v=function(e){function t(e){return(0,s.default)(this,t),(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e))}return(0,p.default)(t,e),(0,c.default)(t,[{key:"getOperatorDom",value:function(e,t,r,n,o){return!o&&parseInt(e)<0?React.createElement("span",{style:{fontSize:"14px"}},t):React.createElement("span",{style:{fontSize:"14px"}},React.createElement("a",{href:"/hrm/company/HrmDepartmentDsp.jsp?id="+r,target:"_blank"},n),""!==n&&React.createElement("span",{style:{padding:"0px 2px"}},"/"),React.createElement("a",{href:"javaScript:openhrm("+e+")",onClick:function(e){return window.pointerXY(e)}},t),o&&React.createElement("span",{style:{padding:"0px 2px"}},"->"))}},{key:"render",value:function(){var e=this,t=this.props,r=t.data,n=t.index;return React.createElement("div",{className:"wf-log-item",style:{paddingTop:(0==n?0:24)+"px"}},React.createElement("div",{className:"wf-log-describe"},r.agentid>0&&this.getOperatorDom(r.agentid,r.agentid_name,r.agentid_depid,r.agentid_depname,!0),this.getOperatorDom(r.modifierid,r.modifierid_name,r.modifierid_depid,r.modifierid_depname,!1),r.modifyoperatetype&&React.createElement("span",{style:{fontSize:"14px"}},"/",r.modifyoperatetype),React.createElement("span",{style:{paddingLeft:"20px"}},r.modifytime),parseInt(r.modifierid)>0&&React.createElement("span",{style:{paddingLeft:"20px"}},"IP:"+r.modifierip)),r.mainLog&&r.mainLog.length>0&&React.createElement("div",{className:"wf-log-main"},r.mainLog.map(function(e,t){return React.createElement("div",{className:"wf-log-mainitem"},React.createElement("span",null,t+1,"."),React.createElement("span",{style:{fontWeight:"bold",paddingLeft:"4px"}},"["),React.createElement("span",null,e.fieldlabel),React.createElement("span",{style:{fontWeight:"bold"}},"]"),React.createElement("span",{style:{padding:"0px 4px"}},m("623","由")),React.createElement("span",null,'"'),React.createElement("span",{style:{color:"red"},dangerouslySetInnerHTML:{__html:e.show1}}),React.createElement("span",null,'"'),React.createElement("span",{style:{padding:"0px 4px"}},m("21623","改为")),React.createElement("span",null,'"'),React.createElement("span",{style:{color:"red"},dangerouslySetInnerHTML:{__html:e.show2}}),React.createElement("span",null,'"'))})),r.detailLog&&r.detailLog.length>0&&r.detailLog.map(function(t,r){return React.createElement("div",{className:"wf-log-detail",style:{paddingTop:(0==r?14:24)+"px"}},React.createElement(h.WeaTable,{ecId:(e&&e.props&&e.props.ecId||"")+"_WeaTable@ephati@"+r,scroll:{x:!0},columns:t.columns,dataSource:t.dataSource,draggable:!1,pagination:!1}))}))}}]),t}(React.Component);t.default=v},function(e,t){},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r,n){r&&(0,p.default)(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function a(e,t,r,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,s,l,c,u,d,f=r(13),p=n(f),h=r(8),m=n(h),v=r(1),g=n(v),w=r(7),y=r(35),b=(i=function e(){var t=this;(0,g.default)(this,e),o(this,"loading",s,this),this.baseParams={ismonitor:0,urger:0},o(this,"isAll",l,this),o(this,"showDialog",c,this),o(this,"nodeLogs",u,this),this.closeDialogFun=null,o(this,"appendBaseParams",d,this),this.setCloseDialogFun=function(e){t.closeDialogFun=e},this.controlDialog=function(e){t.showDialog=e,e?t.getDatas():(t.nodeLogs=[],t.isAll=!1,"function"===typeof t.closeDialogFun&&t.closeDialogFun())},this.switchLogRange=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.isAll=e,t.getDatas()},this.getDatas=function(){t.loading=!0,(0,y.getModifyLog)((0,m.default)({},t.baseParams,{isAll:t.isAll?1:0})).then(function(e){t.loading=!1,t.nodeLogs=e.nodeLogs})},this.appendBaseParams=this.appendBaseParams,this.setCloseDialogFun=this.setCloseDialogFun,this.controlDialog=this.controlDialog,this.switchLogRange=this.switchLogRange,this.getDatas=this.getDatas},s=a(i.prototype,"loading",[w.observable],{enumerable:!0,initializer:function(){return!1}}),l=a(i.prototype,"isAll",[w.observable],{enumerable:!0,initializer:function(){return!1}}),c=a(i.prototype,"showDialog",[w.observable],{enumerable:!0,initializer:function(){return!1}}),u=a(i.prototype,"nodeLogs",[w.observable],{enumerable:!0,initializer:function(){return[]}}),d=a(i.prototype,"appendBaseParams",[w.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.baseParams=(0,m.default)({},e.baseParams,t),r&&e.controlDialog(!0)}}}),i);t.default=b},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(3),i=n(a),s=r(1),l=n(s),c=r(2),u=n(c),d=r(4),f=n(d),p=r(5),h=n(p),m=r(9),v=n(m),g=r(10),w=r(0),y=r(11),b=r(40);!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(b);r(43);var _=y.WeaTableNew.WeaTable,S=w.WeaLocaleProvider.getLabel,k=(0,g.observer)(o=function(e){function t(e){return(0,l.default)(this,t),(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.wfFormResourceStore,r=e.commonParam,n={};["requestid","isrequest","desrequestid","iswfshare","authStr","authSignatureStr","f_weaver_belongto_userid","f_weaver_belongto_usertype","isurger","nodeid","isurger","iscowork","coworkid","agentType","agentorByAgentId"].map(function(e){n[e]=r[e]}),t.setBaseParam(n),t.switchTab("0")}},{key:"render",value:function(){var e=this,t=this.props.wfFormResourceStore,r=t.tabKey,n=t.tableStore,o=[{title:S("332","全部"),key:"0"},{title:S("22105","相关流程"),key:"1"},{title:S("857","相关文档"),key:"2"},{title:S("22194","相关附件"),key:"3"}];return v.default.createElement("div",{className:"wf-resources"},v.default.createElement("div",{className:"wf-resources-tab"},o.map(function(t){var n=t.key==r,o=n?{background:"#4bb1fb",color:"#fff"}:{background:"transparent",color:"#848484"};return v.default.createElement("div",{className:"wf-resources-tab-item",style:o,onClick:e.switchTab.bind(e,t.key)},t.title)})),v.default.createElement(_,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaTable@yyvzcb",comsWeaTableStore:n,hasOrder:!0,needScroll:!0}))}},{key:"switchTab",value:function(e){this.props.wfFormResourceStore.switchTab(e)}}]),t}(v.default.Component))||o;t.default=w.WeaTools.tryCatch(v.default,function(e){return v.default.createElement(w.WeaErrorPage,{ecId:"_WeaErrorPage@pqmoff",msg:e.error?e.error:S(383324,"对不起，该页面异常，请联系管理员")})},{error:""})(k);var E={downLoad:function(e,t){var r=t.split("+");r[0],r[1],r[2];WfForm.downLoadFile(e)},openReq:function(e,t){var r=t.split("+"),n=(r[0],r[1]),o=r[2],a=WfForm.getGlobalStore(),i=a.commonParam,s=i.f_weaver_belongto_userid,l=i.f_weaver_belongto_usertype;window.open((window.ecologyContentPath||"")+"/workflow/request/ViewRequestForwardSPA.jsp?isrequest=1&requestid="+e+"&authStr="+n+"&authSignatureStr="+o+"&f_weaver_belongto_userid="+s+"&f_weaver_belongto_usertype="+l)},openDoc:function(e,t){var r=t.split("+"),n=r[0],o=r[1],a=r[2],i=WfForm.getGlobalStore(),s=i.commonParam,l=s.docViewUrl,c=s.f_weaver_belongto_userid,u=s.f_weaver_belongto_usertype;window.open(l+"?isrequest=1&id="+e+"&requestid="+n+"&authStr="+o+"&authSignatureStr="+a+"&f_weaver_belongto_userid="+c+"&f_weaver_belongto_usertype="+u)}};window.resourceOperate=E},function(e,t,r){var n=r(147),o=n(Object.keys,Object);e.exports=o},function(e,t,r){var n=r(41),o=r(24),a=n(o,"DataView");e.exports=a},function(e,t,r){function n(e){return!(!i(e)||a(e))&&(o(e)?h:c).test(s(e))}var o=r(15),a=r(261),i=r(25),s=r(150),l=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,u=Function.prototype,d=Object.prototype,f=u.toString,p=d.hasOwnProperty,h=RegExp("^"+f.call(p).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=n},function(e,t,r){function n(e){var t=i.call(e,l),r=e[l];try{e[l]=void 0;var n=!0}catch(e){}var o=s.call(e);return n&&(t?e[l]=r:delete e[l]),o}var o=r(51),a=Object.prototype,i=a.hasOwnProperty,s=a.toString,l=o?o.toStringTag:void 0;e.exports=n},function(e,t){function r(e){return o.call(e)}var n=Object.prototype,o=n.toString;e.exports=r},function(e,t,r){function n(e){return!!a&&a in e}var o=r(262),a=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=n},function(e,t,r){var n=r(24),o=n["__core-js_shared__"];e.exports=o},function(e,t){function r(e,t){return null==e?void 0:e[t]}e.exports=r},function(e,t,r){var n=r(41),o=r(24),a=n(o,"Promise");e.exports=a},function(e,t,r){var n=r(41),o=r(24),a=n(o,"WeakMap");e.exports=a},function(e,t,r){function n(e){return a(e)&&o(e)==i}var o=r(36),a=r(22),i="[object Arguments]";e.exports=n},function(e,t){function r(){return!1}e.exports=r},function(e,t,r){function n(e){return i(e)&&a(e.length)&&!!s[o(e)]}var o=r(36),a=r(110),i=r(22),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=n},function(e,t,r){function n(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:o(e,t,r)}var o=r(153);e.exports=n},function(e,t,r){function n(e,t){for(var r=e.length;r--&&o(t,e[r],0)>-1;);return r}var o=r(63);e.exports=n},function(e,t){function r(e){return e!==e}e.exports=r},function(e,t){function r(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}e.exports=r},function(e,t,r){function n(e,t){for(var r=-1,n=e.length;++r<n&&o(t,e[r],0)>-1;);return r}var o=r(63);e.exports=n},function(e,t,r){function n(e){return a(e)?i(e):o(e)}var o=r(275),a=r(155),i=r(276);e.exports=n},function(e,t){function r(e){return e.split("")}e.exports=r},function(e,t){function r(e){return e.match(d)||[]}var n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",i="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",l="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",a,i].join("|")+")[\\ufe0e\\ufe0f]?"+s+")*",c="[\\ufe0e\\ufe0f]?"+s+l,u="(?:"+["[^\\ud800-\\udfff]"+n+"?",n,a,i,"[\\ud800-\\udfff]"].join("|")+")",d=RegExp(o+"(?="+o+")|"+u+c,"g");e.exports=r},function(e,t,r){function n(e,t,r,n,v,w){var y=c(e),b=c(t),_=y?h:l(e),S=b?h:l(t);_=_==p?m:_,S=S==p?m:S;var k=_==m,E=S==m,I=_==S;if(I&&u(e)){if(!u(t))return!1;y=!0,k=!1}if(I&&!k)return w||(w=new o),y||d(e)?a(e,t,r,n,v,w):i(e,t,_,r,n,v,w);if(!(r&f)){var C=k&&g.call(e,"__wrapped__"),R=E&&g.call(t,"__wrapped__");if(C||R){var x=C?e.value():e,P=R?t.value():t;return w||(w=new o),v(x,P,r,n,w)}}return!!I&&(w||(w=new o),s(e,t,r,n,v,w))}var o=r(82),a=r(156),i=r(303),s=r(305),l=r(50),c=r(14),u=r(60),d=r(79),f=1,p="[object Arguments]",h="[object Array]",m="[object Object]",v=Object.prototype,g=v.hasOwnProperty;e.exports=n},function(e,t){function r(){this.__data__=[],this.size=0}e.exports=r},function(e,t,r){function n(e){var t=this.__data__,r=o(t,e);return!(r<0)&&(r==t.length-1?t.pop():i.call(t,r,1),--this.size,!0)}var o=r(84),a=Array.prototype,i=a.splice;e.exports=n},function(e,t,r){function n(e){var t=this.__data__,r=o(t,e);return r<0?void 0:t[r][1]}var o=r(84);e.exports=n},function(e,t,r){function n(e){return o(this.__data__,e)>-1}var o=r(84);e.exports=n},function(e,t,r){function n(e,t){var r=this.__data__,n=o(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var o=r(84);e.exports=n},function(e,t,r){function n(){this.__data__=new o,this.size=0}var o=r(83);e.exports=n},function(e,t){function r(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}e.exports=r},function(e,t){function r(e){return this.__data__.get(e)}e.exports=r},function(e,t){function r(e){return this.__data__.has(e)}e.exports=r},function(e,t,r){function n(e,t){var r=this.__data__;if(r instanceof o){var n=r.__data__;if(!a||n.length<s-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new i(n)}return r.set(e,t),this.size=r.size,this}var o=r(83),a=r(109),i=r(113),s=200;e.exports=n},function(e,t,r){function n(){this.size=0,this.__data__={hash:new o,map:new(i||a),string:new o}}var o=r(289),a=r(83),i=r(109);e.exports=n},function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var o=r(290),a=r(291),i=r(292),s=r(293),l=r(294);n.prototype.clear=o,n.prototype.delete=a,n.prototype.get=i,n.prototype.has=s,n.prototype.set=l,e.exports=n},function(e,t,r){function n(){this.__data__=o?o(null):{},this.size=0}var o=r(85);e.exports=n},function(e,t){function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=r},function(e,t,r){function n(e){var t=this.__data__;if(o){var r=t[e];return r===a?void 0:r}return s.call(t,e)?t[e]:void 0}var o=r(85),a="__lodash_hash_undefined__",i=Object.prototype,s=i.hasOwnProperty;e.exports=n},function(e,t,r){function n(e){var t=this.__data__;return o?void 0!==t[e]:i.call(t,e)}var o=r(85),a=Object.prototype,i=a.hasOwnProperty;e.exports=n},function(e,t,r){function n(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=o&&void 0===t?a:t,this}var o=r(85),a="__lodash_hash_undefined__";e.exports=n},function(e,t,r){function n(e){var t=o(this,e).delete(e);return this.size-=t?1:0,t}var o=r(86);e.exports=n},function(e,t){function r(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=r},function(e,t,r){function n(e){return o(this,e).get(e)}var o=r(86);e.exports=n},function(e,t,r){function n(e){return o(this,e).has(e)}var o=r(86);e.exports=n},function(e,t,r){function n(e,t){var r=o(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var o=r(86);e.exports=n},function(e,t){function r(e){return this.__data__.set(e,n),this}var n="__lodash_hash_undefined__";e.exports=r},function(e,t){function r(e){return this.__data__.has(e)}e.exports=r},function(e,t){function r(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}e.exports=r},function(e,t,r){function n(e,t,r,n,o,k,I){switch(r){case S:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case _:return!(e.byteLength!=t.byteLength||!k(new a(e),new a(t)));case f:case p:case v:return i(+e,+t);case h:return e.name==t.name&&e.message==t.message;case g:case y:return e==t+"";case m:var C=l;case w:var R=n&u;if(C||(C=c),e.size!=t.size&&!R)return!1;var x=I.get(e);if(x)return x==t;n|=d,I.set(e,t);var P=s(C(e),C(t),n,o,k,I);return I.delete(e),P;case b:if(E)return E.call(e)==E.call(t)}return!1}var o=r(51),a=r(159),i=r(64),s=r(156),l=r(304),c=r(114),u=1,d=2,f="[object Boolean]",p="[object Date]",h="[object Error]",m="[object Map]",v="[object Number]",g="[object RegExp]",w="[object Set]",y="[object String]",b="[object Symbol]",_="[object ArrayBuffer]",S="[object DataView]",k=o?o.prototype:void 0,E=k?k.valueOf:void 0;e.exports=n},function(e,t){function r(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}e.exports=r},function(e,t,r){function n(e,t,r,n,i,l){var c=r&a,u=o(e),d=u.length;if(d!=o(t).length&&!c)return!1;for(var f=d;f--;){var p=u[f];if(!(c?p in t:s.call(t,p)))return!1}var h=l.get(e);if(h&&l.get(t))return h==t;var m=!0;l.set(e,t),l.set(t,e);for(var v=c;++f<d;){p=u[f];var g=e[p],w=t[p];if(n)var y=c?n(w,g,p,t,e,l):n(g,w,p,e,t,l);if(!(void 0===y?g===w||i(g,w,r,n,l):y)){m=!1;break}v||(v="constructor"==p)}if(m&&!v){var b=e.constructor,_=t.constructor;b!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _)&&(m=!1)}return l.delete(e),l.delete(t),m}var o=r(160),a=1,i=Object.prototype,s=i.hasOwnProperty;e.exports=n},function(e,t){function r(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}e.exports=r},function(e,t,r){function n(e,t){return null!=e&&a(e,t,o)}var o=r(308),a=r(165);e.exports=n},function(e,t){function r(e,t){return null!=e&&o.call(e,t)}var n=Object.prototype,o=n.hasOwnProperty;e.exports=r},function(e,t,r){var n=r(310),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,i=n(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,function(e,r,n,o){t.push(n?o.replace(a,"$1"):r||e)}),t});e.exports=i},function(e,t,r){function n(e){var t=o(e,function(e){return r.size===a&&r.clear(),e}),r=t.cache;return t}var o=r(311),a=500;e.exports=n},function(e,t,r){function n(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(a);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var i=e.apply(this,n);return r.cache=a.set(o,i)||a,i};return r.cache=new(n.Cache||o),r}var o=r(113),a="Expected a function";n.Cache=o,e.exports=n},function(e,t,r){function n(e){if(null==e)return 0;if(i(e))return s(e)?l(e):e.length;var t=a(e);return t==c||t==u?e.size:o(e).length}var o=r(108),a=r(50),i=r(29),s=r(169),l=r(313),c="[object Map]",u="[object Set]";e.exports=n},function(e,t,r){function n(e){return a(e)?i(e):o(e)}var o=r(314),a=r(155),i=r(315);e.exports=n},function(e,t,r){var n=r(170),o=n("length");e.exports=o},function(e,t){function r(e){for(var t=d.lastIndex=0;d.test(e);)++t;return t}var n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",i="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",l="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",a,i].join("|")+")[\\ufe0e\\ufe0f]?"+s+")*",c="[\\ufe0e\\ufe0f]?"+s+l,u="(?:"+["[^\\ud800-\\udfff]"+n+"?",n,a,i,"[\\ud800-\\udfff]"].join("|")+")",d=RegExp(o+"(?="+o+")|"+u+c,"g");e.exports=r},function(e,t,r){function n(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var s=null==r?0:a(r);return s<0&&(s=i(n+s,0)),o(e,t,s)}var o=r(63),a=r(118),i=Math.max;e.exports=n},function(e,t,r){function n(e){if(!e)return 0===e?e:0;if((e=o(e))===a||e===-a){return(e<0?-1:1)*i}return e===e?e:0}var o=r(171),a=1/0,i=1.7976931348623157e308;e.exports=n},function(e,t){function r(e){return function(t,r,n){for(var o=-1,a=Object(t),i=n(t),s=i.length;s--;){var l=i[e?s:++o];if(!1===r(a[l],l,a))break}return t}}e.exports=r},function(e,t,r){function n(e){return"function"==typeof e?e:o}var o=r(65);e.exports=n},function(e,t,r){function n(e){if(!o(e))return i(e);var t=a(e),r=[];for(var n in e)("constructor"!=n||!t&&l.call(e,n))&&r.push(n);return r}var o=r(25),a=r(77),i=r(321),s=Object.prototype,l=s.hasOwnProperty;e.exports=n},function(e,t){function r(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}e.exports=r},function(e,t,r){var n=r(323),o=r(329),a=o(function(e,t,r){n(e,t,r)});e.exports=a},function(e,t,r){function n(e,t,r,d,f){e!==t&&i(t,function(i,c){if(f||(f=new o),l(i))s(e,t,c,r,n,d,f);else{var p=d?d(u(e,c),i,c+"",e,t,f):void 0;void 0===p&&(p=i),a(e,c,p)}},c)}var o=r(82),a=r(173),i=r(119),s=r(324),l=r(25),c=r(66),u=r(178);e.exports=n},function(e,t,r){function n(e,t,r,n,y,b,_){var S=g(e,r),k=g(t,r),E=_.get(k);if(E)return void o(e,r,E);var I=b?b(S,k,r+"",e,t,_):void 0,C=void 0===I;if(C){var R=u(k),x=!R&&f(k),P=!R&&!x&&v(k);I=k,R||x||P?u(S)?I=S:d(S)?I=s(S):x?(C=!1,I=a(k,!0)):P?(C=!1,I=i(k,!0)):I=[]:m(k)||c(k)?(I=S,c(S)?I=w(S):h(S)&&!p(S)||(I=l(k))):C=!1}C&&(_.set(k,I),y(I,k,n,b,_),_.delete(k)),o(e,r,I)}var o=r(173),a=r(175),i=r(176),s=r(122),l=r(177),c=r(59),u=r(14),d=r(326),f=r(60),p=r(15),h=r(25),m=r(327),v=r(79),g=r(178),w=r(328);e.exports=n},function(e,t,r){var n=r(25),o=Object.create,a=function(){function e(){}return function(t){if(!n(t))return{};if(o)return o(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();e.exports=a},function(e,t,r){function n(e){return a(e)&&o(e)}var o=r(29),a=r(22);e.exports=n},function(e,t,r){function n(e){if(!i(e)||o(e)!=s)return!1;var t=a(e);if(null===t)return!0;var r=d.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&u.call(r)==f}var o=r(36),a=r(123),i=r(22),s="[object Object]",l=Function.prototype,c=Object.prototype,u=l.toString,d=c.hasOwnProperty,f=u.call(Object);e.exports=n},function(e,t,r){function n(e){return o(e,a(e))}var o=r(67),a=r(66);e.exports=n},function(e,t,r){function n(e){return o(function(t,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,s=o>2?r[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,s&&a(r[0],r[1],s)&&(i=o<3?void 0:i,o=1),t=Object(t);++n<o;){var l=r[n];l&&e(t,l,n,i)}return t})}var o=r(180),a=r(181);e.exports=n},function(e,t,r){function n(e,t,r){return t=a(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,s=a(n.length-t,0),l=Array(s);++i<s;)l[i]=n[t+i];i=-1;for(var c=Array(t+1);++i<t;)c[i]=n[i];return c[t]=r(l),o(e,this,c)}}var o=r(331),a=Math.max;e.exports=n},function(e,t){function r(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}e.exports=r},function(e,t,r){var n=r(333),o=r(335),a=o(n);e.exports=a},function(e,t,r){var n=r(334),o=r(174),a=r(65),i=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:a;e.exports=i},function(e,t){function r(e){return function(){return e}}e.exports=r},function(e,t){function r(e){var t=0,r=0;return function(){var i=a(),s=o-(i-r);if(r=i,s>0){if(++t>=n)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var n=800,o=16,a=Date.now;e.exports=r},function(e,t,r){function n(e,t,r,L,T,F){var A,M=t&I,W=t&C,j=t&R;if(r&&(A=T?r(e,L,T,F):r(e)),void 0!==A)return A;if(!S(e))return e;var B=y(e);if(B){if(A=v(e),!M)return u(e,A)}else{var z=m(e),q=z==P||z==N;if(b(e))return c(e,M);if(z==D||z==x||q&&!T){if(A=W||q?{}:w(e),!M)return W?f(e,l(A,e)):d(e,s(A,e))}else{if(!O[z])return T?e:{};A=g(e,z,M)}}F||(F=new o);var U=F.get(e);if(U)return U;F.set(e,A),k(e)?e.forEach(function(o){A.add(n(o,t,r,o,e,F))}):_(e)&&e.forEach(function(o,a){A.set(a,n(o,t,r,a,e,F))});var V=j?W?h:p:W?keysIn:E,G=B?void 0:V(e);return a(G||e,function(o,a){G&&(a=o,o=e[a]),i(A,a,n(o,t,r,a,e,F))}),A}var o=r(82),a=r(337),i=r(179),s=r(338),l=r(339),c=r(175),u=r(122),d=r(340),f=r(341),p=r(160),h=r(342),m=r(50),v=r(343),g=r(344),w=r(177),y=r(14),b=r(60),_=r(348),S=r(25),k=r(350),E=r(52),I=1,C=2,R=4,x="[object Arguments]",P="[object Function]",N="[object GeneratorFunction]",D="[object Object]",O={};O[x]=O["[object Array]"]=O["[object ArrayBuffer]"]=O["[object DataView]"]=O["[object Boolean]"]=O["[object Date]"]=O["[object Float32Array]"]=O["[object Float64Array]"]=O["[object Int8Array]"]=O["[object Int16Array]"]=O["[object Int32Array]"]=O["[object Map]"]=O["[object Number]"]=O[D]=O["[object RegExp]"]=O["[object Set]"]=O["[object String]"]=O["[object Symbol]"]=O["[object Uint8Array]"]=O["[object Uint8ClampedArray]"]=O["[object Uint16Array]"]=O["[object Uint32Array]"]=!0,O["[object Error]"]=O[P]=O["[object WeakMap]"]=!1,e.exports=n},function(e,t){function r(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}e.exports=r},function(e,t,r){function n(e,t){return e&&o(t,a(t),e)}var o=r(67),a=r(52);e.exports=n},function(e,t,r){function n(e,t){return e&&o(t,a(t),e)}var o=r(67),a=r(66);e.exports=n},function(e,t,r){function n(e,t){return o(e,a(e),t)}var o=r(67),a=r(115);e.exports=n},function(e,t,r){function n(e,t){return o(e,a(e),t)}var o=r(67),a=r(182);e.exports=n},function(e,t,r){function n(e){return o(e,i,a)}var o=r(161),a=r(182),i=r(66);e.exports=n},function(e,t){function r(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&o.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var n=Object.prototype,o=n.hasOwnProperty;e.exports=r},function(e,t,r){function n(e,t,r){var n=e.constructor;switch(t){case g:return o(e);case c:case u:return new n(+e);case w:return a(e,r);case y:case b:case _:case S:case k:case E:case I:case C:case R:return l(e,r);case d:return new n;case f:case m:return new n(e);case p:return i(e);case h:return new n;case v:return s(e)}}var o=r(121),a=r(345),i=r(346),s=r(347),l=r(176),c="[object Boolean]",u="[object Date]",d="[object Map]",f="[object Number]",p="[object RegExp]",h="[object Set]",m="[object String]",v="[object Symbol]",g="[object ArrayBuffer]",w="[object DataView]",y="[object Float32Array]",b="[object Float64Array]",_="[object Int8Array]",S="[object Int16Array]",k="[object Int32Array]",E="[object Uint8Array]",I="[object Uint8ClampedArray]",C="[object Uint16Array]",R="[object Uint32Array]";e.exports=n},function(e,t,r){function n(e,t){var r=t?o(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var o=r(121);e.exports=n},function(e,t){function r(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}var n=/\w*$/;e.exports=r},function(e,t,r){function n(e){return i?Object(i.call(e)):{}}var o=r(51),a=o?o.prototype:void 0,i=a?a.valueOf:void 0;e.exports=n},function(e,t,r){var n=r(349),o=r(61),a=r(80),i=a&&a.isMap,s=i?o(i):n;e.exports=s},function(e,t,r){function n(e){return a(e)&&o(e)==i}var o=r(50),a=r(22),i="[object Map]";e.exports=n},function(e,t,r){var n=r(351),o=r(61),a=r(80),i=a&&a.isSet,s=i?o(i):n;e.exports=s},function(e,t,r){function n(e){return a(e)&&o(e)==i}var o=r(50),a=r(22),i="[object Set]";e.exports=n},function(e,t,r){function n(e){return null==e?[]:o(e,a(e))}var o=r(353),a=r(52);e.exports=n},function(e,t,r){function n(e,t){return o(t,function(t){return e[t]})}var o=r(111);e.exports=n},function(e,t,r){function n(e){var t=a(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(r){return r===e||o(r,e,t)}}var o=r(355),a=r(356),i=r(184);e.exports=n},function(e,t,r){function n(e,t,r,n){var l=r.length,c=l,u=!n;if(null==e)return!c;for(e=Object(e);l--;){var d=r[l];if(u&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++l<c;){d=r[l];var f=d[0],p=e[f],h=d[1];if(u&&d[2]){if(void 0===p&&!(f in e))return!1}else{var m=new o;if(n)var v=n(p,h,f,e,t,m);if(!(void 0===v?a(h,p,i|s,n,m):v))return!1}}return!0}var o=r(82),a=r(112),i=1,s=2;e.exports=n},function(e,t,r){function n(e){for(var t=a(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,o(i)]}return t}var o=r(183),a=r(52);e.exports=n},function(e,t,r){function n(e,t){return s(e)&&l(t)?c(u(e),t):function(r){var n=a(r,e);return void 0===n&&n===t?i(r,e):o(t,n,d|f)}}var o=r(112),a=r(167),i=r(358),s=r(117),l=r(183),c=r(184),u=r(88),d=1,f=2;e.exports=n},function(e,t,r){function n(e,t){return null!=e&&a(e,t,o)}var o=r(359),a=r(165);e.exports=n},function(e,t){function r(e,t){return null!=e&&t in Object(e)}e.exports=r},function(e,t,r){function n(e){return i(e)?o(s(e)):a(e)}var o=r(170),a=r(361),i=r(117),s=r(88);e.exports=n},function(e,t,r){function n(e){return function(t){return o(t,e)}}var o=r(168);e.exports=n},function(e,t,r){function n(e,t,r,n){for(var a=e.length,i=n?a:-1;(n?i--:++i<a)&&t(e[i],i,e););return r?o(e,n?0:i,n?i+1:a):o(e,n?i+1:0,n?a:i)}var o=r(153);e.exports=n},function(e,t,r){function n(e){return i(e)||a(e)||!!(s&&e&&e[s])}var o=r(51),a=r(59),i=r(14),s=o?o.isConcatSpreadable:void 0;e.exports=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r,n){r&&(0,v.default)(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function a(e,t,r,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,s,l,c,u,d,f,p,h,m=r(13),v=n(m),g=r(8),w=n(g),y=r(90),b=n(y),_=r(1),S=n(_),k=r(2),E=n(k),I=r(7),C=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(I),r(11)),R=r(35),x=C.WeaTableNew.TableStore,P=(i=(0,I.action)("切换tab"),s=(0,I.action)("加载数据"),l=function(){function e(){(0,S.default)(this,e),this.baseParam={},o(this,"tabKey",c,this),o(this,"tableStoreMap",u,this),o(this,"setBaseParam",d,this),o(this,"appendTableStoreMap",f,this),o(this,"switchTab",p,this),o(this,"loadData",h,this),this.setBaseParam=this.setBaseParam,this.switchTab=this.switchTab}return(0,E.default)(e,[{key:"tableStore",get:function(){return this.tableStoreMap.has(this.tabKey)?this.tableStoreMap.get(this.tabKey):new x}}]),e}(),c=a(l.prototype,"tabKey",[I.observable],{enumerable:!0,initializer:function(){return"0"}}),u=a(l.prototype,"tableStoreMap",[I.observable],{enumerable:!0,initializer:function(){return I.observable.map?I.observable.map({}):(0,I.asMap)({})}}),a(l.prototype,"tableStore",[I.computed],(0,b.default)(l.prototype,"tableStore"),l.prototype),d=a(l.prototype,"setBaseParam",[I.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.baseParam=t}}}),f=a(l.prototype,"appendTableStoreMap",[I.action],{enumerable:!0,initializer:function(){var e=this;return function(t){e.tableStoreMap.set(e.tabKey,t)}}}),p=a(l.prototype,"switchTab",[i],{enumerable:!0,initializer:function(){var e=this;return function(t){e.tabKey=t.toString(),e.tableStoreMap.has(e.tabKey)||e.loadData()}}}),h=a(l.prototype,"loadData",[s],{enumerable:!0,initializer:function(){var e=this;return function(){var t=(0,w.default)({},e.baseParam,{tabindex:e.tabKey});(0,R.getFormResourcesKey)(t).then(function(t){var r=t.sessionkey,n=new x;n.getDatas(r),e.appendTableStoreMap(n)})}}}),l);t.default=P},function(e,t,r){r(366);var n=r(12).Object;e.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)}},function(e,t,r){var n=r(39),o=r(107).f;r(103)("getOwnPropertyDescriptor",function(){return function(e,t){return o(n(e),t)}})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=r(8),i=n(a),s=r(3),l=n(s),c=r(1),u=n(c),d=r(2),f=n(d),p=r(4),h=n(p),m=r(5),v=n(m);r(368),r(369),r(370);var g=r(7),w=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(g),r(6)),y=r(372),b=n(y),_=r(10),S=r(377),k=r(0),E=k.WeaLocaleProvider.getLabel,I=(0,_.observer)(o=function(e){function t(e){(0,u.default)(this,t);var r=(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return r.onTabMounted=function(){setTimeout(function(){jQuery(".wf-sign-subsign-wrap").bind("hover",function(){setTimeout(function(){var e=500;jQuery(".wf-req-sign-list").height()+40<=500&&(e=jQuery(".wf-req-sign-list").height()+40),jQuery(".wf-sign-subsign-wrap  ul").css("maxHeight",e)},50)})},500)},r.changeData=function(e,t){if("4"!==e&&"5"!==e){var n=r.props.logListStore,o=n.requestLogParams,a=void 0===o?{}:o,i=(n.logListTabKey,n.changeLogListTab),s=n.updateLogParams,l=(n.loadRefReqSignInfo,a.allrequestInfos),c=void 0===l?[]:l,u=a.wfsignlddtcnt,d=a.userId,f=e,p={pgnumber:1,maxrequestlogid:0};c.filter(function(t){var r=t.requestid,n=t.type,o=t.relwfid,a=t.relviewlogs;r!=e&&"3"!==e||("main"==n&&(f="3",e=r,p.isrequest=3),"sub"==n&&(f="4",p.isrequest=2),"parallel"==n&&(f="5",p.isrequest=4),p.requestid=r,p.workflowid=o,p.viewLogIds=a,p.wfsignlddtcnt=u,p.pgnumber=1,p.maxrequestlogid=0,p.loadmethod="split")}),i(f,e),"2"===e&&(p.atmet=d),"1"===e&&(p.atmet=""),s(p,!0)}},r}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=jQuery(".wf-req-form-scroll");t.scroll(function(){var r=e.props.logListStore,n=r.loading,o=void 0!==n&&n,a=r.requestLogParams,i=void 0===a?{}:a,s=r.logList,l=void 0===s?[]:s,c=r.logCount,u=void 0===c?0:c,d=r.scrollLoadSign,f=r.logParams,p=void 0===f?{}:f,h=r.logListTabKey,m=r.relLogParams,v=i.loadmethod,g=void 0===v?"split":v,w=jQuery(this).scrollTop();if("scroll"==g){var y=t.height(),b=jQuery(".wf-req-form-wrapper").height(),_=0,S=0;if(h>2){var k=m.pgnumber,E=void 0===k?1:k,I=m.maxrequestlogid,C=void 0===I?0:I;_=E,S=C}else{var R=p.pgnumber,x=void 0===R?1:R,P=p.maxrequestlogid,N=void 0===P?0:P;_=x,S=N}var D=b-(w+y);D<200&&D>0&&!o&&l.length<u&&d({pgnumber:parseInt(_)+1,maxrequestlogid:S})}})}},{key:"componentDidUpdate",value:function(){var e=this.props.logListStore,t=e.logList;(void 0===t?[]:t).length>0&&window.formImgLazyLoad(jQuery(".wf-req-loglist"))}},{key:"getLogTabs",value:function(){var e=this.props.logListStore,t=e.requestLogParams,r=void 0===t?{}:t,n=r.isRelatedTome,o=r.hasMainWfRight,a=r.hasChildWfRight,i=r.hasParallelWfRight,s=r.isReadParallel,l=r.allrequestInfos,c=void 0===l?[]:l,u=r.tablabel1,d=void 0===u?"":u,f=r.tablabel2,p=void 0===f?"":f,h=r.tablabel3,m=void 0===h?"":h,v=r.tablabel4,g=void 0===v?"":v,w=r.tablabel5,y=void 0===w?"":w,b=o?c.filter(function(e){return"main"==e.type}):"",_=a?c.filter(function(e){return"sub"==e.type}):"",S=i?c.filter(function(e){return"parallel"==e.type}):"",k=[{title:d,key:"1"}];return n&&k.push({title:p,key:"2"}),b&&k.push({title:m,key:"3"}),_&&k.push({title:React.createElement("span",null,g," ",React.createElement("i",{className:"icon-top-Arrow"})),dropMenu:_,key:"4"}),S&&"1"==s&&k.push({title:React.createElement("span",null,y," ",React.createElement("i",{className:"icon-top-Arrow"})),dropMenu:S,key:"5"}),k}},{key:"getSignshowname",value:function(){var e=this.props.logListStore,t=e.logListTabKey,r=e.requestLogParams,n=void 0===r?{}:r,o=e.refRequestId,a="",i=n.allrequestInfos,s=void 0===i?[]:i;return t>2&&s.filter(function(e){e.requestid==o&&(a=e.signshowname)}),a}},{key:"getTabButtons",value:function(){var e=this.props.logListStore,t=e.isShowUserheadimg,r=e.controllShowUserImg;return[React.createElement("i",{className:"icon-search-Customer",style:{color:t?"#7287f2":""},onClick:function(){return r()}}),React.createElement("span",{style:{fontSize:16,color:"#d6d6d6"}},"|")]}},{key:"render",value:function(){var e=this,t=this.props,r=t.logListStore,n=t.setTabKey,o=t.isOpenCommunication,a=t.forward,s=t.forwardEvent,l=t.controlVariableMap,c=t.variableMap,u=t.secondAuthStore,d=t.showAuthDetail,f=t.closeAuthDetail,p=r.logListTabKey,h=r.requestLogParams,m=void 0===h?{}:h,v=r.logList,g=void 0===v?[]:v,y=(r.isShowUserheadimg,r.refRequestId),_=r.loading,I=r.logItemBaseParams,C=r.showSearchDrop,R=r.controllSearchDrop,x=r.setLogPagesize,P=r.updateLogParams,N=r.currentPage,D=void 0===N?1:N,O=r.logCount,L=void 0===O?0:O,T=r.logParams,F=void 0===T?{}:T,A=r.relLogParams,M=10,W=0,j=1;parseInt(p)>2?(j=A.pgnumber,M=A.wfsignlddtcnt,W=A.isprint):(j=D,M=F.wfsignlddtcnt,W=F.isprint);var B=m.loadmethod,z=void 0===B?"split":B,q=C&&jQuery(".wf-req-sign-list").height()<330?{height:"330px"}:{};return React.createElement("div",{className:"wf-req-sign"},React.createElement(k.WeaTab,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaTab@ajh81m",buttons:this.getTabButtons(),datas:this.getLogTabs(),selectedKey:p,keyParam:"key",searchType:["drop"],countParam:"count",hasDropMenu:!0,subMenuClass:"wf-sign-subsign-wrap",showSearchDrop:C,onTabMounted:this.onTabMounted,dropIcon:React.createElement("i",{className:"icon-search-search",style:{color:"#77da88"},onClick:function(){return R(!0)}}),searchsDrop:React.createElement(S.Condition,{ecId:(this&&this.props&&this.props.ecId||"")+"_Condition@kswwfa",logListStore:r}),buttonsDrop:(0,S.getAdButtons)(r),onChange:this.changeData}),p>2&&p!=y&&React.createElement("div",{className:"wf-req-sign-main-sub"},React.createElement("span",{dangerouslySetInnerHTML:{__html:this.getSignshowname()}})),React.createElement("div",{className:"wf-req-sign-list",style:q},g.map(function(t){var p=t.logid,h=t.isProtected,m=t.checkSuccess,v=t.protectType;return"1"==m?u.setCheckResult(p,1):"2"==m&&u.setCheckResult(p,0),u.setIsProtected(p,parseInt(h)),u.setProtectType(p,parseInt(v)),React.createElement(b.default,(0,i.default)({ecId:(e&&e.props&&e.props.ecId||"")+"_LogItem@0fwfap@"+p},I,{data:t,forward:a,forwardEvent:s,setTabKey:n,isOpenCommunication:o,controlVariableMap:l,variableMap:c,logListStore:r,secondAuthStore:u,showAuthDetail:d,closeAuthDetail:f,isprint:W}))}),"split"==z&&g.length>0&&1!=W&&React.createElement(w.Pagination,{ecId:(this&&this.props&&this.props.ecId||"")+"_Pagination@1ccnct",defaultCurrent:1,showQuickJumper:!0,pageSize:M,onChange:function(e){P({pgnumber:e},!0),window.formImgLazyLoad(jQuery(".wf-req-loglist"))},current:j,total:L,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],onShowSizeChange:function(e,t){return x({logpagesize:t})},showTotal:function(e){return E(385617,"共 "+e+" 条").replace("$s",e)}}),!_&&0==g.length&&React.createElement("div",{className:"ant-table-placeholder",style:{borderBottom:0}},E("386163","暂时没有数据")),_&&React.createElement("div",{className:"ant-table-placeholder",style:{borderBottom:0}},React.createElement(w.Spin,{ecId:(this&&this.props&&this.props.ecId||"")+"_Spin@ylgnx3"}))))}}]),t}(React.Component))||o;t.default=I},function(e,t){},function(e,t){},function(e,t,r){"use strict";var n=r(371),o=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(e,t,r){var n=new window.top.Dialog;n.Model=!0,n.Width=900,n.Height=600,n.URL="/systeminfo/BrowserMain.jsp?url="+escape("/workflow/ruleDesign/showLocateOnline.jsp?useType=2&lng="+e+"&lat="+t+"&addr="+encodeURI(r)),n.Title="查看位置",n.callback=function(e){},n.show()},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.document.body,r=null;document.getElementById("map-dialog")?r=document.getElementById("map-dialog"):(r=document.createElement("div"),r.setAttribute("id","map-dialog"),document.body.appendChild(r)),ReactDOM.render(React.createElement(o.default,{ecId:"_MapDialog@k5v12x",setLayout:t,location:e}),r)};window.openMap=a,window.openlocation=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(3),a=n(o),i=r(1),s=n(i),l=r(2),c=n(l),u=r(4),d=n(u),f=r(5),p=n(f),h=r(9),m=n(h),v=r(6),g=r(0),w=r(44),y=g.WeaLocaleProvider.getLabel,b=function(e){function t(e){(0,s.default)(this,t);var r=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));r.onCancel=function(){var e={info:{},position:[]};r.setState({visible:!1,locationInfo:e}),$("#map-dialog").remove()},r.setVisible=function(e){return r.setState({visible:e})};var n=(0,w.getLocationInfoData)(e.location),o=[n.longitude,n.latitude]||[],i={name:n.name};return r.state={visible:!0,locationInfo:{info:i||{},position:o||[],citycode:""}},r}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=(0,w.getLocationInfoData)(e.location),r=[t.latitude,t.longitude]||[],n={name:t.name},o={info:n,position:r};this.setState({visible:!0,locationInfo:o})}},{key:"render",value:function(){var e=this,t=this.props.setLayout,r=void 0===t?window.document.body:t,n=this.state,o=n.visible,a=n.locationInfo,i=a.position,s=a.info,l=[m.default.createElement(v.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@kvfbks@close",onClick:function(){e.onCancel()},type:"ghost"},y(309,"关闭"))];return m.default.createElement("div",{className:"map-dialog-map"},m.default.createElement(g.WeaDialog,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@andq8w",visible:o,title:y("386191","查看位置"),style:{width:900,height:600},buttons:l,onCancel:function(){return e.onCancel()},icon:"icon-coms-workflow",iconBgcolor:"rgb(0, 121, 222)",layout:r},m.default.createElement(g.WeaMap,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaMap@r5jbb6",zoom:14,position:i,info:s,showInfoWindow:!0,showInfoWin:!0})))}}]),t}(h.Component);t.default=b},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a,i=r(8),s=n(i),l=r(3),c=n(l),u=r(1),d=n(u),f=r(2),p=n(f),h=r(4),m=n(h),v=r(5),g=n(v),w=r(6),y=r(186),b=r(124),_=(n(b),r(30)),S=(n(_),r(35)),k=r(7);r(187);var E=r(53),I=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(E),C=r(0),R=r(44),x=r(188),P=n(x),N=r(189),D=n(N),O=C.WeaLocaleProvider.getLabel,L=(a=o=function(e){function t(e){(0,d.default)(this,t);var r=(0,m.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return r.getReplyDialog=function(e,t){var n=r.props,o=n.setTabKey,a=n.logListStore,i=n.logListStore.isSubReqeuestid,s=r.state.communicateSettingKey.isShowSignCommunicate,l=null,c=document.getElementById("reply-dialog-warp"),u=function(){0==i()&&(o("communication"),window.reflashCommunicateContentList&&window.reflashCommunicateContentList())};c||(c=document.createElement("div"),c.setAttribute("id","reply-dialog-warp"),document.body.appendChild(c)),l=s?React.createElement(P.default,{ecId:(r&&r.props&&r.props.ecId||"")+"_ReplyDialog@gyxu94",replyInfo:e,replyRemarkStr:t,store:a}):React.createElement(P.default,{ecId:(r&&r.props&&r.props.ecId||"")+"_ReplyDialog@quagrp",replyInfo:e,replyRemarkStr:t,store:a,submitCallBackFun:u}),ReactDOM.render(l,c)},r.clickCheckCommunication=function(){var e=r.state.communicateSettingKey,t=e.hasSubmitRight,n=e.isOpenCommunication,o=e.isShowSignCommunicate;e.isExpendCommunicate?r.setState({communicateSettingKey:{hasSubmitRight:t,isOpenCommunication:n,isShowSignCommunicate:o,isExpendCommunicate:!1}}):r.setState({communicateSettingKey:{hasSubmitRight:t,isOpenCommunication:n,isShowSignCommunicate:o,isExpendCommunicate:!0}})},r.onContextmenu=function(){return!1},r.state={showrivebtnspan:!1,showSecondAuth:!1,allReceiveUser:"",showUsers:!1,loading:!1,edit:!1,communicateSettingKey:r.getCommunicateSettingKey(e),isBlackColor:1==window.WfForm.getGlobalStore().commonParam.isprint&&1==window.WfForm.getLayoutStore().propFileCfg.print_signList_black_color},r}return(0,g.default)(t,e),(0,p.default)(t,[{key:"getCommunicateSettingKey",value:function(e){var t={},r=!0,n=e.isOpenCommunication||"0",o=e.logListStore.communicateSettingKey.isShowSignCommunicate||"0",a=e.logListStore.communicateSettingKey.isExpendCommunicate||"0",i=e.logListStore.hasSubmitRight,s=e.logListStore.refRequestId,l=e.logListStore.requestLogParams.allrequestInfos;for(var c in l)if(l[c].requestid==s){t.isOpenCommunication=l[c].isOpenCommunication,t.isShowSignCommunicate=l[c].isShowSignCommunicate,t.isExpendCommunicate=l[c].isExpendCommunicate,t.hasSubmitRight=l[c].hasSubmitRight,r=!1;break}return r&&("1"==n&&(t.isOpenCommunication=!0),"1"==o&&(t.isShowSignCommunicate=!0),"1"==a&&(t.isExpendCommunicate=!0),t.hasSubmitRight=i),t}},{key:"componentWillReceiveProps",value:function(e){this.props.data.logid!=e.data.logid&&this.setState({showrivebtnspan:!1,showSecondAuth:!1,allReceiveUser:"",showUsers:!1,loading:!1,communicateSettingKey:this.getCommunicateSettingKey(this.props)})}},{key:"render",value:function(){var e=this,t=this.props,r=t.data,n=void 0===r?{}:r,o=t.isShowUserheadimg,a=t.forward,i=t.forwardEvent,s=(t.requestid,t.workflowid,t.authSignatureStr,t.authStr,t.controllShowAllLogOperator,t.secondAuthStore),l=t.isprint,c=this.props.logListStore,u=n.logid,d=n.displaydepid,f=void 0===d?"":d,p=n.img_path,h=void 0===p?"":p,m=n.isexsAgent,v=n.log_agentorbyagentid,g=void 0===v?"":v,y=n.displaybyagentname,b=void 0===y?"":y,_=n.displayid,S=n.displaytype,E=n.displayname,x=void 0===E?"":E,P=n.displaydepname,N=n.log_remarkHtml,L=void 0===N?"":N,T=n.annexdocs,F=void 0===T?[]:T,A=n.signdocs,M=void 0===A?[]:A,W=n.signwfs,j=void 0===W?[]:W,B=(n.userimg,n.signnaturImgHeight,n.remarkLocation),z=n.speechAttachmetnDatas,q=void 0===z?[]:z,U=n.commentList,V=void 0===U?[]:U,G=n.forwardMenuName,H=void 0===G?"":G,K=n.receiveUser,Q=void 0===K?"":K,$=n.receiveUserCount,J=void 0===$?0:$,Y=n.log_operatedate,X=n.log_operatetime,Z=n.log_nodename,ee=n.operationname,te=n.isReference,re=this.state,ne=re.showrivebtnspan,oe=re.showUsers,ae=re.allReceiveUser,ie=void 0===ae?"":ae,se=re.loading,le=re.communicateSettingKey,ce=le.isOpenCommunication,ue=le.isShowSignCommunicate,de=le.isExpendCommunicate,fe=le.hasSubmitRight,pe=(re.edit,re.isBlackColor),he=s.checkResult,me=s.isProtected,ve=s.protectTypes,ge=(0,R.getLocationInfoData)(B),we="",ye="0"==_;if(me.has(u)){var be=me.get(u),_e=ve.get(u)||0;if(1==be&&(_e==I.CA_AUTH?we+="content-right-ca-auth":_e==I.QYS&&(we+="content-right-qys-auth")),he.has(u)){var Se=he.get(u);1==Se?_e==I.CA_AUTH?we+=" content-right-ca-auth-success":_e==I.QYS&&(we+=" content-right-qys-auth-success"):0==Se&&(_e==I.CA_AUTH?we+=" content-right-ca-auth-failed":_e==I.QYS&&(we+=" content-right-qys-auth-failed"))}}var ke="/spa/hrm/engine.html#/hrmengine/organization?showTree=false&isView=1&type=department&id="+f+"&_key=3b4uab";return React.createElement("div",{className:"wf-req-sign-list-content"+(pe?" wf-req-sign-blackColor":"")},React.createElement("div",{className:"content-left",style:{paddingLeft:o?"48px":"0px"}},o&&"0"==S&&React.createElement(C.WeaAvatar,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaAvatar@ne9btc",userId:_}),o&&"1"==S&&React.createElement("img",{src:h,className:"content-text-left-user-img"}),o&&"1"==S&&React.createElement("img",{src:h,className:"content-text-left-user-img"}),o&&"2"==S&&React.createElement("img",{src:h,className:"content-text-left-user-img"}),React.createElement("div",{style:{width:"132px"}},React.createElement("p",{className:"operate-name-label"},m&&React.createElement("a",{href:"javaScript:openhrm("+g+")",onClick:function(e){return window.pointerXY(e)}},b),m&&React.createElement("span",{style:{color:"#2db7f5"}},"->"),0==S&&React.createElement("a",{href:"javaScript:openhrm("+_+")",onClick:function(e){return window.pointerXY(e)}},x),1==S&&React.createElement("a",{target:"_blank",href:"/spa/crm/static/index.html#/main/crm/customerView?customerId="+_},x),2==S&&React.createElement("span",null,x)),React.createElement("span",{className:"left-department-span"},React.createElement("a",{href:ke,target:"_blank",style:{color:"#9b9b9b","white-space":"pre-wrap"}},P)))),React.createElement("div",{className:"content-right",onMouseEnter:function(){return e.setState({showrivebtnspan:!0})},onMouseLeave:function(){return e.setState({showrivebtnspan:!1})}},React.createElement("div",{className:"content-right-remark-html",dangerouslySetInnerHTML:{__html:L}}),q&&q.map(function(t,r){return React.createElement(C.WeaAudio,{ecId:(e&&e.props&&e.props.ecId||"")+"_WeaAudio@3hruvq@"+r,id:"audio_"+u+"_"+r,onRef:function(e){},src:t})}),F.length>0&&React.createElement("div",{className:"content-right-docs"},React.createElement("i",{className:"icon-mail-enclosure"}),React.createElement("div",null,F.map(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.filelink,n=void 0===r?"":r,o=t.tempshowname,a=void 0===o?"":o,i=t.fileExtendName,s=void 0===i?"":i,l=t.downloadlink,c=void 0===l?"":l,u=t.docImagefileSize,d=t.showdownload;return React.createElement("p",null,React.createElement("a",{target:"_blank",href:n},a+"."+s)," ",1==d&&React.createElement("a",{onClick:function(){e.download(c+"&_t="+(new Date).getTime())}},"["+O("31156","下载")+"("+(u/1e3).toFixed(1)+"k)]"))}))),M.length>0&&React.createElement("div",{className:"content-right-docs"},React.createElement("i",{className:"icon-search-File"}),React.createElement("div",null,M.map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement("p",null,React.createElement("a",{target:"_blank",href:e.filelink},e.tempshowname))}))),j.length>0&&React.createElement("div",{className:"content-right-docs"},React.createElement("i",{className:"icon-coms-workflow"}),React.createElement("div",null,j.map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement("p",null,React.createElement("a",{target:"_blank",onClick:function(){openFullWindowHaveBar((window.ecologyContentPath||"")+"/workflow/request/ViewRequestForwardSPA.jsp?requestid="+e.requestid+"&isrequest=1&isovertime=0&desrequestid="+e.desrequestid+e.authSignatureInfo+"&f_weaver_belongto_userid="+e.f_weaver_belongto_userid+"&f_weaver_belongto_usertype="+e.f_weaver_belongto_usertype)}},e.title))}))),"null"!==B&&ge.longitude&&React.createElement("div",{className:"content-right-docs"},React.createElement("i",{className:"icon-coms-position",title:O(22981,"位置")}),React.createElement("div",null,React.createElement("a",{onClick:function(){window.openlocation(B,jQuery("#container")[0])}},ge.name))),this.getUserImg(n),!oe&&React.createElement("p",{className:"logitem-Recipient"},React.createElement("span",null,O("15525","接收人")," : "),Q.replace(/,/g," "),se&&React.createElement(w.Spin,{ecId:(this&&this.props&&this.props.ecId||"")+"_Spin@0pr8d9",size:"small"}),!se&&J>20&&React.createElement(w.Icon,{ecId:(this&&this.props&&this.props.ecId||"")+"_Icon@g8aqlg",className:"content-text-right-open-btn",type:"down",onClick:function(){return e.controllShowAllLogOperator(u)}})),oe&&React.createElement("div",{className:"wf-req-sign-list-users"},React.createElement("div",{style:{color:"#323232",paddingRight:20}},React.createElement("span",{style:{color:"#c0c0c0"}},O("15525","接收人")," : "),ie.replace(/,/g," ")),React.createElement(w.Icon,{ecId:(this&&this.props&&this.props.ecId||"")+"_Icon@o8u5sx",className:"content-text-right-open-btn",type:"up",onClick:function(){return e.controllShowAllLogOperator(u)}})),React.createElement("p",{className:"loglist-item-operatedate"},React.createElement("span",{style:{marginRight:8}},Y+" "+X+" "),React.createElement("span",null,"["+Z+" / "+ee+"]"),ne&&React.createElement("span",{style:{float:"right"},className:"reqlogbtn"},React.createElement("span",{style:{marginRight:16,cursor:"pointer "}},1!=l&&!ye&&ce&&fe&&React.createElement("span",{onClick:this.replyClick.bind(this,n)},React.createElement("i",{className:"icon-coms-message-o",style:{marginRight:6}}),O(385534,"回复"))),React.createElement("span",{style:{marginRight:16,cursor:"pointer"}},te&&1!=l&&React.createElement("span",{onClick:this.quoteClick.bind(this,n)},React.createElement("i",{className:"icon-xxx-form-Quote",style:{marginRight:6}}),O("19422","引用"))),React.createElement("span",{style:{cursor:"pointer"}},"1"==a&&!ye&&1!=l&&React.createElement("span",{onClick:function(){return"function"===typeof i&&i(_)}},React.createElement("i",{className:"icon-xxx-form-Forward",style:{marginRight:6}}),void 0==H||""==H?O("6011","转发"):H))))),ue&&Array.isArray((0,k.toJS)(V))&&(0,k.toJS)(V).length>0&&React.createElement("div",{className:"communication-area-wrap"},de?[React.createElement("div",{className:de?"communication-folder-panel":"communication-folder-panel open",onClick:function(){e.clickCheckCommunication()}},React.createElement("span",{className:"word-span",title:O(519615,"收起交流")},O("519615","收起交流")),React.createElement("i",{className:"icon-coms-up-001"})),React.createElement(D.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_ContentList@agoqmj@"+u,logid:u,commentList:(0,k.toJS)(V),logListStore:c,isprint:l,hasSubmitRight:fe})]:React.createElement("div",{className:"communication-folder-panel",onClick:function(){e.clickCheckCommunication()}},React.createElement("span",{className:"word-span",title:O(519614,"展开交流")},O("519614","展开交流")),React.createElement("i",{className:"icon-coms-down-001"}))))}},{key:"replyClick",value:function(e){jQuery(".wea-new-top-req-content").css("overflow-y","auto");var t=e.log_remarkHtml,r='<div class="wrap_box">'+t+"</div>",n=$(r);n.children().filter(".container_form_wrap")&&n.children().filter(".container_form_wrap").remove(),n.children().filter("span:not(#wea_rich_text_default_font)")&&n.children().filter("span:not(#wea_rich_text_default_font)").remove();var o=n.html();t=this.imgUtil(o),this.getReplyDialog(e,t)}},{key:"quoteClick",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isexsAgent,r=e.displaybyagentname,n=e.displayname,o=e.displaydepname,a=e.log_operatedate,i=e.log_operatetime,s=e.log_remarkHtml,l=void 0===s?"":s,c=e.remarkLocation,u=void 0===c?"":c,d=this.props,f=d.controlVariableMap,p=d.variableMap;"function"===typeof f&&f("isShowSignInput",!0),$("table #remark_div")&&0!==$("#remark_div").offset().top?$(".wea-new-top-req-content").scrollTop($(".excelTempDiv").height()-$("#remark_div").height()-70):0!==$("#remark_div").offset().top&&$(".wea-new-top-req-content").scrollTop($("#remark").height());var h=O("19422","引用");h+=t?'<font style="margin:0 10px;color:#4D7AD8" >'+r+"->"+n+"</font>":'<font style="margin:0 10px;color:#4D7AD8">'+n+"</font>",h+=o+"  "+a+" "+i,l=l.replace(/<span style='font-size:11px;color:#666;'>/g,"<span style='font-size:11px;color:#666;' _quote='true'>");var m=(u&&(0,R.getLocationInfoData)(u),"<div class='container_form_wrap' style=\"color:#333\"><span class='container_form_wrap_span'>"+h+"</span><div _quotoContent='true' style='color:#333;line-height:normal'>"+this.imgUtil(l)+"</div>\n              </div>"),v=k.observable.map?k.observable.map({}):asMap({});p.has("remark_list")&&(v=p.get("remark_list"));var g=0;p.has("remark_list_index")&&(g=p.get("remark_list_index"));var y=!0;v.forEach(function(e,t,r){e===m&&(w.Modal.warning({title:"提示信息",content:"不能重复引用"}),y=!1)}),y&&(v.set("key_"+g,m),f("remark_list_index",g+1),"function"===typeof f&&f("remark_list",v))}},{key:"controllShowAllLogOperator",value:function(e){var t=this,r=this.state,n=r.showUsers,o=void 0!==n&&n,a=r.allReceiveUser,i=void 0===a?"":a,s=r.loading,l=void 0!==s&&s;o||""!=i||l?this.setState({showUsers:!o}):(this.setState({loading:!0}),(0,S.getLogAllReceiveUser)({logid:e}).then(function(e){t.setState({loading:!1,showUsers:!0,allReceiveUser:e.receivedPersons})}))}},{key:"imgUtil",value:function(e){var t=jQuery("<div>"+e+"</div>");t.find("img").each(function(){var e=jQuery(this);e.attr("original-src")&&e.removeAttr("src").attr("src",e.attr("original-src")).removeAttr("original-src"),e.attr("original-style")?e.removeAttr("style").attr("style",e.attr("original-style")).removeAttr("original-style"):e.removeAttr("style")});var r=t.html();return r=r.replace(/<img(.*?)(\/)?>(<\/img>)?/gi,"<img$1/>")}},{key:"download",value:function(e){jQuery("#WfFormFileDownload").attr("src",e)}},{key:"checkAuthDetail",value:function(e,t){var r=this,n=this.props,o=n.secondAuthStore,a=n.showAuthDetail,i=n.isprint;if(1!=(void 0===i?0:i))if(o.setLogId(e),1==t)o.checkProtectDatas().then(function(t){var n=t.success;if(t.message,e>0){"1"==n?o.setCheckResult(e,1):"2"==n&&o.setCheckResult(e,0),a(e);var i=r.state.showSecondAuth;r.setState({showSecondAuth:!i})}});else{a(e);var s=this.state.showSecondAuth;this.setState({showSecondAuth:!s})}}},{key:"getUserImg",value:function(e){var t=e.logid,r=e.qys_signature_id,n=void 0===r?"":r,o=e.userimg,a=e.signnaturImgHeight,i=e.clickCheck,l=void 0===i?0:i,c=e.qyswidth,u=void 0===c?0:c,d=e.qysheight,f=void 0===d?0:d,p=this.props.secondAuthStore,h=p.checkResult,m=p.isProtected,v=p.protectTypes,g={};f>0?g.height=f:a>0&&(g.height=a),u>0&&(g.width=u);var w="",y=-1==a?"none":a+"px";if(m.has(t)){var b=m.get(t),_=v.get(t)||0;if(1==b&&(_==I.CA_AUTH?w+="content-right-ca-auth":_==I.QYS&&(w+=n||o?"content-right-qys-signature":"content-right-qys-auth")),h.has(t)){var S=h.get(t);1==S?_==I.CA_AUTH?w+=" content-right-ca-auth-success":_==I.QYS&&(w+=n||o?" content-right-qys-signature-success":" content-right-qys-auth-success"):0==S&&(_==I.CA_AUTH?w+=" content-right-ca-auth-failed":_==I.QYS&&(w+=n||o?" content-right-qys-signature-failed":" content-right-qys-auth-failed"))}if(1==b){if(_==I.QYS){if(n)return React.createElement("div",{className:w,onClick:this.checkAuthDetail.bind(this,t,l)},React.createElement("img",(0,s.default)({src:"/weaver/weaver.file.FileDownload?fileid="+n},g)),React.createElement("div",null));if(o)return React.createElement("div",{className:"content-right-userimg",style:{maxHeight:""+y}},React.createElement("img",{style:{maxHeight:""+y,cursor:"pointer"},src:o,onClick:this.checkAuthDetail.bind(this,t,l)}),React.createElement("div",null))}return React.createElement("div",{className:w,onClick:this.checkAuthDetail.bind(this,t,l)})}if(n)return React.createElement("div",{className:"content-right-userimg"},React.createElement("img",(0,s.default)({style:{cursor:"pointer"},src:"/weaver/weaver.file.FileDownload?fileid="+n},g,{onClick:this.checkAuthDetail.bind(this,t,0)})))}return o?React.createElement("div",{className:"content-right-userimg"},React.createElement("img",{style:{maxHeight:""+y},id:"markImg",src:o,draggable:"false",onContextmenu:this.onContextmenu})):null}}]),t}(React.Component),o.contextTypes={router:y.routerShape},a);t.default=L},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),a=n(o),i=r(1),s=n(i),l=r(2),c=n(l),u=r(4),d=n(u),f=r(5),p=n(f),h=r(45),m=r(0),v=(r(7),m.WeaLocaleProvider.getLabel),g=function(e){function t(e){(0,s.default)(this,t);var r=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return r.setPanelHidden=function(){var e=r.props,t=e.clearReplyInfo,n=(e.valueChange,e.store.resetReplyParam);r.quotePanel.style.display="none",t(),n()},r.contentUtil=function(e){var t=r.props,n=t.store.setReplyMark,o=(t.signReplyInfo.signReplyData,"["+v(528760,"图片")+"]");return n(e),e=e.replace(/<\/p>|<p>/g,""),e=e.replace(/<img.*?>/g,o),e=e.replace(/<[^>]*>|<\/[^>]*>/gm,""),e="<div class='remark-quote'>"+e+"</div>"},r}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=ReactDOM.findDOMNode(this);(0,h.imgZoom)(e,".wea-cl-content")}},{key:"componentDidUpdate",value:function(e,t){var r=ReactDOM.findDOMNode(this);(0,h.imgZoom)(r,".wea-cl-content")}},{key:"render",value:function(){var e=this,t=this.props,r=t.signReplyInfo,n=void 0===r?{}:r,o=t.isFromLoglist,a=void 0!==o&&o,i=n.signReplyFlag,s=void 0!==i&&i,l=n.signReplyStr,c=void 0===l?"":l,u=n.signReplyData,d=void 0===u?{}:u;return React.createElement("div",null,React.createElement("div",{className:"quote-item-warp"},s&&React.createElement("div",{className:"needWrap"},React.createElement("div",{className:"quote-top-words",ref:function(t){return e.quotePanel=t}},!a&&React.createElement("div",{className:"quote-btn-cancel",onClick:this.setPanelHidden},React.createElement("i",{class:"anticon anticon-cross",title:"删除",style:{position:"absolute",right:"20px",top:"20px",cursor:"pointer",color:"rgb(51, 51, 51)"},onClick:this.setPanelHidden})),React.createElement("div",{className:"top-panel"},React.createElement("div",{className:"content-top-quote"},React.createElement("span",{className:"wfComu-reply-user"},React.createElement("span",{className:"quote-span"},v(385534,"回复")),d.isexsAgent&&React.createElement("a",{href:"javaScript:openhrm("+d.log_agentorbyagentid+")",onClick:function(e){return window.pointerXY(e)}},d.displaybyagentname),d.isexsAgent&&React.createElement("span",{style:{color:"#2db7f5"}},"->"),React.createElement("a",{href:"javaScript:openhrm("+d.displayid+");",onClick:window.pointerXY},d.displayname),React.createElement("span",{className:"reply-span"},d.displaydepname),React.createElement("span",{className:"reply-span reply-date"},d.log_operatedate),React.createElement("span",{className:"reply-span reply-time"},d.log_operatetime),React.createElement("span",{className:"reply-span right-words"},"["+d.log_nodename+"/"+d.operationname+"]"))),React.createElement("div",{className:"reply-content"},React.createElement("div",{className:"wea-cl-content",dangerouslySetInnerHTML:{__html:this.contentUtil(c)}})))))))}}]),t}(React.Component);t.default=g},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(8),a=n(o),i=r(3),s=n(i),l=r(1),c=n(l),u=r(2),d=n(u),f=r(4),p=n(f),h=r(5),m=n(h),v=r(0),g=r(15),w=n(g),y=r(45),b=r(91),_=n(b),S=r(375),k=n(S),E=r(6),I=r(7),C=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(I),R=v.WeaLocaleProvider.getLabel,x=function(e){function t(e){(0,c.default)(this,t);var r=(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return r.edit=function(){var e=r.props.contentInfo,t=void 0===e?{}:e,n=t.relatedaccList4E9,o=void 0===n?[]:n,a=t.relatedcusList4E9,i=void 0===a?[]:a,s=t.relateddocList4E9,l=void 0===s?[]:s,c=t.relatedprjList4E9,u=void 0===c?[]:c,d=t.relatedwfList4E9,f=void 0===d?[]:d,p=t.relatemutilprjs4E9,h=void 0===p?[]:p;r.setState({edit:!0,editType:"edit",editValues:{richValue:t.showRemark,relatedaccList4E9:o,relatedcusList4E9:i,relateddocList4E9:l,relatedprjList4E9:u,relatedwfList4E9:f,relatemutilprjs4E9:h}})},r.del=function(){var e=r;E.Modal.confirm({content:React.createElement("div",{className:"wea-list-confirm"},React.createElement("p",null,R(388758,"确认要删除吗？"))),onOk:function(){var t=e.state.value;e.setState({edit:!1}),e.operate("delContent",t)}})},r.comment=function(){r.setState({edit:!0,editType:"comment"})},r.operate=function(e,t){var n=r.props.logid;(0,w.default)(r.props.operate)&&r.props.operate({id:r.props.contentInfo.contentId,operationType:e},n)},r.submit=function(e,t){var n=r.state.editType,o=r.props.contentInfo,i=(0,a.default)({},e);return i.replyType=n,i.contentId=o.contentId,(0,w.default)(r.props.submit)&&r.props.submit(i,r.cancel.bind(r,t))},r.cancel=function(e){r.setState({edit:!1,editType:"",editValues:{},quoteFlag:!1}),(0,w.default)(e)&&e()},r.createBottomOperate=function(e,t,r){return React.createElement("span",{className:"icon",onClick:r},React.createElement("i",{className:t}),React.createElement("span",{className:"text"},e))},r.state={edit:!1,editType:"",editValues:{},value:"1",passRichValue:R("519983","评论内容")},r}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.contentInfo,r=e.isFromPortal,n=(e.appStatus,e.submit,e.operate,e.logid),o=e.logParams,i=e.isprint,s=void 0===i?"0":i,l=e.hasSubmitRight,c=void 0!==l&&l,u=t.createUserType,d=void 0===u?"1":u,f=(t.createUser,this.state),p=f.edit,h=f.editType,m=f.editValues,v=f.passRichValue,g=(t.createUserName,t.userUrl,C.toJS(t.replys));return React.createElement("div",{className:"wea-comment-item"},(!p||"edit"!=h)&&React.createElement("div",null,React.createElement("div",{className:"cowork-reply-content"},React.createElement("div",{className:"comment-content-wrap"},React.createElement("div",{className:"cowork-reply-user"},"1"==d&&React.createElement("a",{href:"javaScript:openhrm("+t.createUser+");",onClick:window.pointerXY},t.createUserName),"2"==d&&React.createElement("a",{href:"javaScript: window.open('/spa/crm/static/index.html#/main/crm/customerView?customerId="+t.createUser+"&_key=jfzmyh', '_blank')"},t.createUserName)),React.createElement("div",{className:"cowork-reply-remark"},React.createElement("div",{className:"wea-cl-content",dangerouslySetInnerHTML:{__html:'<div class="wea-ckeditor-content">'+t.showRemark+"</div>"}})),React.createElement("div",{className:"workflow-resource-list"},(0,y.createReplyBottomAtt)(R(857,"相关文档")+":",t.relateddocList4E9,function(){},"doc"),(0,y.createReplyBottomAtt)(R(1044,"相关流程")+":",t.relatedwfList4E9,function(){},"wf"),(0,y.createReplyBottomAtt)(R(783,"相关客户")+":",t.relatedcusList4E9,function(){},"crm"),(0,y.createReplyBottomAtt)(R(782,"相关项目")+":",t.relatemutilprjs4E9,function(){},"project"),(0,y.createReplyBottomAtt)(R(33414,"相关任务")+":",t.relatedprjList4E9,function(){},"task"),(0,y.createReplyBottomAtt)(R(33414,"相关附件")+":",t.relatedaccList4E9,function(){},"acc")),React.createElement("div",{className:"bottom-operate"},React.createElement("span",{className:"reply-time"},t.showDate),React.createElement("div",{className:"fr"},!r&&c&&1!=t.isDelete&&t.canModify&&"0"==s&&this.createBottomOperate(R(93,"编辑"),"icon-cooperation-edit",this.edit),!r&&c&&1!=t.isDelete&&t.canModify&&"0"==s&&this.createBottomOperate(R(91,"删除"),"icon-cooperation-delete",this.del),!r&&c&&1!=t.isDelete&&"0"==s&&this.createBottomOperate(R(675,"评论"),"icon-coms-New-SMS",this.comment)),React.createElement("div",{className:"clear-both"}))),Array.isArray(g)&&g.length>0&&React.createElement(k.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_ReplyList@iuk1rp",appStatus:this.props.appStatus,contentId:t.contentId,operate:this.props.operate,list:g,submit:this.props.submit,logParams:o,logid:n,isprint:s,isFromPortal:r,hasSubmitRight:c,store:this.props.store}))),p&&"0"==s&&React.createElement(_.default,(0,a.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_CommunicationRichText@gk1s75",appStatus:this.props.appStatus,hasSubmit:!0,ref:"richText",submit:this.submit,cancel:this.cancel,editType:h},m,{placeholder:v,logParams:o,store:this.props.store})))}}]),t}(React.Component);t.default=x},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(8),a=n(o),i=r(3),s=n(i),l=r(1),c=n(l),u=r(2),d=n(u),f=r(4),p=n(f),h=r(5),m=n(h),v=r(376),g=n(v),w=r(91),y=n(w),b=r(15),_=n(b),S=r(6),k=r(0),E=k.WeaLocaleProvider.getLabel,I=function(e){function t(e){(0,c.default)(this,t);var r=(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return r.changePageNum=function(){var e=r.props.list,t=r.state.pageSize,n=e.length;n-1<=t?r.setState({pageNum:1}):n-1>t&&e.length-1==0&&r.setState({pageNum:pageNum--})},r.reply=function(e,t,n,o,a){var i=E("385534","回复")+n;r.setState({edit:!0,replyId:e,receiveUser:t,resiveUserType:o,passRichValue:i})},r.submit=function(e,t){var n=(0,a.default)({},e,{replyType:"comment"});n.replayid=r.state.replyId,n.receiveUser=r.state.receiveUser,n.resiveUserType=r.state.resiveUserType,n.contentId=r.props.contentId,(0,_.default)(r.props.submit)&&r.props.submit(n,r.cancel.bind(r,t))},r.cancel=function(e){r.setState({edit:!1,replyId:"",receiverUser:""},function(){r.refs.richText&&r.refs.richText.wrappedInstance&&r.refs.richText.wrappedInstance.clear()}),(0,_.default)(e)&&e()},r.changePage=function(e){r.setState({pageNum:e})},r.state={edit:!1,replyId:"",receiveUser:"",passRichValue:"",pageNum:1,pageSize:5},r}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.list,n=(t.canReply,t.logParams),o=t.logid,a=t.isprint,i=void 0===a?"0":a,s=t.isFromPortal,l=void 0!==s&&s,c=t.hasSubmitRight,u=void 0!==c&&c,d=this.state.passRichValue,f=this.state,p=f.edit,h=f.pageNum,m=f.pageSize,v=r.length,w=[],b=h*m;b>v&&(b=v);for(var _=(h-1)*m;_<b;_++)w.push(r[_]);return React.createElement("div",{className:"wea-cowork-reply-wrap"},w.map(function(t,r){return React.createElement(g.default,{ecId:(e&&e.props&&e.props.ecId||"")+"_ReplyItem@nb8pvr@"+r,operate:e.props.operate,changePageNum:e.changePageNum,replyInfo:t,logid:o,reply:e.reply,isprint:i,isFromPortal:l,hasSubmitRight:u})}),v>m&&React.createElement("div",{className:"small-page"},React.createElement(S.Pagination,{ecId:(this&&this.props&&this.props.ecId||"")+"_Pagination@yt4m6c",size:"small",total:v,pageSize:m,onChange:this.changePage,current:h}),React.createElement("div",{className:"clear-both"})),p&&React.createElement(y.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_CommunicationRichText@bxfu4h",hasSubmit:!0,ref:"richText",submit:this.submit,cancel:this.cancel,logParams:n,appStatus:this.props.appStatus,editType:"comment",placeholder:d,type:"reply",store:this.props.store}))}}]),t}(React.Component);t.default=I},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),a=n(o),i=r(1),s=n(i),l=r(2),c=n(l),u=r(4),d=n(u),f=r(5),p=n(f),h=r(6),m=r(15),v=n(m),g=r(0);r(187);var w=r(45),y=g.WeaLocaleProvider.getLabel,b=function(e){function t(e){(0,s.default)(this,t);var r=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return r.delete=function(){var e=r.props,t=e.changePageNum,n=e.operate,o=e.logid,a=e.replyInfo,i=a.id;h.Modal.confirm({content:y(512301,"确认要删除该评论吗？"),onOk:function(){t(),(0,v.default)(n)&&n({id:i,operationType:"delReply"},o)}})},r}return(0,p.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props,t=e.replyInfo,r=e.isprint,n=void 0===r?"0":r,o=e.isFromPortal,a=void 0!==o&&o,i=e.hasSubmitRight,s=void 0!==i&&i,l=t.discussantInfo,c=void 0===l?{}:l,u=t.remark,d=t.showDate,f=t.id,p=t.createUserName,h=t.createUser,m=t.resiveUser,v=t.resiveUserName,g=t.canModify,b=t.isAnonymous,_=t.relatedaccList4E9,S=void 0===_?[]:_,k=t.relatedcusList4E9,E=void 0===k?[]:k,I=t.relateddocList4E9,C=void 0===I?[]:I,R=t.relatedprjList4E9,x=void 0===R?[]:R,P=t.relatedwfList4E9,N=void 0===P?[]:P,D=t.relatemutilprjs4E9,O=void 0===D?[]:D,L=t.createUserType,T=void 0===L?"1":L,F=t.resiveUserType,A=void 0===F?"1":F;return React.createElement("div",{className:"wea-cowork-reply-item"},React.createElement("div",{className:"reply-item-content"},React.createElement("div",{className:"operate-hd"},React.createElement("span",{className:"cowork-reply-user"},1==b?React.createElement("span",null,c.lastname):React.createElement(React.Fragment,null,"1"==T&&React.createElement("a",{href:"javaScript:openhrm("+h+");",onClick:window.pointerXY},p),"2"==T&&React.createElement("a",{href:"javaScript: window.open('/spa/crm/static/index.html#/main/crm/customerView?customerId="+h+"&_key=jfzmyh', '_blank')"},p)),m>-1&&React.createElement("span",null,React.createElement("span",{className:"ml5"},y(128123,"回复")),"1"==A&&React.createElement("a",{className:"ml5",href:"javaScript:openhrm("+m+");",onClick:window.pointerXY},v),"2"==A&&React.createElement("a",{className:"ml5",href:"javaScript: window.open('/spa/crm/static/index.html#/main/crm/customerView?customerId="+m+"&_key=jfzmyh', '_blank')"},v)),React.createElement("span",{className:"reply-time"},d)),React.createElement("span",{className:"fr"},"0"==n&&g&&!a&&s&&React.createElement("span",{className:"cowork-top-icon icon-coms-delete",onClick:this.delete,title:y(91,"删除")}),"0"==n&&!a&&s&&React.createElement("span",{className:"cowork-top-icon icon-coms-New-SMS",onClick:this.props.reply.bind(this,f,h,p,T,"reply"),title:y(128123,"回复")}))),React.createElement("div",{className:"cowork-reply-remark wea-f12"},React.createElement("div",{className:"wea-cl-content",dangerouslySetInnerHTML:{__html:'<div class="wea-ckeditor-content">'+u+"</div>"}})),React.createElement("div",{className:"workflow-resource-list"},(0,w.createReplyBottomAtt)(y(857,"相关文档")+":",C,function(){},"doc"),(0,w.createReplyBottomAtt)(y(1044,"相关流程")+":",N,function(){},"wf"),(0,w.createReplyBottomAtt)(y(783,"相关客户")+":",E,function(){},"crm"),(0,w.createReplyBottomAtt)(y(782,"相关项目")+":",O,function(){},"project"),(0,w.createReplyBottomAtt)(y(33414,"相关任务")+":",x,function(){},"task"),(0,w.createReplyBottomAtt)(y(33414,"相关附件")+":",S,function(){},"acc"))))}}]),t}(React.Component);t.default=b},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getAdButtons=t.Condition=void 0;var o=r(18),a=n(o),i=r(3),s=n(i),l=r(1),c=n(l),u=r(2),d=n(u),f=r(4),p=n(f),h=r(5),m=n(h),v=r(9),g=n(v),w=r(0),y=r(11),b=r(6),_=w.WeaLocaleProvider.getLabel,S=function(e){function t(){return(0,c.default)(this,t),(0,p.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this,t=this.props.logListStore,r=t.requestLogParams,n=void 0===r?{}:r,o=t.searchForm,i=n.logCondition,s=void 0===i?[]:i,l=o.isFormInit,c=[],u=o.getFormParams();return l&&s.map(function(t,r){var n=[];t.items.map(function(t){var r="object"===(0,a.default)(t.domkey)?t.domkey[0]:t.domkey;n.push({com:g.default.createElement(w.WeaFormItem,{ecId:(e&&e.props&&e.props.ecId||"")+"_WeaFormItem@id9pm3@"+r,label:""+t.label,labelCol:{span:""+t.labelcol},wrapperCol:{span:""+t.fieldcol}},g.default.createElement(y.WeaSwitch,{ecId:(e&&e.props&&e.props.ecId||"")+"_WeaSwitch@9yqo5o@"+r,fieldConfig:t,form:o,formParams:u})),colSpan:1})}),c.push(g.default.createElement(w.WeaSearchGroup,{ecId:(e&&e.props&&e.props.ecId||"")+"_WeaSearchGroup@z3f5it@"+r,needTigger:!0,title:t.title,showGroup:t.defaultshow,items:n}))}),g.default.createElement("div",null,c)}}]),t}(g.default.Component),k=function(e){var t=e.advanceSearch,r=e.controllSearchDrop,n=e.clearFormFields;return[g.default.createElement(b.Button,{ecId:"_Button@0lu3bi@search",type:"primary",onClick:function(){t(),r(!1)}},_(197,"搜索")),g.default.createElement(b.Button,{ecId:"_Button@8t3r64@reset",type:"ghost",onClick:function(){n()}},_(2022,"重置")),g.default.createElement(b.Button,{ecId:"_Button@ag6dk2@cancel",type:"ghost",onClick:function(){r(!1)}},_(31129,"取消"))]};t.Condition=S,t.getAdButtons=k},function(e,t,r){r(379),e.exports=r(12).Object.keys},function(e,t,r){var n=r(48),o=r(55);r(103)("keys",function(){return function(e){return o(n(e))}})},function(e,t,r){r(58),r(381),e.exports=r(12).Array.from},function(e,t,r){"use strict";var n=r(46),o=r(20),a=r(48),i=r(192),s=r(193),l=r(97),c=r(382),u=r(127);o(o.S+o.F*!r(194)(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,o,d,f=a(e),p="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,v=void 0!==m,g=0,w=u(f);if(v&&(m=n(m,h>2?arguments[2]:void 0,2)),void 0==w||p==Array&&s(w))for(t=l(f.length),r=new p(t);t>g;g++)c(r,g,v?m(f[g],g):f[g]);else for(d=w.call(f),r=new p;!(o=d.next()).done;g++)c(r,g,v?i(d,m,[o.value,g],!0):o.value);return r.length=g,r}})},function(e,t,r){"use strict";var n=r(27),o=r(54);e.exports=function(e,t,r){t in e?n.f(e,t,o(0,r)):e[t]=r}},function(e,t,r){var n=r(12),o=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},function(e,t){},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=r(3),i=n(a),s=r(1),l=n(s),c=r(2),u=n(c),d=r(4),f=n(d),p=r(5),h=n(p),m=r(6),v=r(0),g=r(386),w=n(g),y=r(33),b=v.WeaLocaleProvider.getLabel,_=(0,y.observer)(o=function(e){function t(e){(0,l.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return r.showAllOperators=function(){var e=r.state,t=e.showAllUser,n=e.allUserIds,o=e.allUserCount;if(t){var a=r.props.wfForwardStore,i=a.handleVisibleChange,s=a.setOperatorIds;a.formParams;s({ids:n,isAllUser:!0,count:o}),i(!1)}else{var l=r.props.wfForwardStore.formParams,c=void 0===l?{}:l;v.WeaTools.callApi("/api/workflow/hrmgroup/datas","GET",{isgetallres:"1",requestid:c.requestid}).then(function(e){r.setState({showAllUser:!0,allUserIds:e.ids,allUserCount:e.count})})}},r.state={showall:!1,hrmgroups:[],allUserIds:"",allUserCount:0,showAllUser:!1},r}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.isshowoperategroup||this.setState({showall:!1})}},{key:"addgroup",value:function(e){e(!1)}},{key:"add",value:function(e,t,r){var n={isAllUser:!1};"4"==r.grouptype&&(n.datas=[r]),"6"==r.grouptype&&(n.datas=r.users),e(n),t(!1)}},{key:"render",value:function(){var e=this,t=this.props.wfForwardStore,r=t.handleVisibleChange,n=t.setOperatorIds,o=(t.controllAddModal,t.hrmgroups),a=void 0===o?[]:o,i=t.opsHandler,s=t.signinput,l=t.formParams,c=(l.forwardflag,this.state),u=c.showall,d=c.showAllUser,f=c.allUserCount;return React.createElement("div",{className:"wea-req-operate-group"},s.allowAllPersonGroup&&React.createElement("div",{className:"wea-req-all-operators",onClick:this.showAllOperators},React.createElement("span",null,b(1340,"所有人"),d&&"（"+f+"）")),React.createElement("div",{className:"wea-req-operate-content"},React.createElement(v.WeaScroll,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaScroll@w70daq",className:"wea-scroll",typeClass:"scrollbar-macosx"},React.createElement("ul",null,a&&a.map(function(t,o){if(o>2&&!u)return!0;var a=t.users.length;return React.createElement("li",{onClick:e.add.bind(e,n,r,t)},React.createElement("span",{className:"cg_title"},t.lastname+"（"+a+b("33423","人")+"）"),React.createElement("span",{className:"cg_detail"},t.names))})))),a.length>3&&!u&&React.createElement("div",{className:"wea-req-operate-load-more",onClick:function(){return e.setState({showall:!0})}},React.createElement(m.Icon,{ecId:(this&&this.props&&this.props.ecId||"")+"_Icon@fh7kdb",type:"down"}),React.createElement("span",{style:{color:"#4397d3","margin-left":"10px"}},b("20234","显示全部"))),React.createElement("div",{className:"wea-req-operate-add",onClick:function(e){r(!1),i("add",e,{})}},React.createElement("span",{style:{color:"#59b632"}},React.createElement(m.Icon,{ecId:(this&&this.props&&this.props.ecId||"")+"_Icon@r3ddx5",type:"plus-square"})),React.createElement("span",{style:{color:"#323232","margin-left":"10px"}},b("124815","添加常用组"))),React.createElement(w.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_GroupDialog@c3896r",wfForwardStore:this.props.wfForwardStore}))}}]),t}(React.Component))||o;t.default=_},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=r(8),i=n(a),s=r(3),l=n(s),c=r(1),u=n(c),d=r(2),f=n(d),p=r(4),h=n(p),m=r(5),v=n(m),g=r(9),w=n(g),y=r(10),b=(r(6),r(7),r(0)),_=b.WeaLocaleProvider.getLabel,S=(0,y.observer)(o=function(e){function t(e){(0,u.default)(this,t);var r=(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));r.props.wfForwardStore.addGroupModalVisible;return r}return(0,v.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){var e=this.props.wfForwardStore,t=e.ops,r=e.groupId,n=e.groupType,o=e.addGroupModalVisible,a=e.setOptParams,s=e.controllAddModal,l=e.loadHrmGroupData,c={icon:"icon-coms-workflow",iconBgcolor:"#0079DE",visible:o,destroyBodyOnClose:!0},u=function(){s(!1),a({ops:"",groupId:"",groupType:"",addGroupModalVisible:!1})};if("advice"==t){var d="/spa/hrm/static/index.html#/main/hrm/groupAdvice?groupId="+r;c=(0,i.default)({},c,{title:_("126253","公共组调整建议"),style:{width:650,height:360},url:d,onCancel:u,callback:u})}else if("add"==t||"edit"==t){var f="/spa/hrm/index_mobx.html#/main/hrm/operateGroup?groupType="+n,p="/spa/hrm/index_mobx.html#/main/hrm/operateGroup?groupId="+r,h="add"==t?f:p;c=(0,i.default)({},c,{title:"add"==t?_("386496","新建常用组"):_("126252","常用组设置"),style:"add"==t?{width:650,height:225}:{width:750,height:482},url:h,onCancel:function(){s(!1)},callback:function(e){var t={};t=e?{groupId:c.groupId,groupType:c.groupType,addGroupModalVisible:c.visible,ops:"edit"}:{groupId:"",groupType:"",addGroupModalVisible:!1,ops:""},l(),a(t)}})}return w.default.createElement(b.WeaDialog,(0,i.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@qpjrh4"},c))}}]),t}(w.default.Component))||o;t.default=S},function(e,t){e.exports=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(3),i=n(a),s=r(1),l=n(s),c=r(2),u=n(c),d=r(4),f=n(d),p=r(5),h=n(p),m=r(9),v=n(m),g=r(10),w=r(6),y=r(0),b=r(389),_=n(b),S=r(7),k=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(S),E=r(172),I=n(E),C=r(89),R=n(C),x=w.Tabs.TabPane,P=y.WeaLocaleProvider.getLabel,N=(0,g.observer)(o=function(e){function t(e){(0,l.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return r.btnOnClick=function(){var e=r.props.wfForwardStore,t=e.handleShowNodeOperator,n=e.setOperatorIds,o=r.state.selectedInfo,a=void 0===o?{}:o,i=[];(0,I.default)(a,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];arguments[1];i=(0,R.default)(i,e)}),n({datas:i,isAllUser:!1}),t(!1),r.setState({selectTabKey:"1",selectedInfo:{},selectAll:!1,showAllUser:{}})},r.changeTab=function(e){r.setState({selectTabKey:e,selectAll:!1,selectedInfo:{},showAllUser:{}})},r.selectAll=function(e){if(e.target.checked){var t={},n=r.getCurrentItemDatas();n&&n.map(function(e){t[e.nodeid]=e.users}),r.setState({selectedInfo:t,selectAll:!0})}else r.setState({selectedInfo:{},selectAll:!1})},r.updateSelectIds=function(e,t){var n=r.state,o=n.selectedInfo,a=void 0===o?{}:o,i=(n.selectTabKey,!1);if(e){var s=r.getCurrentItemDatas();s&&s.map(function(e){e.nodeid===t&&(a[e.nodeid]=e.users)}),i=r.isSelectAll(s,a)}else delete a[t];r.setState({selectedInfo:a,selectAll:i})},r.showAllNodeUsers=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.setState({showAllUser:e})},r.addOrRemoveSelectedUser=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.nodeid,a=void 0===o?"":o,i=n.users,s=void 0===i?[]:i,l=r.state,c=l.selectedInfo,u=void 0===c?{}:c,d=l.selectAll,f=void 0!==d&&d,p=u[a]||[];"add"===e?p.push(t):p=p.filter(function(e){return e.id!==t.id}),p.length!==s.length&&(f=!1),0===p.length?(delete u[a],f=!1):u[a]=p,r.setState({selectedInfo:u,selectAll:f})},r.state={selectTabKey:"1",selectAll:!1,selectedInfo:{},showAllUser:{isShowAll:!1,users:[],nodeid:""}},r}return(0,h.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.state,t=e.selectTabKey,r=void 0===t?"1":t,n=e.selectAll,o=void 0!==n&&n,a=this.props.nodeOperatorTitle,i=void 0===a?"":a;return v.default.createElement("div",{className:"wea-req-node-operator"},v.default.createElement("div",{className:"title"},v.default.createElement("span",null,i.length>0?i:P("84509","选择节点参与人作为转发对象"))),v.default.createElement("div",{className:"content"},v.default.createElement(w.Tabs,{ecId:(this&&this.props&&this.props.ecId||"")+"_Tabs@fmzf56",activeKey:r,tabBarExtraContent:v.default.createElement(w.Checkbox,{ecId:(this&&this.props&&this.props.ecId||"")+"_Checkbox@h96n35",checked:o,onChange:this.selectAll},P(556,"全选")),onChange:this.changeTab},this.getTabPaneCom())),v.default.createElement("div",{className:"footer"},v.default.createElement(w.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@8ih8yd",type:"primary",onClick:this.btnOnClick},P(83446,"确定"))))}},{key:"getTabPaneCom",value:function(){var e=this,t=this.props.wfForwardStore,r=t.allitems,n=void 0===r?[]:r,o=t.submititems,a=void 0===o?[]:o,i=t.unsubmititems,s=void 0===i?[]:i,l=[{key:"1",title:P(126831,"全部"),datas:k.toJS(n)},{key:"2",title:P("32555","未提交"),datas:k.toJS(s)},{key:"3",title:P("15176","已提交"),datas:k.toJS(a)}],c=v.default.createElement("div",{className:"no-data"},P("83781","没有数据"));return l.map(function(t){var r=t.key,n=t.title,o=t.datas,a=void 0===o?[]:o;return v.default.createElement(x,{ecId:(e&&e.props&&e.props.ecId||"")+"_TabPane@ul7sy5@"+r,tab:n,key:r},a.length>0?v.default.createElement(y.WeaScroll,{ecId:(e&&e.props&&e.props.ecId||"")+"_WeaScroll@lzxysz@"+r,className:"wea-scroll",typeClass:"scrollbar-macosx"},v.default.createElement("div",{className:"node-table"},e.getItemCom(a,r))):c)})}},{key:"getItemCom",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments[1],n=this.state,o=n.selectedInfo,a=void 0===o?{}:o,i=n.showAllUser,s=void 0===i?{}:i,l=n.selectTabKey,c=void 0===l?"1":l,u=s.isShowAll,d=void 0!==u&&u;if(c!==r)return v.default.createElement("div",null);if(d){var f=(s.nodeAllUsers,s.nodeid),p=void 0===f?"":f,h=a[p]||[];return v.default.createElement(_.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_NodeItem@w381uh",item:s,nodeSelectedUsers:h,addOrRemoveSelectedUser:this.addOrRemoveSelectedUser,showAllNodeUsers:this.showAllNodeUsers})}return t.map(function(t,r){var n=t.nodeid,o=void 0===n?"":n,i=a[o]||[];return v.default.createElement(_.default,{ecId:(e&&e.props&&e.props.ecId||"")+"_NodeItem@0jvswm@"+r,item:t,nodeSelectedUsers:i,addOrRemoveSelectedUser:e.addOrRemoveSelectedUser,showAllNodeUsers:e.showAllNodeUsers,updateSelectIds:e.updateSelectIds})})}},{key:"getCurrentItemDatas",value:function(){var e=this.state.selectTabKey,t=void 0===e?"1":e,r=this.props.wfForwardStore,n=r.allitems,o=void 0===n?[]:n,a=r.submititems,i=void 0===a?[]:a,s=r.unsubmititems,l=void 0===s?[]:s,c=k.toJS(o);return"2"===t&&(c=k.toJS(l)),"3"===t&&(c=k.toJS(i)),c}},{key:"isSelectAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=!0;return e.map(function(e){0==(t[e.nodeid]||[]).length&&(r=!1)}),r}}]),t}(v.default.Component))||o;t.default=N},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(3),a=n(o),i=r(1),s=n(i),l=r(2),c=n(l),u=r(4),d=n(u),f=r(5),p=n(f),h=r(6),m=r(390),v=n(m),g=r(0),w=g.WeaLocaleProvider.getLabel,y=function(e){function t(e){return(0,s.default)(this,t),(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e))}return(0,p.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.item,n=void 0===r?{}:r,o=t.nodeSelectedUsers,a=void 0===o?[]:o,i=n.isShowAll,s=void 0!==i&&i,l=n.nodeid,c=n.users,u=void 0===c?[]:c,d=(n.names,n.nodename),f=void 0===d?"":d,p=s||u.length<=12?u:u.slice(0,12),m=s?{}:{height:"54px",borderBottom:"1px solid #E2E2E2",width:"352px",paddingRight:"10px"};return React.createElement("div",null,React.createElement("div",{className:"node-item"},!s&&React.createElement("div",{className:"checkbox"},React.createElement(h.Checkbox,{ecId:(this&&this.props&&this.props.ecId||"")+"_Checkbox@ut040k",checked:a.length===u.length,onChange:this.selectOne.bind(this,l)})),!s&&React.createElement("div",{className:"nodename",title:f},React.createElement("span",null,f)),React.createElement("div",{className:"operator",style:m},p.map(function(t,r){var n=t.id,o=void 0===n?"":n,i=t.lastname,s=void 0===i?"":i,l=(0,v.default)(a,function(e){return e.id===o}).length>0,c=l?"node-user selectedUser":"node-user";return React.createElement("span",{className:c,onClick:e.clickOneUser.bind(e,t,l)},s)}),(u.length>p.length||s)&&React.createElement("span",{className:"node-user",title:s?w(384083,"返回"):w(17499,"更多")},React.createElement(h.Icon,{ecId:(this&&this.props&&this.props.ecId||"")+"_Icon@ksse1q",type:s?"double-left":"double-right",onClick:this.showAllOperator.bind(this,n)})))))}},{key:"selectOne",value:function(e,t){(0,this.props.updateSelectIds)(t.target.checked,e)}},{key:"clickOneUser",value:function(e,t){var r=this.props,n=r.addOrRemoveSelectedUser,o=r.item,a=void 0===o?{}:o;n(t?"remove":"add",e,a)}},{key:"showAllOperator",value:function(){var e=this.props,t=e.showAllNodeUsers,r=e.item,n=void 0===r?{}:r,o=n.users,a=void 0===o?[]:o,i=n.nodeid,s=void 0===i?"":i,l=n.isShowAll;t({isShowAll:!(void 0!==l&&l),users:a,nodeid:s})}}]),t}(React.Component);t.default=y},function(e,t,r){function n(e,t){return(s(e)?o:a)(e,i(t,3))}var o=r(162),a=r(391),i=r(68),s=r(14);e.exports=n},function(e,t,r){function n(e,t){var r=[];return o(e,function(e,n,o){t(e,n,o)&&r.push(e)}),r}var o=r(196);e.exports=n},function(e,t,r){function n(e,t){return e&&o(e,t,a)}var o=r(119),a=r(52);e.exports=n},function(e,t,r){function n(e,t){return function(r,n){if(null==r)return r;if(!o(r))return e(r,n);for(var a=r.length,i=t?a:-1,s=Object(r);(t?i--:++i<a)&&!1!==n(s[i],i,s););return r}}var o=r(29);e.exports=n},function(e,t,r){r(76),r(58),e.exports=r(395)},function(e,t,r){var n=r(23),o=r(127);e.exports=r(12).getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},function(e,t){},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(8),a=n(o),i=r(3),s=n(i),l=r(1),c=n(l),u=r(2),d=n(u),f=r(4),p=n(f),h=r(5),m=n(h);r(398);var v=r(9),g=n(v),w=r(6),y=r(399),b=n(y),_=r(0),S=w.Modal.confirm,k=_.WeaLocaleProvider.getLabel,E=function(e){return _.WeaTools.callApi("/api/doc/operate/delete","GET",e)},I=function(e){function t(e){(0,c.default)(this,t);var r=(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return r.onDrop=function(e,t,n){var o="",a=!1;try{if(Array.isArray(n))n&&n.map(function(e,t){var r=e.fileid;a?o+=","+r:(o+=r,a=!0)});else{var i=jQuery("#"+e).find("li"),s=r.refs[t].props.datas;n=[],i.map(function(e,t){if(!jQuery(t).hasClass("gu-mirror"))for(var r=jQuery(t).attr("idkey"),i=0;i<s.length;i++)if(s[i].fileid==r){n.push(s[i]),a?o+=","+s[i].fileid:(o+=s[i].fileid,a=!0);break}})}var l=r.props.changeRemarkInfo;l&&l({"field-annexupload":o,annexdocinfos:n})}catch(e){}},r.fnclickedit=function(e,t){var n=r.props.editorId,o=t;-1!=t.lastIndexOf(".")&&(o=t.substring(0,t.lastIndexOf("."))),jQuery(".dr_"+n+" .ipt_"+e).val(o).focus(),jQuery(".dr_"+n+" .ipt_"+e).css({display:"inline"}),jQuery(".dr_"+n+" .ic_"+e).css({display:"none"}),jQuery(".dr_"+n+" .div_msg"+e).css({display:"none"}),jQuery(".dr_"+n+" .ipt_"+e).focus();var a=r.refs["dr_"+n+"_"+e],i=o.length;!function(e,t){if(e.setSelectionRange)setTimeout(function(){e.setSelectionRange(t,t),e.focus()},0);else if(e.createTextRange){var r=e.createTextRange();r.move("character",t),r.select()}}(a,i)},r.fnOnBlurByInput1=function(e,t,n,o){var a=r.props.editorId;jQuery(".dr_"+a+" .div_msg"+e).css({display:"inline-block"}),jQuery(".dr_"+a+" .ipt_"+e).css({display:"none"});var i=jQuery(".dr_"+a+" .ipt_"+e).val(),s=/[\\\\\/:*?\"<>|]/g;s.test(i)&&(i=i.replace(s,"")),i=i.replace(/(^\s*)|(\s*$)/g,"");var l="",c=t;if(-1!=t.lastIndexOf(".")&&(l=t.substring(t.lastIndexOf(".")),c=t.substring(0,t.lastIndexOf("."))),i===c||""==i||void 0==i);else{var u=r.state.annexdocinfos,d=void 0===u?[]:u;d.map(function(t){t.fileid==e&&(t.filename=i+l)}),r.setState({annexdocinfos:d}),r.props.onChange&&r.props.onChange("Upload","",d,"file"),_.WeaTools.callApi("/api/doc/acc/rename","POST",{imagefileid:n,imagefilename:i+l}),r.props.updateWeaRichText(i+l,e)}},r.renderlistB=function(e){var t=r.props,n=t.isdragula,o=void 0!==n&&n,a=t.isrename,i=void 0!==a&&a,s=t.editorId,l=t.secLevelInfo,c=void 0===l?{}:l,u=c.allowEditFileSec,d=c.isOpenSec;return g.default.createElement("ul",{ref:"dr_"+s,id:"dr_"+s,className:"wf_upload_css_cc",style:{padding:e.length>0?"0 0 5px 0":0}},e.map(function(e){var t=e.fileid,n=e.filename,a=e.imagefileid,l=(e.secretLevel,e.secretLevelValidity,e.secretLevelValidityValue),c=void 0===l?"秘密★10年":l;return g.default.createElement("li",{className:"dr_"+s,key:t,idkey:t},g.default.createElement("div",{onMouseOver:r.fnOnMouseOver.bind(r,t,i,d),onMouseOut:r.fnOnMouseOut.bind(r,t,i,d)},g.default.createElement("div",{style:{float:"left"},className:"li-filename"+(d?" sec-control-width":"")},o?g.default.createElement("span",{"data-index":t,title:k(504625,"拖拽"),key:t,className:"icon-coms-move cursor-pointer imgpad5"}):null,g.default.createElement("span",{className:"div_msg div_msg"+e.fileid},g.default.createElement("span",{onClick:r.onAddUploadFile.bind(r,t),title:n,className:"div_msg_span div_msg_span"+t+(d?" sec-control-filename-width":"")},n)),g.default.createElement("input",{type:"text",ref:"dr_"+s+"_"+t,className:"editFileName hidde_css ipt_"+t,title:'文件名不能包含\\ / : * ? " < > | ',onBlur:r.fnOnBlurByInput1.bind(r,t,n,a)}),c&&g.default.createElement("span",{title:c,className:"secretLevelValidityValue"+(u?" editSec":""),onClick:u?r.onClickEditSec.bind(r,e):null},c),i?g.default.createElement("i",{className:"icon-coms-edit cursor-pointer imgpad5 hidde_css ic_"+t,style:{fontSize:"12px"},onClick:r.fnclickedit.bind(r,t,n),title:k(93,"编辑")}):null),g.default.createElement("div",null,g.default.createElement(w.Icon,{ecId:(r&&r.props&&r.props.ecId||"")+"_Icon@31mcjl@"+t,type:"cross",title:k(91,"删除"),onClick:r.onDeleteUploadFile.bind(r,e)}))))}))},r.onClickEditSec=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.fileid,e.filename,e.imagefileid,e.secretLevel,e.secretLevelValidity,e.secretLevelValidityValue;r.uploadRef&&r.uploadRef.editSecLevel(e)},r.changeSecParams=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.state.secParams;r.setState({secParams:(0,a.default)({},t,e)})},r.onEditSecLevel=function(e,t,n,o){r.setState({annexdocinfos:o}),r.props.onChange&&r.props.onChange("Upload","",o,"file")},r.showUploadedInfo=function(){var e=r.props.visible,t=r.getphraseblockheight();r.setState({top:t}),r.props.showComponent(e?"":"Upload")},r.onFileUploadChange=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=r.state.annexdocinfos,o=r.getphraseblockheight(t.length-n.length,"add");r.setState({annexdocinfos:t,top:o}),r.props.onChange&&r.props.onChange("Upload","",t,"file","","",!0)},r.state={annexdocinfos:r.props.annexdocinfos||[],top:0,percent:0,speed:500,status:"",secParams:{}},r.uploadRef,r.FILE_LIST_ITEM_HEIGHT=28,r.FILE_LIST_SCROLL_ITEM_NUM=4,r}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.getphraseblockheight(e.annexdocinfos.length-this.props.annexdocinfos.length,"add");this.setState({annexdocinfos:e.annexdocinfos,top:t})}},{key:"fnOnMouseOut",value:function(e,t,r,n){t&&(jQuery(n.currentTarget).find(".ic_"+e).css({display:"none"}),r||jQuery(n.currentTarget).find(".div_msg_span"+e).css({width:"152px"}))}},{key:"fnOnMouseOver",value:function(e,t,r,n){t&&(jQuery(n.currentTarget).find(".ic_"+e).css({display:"inline"}),r||jQuery(n.currentTarget).find(".div_msg_span"+e).css({width:"127px"}))}},{key:"render",value:function(){var e=this,t=this.state,r=t.annexdocinfos,n=void 0===r?[]:r,o=t.top,i=(t.percent,t.speed,t.status,this.props.visible),s=this.props,l=s.category,c=s.annexmaxUploadImageSize,u=s.editorId,d=s.isdragula,f=void 0===d||d,p=s.isrename,h=void 0===p||p,m=s.secLevelInfo,v=void 0===m?{}:m,y=v.isOpenSec,S=n.length>this.FILE_LIST_SCROLL_ITEM_NUM?this.FILE_LIST_ITEM_HEIGHT*this.FILE_LIST_SCROLL_ITEM_NUM:n.length*this.FILE_LIST_ITEM_HEIGHT,E=o;i&&0==o&&(E=this.getphraseblockheight(n.length));var I={},C={};return I.editable=h,I.issortable=f,I.maxUploadSize=c,C.isFirstUploadFile="9",g.default.createElement("div",{className:"wea-ckeditor-fileupload"},g.default.createElement("div",{className:"wea-cb-item",onClick:this.showUploadedInfo,title:""+k(385751,"附件上传(最大")+c+"M/"+k(27591,"个")+")"},g.default.createElement(w.Icon,{ecId:(this&&this.props&&this.props.ecId||"")+"_Icon@ifrzt3",className:"wea-cbi-icon",type:"paper-clip"},n.length>0&&g.default.createElement("div",{className:"red-point"})),g.default.createElement("span",{className:"wea-cbi-text"},k(156,"附件"))),g.default.createElement("div",{className:"fileupload-phraseblock div_"+u+(y?" sec-box-control-width":""),style:{display:i?"block":"none",top:E}},g.default.createElement("iframe",{className:"wf-fileupload-iframe"}),g.default.createElement("div",{className:"file-content-block"},n.length>0&&g.default.createElement(_.WeaNewScroll,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaNewScroll@ihysgc",height:S+5},g.default.createElement(_.WeaDragula,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDragula@rxclsv",ref:"wd_"+u,container:function(){return e.refs["dr_"+u]},canDrag:function(e){var t=jQuery(".wea-req-forward-modal").find(".react-draggable");return 1===t.length&&(t[0].style.transform="inherit"),jQuery(e).hasClass("icon-coms-move")},datas:n,getKeyFromData:function(e){return e.fileid},getKeyFromDom:function(e){return jQuery("span.icon-coms-move",e).attr("data-index")},onDrop:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.onDrop.apply(e,["dr_"+u,"wd_"+u].concat(r))}},this.renderlistB(n)))),g.default.createElement("div",{className:"file-upload-btn"},g.default.createElement(_.WeaUpload,(0,a.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_WeaUpload@aw0p0n",uploadUrl:"/api/doc/upload/uploadFile2Doc?category="+l,uploadId:u+"_phraseupload",category:l,onChange:this.onFileUploadChange,datas:n,style:{padding:0},RenderList:b.default,uploadParams:C},I,{secLevel:v.secLevel,secLevelInfo:v.tip,showSecLevel:v.isOpenSec,casProtect:v.isOpenSec,allowEditSec:v.allowEditFileSec,ref:function(t){return e.uploadRef=t},needModifyDocSec:!1}),g.default.createElement(w.Icon,{ecId:(this&&this.props&&this.props.ecId||"")+"_Icon@vb26ru",type:"plus-circle-o"}))),g.default.createElement("div",{className:"triangle_border_nw",style:{display:i?"block":"none"}})))}},{key:"onAddUploadFile",value:function(e){var t=this.state.annexdocinfos;this.props.onChange&&this.props.onChange("Upload","",t,"file",e)}},{key:"onDeleteUploadFile",value:function(e,t){var r=this;S({content:""+k(84051,"确定要删除")+e.filename+k(385752,"吗")+"?",zIndex:1050,onOk:function(){try{var t=e.fileid,n=r.state.annexdocinfos,o=n.filter(function(e){return e.fileid!=t}),a=r.getphraseblockheight(1,"del");r.setState({annexdocinfos:o,top:a}),r.props.updateWeaRichText("",t),r.props.onChange&&r.props.onChange("Upload","",o,"file","","del"),E({docid:t})}catch(e){}}}),t.stopPropagation()}},{key:"getphraseblockheight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=this.state.annexdocinfos,n=r.length;return"del"==t?n-=e:"add"==t&&(n+=e),n=n>4?4:n,0===n?-53:-(this.FILE_LIST_ITEM_HEIGHT*n+57)}}]),t}(g.default.Component);t.default=I},function(e,t){},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(8),a=n(o),i=r(3),s=n(i),l=r(1),c=n(l),u=r(2),d=n(u),f=r(4),p=n(f),h=r(5),m=n(h),v=r(6),g=function(e){function t(e){return(0,c.default)(this,t),(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.datas,r=void 0===t?{}:t,n=r.listB||[],o=$(this.refs.wfRemarkProgress.parentElement).parent().parent();if(n.length>0)o.css("top","-40px"),o.find(".file-content-block").hide();else{if(((this.props.datas||[]).listB||[]).length>0&&0===n.length){o.find(".file-content-block").show();var a=o.find("li").length;a=a>4?4:a,o.css("top",-(28*a+57)+"px")}}}},{key:"render",value:function(){var e=this,t=this.props.datas,r=void 0===t?{}:t,n=r.listB||[],o=n.length>1?-(34*(n.length-1)+5):-5;return React.createElement("div",{className:"wf_upload_progress",style:{display:n.length>0?"block":"none",top:o},ref:"wfRemarkProgress"},n.map(function(t,r){var n=t.name,o=(t.id,t.progress),i=t.showProgress,s=t.error,l=t.progressStatus,c=s&&l?{status:l}:{};return React.createElement("div",{className:"wea-upload-list-item"},React.createElement("div",{className:"wea-upload-list-item-file"},n),i&&React.createElement(v.Progress,(0,a.default)({ecId:(e&&e.props&&e.props.ecId||"")+"_Progress@tu7m1h@"+r,style:{width:"100%",height:"18px",lineHeight:"18px",display:"block"},showInfo:!1,percent:o,strokeWidth:3},c)))}))}}]),t}(React.Component);t.default=g},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(3),a=n(o),i=r(1),s=n(i),l=r(2),c=n(l),u=r(4),d=n(u),f=r(5),p=n(f);r(401);var h=r(6),m=r(0),v=r(42),g=n(v),w=r(30),y=n(w),b=(h.Modal.warning,m.WeaLocaleProvider.getLabel),_=function(e){function t(e){(0,s.default)(this,t);var r=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));r.addAtToCKEditor=function(e){var t=r.state.selectUser,n=void 0===t?[]:t;if(0===n.length)h.message.warning(b(385755,"请至少选择一个")+"！",5);else{var o=[];n.map(function(e){o.push('<a href="/hrm/HrmTab.jsp?_fromURL=HrmResource&id='+e.uid+'" atsome="@'+e.uid+'" contenteditable=\'false\' style="cursor:pointer;text-decoration:none !important;margin-right:8px;color:#2777c1!important" target="_blank">@'+e.data+"&nbsp;</a>")}),r.props.appendHtmlToCKEditor&&r.props.appendHtmlToCKEditor(r.appendStyle(o.join(""))),r.setState({selectUser:[],q:""}),r.props.showComponent("")}},r.doCancel=function(){r.setState({q:"",selectUser:[]}),r.props.showComponent("")},r.doSearch=function(e){var t=r.state,n=(t._atitems,t.atitems),o=e.target.value,a=[];a=0===(0,g.default)(o).length?a.concat(n):n.filter(function(e){return e.data.indexOf(o)>=0||(0,g.default)(e.datapy).length>0&&e.datapy.indexOf(o.toUpperCase())>=0}),r.setState({_atitems:a.slice(0,100),q:o})},r.state={atitems:[],_atitems:[],selectUser:[],q:""};var n=e.requestid,o=void 0===n?-1:n,i={requestid:o};return m.WeaTools.callApi("/api/workflow/forward/getReqWfNodeOperators","GET",i).then(function(e){var t=[],n=e.operators;(void 0===n?[]:n).map(function(e){r.arrayContains(t,e)||t.push(e)}),r.setState({atitems:t,_atitems:t.slice(0,100)}),window.__atdataready=!0,window.__atdata=t}),r}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentWillReceiveProps",value:function(e){if(e.visible){var t=this.state.atitems;this.setState({selectUser:[],_atitems:t.slice(0,100)})}}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,y.default)(this.state.atitems,t.atitems)||!(0,y.default)(this.state._atitems,t._atitems)||!(0,y.default)(this.state.selectUser,t.selectUser)||this.state.q!==t.q||this.props.visible!==e.visible}},{key:"render",value:function(){var e=this,t=this.state,r=t._atitems,n=void 0===r?[]:r,o=t.selectUser,a=void 0===o?[]:o,i=t.q,s=this.props.visible;return React.createElement("div",{className:"wf-ckeditor-wfat"},React.createElement("div",{className:"wea-cb-item",onClick:function(){e.props.showComponent(s?"":"WfAt")}},React.createElement(h.Tooltip,{ecId:(this&&this.props&&this.props.ecId||"")+"_Tooltip@wijr9c",placement:"topLeft",title:b(124785,"在签字意见框中输入@可直接选择节点参与人")},React.createElement("span",{className:"wea-cbi-icon icon-coms-at"}))),React.createElement("div",{className:"wfat-content",style:{display:s?"block":"none"}},React.createElement("div",{className:"triangle_border_nw"}),React.createElement("div",{className:"wfat-input"},React.createElement(h.Input,{ecId:(this&&this.props&&this.props.ecId||"")+"_Input@nc342i",type:"text",value:i,onChange:this.doSearch}),React.createElement("span",{className:"wfat-input-search icon-coms-search"})),React.createElement("div",{className:"wfat-list"},n.length>0?React.createElement(m.WeaNewScroll,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaNewScroll@2h7xi3",height:125},React.createElement("ul",null,n.map(function(t,r){return React.createElement("li",null,React.createElement(h.Checkbox,{ecId:(e&&e.props&&e.props.ecId||"")+"_Checkbox@6t8iev@"+r,checked:e.arrayContains(a,t),onClick:e.selectedAtUser.bind(e,t)},React.createElement("span",{onClick:e.addOneAtToCkeditor.bind(e,t),style:{cursor:"pointer"}},t.data)))}))):React.createElement("div",{className:"wfat-no-data"},React.createElement("span",{className:"wfat-no-data-icon icon-coms-blank"}),React.createElement("span",{className:"wfat-no-data-tip"},b(83553,"暂无数据")))),React.createElement("div",{className:"wfat-footer"},React.createElement(h.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@rtlimn",onClick:this.addAtToCKEditor,className:"ant-btn-1"},b(826,"确定")),React.createElement(h.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@lnvn66",onClick:this.doCancel,className:"ant-btn-2"},b(31129,"取消")))))}},{key:"selectedAtUser",value:function(e){var t=this.state.selectUser,r=void 0===t?[]:t,n=r.filter(function(t){return t.uid!==e.uid});n.length===r.length&&n.push(e),this.setState({selectUser:n})}},{key:"addOneAtToCkeditor",value:function(e,t){this.props.appendHtmlToCKEditor&&this.props.appendHtmlToCKEditor(this.appendStyle('<a href="/hrm/HrmTab.jsp?_fromURL=HrmResource&id='+e.uid+'" atsome="@'+e.uid+'" contenteditable="false" style="cursor:pointer;text-decoration:none !important;margin-right:8px;color:#2777c1!important" target="_blank">@'+e.data+"</a>")),this.setState({selectUser:[],q:""}),this.props.showComponent(""),t.stopPropagation()}},{key:"appendStyle",value:function(e){var t=this.props.editorId,r=window.CK_REF[t].getEditor().ui.instances,n=e;if(r){n="<span style=\"font-family:'"+(r.Font._.value||"Microsoft YaHei")+"';font-size:"+(r.FontSize._.value||12)+'px" >'+e+"&nbsp;&#8203;</span>"}return n}},{key:"arrayContains",value:function(e,t){return e.filter(function(e){return e.uid===t.uid}).length>0}}]),t}(React.Component);t.default=_},function(e,t){},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(3),a=n(o),i=r(1),s=n(i),l=r(2),c=n(l),u=r(4),d=n(u),f=r(5),p=n(f);r(403);var h=r(6),m=r(0),v=r(42),g=n(v),w=r(30),y=n(w),b=r(130),_=n(b),S=r(131),k=n(S),E=r(132),I=n(E),C=r(7),R=(new _.default,new I.default),x=m.WeaLocaleProvider.getLabel,P=function(e){function t(e){(0,s.default)(this,t);var r=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return r.doChangeStatus=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m.WeaTools.callApi("/api/workflow/userDefaultSetting/doChangeStatus","POST",e).then(function(t){var n=t.success,o=void 0===n?"":n,a=t.msg,i=void 0===a?"":a;if(i&&h.message.success(i),1==o){var s=r.state.phraseInfo.filter(function(t){return t.id!=e.id});r.setState({phraseInfo:s,phraseInfo_back:s}),r.props.saveCallBack()}})},r.doDel=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m.WeaTools.callApi("/api/workflow/userDefaultSetting/doDel","POST",e).then(function(t){if(t.msg&&h.message.success(t.msg),1==t.success){var n=r.state.phraseInfo.filter(function(t){return t.id!=e.ids});r.setState({phraseInfo:n,phraseInfo_back:n}),r.props.saveCallBack()}})},r.doAddPhrase=function(){var e=r.state,t=e.newphrase,n=void 0===t?"":t,o=e.phraseInfo;(0,g.default)(n).length>0&&r.realLength(n)<=30?(o.push({workflowPhrases:n,workflowPhrasesContent:n}),r.setState({isAdd:!1,phraseInfo:o,newphrase:""}),m.WeaTools.callApi("/api/workflow/reqform/addWfPhrase","POST",{phraseShort:n,phraseDesc:n})):h.message.warning(x(385870,"文本长度不能超过30(1个中文字符等于3个长度)"),3)},r.doChangeEvent=function(e){r.setState({newphrase:e.target.value||""})},r.state={isAdd:!1,newphrase:"",searchValue:"",phraseInfo:r.props.phraseInfo||[],phraseInfo_back:r.props.phraseInfo||[],isShowAddDialog:!1},r}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.visible!=this.props.visible&&this.setState({isAdd:!1,phraseInfo:(0,C.toJS)(e.phraseInfo)||[],phraseInfo_back:(0,C.toJS)(e.phraseInfo)||[],searchValue:""})}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,y.default)(this.state.phraseInfo,t.phraseInfo)||this.state.isAdd!==t.isAdd||this.state.isShowAddDialog!==t.isShowAddDialog||this.state.newphrase!==t.newphrase||this.props.visible!==e.visible||this.props.signinputPhraseDirection!==e.signinputPhraseDirection||this.props.signinputPhraseOffset!==e.signinputPhraseOffset||this.props.triangleLeft!==e.triangleLeft}},{key:"render",value:function(){var e=this,t=x(528468,"批示语吗？"),r=this.props,n=r.visible,o=r.extendParams,a=void 0===o?{}:o,i=(r.setVisiable,r.signinputPhraseDirection),s=r.use_textarea_signinput,l=this.state,c=l.phraseInfo,u=void 0===c?[]:c,d=l.isAdd,f=l.newphrase,p=(React.createElement(h.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@0etze5",onClick:this.doAddPhrase},x(826,"确定")),{display:n?"block":"none"});d&&(p["border-bottom"]=0);var v=a.signinputPhraseWidth,g=a.signinputPhraseHeight,w=void 0===g?95:g;w=u.length>=5?230:30*u.length+80;var y=this.props.signinputPhraseOffset;v&&(p.width=v+"px",p.left=y-1+"px");var b=this.props.triangleLeft,_={};v>251&&(_.width="100%"),p.marginTop="bottom"===i?"11px":-w-40+"px";var S=this;return React.createElement("div",{className:"wf-ckeditor-wfphrase",ref:"wfphrase"},React.createElement("div",{className:"wea-cb-item",onClick:function(){e.props.showComponent(n?"":"WfPhrase")}},React.createElement("span",{className:"wea-cbi-icon icon-coms-Advice"}),React.createElement("span",{className:"wea-cbi-text"},x(22409,"常用批示语"))),React.createElement("div",{className:"wfphrase-content",style:p},"bottom"===i&&React.createElement("div",{className:"triangle_border_nw",style:{left:b+"px"}}),React.createElement("div",{className:"wfphrase-search"},React.createElement(m.WeaInputSearch,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaInputSearch@aipizw",value:this.state.searchValue,style:{height:"28px",width:"100%"},onChange:function(t){if(e.setState({searchValue:t}),t){var r=e.state.phraseInfo_back.filter(function(e){return e.workflowPhrases.includes(t)||e.workflowPhrasesContent.includes(t)});e.setState({phraseInfo:r})}else e.setState({phraseInfo:e.state.phraseInfo_back})}})),React.createElement("div",{className:"wfphrase-list"},u.length>0&&React.createElement(m.WeaNewScroll,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaNewScroll@84fknw"},React.createElement("ul",null,u.map(function(r){if(1==r.status)return React.createElement("li",{className:"wfphrase-list-item",onClick:e.addPhrasesToCKEditor.bind(e,r)},React.createElement("span",{title:r.workflowPhrases},""!=r.workflowPhrases&&React.createElement("div",{className:"wfphrase-list-content"},r.workflowPhrases)),React.createElement("div",{className:"wfphrase-list-edit"},1==r.right&&React.createElement("i",{className:"icon-coms-delete wfphrase-edit-icon font14",title:x(91,"删除"),onClick:function(n){h.Modal.confirm({content:x(84051,"确定要删除")+'"'+r.workflowPhrases+'"'+t,onOk:function(){e.doDel({ids:r.id}),n.stopPropagation()}}),n.stopPropagation()}}),1==r.right&&React.createElement("i",{className:"icon-coms-edit wfphrase-edit-icon font14",title:x(93,"编辑"),onClick:function(t){if(t.stopPropagation(),e.props.belongTest)return void h.Modal.warning({title:x(131329,"信息确认"),content:x(386161,"此操作暂不支持流程测试!"),okText:x(83446,"确定")});e.props.showComponent(""),R.onEdit(r.id),S.setState({isShowAddDialog:!0})}}),React.createElement("i",{className:"icon-coms02-hide wfphrase-edit-icon font17",title:x(16636,"隐藏"),onClick:function(n){h.Modal.confirm({content:x(507407,"确定要隐藏")+'"'+r.workflowPhrases+'"'+t,onOk:function(){e.doChangeStatus({id:r.id,groupid:r.groupid,status:r.status}),n.stopPropagation()}}),n.stopPropagation()}})))})))),d?React.createElement("div",{className:"wfphrase-foot-input",style:_},React.createElement(h.Input,{ecId:(this&&this.props&&this.props.ecId||"")+"_Input@s63dqv",type:"text",onChange:this.doChangeEvent,value:f}),React.createElement(h.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@ex4p35",onClick:this.doAddPhrase},x(826,"确定"))):React.createElement("div",{className:"wfphrase-foot-btn"},React.createElement(h.Icon,{ecId:(this&&this.props&&this.props.ecId||"")+"_Icon@2xarzp",title:x(507408,"添加批示语"),type:"plus-circle-o",onClick:function(){var t=e.props,r=t.editorId;if(t.belongTest)return void h.Modal.warning({title:x(131329,"信息确认"),content:x(386161,"此操作暂不支持流程测试!"),okText:x(83446,"确定")});e.props.showComponent("");var n="";window.CK_REF[r]&&window.CK_REF[r].getEditor&&window.CK_REF[r].getEditor().getData&&(n=window.CK_REF[r].getEditor().getData()),R.onEdit("",n),S.setState({isShowAddDialog:!0})}}))),this.state.isShowAddDialog&&React.createElement(k.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_UserPhraseEdit@e8z6pp",baseProps:{use_textarea_signinput:s},store:R,visiable:this.state.isShowAddDialog,saveCallBack:function(t,r){var n=e.state.phraseInfo||[];if(r)for(var o=0;o<n.length;o++)n[o].id==r&&(n[o]=t);else n.push(t);S.setState({isShowAddDialog:!1}),S.props.saveCallBack()},setVisiable:function(e){S.setState({isShowAddDialog:e})},controlLayout:jQuery(".wf-req")?jQuery(".wf-req")[0]:null}))}},{key:"addPhrasesToCKEditor",value:function(e){var t=this.props.onAddPhrase;"function"===typeof t&&t(e.workflowPhrasesContent),this.props.appendHtmlToCKEditor&&this.props.appendHtmlToCKEditor(""+e.workflowPhrasesContent,"last"),this.props.showComponent(""),this.setState({idAdd:!1}),m.WeaTools.callApi("/api/workflow/userDefaultSetting/updateFrequency","POST",{id:e.id,groupid:e.groupid})}},{key:"realLength",value:function(e){for(var t=0,r=0;r<=e.length-1;r++)t+=1,e.charCodeAt(r)>127&&(t+=2);return t}}]),t}(React.Component);t.default=P},function(e,t){},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getReplyNoticeInfo=t.getFwLimitBrowserSet=t.loadRemindInfo=t.loadHrmGroupData=t.saveGroup=t.getHrmGroupForm=t.getOperators=t.loadResources=t.forwardSubmit=t.getSelectMaxRight=t.getSignInput=void 0;var n=r(0);t.getSignInput=function(e){return n.WeaTools.callApi("/api/workflow/reqform/signInput","POST",e)},t.getSelectMaxRight=function(){return n.WeaTools.callApi("/api/workflow/forward/getForwardMaxUserCount","GET",{})},t.forwardSubmit=function(e){return n.WeaTools.callApi("/api/workflow/reqform/remarkOperate","POST",e)},t.loadResources=function(e){return n.WeaTools.callApi("/api/workflow/forward/getForwardOrgResource","GET",e)},t.getOperators=function(e){return n.WeaTools.callApi("/api/workflow/forward/getReqWfNodeOperators","GET",{requestid:e})},t.getHrmGroupForm=function(e){return n.WeaTools.callApi("/api/workflow/forward/getAddGroupCondition","GET",e)},t.saveGroup=function(e){return n.WeaTools.callApi("/api/workflow/forward/saveUserGroupCmd","POST",e)},t.loadHrmGroupData=function(e){return n.WeaTools.callApi("/api/workflow/forward/getHrmGroup","GET",e)},t.loadRemindInfo=function(e){return n.WeaTools.callApi("/api/workflow/forward/loadRemindInfo","GET",e)},t.getFwLimitBrowserSet=function(e){return n.WeaTools.callApi("/api/workflow/fwLimit/getFwLimitBrowserSet","GET",e)},t.getReplyNoticeInfo=function(e){return n.WeaTools.callApi("/api/workflow/forward/getReplyNoticeInfo","GET",e)}},function(e,t,r){function n(e,t){return e&&e.length?a(e,o(t,2)):[]}var o=r(68),a=r(406);e.exports=n},function(e,t,r){function n(e,t,r){var n=-1,d=a,f=e.length,p=!0,h=[],m=h;if(r)p=!1,d=i;else if(f>=u){var v=t?null:l(e);if(v)return c(v);p=!1,d=s,m=new o}else m=t?[]:h;e:for(;++n<f;){var g=e[n],w=t?t(g):g;if(g=r||0!==g?g:0,p&&w===w){for(var y=m.length;y--;)if(m[y]===w)continue e;t&&m.push(w),h.push(g)}else d(m,w,r)||(m!==h&&m.push(w),h.push(g))}return h}var o=r(157),a=r(407),i=r(408),s=r(158),l=r(409),c=r(114),u=200;e.exports=n},function(e,t,r){function n(e,t){return!!(null==e?0:e.length)&&o(e,t,0)>-1}var o=r(63);e.exports=n},function(e,t){function r(e,t,r){for(var n=-1,o=null==e?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1}e.exports=r},function(e,t,r){var n=r(151),o=r(410),a=r(114),i=n&&1/a(new n([,-0]))[1]==1/0?function(e){return new n(e)}:o;e.exports=i},function(e,t){function r(){}e.exports=r},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.RichTextTitle=void 0;var o,a=r(3),i=n(a),s=r(1),l=n(s),c=r(2),u=n(c),d=r(4),f=n(d),p=r(5),h=n(p),m=r(9),v=n(m),g=r(10),w=r(0),y=w.WeaLocaleProvider.getLabel;t.RichTextTitle=(0,g.observer)(o=function(e){function t(e){return(0,l.default)(this,t),(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,h.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props.isRequired,t=void 0===e?"required":e;return v.default.createElement("div",null,v.default.createElement("span",{style:{position:"relative"}},v.default.createElement("span",{className:t},y(18775,"短语描述"))))}}]),t}(v.default.Component))||o},function(e,t,r){var n=r(413),o=r(61),a=r(80),i=a&&a.isRegExp,s=i?o(i):n;e.exports=s},function(e,t,r){function n(e){return a(e)&&o(e)==i}var o=r(36),a=r(22),i="[object RegExp]";e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doSave=t.doEdit=void 0;var n=r(0);t.doEdit=function(e){return n.WeaTools.callApi("/api/workflow/userDefaultSetting/doEdit","POST",e)},t.doSave=function(e){return n.WeaTools.callApi("/api/workflow/userDefaultSetting/doSave","POST",e)}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(8),a=n(o),i=r(3),s=n(i),l=r(1),c=n(l),u=r(2),d=n(u),f=r(4),p=n(f),h=r(5),m=n(h),v=r(0),g=r(6),w=r(198);r(416);var y=v.WeaLocaleProvider.getLabel,b=function(e){function t(e){(0,c.default)(this,t);var r=(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));r.onChangeBrush=function(e){r.setState({brush:e})},r.onChangeColor=function(e){r.setState({color:e})},r.getDialogBtns=function(){var e=r.props.onOk;return[React.createElement(g.Button,{ecId:(r&&r.props&&r.props.ecId||"")+"_Button@dijh36@submit",type:"primary",onClick:function(){e(r.WeaSignature.getDatas(),r.state.brush,r.state.color)}},y(615,"提交")),React.createElement(v.WeaMoreButton,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaMoreButton@jhejao@more",datas:r.getMoreBtns()})]},r.getMoreBtns=function(){var e=r.props.onOk;return[{key:"0",icon:React.createElement("i",{className:"icon-coms-Approval"}),content:y(615,"提交"),onClick:function(){return e(r.WeaSignature.getDatas(),r.state.brush,r.state.color)}}]};var n=r.props.datas,o=(n.datas,n.modeType),a=void 0===o?"":o,i=r.props,l=i.signHandWrittenColor,u=i.signHandWrittenBrush,d="PC";return a.length>1&&(d="MOBILE",a=JSON.parse(a)),r.state={showCollect:!1,datas:(0,w.cloneDeep)(r.props.datas)||{},brush:"MOBILE"==d?a.brush:r.props.datas.brush||u,color:"MOBILE"==d?a.color:r.props.datas.color||l},r}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.WeaSignature&&this.WeaSignature.initCanvas()}},{key:"render",value:function(){var e=this,t=this.props,r=t.visiable,n=t.changeVisiable,o=t.signHandWrittenHW,i=this.state,s=(i.showCollect,i.datas),l=void 0===s?{}:s,c={},u=!1;return l.url&&(u=!0),l.datas&&(c="string"==typeof l.datas?JSON.parse(l.datas):l.datas),!l.mode&&l.modeType&&(l.modeType&&l.modeType.length>1?l.mode=JSON.parse(l.modeType).mode:l.mode=l.modeType||"1"),r?React.createElement(v.WeaDialog,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@i3qjm0",title:y(25349,"手写签批"),visible:r,icon:"icon-coms-workflow",iconBgcolor:"#0079DE",onCancel:function(){n(!1)},buttons:this.getDialogBtns(),style:o,draggable:!1,layout:jQuery(".wf-req")[0],parentClassName:"wf-signature-dialog",destroyBodyOnClose:!0},React.createElement("div",{className:"wf-signature-wrap",style:{height:"100%"}},r&&React.createElement(v.WeaSignature,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaSignature@ecw4lz",canvasStyle:{width:o.width,height:o.height-54},needTrim:!0,needMergePicker:!0,ref:function(t){return e.WeaSignature=t},value:u?{client:"em",url:l.url}:(0,a.default)({},l,{datas:c}),color:this.state.color,onChangeColor:this.onChangeColor,mode:l.mode||"1",onChangeBrush:this.onChangeBrush,brush:this.state.brush}))):React.createElement("div",null)}}]),t}(React.Component);t.default=b},function(e,t){},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(8),a=n(o),i=r(3),s=n(i),l=r(1),c=n(l),u=r(2),d=n(u),f=r(4),p=n(f),h=r(5),m=n(h),v=r(9),g=n(v),w=r(6),y=r(0);r(418);var b=y.WeaLocaleProvider.getLabel,_=function(e){function t(e){(0,c.default)(this,t);var r=(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return r.getMapLocation=function(){return r.refs.map?r.refs.map.getCurrentInfo():{}},r.onChange=function(e){var t=r.props.onMapLocationChange;"function"===typeof t&&t(e)},r.onSubmit=function(){var e=r.getMapLocation();r.setState({visible:!1,locationInfo:e}),r.onChange(e)},r.onReset=function(){var e={info:{},position:[],citycode:""};r.setState({visible:!1,locationInfo:e}),r.onChange(e)},r.onCancel=function(){return r.setVisible(!1)},r.setVisible=function(e){return r.setState({visible:e})},r.state={visible:!1,locationInfo:{info:e.locationInfo||{},position:e.location||[],citycode:""}},r}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){var e=this,t=this.props,r=t.show,n=t.mapConfig,o=void 0===n?{}:n,i=this.state,s=i.visible,l=i.locationInfo,c=l.position,u=l.citycode,d=l.info,f=[g.default.createElement(w.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@kexu2k@submit",type:"primary",onClick:this.onSubmit},b(826,"确定")),g.default.createElement(w.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@sruxbt@reset",type:"ghost",onClick:this.onReset},b(311,"清除")),g.default.createElement(w.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@wukdnl@cancel",type:"ghost",onClick:this.onCancel},b(31129,"取消"))];return g.default.createElement("div",{className:"location-button"},g.default.createElement("div",{className:"wea-cb-item"},r||g.default.createElement("span",{onClick:function(){return e.setVisible(!0)}},g.default.createElement("i",{className:"icon-coms-position",title:b(22981,"位置")}),b(22981,"位置"))),c.length>0&&g.default.createElement("div",{className:"wea-rich-text-upload-list-red-p",style:{top:"10px",left:"17px"}}),g.default.createElement(y.WeaDialog,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@2mgr1v",parentClassName:"wf-map-location-dialog",visible:s,title:b("514074","选择位置"),style:{width:900,height:600},buttons:f,onCancel:function(){return e.setVisible(!1)},icon:"icon-coms-workflow",iconBgcolor:"rgb(0, 121, 222)",layout:jQuery(".wf-req")[0]},g.default.createElement(y.WeaMap,(0,a.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_WeaMap@tjosaz",ref:"map",position:c,info:d,citycode:u,zoom:14,showInfoWindow:!0,showInfoWin:!0,showSearchBar:!0,showGeolocation:!0,clickToChangePosition:!0},o))))}}]),t}(v.Component);t.default=_},function(e,t){},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeFileSec=void 0;var n=r(420),o=function(e){return e&&e.__esModule?e:{default:e}}(n),a=r(35);t.changeFileSec=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new o.default(function(t){var r=e.annexdocinfos,n=e.secLevelInfo,o=void 0===n?{}:n,i=o.secLevel,s=o.secretLevelValidity,l=o.secLevelName,c=[],u=[];if(r.map(function(e){e.secretLevel<i&&(c.push(e.imagefileid),e.secretLevel=i,e.secretLevelValidityValue=l,e.secretLevelValidity=s),u.push(e)}),0==c.length)return void t({annexdocinfos:r});(0,a.ModifySecretLevel)({secretLevel:i,secretLevelValidity:s,imagefileid:c.join(",")}).then(function(e){"success"===e.msg?t({annexdocinfos:u}):reject({info:"更换意见附件密级失败！"})})})}},function(e,t,r){e.exports={default:r(421),__esModule:!0}},function(e,t,r){r(146),r(58),r(76),r(422),r(430),r(431),e.exports=r(12).Promise},function(e,t,r){"use strict";var n,o,a,i,s=r(57),l=r(16),c=r(46),u=r(128),d=r(20),f=r(34),p=r(72),h=r(423),m=r(424),v=r(199),g=r(200).set,w=r(426)(),y=r(133),b=r(201),_=r(427),S=r(202),k=l.TypeError,E=l.process,I=E&&E.versions,C=I&&I.v8||"",R=l.Promise,x="process"==u(E),P=function(){},N=o=y.f,D=!!function(){try{var e=R.resolve(1),t=(e.constructor={})[r(17)("species")]=function(e){e(P,P)};return(x||"function"==typeof PromiseRejectionEvent)&&e.then(P)instanceof t&&0!==C.indexOf("6.6")&&-1===_.indexOf("Chrome/66")}catch(e){}}(),O=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},L=function(e,t){if(!e._n){e._n=!0;var r=e._c;w(function(){for(var n=e._v,o=1==e._s,a=0;r.length>a;)!function(t){var r,a,i,s=o?t.ok:t.fail,l=t.resolve,c=t.reject,u=t.domain;try{s?(o||(2==e._h&&A(e),e._h=1),!0===s?r=n:(u&&u.enter(),r=s(n),u&&(u.exit(),i=!0)),r===t.promise?c(k("Promise-chain cycle")):(a=O(r))?a.call(r,l,c):l(r)):c(n)}catch(e){u&&!i&&u.exit(),c(e)}}(r[a++]);e._c=[],e._n=!1,t&&!e._h&&T(e)})}},T=function(e){g.call(l,function(){var t,r,n,o=e._v,a=F(e);if(a&&(t=b(function(){x?E.emit("unhandledRejection",o,e):(r=l.onunhandledrejection)?r({promise:e,reason:o}):(n=l.console)&&n.error&&n.error("Unhandled promise rejection",o)}),e._h=x||F(e)?2:1),e._a=void 0,a&&t.e)throw t.v})},F=function(e){return 1!==e._h&&0===(e._a||e._c).length},A=function(e){g.call(l,function(){var t;x?E.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},M=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),L(t,!0))},W=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw k("Promise can't be resolved itself");(t=O(e))?w(function(){var n={_w:r,_d:!1};try{t.call(e,c(W,n,1),c(M,n,1))}catch(e){M.call(n,e)}}):(r._v=e,r._s=1,L(r,!1))}catch(e){M.call({_w:r,_d:!1},e)}}};D||(R=function(e){h(this,R,"Promise","_h"),p(e),n.call(this);try{e(c(W,this,1),c(M,this,1))}catch(e){M.call(this,e)}},n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=r(428)(R.prototype,{then:function(e,t){var r=N(v(this,R));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=x?E.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&L(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new n;this.promise=e,this.resolve=c(W,e,1),this.reject=c(M,e,1)},y.f=N=function(e){return e===R||e===i?new a(e):o(e)}),d(d.G+d.W+d.F*!D,{Promise:R}),r(75)(R,"Promise"),r(429)("Promise"),i=r(12).Promise,d(d.S+d.F*!D,"Promise",{reject:function(e){var t=N(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(s||!D),"Promise",{resolve:function(e){return S(s&&this===i?R:this,e)}}),d(d.S+d.F*!(D&&r(194)(function(e){R.all(e).catch(P)})),"Promise",{all:function(e){var t=this,r=N(t),n=r.resolve,o=r.reject,a=b(function(){var r=[],a=0,i=1;m(e,!1,function(e){var s=a++,l=!1;r.push(void 0),i++,t.resolve(e).then(function(e){l||(l=!0,r[s]=e,--i||n(r))},o)}),--i||n(r)});return a.e&&o(a.v),r.promise},race:function(e){var t=this,r=N(t),n=r.reject,o=b(function(){m(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return o.e&&n(o.v),r.promise}})},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){var n=r(46),o=r(192),a=r(193),i=r(23),s=r(97),l=r(127),c={},u={},t=e.exports=function(e,t,r,d,f){var p,h,m,v,g=f?function(){return e}:l(e),w=n(r,d,t?2:1),y=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(a(g)){for(p=s(e.length);p>y;y++)if((v=t?w(i(h=e[y])[0],h[1]):w(e[y]))===c||v===u)return v}else for(m=g.call(e);!(h=m.next()).done;)if((v=o(m,w,h.value,t))===c||v===u)return v};t.BREAK=c,t.RETURN=u},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(16),o=r(200).set,a=n.MutationObserver||n.WebKitMutationObserver,i=n.process,s=n.Promise,l="process"==r(56)(i);e.exports=function(){var e,t,r,c=function(){var n,o;for(l&&(n=i.domain)&&n.exit();e;){o=e.fn,e=e.next;try{o()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(l)r=function(){i.nextTick(c)};else if(!a||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var u=s.resolve(void 0);r=function(){u.then(c)}}else r=function(){o.call(n,c)};else{var d=!0,f=document.createTextNode("");new a(c).observe(f,{characterData:!0}),r=function(){f.data=d=!d}}return function(n){var o={fn:n,next:void 0};t&&(t.next=o),e||(e=o,r()),t=o}}},function(e,t,r){var n=r(16),o=n.navigator;e.exports=o&&o.userAgent||""},function(e,t,r){var n=r(37);e.exports=function(e,t,r){for(var o in t)r&&e[o]?e[o]=t[o]:n(e,o,t[o]);return e}},function(e,t,r){"use strict";var n=r(16),o=r(12),a=r(27),i=r(28),s=r(17)("species");e.exports=function(e){var t="function"==typeof o[e]?o[e]:n[e];i&&t&&!t[s]&&a.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,r){"use strict";var n=r(20),o=r(12),a=r(16),i=r(199),s=r(202);n(n.P+n.R,"Promise",{finally:function(e){var t=i(this,o.Promise||a.Promise),r="function"==typeof e;return this.then(r?function(r){return s(t,e()).then(function(){return r})}:e,r?function(r){return s(t,e()).then(function(){throw r})}:e)}})},function(e,t,r){"use strict";var n=r(20),o=r(133),a=r(201);n(n.S,"Promise",{try:function(e){var t=o.f(this),r=a(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},function(e,t){},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=r(8),i=n(a),s=r(3),l=n(s),c=r(1),u=n(c),d=r(2),f=n(d),p=r(4),h=n(p),m=r(5),v=n(m);r(434),r(435);var g=r(33),w=r(0),y=r(6),b=r(7),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(b),S=r(436),k=n(S),E=r(195),I=n(E),C=r(205),R=n(C),x=r(130),P=n(x),N=r(206),D=n(N),O=r(207),L=n(O),T=r(444),F=n(T);r(204);var A=w.WeaLocaleProvider.formatMultiLang,M=w.WeaLocaleProvider.getLabel,W=(0,g.observer)(o=function(e){function t(e){(0,u.default)(this,t);var r=(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return r.state={},r}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=new P.default,t=new D.default;this.setState({wfForwardStore:e,wfForwardBackStore:t})}},{key:"render",value:function(){var e=this,t=this.state,r=t.wfForwardStore,n=t.wfForwardBackStore,o=this.props,a=o.wfCenterLogListStore,s=o.onCancel,l=a.logList,c=void 0===l?[]:l,u=a.loading,d=a.submitLoading,f=a.logCount,p=void 0===f?0:f,h=a.commonParams,m=void 0===h?{}:h,v=a.variableMap,g=a.loadMore,b=a.controlVariableMap,_=a.doSubmit,S=m.requestnamenew,E=void 0===S?"":S,C=m.requestname,x=void 0===C?"":C,P=m.requestid,N=void 0===P?-1:P,D=m.isHideArea,O=void 0===D?"0":D,T=m.f_weaver_belongto_userid,W=void 0===T?"":T,j=m.f_weaver_belongto_usertype,B=void 0===j?"0":j,z=m.urger,q=void 0===z?"":z,U="javaScript:openFullWindowForWfCenterRequest('"+(window.ecologyContentPath||"")+"/workflow/request/ViewRequestForwardSPA.jsp?requestid="+N+("1"==q?"&urger=1":"")+"&f_weaver_belongto_userid="+W+"&f_weaver_belongto_usertype="+B+"&isovertime=')",V=/<[^>]+>/g,G=A(E||x);G=(0,F.default)(G,V,"");var H=React.createElement("a",{className:"portal-workflow-center-dialog-title",href:U,title:G,dangerouslySetInnerHTML:{__html:G},onClick:"1"==q?function(){e.doClose()}:function(){}});return React.createElement(w.WeaDialog,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@z1vxq2",onCancel:function(){return e.doClose()},title:H,visible:v.get("visible"),style:{width:900,height:500},icon:"icon-coms-workflow",iconBgcolor:"#0079DE",buttons:this.getBottomButtons(),hasScroll:!0,layout:jQuery("#container")[0]},React.createElement("div",{className:"portal-workflow-center"},"1"==O?React.createElement("div",{className:"hide-log-list"},React.createElement(w.WeaAlertPage,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaAlertPage@h34w1z",icon:"icon-coms-blank"},React.createElement("div",null,React.createElement("span",{style:{display:"block"}},M(385183,"此流程设置了意见区域不显示")),React.createElement("a",{style:{marginTop:"10px",display:"block"},href:U},M(385184,"点击此处打开流程表单"))))):React.createElement("div",{className:"wf-sign-list"},c.map(function(t,r){return React.createElement(k.default,(0,i.default)({ecId:(e&&e.props&&e.props.ecId||"")+"_LogItem@uy8gfe@"+r},m,{isShowUserheadimg:!0,data:t,store:a,forwardEvent:function(t){return e.doForward(t)}}))})),!u&&p>c.length&&"1"!=O&&React.createElement("div",{className:"ant-table-placeholder"},React.createElement("span",{className:"log-load-more",onClick:function(){return g()}},React.createElement("span",null,M("82720","加载更多")),React.createElement("i",{className:"icon-coms-down"}))),!u&&0==p&&"1"!=O&&React.createElement("div",{className:"ant-table-placeholder",style:{borderBottom:0}},M("386163","暂时没有数据")),u&&React.createElement("div",{className:"ant-table-placeholder",style:{borderBottom:0}},React.createElement(y.Spin,{ecId:(this&&this.props&&this.props.ecId||"")+"_Spin@ca5rph"})),r&&React.createElement(I.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_WfForward@y0e3mc",wfForwardStore:r}),n&&React.createElement(R.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_WfForwardBack@vzmtph",wfForwardBackStore:n}),v.has("showSubmitDialog")&&React.createElement(L.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_Submit@rc8cjk",visible:v.get("showSubmitDialog")||!1,onSubmit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return _(e,s)},loading:d,onCancel:function(){b("showSubmitDialog",!1)},onSubmitText:"1"==q?M(21223,"督办"):""})))}},{key:"getBottomButtons",value:function(){var e=this,t=this.props.wfCenterLogListStore,r=t.rightMenu,n=void 0===r?{}:r,o=t.commonParams,a=void 0===o?{}:o,i=t.loading,s=void 0!==i&&i,l=t.variableMap,c=n.rightMenus,u=void 0===c?[]:c,d=a.requestid,f=void 0===d?-1:d,p=[];return u.map(function(t,r){var n=(t.type,t.menuName),o=(t.menuIcon,t.menuFun),a=t.isTop;if(t.isPortal){var i=o.indexOf("this")>=0?o.split("this")[0]+")":o;"1"==a&&p.length<4&&p.push(React.createElement(y.Button,{ecId:(e&&e.props&&e.props.ecId||"")+"_Button@3flbpl@"+r,type:"primary",disabled:s,onClick:function(){e.doRightBtnEvent(i)}},n))}}),p.push(React.createElement(w.WeaMoreButton,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaMoreButton@7lpm46@more",datas:this.getRightButtons(),collectParams:{favname:l.get("dialogTitle"),favouritetype:"2",objid:f}},M(17499,"更多"))),p}},{key:"getRightButtons",value:function(){var e=this,t=this.props.wfCenterLogListStore,r=t.rightMenu,n=void 0===r?{}:r,o=(t.commonParams,t.loading),a=void 0!==o&&o,i=n.rightMenus,s=void 0===i?[]:i,l=[];return _.toJS(s).map(function(t,r){var n=t.type,o=t.menuName,i=t.menuIcon,s=t.menuFun;t.isTop;if(t.isPortal){var c=s.indexOf("this")>=0?s.split("this")[0]+")":s;l.push({key:n+"_"+r,disabled:a,icon:React.createElement("i",{className:i}),content:o,onClick:function(){e.doRightBtnEvent(c)}})}}),l}},{key:"doRightBtnEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.wfCenterLogListStore,r=t.submitParam,n=void 0===r?{}:r,o=t.rightMenu,a=void 0===o?{}:o,i=t.controlVariableMap,s=t.commonParams,l=void 0===s?{}:s,c=l.required,u=void 0!==c&&c;if("doReviewE9()"===e)this.doForward();else if("doSubmitBack()"===e){if(u)return void this.doFormRequiredPrompt();i("showSubmitDialog",!0),i("submitParam",{actiontype:"requestBatchSubmit",src:"submit",needwfback:"1"})}else if("doSubmitNoBack()"===e){if(u)return void this.doFormRequiredPrompt();i("showSubmitDialog",!0),i("submitParam",{actiontype:"requestBatchSubmit",src:"submit",needwfback:"0"})}else if("doRemark_nBack()"===e)i("showSubmitDialog",!0),i("submitParam",{actiontype:"remarkOperation",src:"save",needwfback:"1"});else if("doRemark_nNoBack()"===e)i("showSubmitDialog",!0),i("submitParam",{actiontype:"remarkOperation",src:"save",needwfback:"0"});else if("doSubmitDirect()"==e){if(u)return void this.doFormRequiredPrompt();var d=n.ifchangstatus,f=a.hasback,p=a.hasnoback;a.lastnodeid;""!=d&&("1"==f||""==f&&""==p)?(i("showSubmitDialog",!0),i("submitParam",{actiontype:"requestBatchSubmit",src:"submit",needwfback:"1"})):(i("showSubmitDialog",!0),i("submitParam",{actiontype:"requestBatchSubmit",src:"submit",needwfback:"0"}))}else"doSupervise()"===e?(i("showSubmitDialog",!0),i("submitParam",{actiontype:"doSupervise",src:"supervise",needwfback:"0"}),i("isSupervise",!0)):"doReviewE9Back();"===e&&this.doForwardBack()}},{key:"doFormRequiredPrompt",value:function(){y.Modal.warning({title:M(131329,"信息确认"),content:M(386175,"表单有可必填字段，请打开表单填写后提交！"),okText:M(83446,"确定")})}},{key:"doForward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.wfCenterLogListStore,r=t.commonParams,n=void 0===r?{}:r,o=t.reloadLogList,a=t.loadFormRigthMunu,i=n.requestid,s=void 0===i?-1:i,l=n.nodeid,c=n.workflowid,u=n.beagenter,d=void 0===u?"":u,f=n.f_weaver_belongto_userid,p=n.f_weaver_belongto_usertype,h=this.state.wfForwardStore,m={callBackfun:function(){o(),a()}},v={requestid:s,nodeid:l,showForward:!0,forwardflag:"1",forwardOperators:e,bdf_wfid:c,workflowid:c,agentorbyagentid:d,f_weaver_belongto_userid:f,f_weaver_belongto_usertype:p};h.setShowForward(v,m)}},{key:"doForwardBack",value:function(){var e=this.props.wfCenterLogListStore,t=e.commonParams,r=void 0===t?{}:t,n=e.reloadLogList,o=e.loadFormRigthMunu,a=r.requestid,i=void 0===a?-1:a,s=this.state.wfForwardBackStore;s.setShowForwardBack(!0,i),s.setCallBackAction({callbackFun:function(){s.setShowForwardBack(!1),n(),o()}})}},{key:"doClose",value:function(){var e=this.props,t=e.wfCenterLogListStore,r=e.onCancel,n=t.controlVariableMap,o=t.clearDatas;n("visible",!1),o();try{"function"===typeof r&&r(!1)}catch(e){}}}]),t}(React.Component))||o;t.default=W},function(e,t){},function(e,t){},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a,i=r(3),s=n(i),l=r(1),c=n(l),u=r(2),d=n(u),f=r(4),p=n(f),h=r(5),m=n(h),v=r(6),g=r(186),w=r(0),y=r(124),b=(n(y),r(30)),_=(n(b),r(35)),S=r(204),k=r(188),E=n(k),I=r(189),C=n(I),R=r(7),x=w.WeaLocaleProvider.getLabel,P=(a=o=function(e){function t(e){(0,c.default)(this,t);var r=(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return r.showMapDialog=function(e){r.setState({mapDialogState:e})},r.replyClick=function(e){var t=e.log_remarkHtml,n='<div class="wrap_box">'+t+"</div>",o=$(n);o.children().filter(".container_form_wrap")&&o.children().filter(".container_form_wrap").remove(),o.children().filter("span:not(#wea_rich_text_default_font)")&&o.children().filter("span:not(#wea_rich_text_default_font)").remove();var a=o.html();t=r.imgUtil(a),r.getReplyDialog(e,t)},r.getReplyDialog=function(e,t){var n=r.props.store,o=document.getElementById("reply-dialog-warp");o||(o=document.createElement("div"),o.setAttribute("id","reply-dialog-warp"),document.body.appendChild(o));var a=React.createElement(E.default,{ecId:(r&&r.props&&r.props.ecId||"")+"_ReplyDialog@m9aep0",replyInfo:e,replyRemarkStr:t,store:n});ReactDOM.render(a,o)},r.clickCheckCommunication=function(){"0"==r.state.checkCommunication?r.setState({checkCommunication:"1"}):r.setState({checkCommunication:"0"})},r.onContextmenu=function(){return!1},r.state={showrivebtnspan:!1,allReceiveUser:"",showUsers:!1,loading:!1,mapDialogState:!1,checkCommunication:e.store.communicateSettingKey.isExpendCommunicate||"0"},r}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.data.logid!=e.data.logid&&this.setState({showrivebtnspan:!1,allReceiveUser:"",showUsers:!1,loading:!1,checkCommunication:e.store.communicateSettingKey.isExpendCommunicate})}},{key:"render",value:function(){var e=this,t=this.props,r=t.data,n=void 0===r?{}:r,o=t.isShowUserheadimg,a=t.forward,i=t.forwardEvent,s=(t.requestid,t.workflowid,t.showuserlogids,t.authSignatureStr),l=t.authStr,c=t.isOpenCommunication,u=this.props.store,d=u.communicateSettingKey.isShowSignCommunicate,f=u.hasSubmitRight,p=void 0!==f&&f,h=n.logid,m=n.displaydepid,g=void 0===m?"":m,y=n.img_path,b=void 0===y?"":y,_=n.isexsAgent,k=n.log_agentorbyagentid,E=void 0===k?"":k,I=n.displaybyagentname,P=void 0===I?"":I,N=n.displayid,D=n.displaytype,O=n.displayname,L=void 0===O?"":O,T=n.displaydepname,F=n.log_remarkHtml,A=void 0===F?"":F,M=n.annexdocs,W=void 0===M?[]:M,j=n.signdocs,B=void 0===j?[]:j,z=n.signwfs,q=void 0===z?[]:z,U=n.userimg,V=void 0===U?"":U,G=n.signnaturImgHeight,H=n.remarkLocation,K=void 0===H?"":H,Q=n.speechAttachmetnDatas,$=void 0===Q?[]:Q,J=n.commentList,Y=void 0===J?[]:J,X=n.receiveUser,Z=void 0===X?"":X,ee=n.receiveUserCount,te=void 0===ee?0:ee,re=n.log_operatedate,ne=n.log_operatetime,oe=n.log_nodename,ae=n.operationname,ie=(n.isReference,n.forwardMenuName),se=void 0===ie?"":ie,le=this.state,ce=le.showrivebtnspan,ue=le.allReceiveUser,de=void 0===ue?"":ue,fe=le.showUsers,pe=void 0!==fe&&fe,he=le.loading,me=void 0!==he&&he,ve=le.checkCommunication,ge=void 0!==ve&&ve,we="/hrm/company/HrmDepartmentDsp.jsp?id="+g,ye=(0,S.getLocationInfoData)(K),be="0"==N;return React.createElement("div",{className:"wf-req-sign-list-content"},React.createElement("div",{className:"content-left",style:{paddingLeft:o?"48px":"0px"}},o&&"0"==D&&React.createElement(w.WeaAvatar,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaAvatar@11yq81",userId:N}),o&&"1"==D&&React.createElement("img",{src:b,className:"content-text-left-user-img"}),React.createElement("div",{style:{width:"132px"}},React.createElement("p",{className:"operate-name-label"},_&&React.createElement("a",{href:"javaScript:openhrm("+E+")",onClick:function(e){return window.pointerXY(e)}},P),_&&React.createElement("span",{style:{color:"#2db7f5"}},"->"),0==D?React.createElement("a",{href:"javaScript:openhrm("+N+")",onClick:function(e){return window.pointerXY(e)}},L):React.createElement("a",{target:"_blank",href:"/spa/crm/static/index.html#/main/crm/customerView?customerId="+N},L)),React.createElement("span",{className:"left-department-span"},React.createElement("a",{href:we,target:"_blank",style:{color:"#9b9b9b","white-space":"pre-wrap"}},T)))),React.createElement("div",{className:"content-right",onMouseEnter:function(){e.setState({showrivebtnspan:!0})},onMouseLeave:function(){e.setState({showrivebtnspan:!1})}},React.createElement("div",{className:"content-right-remark-html",dangerouslySetInnerHTML:{__html:A}}),$&&$.map(function(t,r){return React.createElement(w.WeaAudio,{ecId:(e&&e.props&&e.props.ecId||"")+"_WeaAudio@t9v2to@"+r,id:"audio_"+h+"_"+r,onRef:function(e){},src:t})}),W.length>0&&React.createElement("div",{className:"content-right-docs"},React.createElement("i",{className:"icon-mail-enclosure"}),React.createElement("div",null,W.map(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.filelink,n=void 0===r?"":r,o=t.tempshowname,a=void 0===o?"":o,i=t.fileExtendName,s=void 0===i?"":i,l=t.downloadlink,c=void 0===l?"":l,u=t.docImagefileSize,d=t.showdownload;return React.createElement("p",null,React.createElement("a",{target:"_blank",href:n},a+"."+s)," ",1==d&&React.createElement("a",{onClick:function(){e.download(c+"&_t="+(new Date).getTime())}},"[下载("+(u/1e3).toFixed(1)+"k)]"))}))),B.length>0&&React.createElement("div",{className:"content-right-docs"},React.createElement("i",{className:"icon-search-File"}),React.createElement("div",null,B.map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement("p",null,React.createElement("a",{target:"_blank",href:e.filelink},e.tempshowname))}))),q.length>0&&React.createElement("div",{className:"content-right-docs"},React.createElement("i",{className:"icon-coms-workflow"}),React.createElement("div",null,q.map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return React.createElement("p",null,React.createElement("a",{target:"_blank",onClick:function(){openFullWindowHaveBar((window.ecologyContentPath||"")+"/workflow/request/ViewRequestForwardSPA.jsp?requestid="+e.requestid+"&isrequest=1&isovertime=0&desrequestid="+e.desrequestid+"&authStr="+l+"&authSignatureStr="+s)}},e.title))}))),"null"!==K&&ye.longitude&&React.createElement("div",{className:"content-right-docs"},React.createElement("i",{className:"icon-coms-position",title:x(22981,"位置")}),React.createElement("div",null,React.createElement("a",{onClick:function(){window.openlocation(K)}},ye.name))),V&&React.createElement("div",{className:"content-right-userimg"},React.createElement("img",{style:{maxHeight:G+"px"},id:"markImg",src:V,draggable:"false",onContextmenu:this.onContextmenu})),!pe&&React.createElement("p",{className:"logitem-Recipient"},React.createElement("span",null,x("15525","接收人")," : "),Z.replace(/,/g," "),me&&React.createElement(v.Spin,{ecId:(this&&this.props&&this.props.ecId||"")+"_Spin@9t2uly",size:"small"}),!me&&te>20&&React.createElement(v.Icon,{ecId:(this&&this.props&&this.props.ecId||"")+"_Icon@1ohhhw",className:"content-text-right-open-btn",type:"down",onClick:function(){return e.controllShowAllLogOperator(h)}})),pe&&React.createElement("div",{className:"wf-req-sign-list-users"},React.createElement("div",{style:{color:"#323232",paddingRight:20}},React.createElement("span",{style:{color:"#c0c0c0"}},x("15525","接收人")," : "),de.replace(/,/g," ")),React.createElement(v.Icon,{ecId:(this&&this.props&&this.props.ecId||"")+"_Icon@xibs21",className:"content-text-right-open-btn",type:"up",onClick:function(){return e.controllShowAllLogOperator(h)}})),React.createElement("p",{style:{lineHeight:"22px",marginTop:10,color:"#9a9a9a"}},React.createElement("span",{style:{marginRight:8}},re+" "+ne+" "),React.createElement("span",null,"["+oe+" / "+ae+"]"),ce&&React.createElement("span",{className:"funcbtn reqlogbtn"},React.createElement("span",{style:{cursor:"pointer"}},0!==c&&!be&&p&&React.createElement("span",{onClick:this.replyClick.bind(this,n),style:{marginRight:16}},React.createElement("i",{className:"icon-coms-message-o",style:{marginRight:6}}),x(385534,"回复")),"1"==a&&!be&&React.createElement("span",{onClick:function(){return"function"===typeof i&&i(N)},style:{marginRight:16}},React.createElement("i",{className:"icon-xxx-form-Forward",style:{marginRight:6}}),void 0==se||""==se?x("6011","转发"):se))))),"1"==d&&Array.isArray((0,R.toJS)(Y))&&(0,R.toJS)(Y).length>0&&React.createElement("div",{className:"communication-area-wrap"},"0"==ge?React.createElement("div",{className:"communication-folder-panel",onClick:function(){e.clickCheckCommunication()}},React.createElement("span",{className:"word-span",title:x(519614,"展开交流")},x("519614","展开交流")),React.createElement("i",{className:"icon-coms-down-001"})):[React.createElement("div",{className:ge?"communication-folder-panel open":"communication-folder-panel",onClick:function(){e.clickCheckCommunication()}},React.createElement("span",{className:"word-span",title:x(519615,"收起交流")},x("519615","收起交流")," "),React.createElement("i",{className:"icon-coms-up-001"})),React.createElement(C.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_ContentList@9s4bmo@"+h,isFromPortal:!0,logid:h,commentList:(0,R.toJS)(Y),logListStore:this.props.store})]))}},{key:"controllShowAllLogOperator",value:function(e){var t=this,r=this.state,n=r.showUsers,o=void 0!==n&&n,a=r.allReceiveUser,i=void 0===a?"":a,s=r.loading,l=void 0!==s&&s;o||""!=i||l?this.setState({showUsers:!o}):(this.setState({loading:!0}),(0,_.getLogAllReceiveUser)({logid:e}).then(function(e){t.setState({loading:!1,showUsers:!0,allReceiveUser:e.receivedPersons})}))}},{key:"imgUtil",value:function(e){if(e.indexOf("small_pic")>-1||e.indexOf("SMALL_PIC")>-1){var t=e.indexOf("<div");-1==t&&(t=e.indexOf("<DIV"));for(var r=e.substring(0,t),n="",o="",a=e.substring(t);a.indexOf("<img")>-1||a.indexOf("<IMG")>-1;){var i=a.indexOf("</div");-1==i&&(i=a.indexOf("</DIV"));var s=a.substring(i+6),l=s.indexOf("<div");-1==l&&(l=s.indexOf("<DIV")),o=s.substring(0,l),r+=o;var c=a.indexOf("<img");-1==c&&(c=a.indexOf("<IMG")),a=a.substring(c);var u=a.indexOf(">");a=a.substring(u+1);var d=a.indexOf("<img");-1==d&&(d=a.indexOf("<IMG")),a=a.substring(d);var f="",p=a.indexOf(">");f=a.substring(0,p),a=a.substring(p+1),f=f.replace('class="maxImg"',""),r+="<p> "+f+"/> </p>",n=a}var h=n.indexOf("</div>");-1==h&&(h=n.indexOf("</DIV>")),n=n.substring(h+6),r+=n,e=r}return e}},{key:"download",value:function(e){jQuery("#WfFormFileDownload").attr("src",e)}}]),t}(React.Component),o.contextTypes={router:g.routerShape},a);t.default=P},function(e,t){},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doBack=t.getForwardDatas=void 0;var n=r(0);t.getForwardDatas=function(e){return n.WeaTools.callApi("/api/workflow/reqform/getForwardDatas","GET",e)},t.doBack=function(e){return n.WeaTools.callApi("/api/workflow/reqform/doBack","POST",e)}},function(e,t){},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(3),a=n(o),i=r(1),s=n(i),l=r(2),c=n(l),u=r(4),d=n(u),f=r(5),p=n(f),h=r(9),m=n(h),v=r(6),g=r(0),w=g.WeaLocaleProvider.getLabel,y=function(e){function t(e){(0,s.default)(this,t);var r=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return r.doDel=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g.WeaTools.callApi("/api/workflow/userDefaultSetting/doDel","POST",e).then(function(t){if(t.msg&&v.message.success(t.msg),1==t.success){var n=r.state.phrasesDatas.filter(function(t){return t.id!=e.ids});r.setState({phrasesDatas:n}),r.loadPhrasesDatas()}})},r.doChangeStatus=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g.WeaTools.callApi("/api/workflow/userDefaultSetting/doChangeStatus","POST",e).then(function(t){var n=t.success,o=void 0===n?"":n,a=t.msg,i=void 0===a?"":a;if(i&&v.message.success(i),1==o){var s=r.state.phrasesDatas.filter(function(t){return t.id!=e.id});r.setState({phrasesDatas:s}),r.loadPhrasesDatas()}})},r.state={searchValue:"",phrasesDatas:[],phrasesDatas_back:[]},r}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.loadPhrasesDatas()}},{key:"loadPhrasesDatas",value:function(){var e=this;g.WeaTools.callApi("/api/workflow/reqform/getPhrases","POST").then(function(t){t.phrasesDatas;e.state.searchValue&&phrasesDatas_back.filter(function(t){return t.short.includes(e.state.searchValue)||t.desc.includes(e.state.searchValue)}),e.setState({phrasesDatas:t.phrasesDatas,phrasesDatas_back:t.phrasesDatas,searchValue:""})})}},{key:"savePhrases",value:function(){var e=jQuery(".wf-phrases .wf-phrases-input").val(),t=this.state.phrasesDatas;realLength(e)>30?v.message.warning(w(385870,"文本长度不能超过30(1个中文字符等于3个长度)"),3):0==trim(e).length?this.setState({editPhrases:!1}):(t.push({short:e,desc:e}),this.setState({editPhrases:!1,phrasesDatas:t}),g.WeaTools.callApi("/api/workflow/reqform/addWfPhrase","POST",{phraseShort:e,phraseDesc:e}))}},{key:"render",value:function(){var e=this,t=this.props,r=t.userPhraseEditStore,n=t.changeEditPhrases;return m.default.createElement("div",{className:"wf-phrases"},m.default.createElement("div",{className:"wf-phrases-search-input"},m.default.createElement(g.WeaInputSearch,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaInputSearch@eqmx5l",value:this.state.searchValue,style:{height:"30px",width:"100%"},onChange:function(t){if(e.setState({searchValue:t}),t){var r=e.state.phrasesDatas_back.filter(function(e){return e.short.includes(t)||e.desc.includes(t)});e.setState({phrasesDatas:r})}else e.setState({phrasesDatas:e.state.phrasesDatas_back})}})),m.default.createElement("div",{className:"wf-phrases-list"},this.state.phrasesDatas&&this.state.phrasesDatas.map(function(t,n){return 1==t.status&&m.default.createElement("div",{className:"wf-phrases-item",onClick:function(){e.props.clickPhrases(n,e.state.phrasesDatas)}},m.default.createElement("span",{title:t.short},""!=t.short&&m.default.createElement("div",{className:"wf-phrases-item-content"},t.short)),m.default.createElement("div",{className:"wf-phrase-edit-part"},1==t.right&&m.default.createElement("i",{className:"icon-coms-delete wfphrase-edit-icon font14",title:w(91,"删除"),onClick:function(r){v.Modal.confirm({content:w(84051,"确定要删除")+'"'+t.short+'"'+w(528468,"批示语吗？"),onOk:function(){e.doDel({ids:t.id}),e.setState({showPhrases:!1})},onCancel:function(){e.setState({showPhrases:!0})},zIndex:1071}),r.stopPropagation()}}),1==t.right&&m.default.createElement("i",{className:"icon-coms-edit wfphrase-edit-icon font14",title:w(93,"编辑"),onClick:function(n){n.stopPropagation(),r.onEdit(t.id),e.props.changeEditPhrases({editPhrases:!0})}}),m.default.createElement("i",{className:"icon-coms02-hide wfphrase-edit-icon font17",title:w(16636,"隐藏"),onClick:function(r){e.doChangeStatus({id:t.id,groupid:t.groupid,status:t.status}),r.stopPropagation()}})))})),m.default.createElement("div",{style:{position:"relative"},className:"wf-phrases-add-part"},m.default.createElement("div",{className:"wf-phrases-add"},m.default.createElement("i",{title:w(611,"添加"),onClick:function(t){r.onEdit("",e.props.remark),n(!0)},className:"icon-coms-Add-to-o"}))))}}]),t}(m.default.Component);t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(3),a=n(o),i=r(1),s=n(i),l=r(2),c=n(l),u=r(4),d=n(u),f=r(5),p=n(f);r(442);var h=r(6),m=r(0),v=r(443),g=n(v),w=m.WeaLocaleProvider.getLabel,y=function(e){function t(e){(0,s.default)(this,t);var r=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return r.loadHrmGroupData=function(){m.WeaTools.callApi("/api/workflow/forward/getHrmGroup","GET",{}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.datas,n=void 0===t?[]:t;r.setState({hrmgroups:n})})},r.showAllOperators=function(){var e=r.state,t=e.showAllUser,n=e.allUserIds,o=e.allUserCount;if(t){var a=r.props,i=a.handleVisibleChange,s=a.setOperatorIds;a.formParams;s({ids:n,isAllUser:!0,count:o}),i(!1)}else m.WeaTools.callApi("/api/workflow/hrmgroup/datas","GET",{isgetallres:"1",requestid:-1}).then(function(e){r.setState({showAllUser:!0,allUserIds:e.ids,allUserCount:e.count})})},r.updateState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.setState(e)},r.state={showall:!1,hrmgroups:[],allUserIds:"",allUserCount:0,showAllUser:!1,addGroupModalVisible:!1},r}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.isshowoperategroup||this.setState({showall:!1})}},{key:"componentDidMount",value:function(){this.loadHrmGroupData()}},{key:"add",value:function(e,t,r){var n={isAllUser:!1};"4"==r.grouptype&&(n.datas=[r]),"6"==r.grouptype&&(n.datas=r.users),e(n),t(!1)}},{key:"render",value:function(){var e=this,t=this.props,r=t.handleVisibleChange,n=t.setOperatorIds,o=t.allowAllPersonGroup,a=void 0!==o&&o,i=this.state,s=i.showall,l=i.showAllUser,c=i.allUserCount,u=i.hrmgroups,d=void 0===u?[]:u,f=i.addGroupModalVisible;return React.createElement("div",{className:"wea-req-operate-group"},a&&React.createElement("div",{className:"wea-req-all-operators",onClick:this.showAllOperators},React.createElement("span",null,w(1340,"所有人"),l&&"（"+c+"）")),React.createElement("div",{className:"wea-req-operate-content"},React.createElement(m.WeaScroll,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaScroll@w70daq",className:"wea-scroll",typeClass:"scrollbar-macosx"},React.createElement("ul",null,d&&d.map(function(t,o){if(o>2&&!s)return!0;var a=t.users.length;return React.createElement("li",{onClick:e.add.bind(e,n,r,t)},React.createElement("span",{className:"cg_title"},t.lastname+"（"+a+w("33423","人")+"）"),React.createElement("span",{className:"cg_detail"},t.names))})))),d.length>3&&!s&&React.createElement("div",{className:"wea-req-operate-load-more",onClick:function(){return e.setState({showall:!0})}},React.createElement(h.Icon,{ecId:(this&&this.props&&this.props.ecId||"")+"_Icon@fh7kdb",type:"down"}),React.createElement("span",{style:{color:"#4397d3","margin-left":"10px"}},w("20234","显示全部"))),React.createElement("div",{className:"wea-req-operate-add",onClick:function(t){e.updateState({addGroupModalVisible:!0})}},React.createElement("span",{style:{color:"#59b632"}},React.createElement(h.Icon,{ecId:(this&&this.props&&this.props.ecId||"")+"_Icon@r3ddx5",type:"plus-square"})),React.createElement("span",{style:{color:"#323232","margin-left":"10px"}},w("124815","添加常用组"))),f&&React.createElement(g.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_GroupDialog@c3896r",addGroupModalVisible:f,updateState:this.updateState,loadHrmGroupData:this.loadHrmGroupData}))}}]),t}(React.Component);t.default=y},function(e,t){},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(8),a=n(o),i=r(3),s=n(i),l=r(1),c=n(l),u=r(2),d=n(u),f=r(4),p=n(f),h=r(5),m=n(h),v=r(9),g=n(v),w=(r(6),r(7),r(0)),y=w.WeaLocaleProvider.getLabel,b=function(e){function t(e){(0,c.default)(this,t);var r=(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return r.state={groupId:"",groupType:"0",ops:"add"},r}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.addGroupModalVisible,n=(t.setOptParams,t.updateState),o=t.loadHrmGroupData,i=this.state,s=i.groupId,l=void 0===s?"":s,c=i.groupType,u=void 0===c?"0":c,d=i.ops,f=void 0===d?"add":d,p={icon:"icon-coms-workflow",iconBgcolor:"#0079DE",visible:r},h=function(){n({addGroupModalVisible:!1})};if("advice"==f){var m="/spa/hrm/static/index.html#/main/hrm/groupAdvice?groupId="+l;p=(0,a.default)({},p,{title:y("126253","公共组调整建议"),style:{width:650,height:360},url:m,onCancel:h,callback:h})}else if("add"==f||"edit"==f){var v="/spa/hrm/index_mobx.html#/main/hrm/operateGroup?groupType="+u,b="/spa/hrm/index_mobx.html#/main/hrm/operateGroup?groupId="+l,_="add"==f?v:b;p=(0,a.default)({},p,{title:"add"==f?y("386496","新建常用组"):y("126252","常用组设置"),style:"add"==f?{width:650,height:225}:{width:750,height:482},url:_,onCancel:function(){n({addGroupModalVisible:!1})},callback:function(t){1==t?e.setState({ops:"edit"}):n({addGroupModalVisible:!1}),o()}})}return g.default.createElement(w.WeaDialog,(0,a.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@addgroup-usercommongroup"},p))}}]),t}(g.default.Component);t.default=b},function(e,t,r){function n(){var e=arguments,t=o(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var o=r(81);e.exports=n},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,n){r&&(0,M.default)(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function i(e,t,r,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,l,c,u,d,f,p,h,m,v,g,w,y,b,_,S,k,E,I,C,R,x,P,N,D,O,L,T,F,A=r(13),M=o(A),W=r(31),j=o(W),B=r(8),z=o(B),q=r(1),U=o(q),V=r(7),G=n(V),H=(r(11),r(35)),K=n(H),Q=r(126),$=(o(Q),r(89)),J=o($),Y=r(125),X=(o(Y),r(190)),Z=(o(X),r(129)),ee=n(Z),te=r(15),re=o(te),ne=r(19),oe=o(ne),ae=(s=(0,V.action)("更新请求参数"),l=(0,V.action)("控制变量区"),c=(0,V.action)("获取富文本相关底部设置项"),u=(0,V.action)("加载签字意见评论内容"),d=(0,V.action)("保存被回复人的签字意见文本"),f=(0,V.action)("保存一级回复"),p=(0,V.action)("刷新评论内容"),h=function e(){var t=this;(0,U.default)(this,e),a(this,"loading",m,this),a(this,"submitLoading",v,this),a(this,"logList",g,this),this.logCount=0,a(this,"logParams",w,this),this.submitParams={},this.commonParams={},a(this,"variableMap",y,this),a(this,"rightMenu",b,this),a(this,"logItemBaseParams",_,this),a(this,"appStatus",S,this),a(this,"communicateSettingKey",k,this),a(this,"init",E,this),a(this,"loadMarkInfo",I,this),a(this,"updateLogParams",C,this),this.loadMore=function(){var e=t.logParams,r=e.pgnumber,n=void 0===r?1:r,o=e.maxrequestlogid,a=void 0===o?0:o;t.updateLogParams({pgnumber:parseInt(n)+1,maxrequestlogid:a},!0)},a(this,"setLogData",R,this),a(this,"controlVariableMap",x,this),a(this,"loadFormRigthMunu",P,this),this.clearDatas=function(){t.setLogData([],0),t.updateLogParams({pgnumber:1,maxrequestlogid:0})},this.reloadLogList=function(){t.clearDatas(),t.loadMarkInfo()},this.doSubmit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments[1],n=G.toJS(t.variableMap.get("submitParam")),o=t.submitParams.requestid,a=void 0===o?-1:o;t.submitLoading=!0,K.wfCenterSubmit((0,z.default)({},t.submitParams,n,{remark:e,multiSubIds:a})).then(function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.controlVariableMap("showSubmitDialog",!1),t.controlVariableMap("visible",!1),t.clearDatas(),t.rightMenu={},t.commonParams={},t.submitLoading=!1;try{"function"===typeof r&&r(!0)}catch(e){}})},a(this,"hasSubmitRight",N,this),a(this,"getAppStatus",D,this),a(this,"getComment",O,this),a(this,"setReplyMark",L,this),a(this,"saveReplyOthers",T,this),this.delContent=function(e,r){ee.doDelete((0,z.default)({},t.logParams,e)).then(function(e){!1===e.canDelete?(message.destroy(),message.error(getLabel("512478","已超过规定时间或有新内容，无法删除"))):t.reflashContentList(r)})},this.editContent=function(e,r,n){ee.doEditContent((0,z.default)({},t.baseParam,e)).then(function(e){!1===e.canModify&&(message.destroy(),message.error("已超过规定时间或有新内容，无法编辑！")),t.reflashContentList(r),(0,re.default)(n)&&n()})},a(this,"reflashContentList",F,this),this.updateReqInfo=function(){var e=t.commonParams,r=e.requestid,n=(e.iscreate,e.nodetype),o=e.wfmonitor,a=e.urger,i=e.nodeid;K.updateReqInfo({requestid:r,currentnodetype:n,wfmonitor:o,isurger:"1"==a,nodeid:i}).then(function(e){})},this.init=this.init,this.loadMarkInfo=this.loadMarkInfo,this.setLogData=this.setLogData,this.controlVariableMap=this.controlVariableMap,this.updateLogParams=this.updateLogParams,this.loadMore=this.loadMore,this.loadFormRigthMunu=this.loadFormRigthMunu,this.clearDatas=this.clearDatas,this.reloadLogList=this.reloadLogList,this.doSubmit=this.doSubmit,this.updateReqInfo=this.updateReqInfo},m=i(h.prototype,"loading",[V.observable],{enumerable:!0,initializer:function(){return!1}}),v=i(h.prototype,"submitLoading",[V.observable],{enumerable:!0,initializer:function(){return!1}}),g=i(h.prototype,"logList",[V.observable],{enumerable:!0,initializer:function(){return[]}}),w=i(h.prototype,"logParams",[V.observable],{enumerable:!0,initializer:function(){return{}}}),y=i(h.prototype,"variableMap",[V.observable],{enumerable:!0,initializer:function(){return V.observable.map?V.observable.map({}):(0,V.asMap)({})}}),b=i(h.prototype,"rightMenu",[V.observable],{enumerable:!0,initializer:function(){return{}}}),_=i(h.prototype,"logItemBaseParams",[V.observable],{enumerable:!0,initializer:function(){return{}}}),S=i(h.prototype,"appStatus",[V.observable],{enumerable:!0,initializer:function(){return{}}}),k=i(h.prototype,"communicateSettingKey",[V.observable],{enumerable:!0,initializer:function(){return{isShowSignCommunicate:"1",isExpendCommunicate:"1"}}}),E=i(h.prototype,"init",[V.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.loading=!0,t.loadmethod="portal",K.getReqBaseParams(t).then(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.submitParams,o=void 0===n?{}:n,a=r.logBaseParams,i=void 0===a?{}:a,s=r.params,l=void 0===s?{}:s,c=l.verifyRight,u=void 0!==c&&c,d=["requestid","requestType","workflowid","nodeid","signatureAttributesStr","signatureSecretKey","f_weaver_belongto_userid","f_weaver_belongto_usertype","authStr","authSignatureStr","isprint","required","requestname","requestnamenew","isHideArea","beagenter","isurger"],f=["viewLogIds","creatorNodeId","isHideInput","orderbytype","logpagesize","loadmethod"],p={},h=["isShowSignCommunicate","isExpendCommunicate","isOpenCommunication"],m=t.urger,v=void 0===m?"":m;p.urger=v,d.map(function(e){p[e]=l[e]}),o.signatureAttributesStr=l.signatureAttributesStr,o.signatureSecretKey=l.signatureSecretKey;var g={};g.submit=l.requestType,g.pgnumber=1,g.maxrequestlogid=0,f.map(function(e){g[e]=i[e]||""}),h.map(function(t){i[t]&&(e.communicateSettingKey[t]=i[t]),"isOpenCommunication"==t&&(p[t]=l[t])}),g.wfsignlddtcnt=4,e.submitParams=o,e.commonParams=p,e.logItemBaseParams=p,e.logParams=(0,z.default)({},p,g),u?(e.loadMarkInfo(),e.loadFormRigthMunu()):e.loading=!1,e.updateReqInfo(),e.getAppStatus(e.commonParams)}),e.controlVariableMap("visible",r)}}}),I=i(h.prototype,"loadMarkInfo",[V.action],{enumerable:!0,initializer:function(){var e=this;return function(){e.loading||(e.loading=!0),K.getRequestLogList(e.logParams).then(function(t){var r=t.loglist,n=void 0===r?[]:r,o=t.maxrequestlogid,a=t.totalCount,i=(0,J.default)(G.toJS(e.logList),n);e.logParams=(0,z.default)({},e.logParams,{maxrequestlogid:o}),e.setLogData(i,a),e.getComment(),e.loading=!1})}}}),C=i(h.prototype,"updateLogParams",[s],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.logParams=(0,z.default)({},e.logParams,t),r&&e.loadMarkInfo()}}}),R=i(h.prototype,"setLogData",[V.action],{enumerable:!0,initializer:function(){var e=this;return function(t,r){e.logCount=r,e.logList=t}}}),x=i(h.prototype,"controlVariableMap",[l],{enumerable:!0,initializer:function(){var e=this;return function(t,r){e.variableMap.set(t,r)}}}),P=i(h.prototype,"loadFormRigthMunu",[V.action],{enumerable:!0,initializer:function(){var e=this;return function(){K.getRightMenu(e.commonParams).then(function(t){var r=t.forward,n=void 0===r?"":r;e.commonParams.forward=n,t.rightMenus.sort(function(e,t){return e.order-t.order}),e.rightMenu=t})}}}),N=i(h.prototype,"hasSubmitRight",[V.observable],{enumerable:!0,initializer:function(){return!1}}),D=i(h.prototype,"getAppStatus",[c],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ee.getInitParams(t).then(function(t){e.appStatus=t.appStatus,e.hasSubmitRight=t.hasSubmitRight})}}}),O=i(h.prototype,"getComment",[u],{enumerable:!0,initializer:function(){var e=this;return function(t){e.logList.map(function(t,r){var n=(0,z.default)({},e.commonParams,{type:"list",requestLogId:t.logid});t.hasCommunicationQuote&&ee.getContentList(n).then(function(n){var o=n.contentList;e.logList[r]=(0,z.default)({},t,{commentList:o})})})}}}),L=i(h.prototype,"setReplyMark",[d],{enumerable:!0,initializer:function(){var e=this;return function(t){e.signReplyText=t}}}),T=i(h.prototype,"saveReplyOthers",[f],{enumerable:!0,initializer:function(){var e=this;return function(t,r){var n=t.replyInfo,o=void 0===n?{}:n,a=t.richParams,i={},s=a.remark;if(""!=a.remark&&a.remark.indexOf("<img")<0&&(s=a.remark.replace(/<\/?[^>]*>/g,""),s=s.replace(/[\u200B-\u200D\uFEFF]/g,""),s=s.replace(/\n/g,""),s=s.replace("&#8203;","").replace(/&nbsp;/g,""),s=s.trim()),!s)return message.destroy(),message.error(getLabel(382648,"请输入交流内容")),!1;var l={reply_man:o.displayname,log_useid:o.displayid,log_displaydepid:o.displaydepid,log_displaydepname:o.displaydepname,log_operatedate:o.log_operatedate,log_operatetime:o.log_operatetime,log_nodename:o.log_nodename,operationname:o.operationname,sign_logid:o.logid,signReplyText:e.signReplyText,log_userType:"0"==o.displaytype?"1":"1"==o.displaytype?"2":""};i=(0,z.default)({},l,a,e.logParams,{quote_type:"quoteSign"}),ee.doSaveContent(i).then(function(t){t.result&&e.reloadLogList(),(0,re.default)(r)&&r()})}}}),F=i(h.prototype,"reflashContentList",[p],{enumerable:!0,initializer:function(){var e=this;return function(t){var r=(0,z.default)({type:"list",requestLogId:t},e.logParams);ee.getContentList(r).then(function(r){var n=(0,oe.default)((0,V.toJS)(e.logList));n.map(function(e,o){e.logid==t&&(n[o].commentList=[].concat((0,j.default)(r.contentList)))}),e.logList=n})}}}),h);t.default=ae},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=r(32),i=n(a),s=r(3),l=n(s),c=r(1),u=n(c),d=r(2),f=n(d),p=r(4),h=n(p),m=r(5),v=n(m),g=r(9),w=n(g),y=r(10),b=r(447),_=n(b),S=r(0),k=r(6);r(208);var E=r(198),I=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(E),C=r(209),R=n(C),x=r(210),P=n(x),N=new R.default,D=S.WeaLocaleProvider.getLabel,O=void 0,L=void 0,T=void 0,F=void 0,A=void 0,M=(0,y.observer)(o=function(e){function t(e){(0,u.default)(this,t);var r=(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return T=r,r}return(0,v.default)(t,e),(0,f.default)(t,[{key:"getFormParams",value:function(){var e=this.props,t=e.location,r=e.formParams;return t&&!I.isEmpty(t.query)?t.query:r}},{key:"componentDidMount",value:function(){var e=this.props.wfShareStore,t=e.initDatas,r=this.getFormParams();O=r.requestid,L=r.workflowid,F=r.f_weaver_belongto_userid,A=r.f_weaver_belongto_usertype,t({requestid:O,wfid:L,f_weaver_belongto_userid:F,f_weaver_belongto_usertype:A})}},{key:"getSelectedRowKeysTail",value:function(){var e=this.props.wfShareStore,t=e.tableStore,r=t,n=r.selectedRowKeys,o=(0,i.default)(n);return o.slice(1,o.length-1).replace(/\"/g,"")}},{key:"deleteConfirm",value:function(e){var t=this.props.wfShareStore,r=t.deleteDatas,n=e;n?k.Modal.confirm({title:D(15172,"系统提示"),content:D(15097,"确定要删除吗？"),okText:D(83446,"确定"),cancelText:D(31129,"取消"),onOk:function(){r({requestid:O,wfid:L,ids:n,f_weaver_belongto_userid:F,f_weaver_belongto_usertype:A})}}):k.Modal.warning({title:D(15172,"系统提示"),content:D(32568,"请选择要删除的记录")})}},{key:"handleOk",value:function(e){var t=e.permissiontype,r=e.iscanread,n=e.objValue,o=e.seclevel,a=e.seclevelMax,i=e.rolelevel,s=e.joblevel,l=e.relatedshareid_6,c=this.props.wfShareStore,u=c.addDatas,d={};switch(Number(t)){case 1:d={departmentid:n,seclevel:o,seclevelMax:a};break;case 6:d={subids:n,seclevel:o,seclevelMax:a};break;case 3:d={seclevel:o,seclevelMax:a};break;case 5:d={userid:n};break;case 2:d={roleid:n,rolelevel:i,seclevel:o,seclevelMax:a};break;case 7:d={jobid:n,joblevel:s,relatedshareid_6:l}}d.requestid=O,d.wfid=L,d.permissiontype=t,d.iscanread=r;var f=this.getFormParams();d.currentnodeid=f.currentnodeid,d.f_weaver_belongto_userid=F,d.f_weaver_belongto_usertype=A,u(d),this.handleCancel()}},{key:"handleCancel",value:function(){N.setState({visible:!1})}},{key:"addShare",value:function(){N.setState({visible:!0})}},{key:"getRightMenu",value:function(){var e=this,t=this.props.wfShareStore,r=t.jurisdiction,n=t.tableStore,o=this.getSelectedRowKeysTail(),a=[];return r&&a.push({key:"search",icon:w.default.createElement("i",{className:"icon-coms-New-Flow"}),content:D(611,"添加"),onClick:function(t){return e.addShare()}},{key:"deleteMore",icon:w.default.createElement("i",{className:"icon-coms-Batch-delete"}),content:D(32136,"批量删除"),disabled:!o,onClick:function(t){return e.deleteConfirm(o)}}),a.push({key:"showCustomization",icon:w.default.createElement("i",{className:"icon-coms-Custom"}),content:D(32535,"显示列定制"),onClick:function(e){n.setColSetVisible(!0),n.tableColSet(!0)}}),a}},{key:"render",value:function(){var e=this,t=this.props.wfShareStore,r=t.jurisdiction,n=t.tableStore;return w.default.createElement("div",{className:"wf-workflowShareIndex"},w.default.createElement(S.WeaRightMenu,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaRightMenu@3r46s8",datas:this.getRightMenu(),collectParams:{favname:D(2112,"共享设置"),favouritetype:2,objid:0,importantlevel:1}},w.default.createElement(P.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_WfAddShare@533i9j",wfAddShareStore:N,onOk:function(t){return e.handleOk(t)}}),w.default.createElement(_.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_WorkflowShare@8f4307",title:D(2112,"共享设置"),jurisdiction:r,tableStore:n,deleteConfirm:function(t){return e.deleteConfirm(t)},addShare:function(){return e.addShare()},ids:function(){return e.getSelectedRowKeysTail()}})))}}]),t}(w.default.Component))||o;t.default=M,window.workflowShareOperate=function(){return{onDel:function(e){T.deleteConfirm(e)}}}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(32),a=n(o),i=r(3),s=n(i),l=r(1),c=n(l),u=r(2),d=n(u),f=r(4),p=n(f),h=r(5),m=n(h),v=r(9),g=n(v),w=r(11),y=r(0),b=r(6),_=y.WeaLocaleProvider.getLabel,S=w.WeaTableNew.WeaTable,k=function(e){function t(e){return(0,c.default)(this,t),(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"deleteConfirm",value:function(){var e=this.getSelectedRowKeysTail();this.props.deleteConfirm(e)}},{key:"getSelectedRowKeysTail",value:function(){var e=this.props.tableStore,t=e,r=t.selectedRowKeys,n=(0,a.default)(r);return n.slice(1,n.length-1).replace(/\"/g,"")}},{key:"addShare",value:function(){this.props.addShare()}},{key:"render",value:function(){var e=this,t="",r=this.props,n=r.jurisdiction,o=r.tableStore,a=r.title;return n&&(t=g.default.createElement(E,{ecId:(this&&this.props&&this.props.ecId||"")+"_CustomComponent@07tq57",ids:function(){return e.props.ids()},deleteConfirm:function(){return e.deleteConfirm()},addShare:function(){return e.addShare()}})),g.default.createElement("div",{className:"wf-searchGroup"},g.default.createElement(y.WeaSearchGroup,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaSearchGroup@t9sjh3",col:1,title:a,showGroup:!0,customComponent:t,items:[{com:this.props.onOperatesClick?g.default.createElement(S,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaTable@f99ieb@t1",onOperatesClick:function(t,r,n,o){e.props.onOperatesClick(t,r,n,o)},comsWeaTableStore:o,hasOrder:!0,needScroll:!0,scroll:{y:600}}):g.default.createElement(S,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaTable@sfhdcs@t2",comsWeaTableStore:o,hasOrder:!0,needScroll:!0,scroll:{y:600}})}]}))}}]),t}(g.default.Component);t.default=k;var E=function(e){function t(e){return(0,c.default)(this,t),(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"addShare",value:function(){this.props.addShare()}},{key:"deleteConfirm",value:function(){this.props.deleteConfirm()}},{key:"render",value:function(){var e=this,t=this.props.ids();return g.default.createElement("div",{className:"customComponent"},g.default.createElement(b.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@6ky9s2",style:{border:"none",padding:"0px",fontSize:"20px",lineHeight:"1",color:"#55a1f8",backgroundColor:"#fff"},type:"primary",title:_(611,"添加"),size:"small",onClick:function(){return e.addShare()}},g.default.createElement("span",{className:"icon-coms-Add-to-hot"})),g.default.createElement(b.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@2loxzl",style:{border:"none",padding:"0px",fontSize:"20px",lineHeight:"1",color:t?"#55a1f8":"#d8d8d8",marginLeft:"10px",backgroundColor:"#fff"},type:"primary",title:_(126371,"删除"),size:"small",disabled:!t,onClick:function(){return e.deleteConfirm()}},g.default.createElement("span",{className:"icon-coms-form-delete-hot"})))}}]),t}(g.default.Component)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=r(449),a=n(o),i=r(69),s=n(i);t.default=function(){function e(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=(0,s.default)(e);!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&l.return&&l.return()}finally{if(o)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if((0,a.default)(Object(t)))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,r){e.exports={default:r(450),__esModule:!0}},function(e,t,r){r(76),r(58),e.exports=r(451)},function(e,t,r){var n=r(128),o=r(17)("iterator"),a=r(49);e.exports=r(12).isIterable=function(e){var t=Object(e);return void 0!==t[o]||"@@iterator"in t||a.hasOwnProperty(n(t))}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=r(8),i=n(a),s=r(26),l=n(s),c=r(31),u=n(c),d=r(3),f=n(d),p=r(1),h=n(p),m=r(2),v=n(m),g=r(4),w=n(g),y=r(5),b=n(y),_=r(9),S=n(_),k=r(10),E=r(6),I=r(0);r(208);var C=r(209),R=n(C),x=r(210),P=n(x),N=I.WeaLocaleProvider.getLabel,D=new R.default,O=(0,k.observer)(o=function(e){function t(e){return(0,h.default)(this,t),(0,w.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e))}return(0,b.default)(t,e),(0,v.default)(t,[{key:"toogleAddShare",value:function(){D.setState({visible:!0})}},{key:"doDelete",value:function(){var e=this.props.wfShareBatchStore,t=e.selectedRowKeys,r=e.datas,n=r.slice(),o=t.slice().sort(),a=[];a=n.filter(function(e,t){if(o.indexOf(t)<0)return!0}),E.Modal.confirm({title:N(131329,"信息确认"),content:N(15097,"确定要删除吗？"),okText:N(83446,"确定"),cancelText:N(31129,"取消"),onOk:function(){e.setSelectedRowKeys([]),e.setDatas([].concat((0,u.default)(a)))}})}},{key:"addHandleOk",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=this.props.wfShareBatchStore,o=n.datas,a=n.setDatas,i=o.slice(),s={},l=e.permissiontype,c=e.iscanread,d=(e.objValue,e.seclevel),f=e.seclevelMax,p=e.rolelevel,h=e.joblevel,m=e.relatedshareid_6;switch(0===t.length&&t.push({link:""}),Number(l)){case 5:t.forEach(function(e,t){s.permissiontype=l,s.obj={link:e.id,name:e.name,id:e.id},s.userid=e.id,s.iscanread=c,i.push(s),s={}});break;case 6:case 1:t.forEach(function(e,t){s.permissiontype=l,s.obj={link:e.link,name:e.name,id:e.id},s.seclevel=d,s.seclevelMax=f,s.iscanread=c,1===Number(l)&&(s.departmentid=e.id),6===Number(l)&&(s.subids=e.id),i.push(s),s={}});break;case 3:t.forEach(function(e,t){s.permissiontype=l,s.obj={link:"",name:"",id:""},s.seclevel=d,s.seclevelMax=f,s.iscanread=c,i.push(s),s={}});break;case 2:t.forEach(function(e,t){s.permissiontype=l,s.obj={link:e.link,name:e.name,id:e.id},s.seclevel=d,s.seclevelMax=f,s.rolelevel=p,s.iscanread=c,s.roleid=e.id,i.push(s),s={}});break;case 7:t.forEach(function(e,t){s.permissiontype=l,s.obj={link:e.link,name:e.name,id:e.id},s.joblevel=h,s.relatedshareid_6=m,s.jobid=e.id,s.iscanread=c,s.jobObjInfo=r,i.push(s),s={}})}a([].concat((0,u.default)(i))),this.addHandleCancel()}},{key:"addHandleCancel",value:function(){this.props.wfShareBatchStore.toogleAddShare(!1)}},{key:"handleOk",value:function(){var e=this.props.wfShareBatchStore,t=this.props.ids,r=e.datas,n=e.addShare,o=r.length;if(0===o)return void E.message.warning(N(385086,"请先添加共享"));var a="";t&&t.map(function(e){var t=e.split("_")[0];a+=","+t}),""!==a&&(a=a.substring(1));var s={};r.forEach(function(e,t){for(var r=(0,l.default)(e),n=0;n<r.length;n++){var o=r[n];"obj"!==o&&"jobObjInfo"!==o&&(s[o+"_"+t]=e[o])}}),n((0,i.default)({rowNumber:o,ids:a},s)),this.handleCancel()}},{key:"handleCancel",value:function(){this.props.wfShareBatchStore.setDatas([]),this.props.controlModal(!1)}},{key:"getRowSelection",value:function(){var e=this.props.wfShareBatchStore;return{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.setSelectedRowKeys([].concat((0,u.default)(t)))}}}},{key:"getTitle",value:function(){var e=this,t=this.props.wfShareBatchStore,r=t.selectedRowKeys;return S.default.createElement(E.Row,{ecId:(this&&this.props&&this.props.ecId||"")+"_Row@hk7ydp",className:"wea-table-edit-title"},S.default.createElement(E.Col,{ecId:(this&&this.props&&this.props.ecId||"")+"_Col@widqe2"},N(383655,"添加共享"),S.default.createElement(E.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@rs0iey",style:{border:"none",padding:"0px",fontSize:"20px",lineHeight:"1",color:r.length<=0?"#d8d8d8":"#55a1f8",marginLeft:"10px",backgroundColor:"#fff"},type:"primary",title:N(126371,"删除"),size:"small",disabled:r.length<=0,onClick:function(){return e.doDelete()}},S.default.createElement("span",{className:"icon-coms-form-delete-hot"})),S.default.createElement(E.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@conxtg",style:{border:"none",padding:"0px",fontSize:"20px",lineHeight:"1",color:"#55a1f8",backgroundColor:"#fff"},type:"primary",title:N(611,"添加"),size:"small",onClick:function(){return e.toogleAddShare()}},S.default.createElement("span",{className:"icon-coms-Add-to-hot"}))))}},{key:"getHrmCard",value:function(e,t){var r="",n=e.link,o=e.name;if(t&&2===t.permissiontype){switch(t.rolelevel){case"0":r="/"+N(124,"部门");break;case"1":r="/"+N(141,"分部");break;default:r="/"+N(140,"总部")}return S.default.createElement("div",{title:o+r},o,r)}if(t&&7===t.permissiontype)switch(Number(t.joblevel)){case 2:return r="/"+N(140,"总部"),S.default.createElement("div",{title:o+r},o,r);case 1:r="/"+N(19437,"指定分部");var a=o+r+"(",i=t.jobObjInfo.map(function(e,r){return a+=e.name,r===t.jobObjInfo.length-1?S.default.createElement("a",{className:"objA",title:e.name,href:""+e.link,target:"_blank"},e.name):(a+=",",S.default.createElement("span",null,S.default.createElement("a",{className:"objA",title:e.name,href:""+e.link,target:"_blank"},e.name),","))});return a+=")",S.default.createElement("div",{title:a,style:{display:"inline-block"}},o+r+"(",i,")");default:r="/"+N(19438,"指定部门");var s=o+r+"(",l=t.jobObjInfo.map(function(e,r){return s+=e.name,r===t.jobObjInfo.length-1?S.default.createElement("a",{className:"objA",title:e.name,href:""+e.link,target:"_blank"},e.name):(s+=",",S.default.createElement("span",null,S.default.createElement("a",{className:"objA",title:e.name,href:""+e.link,target:"_blank"},e.name),","))});return s+=")",S.default.createElement("div",{title:s,style:{display:"inline-block"}},o+r+"(",l,")")}return n.indexOf("/")>-1?S.default.createElement("a",{title:o+r,className:"objA",href:""+n,target:"_blank"},o,r):S.default.createElement("a",{title:o,className:"wea-hrm-card objA",href:"javaScript:openhrm("+n+")",onClick:function(e){return window.pointerXY(e)}},o)}},{key:"getMoreBtns",value:function(){var e=this,t={datas:[],collectParams:{favname:N(2112,"共享设置"),favouritetype:2,objid:0,importantlevel:1}};return t.datas.push({key:"1",disabled:!1,icon:S.default.createElement("i",{className:"icon-coms-Batch-sharing"}),content:N(119,"共享"),onClick:function(t){return e.handleOk()}}),t}},{key:"render",value:function(){var e=this,t=[S.default.createElement(E.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@pykdwq@share",key:"save",type:"primary",onClick:function(){return e.handleOk()}},N(119,"共享"))],r=this.props.wfShareBatchStore,n=this.props.visible,o=r.datas;o=o.slice();var a=[{title:N(21956,"对象类型"),dataIndex:"permissiontype",key:"permissiontype",render:function(e){var t=void 0;switch(Number(e)){case 1:t=N(124,"部门");break;case 6:t=N(141,"分部");break;case 3:t=N(1340,"所有人");break;case 2:t=N(122,"角色");break;case 5:t=N(383424,"人力资源");break;case 7:t=N(6086,"岗位")}return S.default.createElement("span",null,t)},colSpan:1,width:"20%",className:"wea-table-edit-permissiontype"},{title:N(106,"对象"),dataIndex:"obj",key:"obj",render:function(t,r){return""===t.name?S.default.createElement("div",{style:{minHeight:"16px"}}," "):e.getHrmCard(t,r)},colSpan:1,width:"215px",className:"wea-table-edit-obj"},{title:N(683,"安全级别"),dataIndex:"safeLevel",key:"safeLevel",render:function(e,t){return 5===Number(t.permissiontype)||7===Number(t.permissiontype)?void 0:S.default.createElement("span",null,t.seclevel,"-",t.seclevelMax)},colSpan:1,width:"20%",className:"wea-table-edit-safeLevel"},{title:N(125734,"流转意见"),dataIndex:"iscanread",key:"iscanread",render:function(e,t){return S.default.createElement("span",null,1===Number(e)?N(20306,"可查看"):N(82613,"不可查看"))},colSpan:1,width:"20%",className:"wea-table-edit-iscanread"},{title:N(82615,"共享添加人"),dataIndex:"adder",key:"adder",render:function(t,r){var n=I.WeaTools.ls.getJSONObj("theme-account").username,o=I.WeaTools.ls.getJSONObj("theme-account").userid;return e.getHrmCard({link:o,name:n})},colSpan:1,width:"15%",className:"wea-table-edit-adder"}];return S.default.createElement("div",null,S.default.createElement(I.WeaDialog,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@ayi72h",className:"wf-shareBatch",title:N(2112,"共享设置"),visible:n,icon:"icon-coms-workflow",iconBgcolor:"#0079DE",maskClosable:!1,buttons:t,onCancel:function(){return e.handleCancel()},style:{width:"1000px",height:"410px"},moreBtn:this.getMoreBtns()},S.default.createElement(I.WeaRightMenu,(0,i.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_WeaRightMenu@mllipz"},this.getMoreBtns()),S.default.createElement(P.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_WfAddShare@jn52p6",wfAddShareStore:D,onOk:function(t,r,n){return e.addHandleOk(t,r,n)}}),S.default.createElement("div",{className:"wea-table-edit"},this.getTitle(),S.default.createElement(E.Table,{ecId:(this&&this.props&&this.props.ecId||"")+"_Table@3hwuou",columns:a,dataSource:o,pagination:!1,rowSelection:this.getRowSelection(),scroll:{y:200}})))))}}]),t}(S.default.Component))||o;t.default=O},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,n){r&&(0,p.default)(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function i(e,t,r,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,l,c,u,d,f=r(13),p=o(f),h=r(1),m=o(h),v=r(7),g=n(v),w=r(0),y=r(6),b=r(11),_=r(134),S=n(_),k=w.WeaLocaleProvider.getLabel,E=b.WeaTableNew.TableStore,I=g.observable,C=g.action,R=(s=function e(){var t=this;(0,m.default)(this,e),a(this,"addShareVisible",l,this),a(this,"tableStore",c,this),a(this,"jurisdiction",u,this),a(this,"toggleAddShareVisible",d,this),this.initDatas=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};S.doWorkflowShareListPost(e).then(function(r){var n=r.sessionkey,o=r.isshowdelete;t.tableStore.getDatas(n,e.current||1),t.jurisdiction=o})},this.addDatas=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y.message.loading(k(383498,"正在添加...请稍候"),0),S.doWorkflowAddSharePost(e).then(function(r){var n=r.sessionkey;t.tableStore.getDatas(n,e.current||1),y.message.destroy(),y.message.success(k(83880,"添加成功"))},function(){y.message.destroy(),y.message.error(k(26772,"添加失败"))})},this.deleteDatas=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y.message.loading(k(84024,"正在删除数据，请稍候..."),0),S.doWorkflowDeleteSharePost(e).then(function(r){var n=r.sessionkey;t.tableStore.getDatas(n,e.current||1),y.message.destroy(),y.message.success(k(20461,"删除成功"))},function(){y.message.destroy(),y.message.error(k(83473,"删除失败"))})},this.initDatas=this.initDatas,this.addDatas=this.addDatas,this.deleteDatas=this.deleteDatas,this.toggleAddShareVisible=this.toggleAddShareVisible},l=i(s.prototype,"addShareVisible",[I],{enumerable:!0,initializer:function(){return!1}}),c=i(s.prototype,"tableStore",[I],{enumerable:!0,initializer:function(){return new E}}),u=i(s.prototype,"jurisdiction",[I],{enumerable:!0,initializer:function(){return!1}}),d=i(s.prototype,"toggleAddShareVisible",[C],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.addShareVisible=t}}}),s);t.default=R},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,n){r&&(0,p.default)(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function i(e,t,r,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,l,c,u,d,f=r(13),p=o(f),h=r(1),m=o(h),v=r(7),g=n(v),w=r(134),y=n(w),b=r(6),_=r(0),S=g.observable,k=g.action,E=_.WeaLocaleProvider.getLabel,I=(s=function e(){var t=this;(0,m.default)(this,e),a(this,"addShareVisible",l,this),a(this,"datas",c,this),a(this,"selectedRowKeys",u,this),a(this,"setDatas",d,this),this.setSelectedRowKeys=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.selectedRowKeys=e},this.addShare=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b.message.loading(E(383498,"正在添加...请稍候"),0),y.doWorkflowAddShareBatch(e).then(function(e){e.api_status?(b.message.destroy(),b.message.success(E(83880,"添加成功"))):(b.message.destroy(),b.message.error(E(26772,"添加失败")))},function(){b.message.destroy(),b.message.error(E(26772,"添加失败"))})},this.toogleAddShare=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.addShareVisible=e},this.toogleAddShare=this.toogleAddShare,this.addShare=this.addShare,this.setDatas=this.setDatas,this.setSelectedRowKeys=this.setSelectedRowKeys},l=i(s.prototype,"addShareVisible",[S],{enumerable:!0,initializer:function(){return!1}}),c=i(s.prototype,"datas",[S],{enumerable:!0,initializer:function(){return[]}}),u=i(s.prototype,"selectedRowKeys",[S],{enumerable:!0,initializer:function(){return[]}}),d=i(s.prototype,"setDatas",[k],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.datas=t}}}),s);t.default=I},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(3),i=n(a),s=r(1),l=n(s),c=r(2),u=n(c),d=r(4),f=n(d),p=r(5),h=n(p),m=r(9),v=n(m),g=r(10),w=r(0),y=r(11),b=r(40);!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(b);r(43);var _=r(71),S=n(_),k=r(456),E=n(k),I=r(460),C=n(I),R=r(461),x=n(R),P=r(462),N=n(P),D=r(135);n(D);r(463),r(464);var O=r(6),L=(r(7),r(211)),T=(n(L),y.WeaTableNew.WeaTable,w.WeaLocaleProvider.getLabel),F=(0,g.observer)(o=function(e){function t(e){(0,l.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return r.changeTabKey=function(e){r.props.WfFormCommunicationStore.setState({tabKey:e,currentPage:1},r.props.WfFormCommunicationStore.reflashContentList)},r.dotClick=function(){r.props.WfFormCommunicationStore.hideDot()},r.state={showSearchAd:!1},r}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.WfFormCommunicationStore,r=e.commonParam,n=e.WfFormCommunicationStore.reflashContentList,o={};["requestid","workflowid","f_weaver_belongto_userid","f_weaver_belongto_usertype","authStr","authSignatureStr","isurger"].map(function(e){o[e]=r[e]}),t.init(o),document.getElementsByClassName("wea-new-top-req-content")[0].style.overflowY="auto",window.reflashCommunicateContentList=n}},{key:"render",value:function(){var e=this,t=this.props,r=t.WfFormCommunicationStore,n=t.commonParam,o=(t.clearReplyInfo,r.contentList,r.status),a=void 0===o?{}:o,i=r.hasDot,s=r.adSearchForm,l=r.adSearchCondition,c=r.reflashContentList,u=r.hasdate,d=r.setState,f=r.hasSubmitRight,p=s.getFormParams(),h=p.srchcontent;return v.default.createElement("div",{className:"wea-workflow-communication"},f&&v.default.createElement(S.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_CommunicationRichText@q6pu27",requestid:n.requestid,appStatus:r.appStatus,submit:r.saveContent,noNeedCancelBtn:!0}),v.default.createElement("div",{className:"wea-workflow-communication-content"},u?v.default.createElement("div",null,v.default.createElement(w.WeaTab,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaTab@qraxp5",datas:[{title:T(512070,"全部"),key:"list"},{titleText:T(32572,"与我相关"),title:v.default.createElement("div",{className:"cowork-my",onClick:this.dotClick},T(32572,"与我相关"),v.default.createElement("span",{className:i?"cowork-my-dot":"cowork-my-dotHide"})),key:"relatedme"},{title:T(512294,"交流资源"),key:"resource"}],size:"small",keyParam:"key",leftStyle:{width:"44%"},rightStyle:{width:"56%"},selectedKey:a.tabKey,onChange:this.changeTabKey,searchType:"list"==a.tabKey?"base,advanced":"",onSearch:function(){d({currentPage:1}),c()},searchsBaseValue:h,onSearchChange:function(e){return s.updateFields({srchcontent:e})},showSearchAd:this.state.showSearchAd,setShowSearchAd:function(t){e.setState({showSearchAd:t})},hasMask:!1,searchsAd:v.default.createElement(x.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_Condition@5p3ya2",queryStore:{form:s,condition:l},type:"AdSearch"}),advanceHeight:120,buttonsAd:[v.default.createElement(O.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@okxqsg@search",type:"primary",onClick:function(){e.setState({showSearchAd:!1,currentPage:1}),c()}},T(197,"搜索")),v.default.createElement(O.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@tp49kk@reset",type:"ghost",onClick:function(){s.resetForm()}},T(2022,"重置")),v.default.createElement(O.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@legjhr@cancel",type:"ghost",onClick:function(){e.setState({showSearchAd:!1})}},T(201,"取消"))]}),"list"==a.tabKey&&v.default.createElement(E.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_ContentList@10isqj",WfFormCommunicationStore:r,commonParam:n}),"relatedme"==a.tabKey&&v.default.createElement(C.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_MyContentList@zfacep",WfFormCommunicationStore:r,commonParam:n}),"resource"==a.tabKey&&v.default.createElement(N.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_Resource@3f3vbo",WfFormCommunicationStore:r,commonParam:n})):v.default.createElement("div",{style:{borderBottom:0,marginTop:20},className:"ant-table-placeholder"},v.default.createElement("i",{className:"anticon anticon-frown"}),v.default.createElement("sapn",null,T(389967,"暂无相关交流")))))}}]),t}(v.default.Component))||o;t.default=w.WeaTools.tryCatch(v.default,function(e){return v.default.createElement(w.WeaErrorPage,{ecId:"_WeaErrorPage@fs4c6b",msg:e.error?e.error:T(383324,"对不起，该页面异常，请联系管理员")})},{error:""})(F)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(3),i=n(a),s=r(1),l=n(s),c=r(2),u=n(c),d=r(4),f=n(d),p=r(5),h=n(p),m=r(9),v=n(m),g=r(10),w=r(0),y=r(11),b=r(40);!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(b);r(43);var _=r(71),S=(n(_),r(135)),k=n(S),E=r(6),I=(y.WeaTableNew.WeaTable,w.WeaLocaleProvider.getLabel),C=(0,g.observer)(o=function(e){function t(e){(0,l.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return r.addScrolllEvent=function(){var e=jQuery(".wea-new-top-req-content");e&&e.scroll(function(){window.formImgLazyLoad(e)})},r.pageChange=function(e,t){var n=r.props.WfFormCommunicationStore,o=n.setState,a=n.reflashContentList;o({currentPage:e}),a({currentPage:e}),window.formImgLazyLoad(jQuery(".wea-workflow-communication-list"))},r.pageSizeChange=function(e,t){var n=r.props.WfFormCommunicationStore,o=n.setState,a=n.reflashContentList;o({pageSize:t,currentPage:e}),a({pageSize:t,currentPage:e})},r.submit=function(e,t){var n=e.remark;if(""!=e.remark&&e.remark.indexOf("<img")<0&&(n=e.remark.replace(/<\/?[^>]*>/g,""),n=n.replace(/[\u200B-\u200D\uFEFF]/g,""),n=n.replace(/\n/g,""),n=n.replace("&#8203;","").replace(/&nbsp;/g,""),n=n.trim()),!n)return E.message.error(I(382648,"请输入交流内容")),!1;var o=r.props.WfFormCommunicationStore;"edit"==e.replyType?o.editContent(e,t):o.saveReply(e,t)},r}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){}},{key:"componentDidMount",value:function(){var e=this.props.WfFormCommunicationStore,t=e.contentList,r=void 0===t?[]:t;e.reflashContentList(),r.length>0&&window.formImgLazyLoad(jQuery(".wea-workflow-communication-list")),this.addScrolllEvent()}},{key:"componentDidUpdate",value:function(){var e=this.props.WfFormCommunicationStore,t=e.contentList;(void 0===t?[]:t).length>0&&window.formImgLazyLoad(jQuery(".wea-workflow-communication-list")),this.addScrolllEvent()}},{key:"render",value:function(){var e=this,t=this.props,r=t.WfFormCommunicationStore,n=t.commonParam,o=r.contentList,a=void 0===o?[]:o,i=r.status,s=void 0===i?{}:i,l=r.hasSubmitRight;return v.default.createElement("div",null,v.default.createElement("div",{className:"wea-workflow-communication-list"},a.map(function(t,o){return v.default.createElement(k.default,{ecId:(e&&e.props&&e.props.ecId||"")+"_ContentItem@7kp15c@"+o,requestid:n.requestid,appStatus:r.appStatus,contentInfo:t,submit:e.submit,operate:r.operateCommunication,hasSubmitRight:l})}),v.default.createElement("div",{className:"wea-workflow-communication-pagination"},v.default.createElement(E.Pagination,{ecId:(this&&this.props&&this.props.ecId||"")+"_Pagination@eefmpn",onChange:function(t){e.pageChange(t)},showSizeChanger:!0,onShowSizeChange:this.pageSizeChange,total:s.total,showTotal:function(e){return""+(I(18609,"共")+e+I(18256,"条"))},pageSize:s.pageSize,current:s.currentPage,showQuickJumper:!0}))))}}]),t}(v.default.Component))||o;t.default=w.WeaTools.tryCatch(v.default,function(e){return v.default.createElement(w.WeaErrorPage,{ecId:"_WeaErrorPage@xeo0ez",msg:e.error?e.error:I(383324,"对不起，该页面异常，请联系管理员")})},{error:""})(C)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.diameter,r=void 0===t?0:t,n=e.name,o=e.src,a=e.style,s={width:r,height:r,borderRadius:r/2,display:"inline-block",verticalAlign:"middle"},c={width:r,height:r,borderRadius:r/2,display:"inline-block",verticalAlign:"middle",fontSize:.25*r,background:"#32a8ff",color:"white",textAlign:"center",lineHeight:r+"px"};return o?l.default.createElement("img",{src:o,style:(0,u.default)({},s,(0,i.default)({},a))}):l.default.createElement("span",{style:(0,u.default)({},c,(0,i.default)({},a))},n)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(8),i=n(a);t.default=o;var s=r(9),l=n(s),c=r(92),u=n(c)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(8),a=n(o),i=r(3),s=n(i),l=r(1),c=n(l),u=r(2),d=n(u),f=r(4),p=n(f),h=r(5),m=n(h),v=r(459),g=n(v),w=r(71),y=n(w),b=r(15),_=n(b),S=r(6),k=r(0),E=k.WeaLocaleProvider.getLabel,I=function(e){function t(e){(0,c.default)(this,t);var r=(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return r.changePageNum=function(){var e=r.props.list,t=r.state.pageSize,n=e.length;n-1<=t?r.setState({pageNum:1}):n-1>t&&e.length-1==0&&r.setState({pageNum:--pageNum})},r.reply=function(e,t,n,o){var a=E("385534","回复")+n;r.setState({edit:!0,replyId:e,receiveUser:t,resiveUserType:o,placeholder:a})},r.submit=function(e,t){var n=(0,a.default)({},e,{replyType:"comment"});n.replayid=r.state.replyId,n.receiveUser=r.state.receiveUser,n.resiveUserType=r.state.resiveUserType,n.contentId=r.props.contentId,(0,_.default)(r.props.submit)&&r.props.submit(n,r.cancel.bind(r,t))},r.cancel=function(e){r.setState({edit:!1,replyId:"",receiverUser:""},function(){r.refs.richText&&r.refs.richText.wrappedInstance&&r.refs.richText.wrappedInstance.clear()}),(0,_.default)(e)&&e()},r.changePage=function(e){r.setState({pageNum:e})},r.state={edit:!1,replyId:"",receiveUser:"",pageNum:1,pageSize:5,placeholder:""},r}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.list,n=t.isCanAnonymous,o=(t.canReply,t.requestid),i=t.hasSubmitRight,s=void 0!==i&&i,l=this.state,c=l.edit,u=l.pageNum,d=l.pageSize,f=r.length,p=[],h=u*d;h>f&&(h=f);for(var m=(u-1)*d;m<h;m++)p.push(r[m]);return React.createElement("div",{className:"wea-cowork-comment"},p.map(function(t,r){return React.createElement(g.default,(0,a.default)({ecId:(e&&e.props&&e.props.ecId||"")+"_ReplyItem@tn1fwg@"+r,operate:e.props.operate,changePageNum:e.changePageNum},t,{reply:e.reply,hasSubmitRight:s}))}),f>d&&React.createElement("div",{className:"small-page"},React.createElement(S.Pagination,{ecId:(this&&this.props&&this.props.ecId||"")+"_Pagination@l0j16q",size:"small",total:f,pageSize:d,onChange:this.changePage,current:u}),React.createElement("div",{className:"clear-both"})),c&&React.createElement(y.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_CommunicationRichText@dmgone",requestid:o,hasSubmit:!0,ref:"richText",submit:this.submit,cancel:this.cancel,appStatus:this.props.appStatus,isCanAnonymous:n,editType:"comment",placeholder:this.state.placeholder}))}}]),t}(React.Component);t.default=I},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),a=n(o),i=r(1),s=n(i),l=r(2),c=n(l),u=r(4),d=n(u),f=r(5),p=n(f),h=r(6),m=r(15),v=n(m),g=r(0),w=r(45),y=g.WeaLocaleProvider.getLabel,b=function(e){function t(e){(0,s.default)(this,t);var r=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return r.delete=function(){var e=r,t=r.props.changePageNum;h.Modal.confirm({content:y(512301,"确认要删除该评论吗？"),onOk:function(){t(),(0,v.default)(e.props.operate)&&e.props.operate({id:e.props.id,operationType:"delReply"})}})},r}return(0,p.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props,t=(e.approvalAtatus,e.discussantInfo),r=void 0===t?{}:t,n=e.remark,o=e.showDate,a=(e.commentuserInfo,e.id),i=(e.createDate,e.createTime,e.createUserName),s=e.createUser,l=e.resiveUser,c=e.resiveUserName,u=e.canModify,d=e.hasSubmitRight,f=void 0!==d&&d,p=e.createUserType,h=void 0===p?"1":p,m=e.resiveUserType,v=void 0===m?"1":m,g=this.props,b=g.isAnonymous,_=(g.isDel,this.props),S=(_.op_isComCanDelete,_.op_isComCanReply,this.props),k=S.relatedaccList4E9,E=void 0===k?[]:k,I=S.relatedcusList4E9,C=void 0===I?[]:I,R=S.relateddocList4E9,x=void 0===R?[]:R,P=S.relatedprjList4E9,N=void 0===P?[]:P,D=S.relatedwfList4E9,O=void 0===D?[]:D,L=S.relatemutilprjs4E9,T=void 0===L?[]:L;return React.createElement("div",{className:"wea-cowork-comment-item"},React.createElement("div",null,React.createElement("div",null,React.createElement("div",{className:"cowork-reply-content"},React.createElement("div",null,React.createElement("span",{className:"cowork-reply-user"},1==b?React.createElement("span",null,r.lastname):React.createElement(React.Fragment,null,"1"==h&&React.createElement("a",{href:"javaScript:openhrm("+s+");",onClick:window.pointerXY},i),"2"==h&&React.createElement("a",{href:"javaScript: window.open('/spa/crm/static/index.html#/main/crm/customerView?customerId="+s+"&_key=jfzmyh', '_blank')"},i)),l>-1&&React.createElement("span",null,React.createElement("span",{className:"ml5"},y(128123,"回复")),"1"==v&&React.createElement("a",{className:"ml5",href:"javaScript:openhrm("+l+");",onClick:window.pointerXY},c),"2"==v&&React.createElement("a",{className:"ml5",href:"javaScript: window.open('/spa/crm/static/index.html#/main/crm/customerView?customerId="+l+"&_key=jfzmyh', '_blank')"},c)),React.createElement("span",{className:"reply-time"},o)),React.createElement("span",{className:"fr"},u&&f&&React.createElement("span",{className:"cowork-top-icon icon-coms-delete",onClick:this.delete,title:y(91,"删除")}),f&&React.createElement("span",{className:"cowork-top-icon icon-coms-New-SMS",onClick:this.props.reply.bind(this,a,s,i,h),title:y(128123,"回复")}))),React.createElement("div",{className:"cowork-reply-remark wea-f12"},React.createElement("div",{className:"wea-cl-content",dangerouslySetInnerHTML:{__html:'<div class="wea-ckeditor-content">'+n+"</div>"}})),React.createElement("div",{className:"workflow-resource-list"},(0,w.createReplyBottomAtt)(y(857,"相关文档")+":",x,function(){},"doc"),(0,w.createReplyBottomAtt)(y(1044,"相关流程")+":",O,function(){},"wf"),(0,w.createReplyBottomAtt)(y(783,"相关客户")+":",C,function(){},"crm"),(0,w.createReplyBottomAtt)(y(782,"相关项目")+":",T,function(){},"project"),(0,w.createReplyBottomAtt)(y(33414,"相关任务")+":",N,function(){},"task"),(0,w.createReplyBottomAtt)(y(33414,"相关附件")+":",E,function(){},"acc"))))))}}]),t}(React.Component);t.default=b},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(3),i=n(a),s=r(1),l=n(s),c=r(2),u=n(c),d=r(4),f=n(d),p=r(5),h=n(p),m=r(9),v=n(m),g=r(10),w=r(0),y=r(11),b=r(40);!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(b);r(43);var _=r(71),S=(n(_),r(135)),k=n(S),E=r(6),I=(y.WeaTableNew.WeaTable,w.WeaLocaleProvider.getLabel),C=(0,g.observer)(o=function(e){function t(e){(0,l.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return r.pageChange=function(e,t){var n=r.props.WfFormCommunicationStore,o=n.setState,a=n.reflashContentList;o({currentPage:e}),a({currentPage:e})},r.pageSizeChange=function(e,t){var n=r.props.WfFormCommunicationStore,o=n.setState,a=n.reflashContentList;o({pageSize:t,currentPage:e}),a({pageSize:t,currentPage:e})},r.submit=function(e,t){if(!e.remark)return E.message.error(I(382648,"请输入交流内容")),!1;var n=r.props.WfFormCommunicationStore;"edit"==e.replyType?n.editContent(e,t):n.saveReply(e,t)},r}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){}},{key:"componentDidMount",value:function(){this.props.WfFormCommunicationStore.reflashContentList()}},{key:"render",value:function(){var e=this,t=this.props,r=t.WfFormCommunicationStore,n=t.commonParam,o=r.contentList,a=void 0===o?[]:o,i=r.status,s=void 0===i?{}:i,l=r.hasSubmitRight;return v.default.createElement("div",null,a.length>0?v.default.createElement("div",{className:"wea-workflow-communication-list"},a.map(function(t,o){return v.default.createElement(k.default,{ecId:(e&&e.props&&e.props.ecId||"")+"_ContentItem@w96fmv@"+o,requestid:n.requestid,appStatus:r.appStatus,contentInfo:t,submit:e.submit,operate:r.operateCommunication,hasSubmitRight:l})}),v.default.createElement("div",{className:"wea-workflow-communication-pagination"},v.default.createElement(E.Pagination,{ecId:(this&&this.props&&this.props.ecId||"")+"_Pagination@31bo7c",onChange:this.pageChange,showSizeChanger:!0,onShowSizeChange:this.pageSizeChange,total:s.total,showTotal:function(e){return""+(I(18609,"共")+e+I(18256,"条"))},pageSize:s.pageSize,current:s.currentPage,showQuickJumper:!0}))):v.default.createElement("div",{style:{borderBottom:0,marginTop:20},className:"ant-table-placeholder"},v.default.createElement("i",{className:"anticon anticon-frown"}),v.default.createElement("sapn",null,I(83553,"暂无数据"))))}}]),t}(v.default.Component))||o;t.default=w.WeaTools.tryCatch(v.default,function(e){return v.default.createElement(w.WeaErrorPage,{ecId:"_WeaErrorPage@7d4r5j",msg:e.error?e.error:I(383324,"对不起，该页面异常，请联系管理员")})},{error:""})(C)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(18),a=n(o),i=r(3),s=n(i),l=r(1),c=n(l),u=r(2),d=n(u),f=r(4),p=n(f),h=r(5),m=n(h),v=r(0),g=r(11),w=function(e){function t(){return(0,c.default)(this,t),(0,p.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this,t=[],r=this.props.queryStore,n=r.condition,o=r.form,i=r.col;o.getFormParams();return o.isFormInit&&n.map(function(r,n){var s=[];r.items.map(function(t){var r="object"===(0,a.default)(t.domkey)?t.domkey[0]:t.domkey;s.push({com:React.createElement(v.WeaFormItem,{ecId:(e&&e.props&&e.props.ecId||"")+"_WeaFormItem@rt6wng@"+r,label:""+t.label,labelCol:{span:""+t.labelcol},wrapperCol:{span:""+t.fieldcol},error:o.getError(t),tipPosition:"bottom"},React.createElement(g.WeaSwitch,{ecId:(e&&e.props&&e.props.ecId||"")+"_WeaSwitch@g99xjp@"+r,fieldConfig:t,form:o})),colSpan:1})}),t.push(React.createElement(v.WeaSearchGroup,{ecId:(e&&e.props&&e.props.ecId||"")+"_WeaSearchGroup@ke9w6z@"+n,needTigger:!1,showGroup:!0,items:s,col:i||2}))}),React.createElement("div",null,t)}}]),t}(React.Component);t.default=v.WeaTools.tryCatch(React,function(e){return React.createElement(v.WeaErrorPage,{ecId:"_WeaErrorPage@brz04k",msg:e.error?e.error:"对不起，该页面异常，请联系管理员！"})},{error:""})(w)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(3),i=n(a),s=r(1),l=n(s),c=r(2),u=n(c),d=r(4),f=n(d),p=r(5),h=n(p),m=r(10),v=r(7),g=r(0),w=r(45),y=r(6),b=g.WeaLocaleProvider.getLabel,_=(0,m.observer)(o=function(e){function t(e){return(0,l.default)(this,t),(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.props.WfFormCommunicationStore.getResource()}},{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){var e=this.props.WfFormCommunicationStore,t=e.resource,r=void 0===t?{}:t;if(r=(0,v.toJS)(r),!r.readed)return React.createElement("div",{className:"top40 align-center"},React.createElement(y.Spin,{ecId:(this&&this.props&&this.props.ecId||"")+"_Spin@b4bgv2"}));var n=void 0,o=void 0,a=void 0,i=void 0,s=void 0,l=void 0;return r.docList&&(n=r.docList.map(function(e,t){return React.createElement("li",{className:"text-elli"},React.createElement("a",{href:e.url,target:"_blank",title:e.name},e.name))})),r.wfList&&(o=r.wfList.map(function(e,t){return React.createElement("li",{className:"text-elli"},React.createElement("a",{href:e.url,target:"_blank",title:e.name},e.name))})),r.cusList&&(a=r.cusList.map(function(e,t){return React.createElement("li",{className:"text-elli"},React.createElement("a",{href:e.url,target:"_blank",title:e.name},e.name))})),r.mutilprjList&&(i=r.mutilprjList.map(function(e,t){return React.createElement("li",{className:"text-elli"},React.createElement("a",{href:e.url,target:"_blank",title:e.name},e.name))})),r.taskList&&(s=r.taskList.map(function(e,t){return React.createElement("li",{className:"text-elli"},React.createElement("a",{href:e.url,target:"_blank",title:e.name},e.name))})),r.accList&&(l=r.accList.map(w.createAttachLi)),r.docList&&0!==r.docList.length||r.wfList&&0!==r.wfList.length||r.cusList&&0!==r.cusList.length||r.mutilprjList&&0!==r.mutilprjList.length||r.taskList&&0!==r.taskList.length||r.accList&&0!==r.accList.length?React.createElement("div",{className:"cowork-content-resource cowork-content-style-public"},r.docList&&0!==r.docList.length&&React.createElement("div",null,React.createElement("div",{className:"cowork-content-pub cowork-content-doc"},React.createElement("em",{className:"icon-coms-currency2"}),React.createElement("span",null,b(857,"相关文档"))),React.createElement("ul",{className:"cowork-content-public cowork-content-document"},n)),r.wfList&&0!==r.wfList.length&&React.createElement("div",null,React.createElement("div",{className:"cowork-content-pub cowork-content-workflow"},React.createElement("em",{className:"icon-coms-Relevant-workflow"}),React.createElement("span",null,b(1044,"相关流程"))),React.createElement("ul",{className:"cowork-content-public cowork-content-document"},o)),r.cusList&&0!==r.cusList.length&&React.createElement("div",null,React.createElement("div",{className:"cowork-content-pub cowork-content-customer"},React.createElement("em",{className:"icon-coms-Relevant-Customer"}),React.createElement("span",null,b(783,"相关客户"))),React.createElement("ul",{className:"cowork-content-public cowork-content-document"},a)),r.mutilprjList&&0!==r.mutilprjList.length&&React.createElement("div",null,React.createElement("div",{className:"cowork-content-pub cowork-content-project"},React.createElement("em",{className:"icon-coms-Relevant-project"}),React.createElement("span",null,b(782,"相关项目"))),React.createElement("ul",{className:"cowork-content-public cowork-content-document"},i)),r.taskList&&0!==r.taskList.length&&React.createElement("div",null,React.createElement("div",{className:"cowork-content-pub cowork-content-task"},React.createElement("em",{className:"icon-coms-Relevant-task"}),React.createElement("span",null,b(33414,"相关任务"))),React.createElement("ul",{className:"cowork-content-public cowork-content-document"},s)),r.accList&&0!==r.accList.length&&React.createElement("div",null,React.createElement("div",{className:"cowork-content-pub cowork-content-acc"},React.createElement("em",{className:"icon-coms-Enclosure"}),React.createElement("span",null,b(22194,"相关附件"))),React.createElement("ul",{className:"cowork-content-public cowork-content-accessory"},l))):React.createElement("div",{style:{borderBottom:0,marginTop:20},className:"ant-table-placeholder"},React.createElement("i",{className:"anticon anticon-frown"}),React.createElement("sapn",null,b(83553,"暂无数据")))}}]),t}(React.Component))||o;t.default=_},function(e,t){},function(e,t){},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,n){r&&(0,_.default)(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function i(e,t,r,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,l,c,u,d,f,p,h,m,v,g,w,y,b=r(13),_=o(b),S=r(26),k=o(S),E=r(90),I=o(E),C=r(8),R=o(C),x=r(1),P=o(x),N=r(2),D=o(N),O=r(7),L=(n(O),r(11)),T=r(129),F=n(T),A=r(15),M=o(A),W=r(6),j=r(0),B=j.WeaLocaleProvider.getLabel,z=(s=function(){function e(){var t=this;(0,P.default)(this,e),this.baseParam={},this.communicationId=-1,a(this,"hasdate",l,this),a(this,"adSearchCondition",c,this),a(this,"adSearchForm",u,this),a(this,"contentList",d,this),a(this,"status",f,this),a(this,"appStatus",p,this),a(this,"hasDot",h,this),a(this,"resource",m,this),a(this,"hasSubmitRight",v,this),this.getResource=function(e){F.getResource(t.baseParam).then(function(e){t.resource.readed=!0,t.resource.docList=e.docList,t.resource.wfList=e.wfList,t.resource.cusList=e.cusList,t.resource.mutilprjList=e.mutilprjList,t.resource.taskList=e.taskList,t.resource.accList=e.accList})},this.reflashContentList=function(e){var r={};"list"==t.status.tabKey&&(r=t.adSearchForm.getFormParams());var n=t.getUrlParams(),o=(0,R.default)({type:t.status.tabKey},t.baseParam,{pageSize:t.status.pageSize,currentPage:t.status.currentPage},r,e);n.hasOwnProperty("fromCommunication")&&(o=(0,R.default)({},o,{fromCommunication:n.fromCommunication})),t.baseParam.communicationId>0&&F.getContentList(o).then(function(e){t.contentList=e.contentList,t.status.total=e.count,t.hasdate=e.hasdate})},a(this,"getReplaceImgSrc",g,this),this.saveContent=function(e,r){var n=e.remark;if(""!=e.remark&&e.remark.indexOf("<img")<0&&(n=e.remark.replace(/<\/?[^>]*>/g,""),n=n.replace(/[\u200B-\u200D\uFEFF]/g,""),n=n.replace(/\n/g,""),n=n.replace("&#8203;","").replace(/&nbsp;/g,""),n=n.trim()),!n)return W.message.destroy(),W.message.error(B(382648,"请输入交流内容")),!1;F.doSaveContent((0,R.default)({},t.baseParam,e)).then(function(e){e.result&&(t.reflashContentList(),window.wfform.controlSecFieldOptions()),(0,M.default)(r)&&r()})},this.editContent=function(e,r){F.doEditContent((0,R.default)({},t.baseParam,e)).then(function(e){!1===e.canModify&&(W.message.destroy(),W.message.error("已超过规定时间或有新内容，无法编辑！")),t.reflashContentList(),(0,M.default)(r)&&r()})},this.saveReply=function(e,r){"quote"==e.replyType?t.saveContent(e,r):F.doSaveReply((0,R.default)({},e,{communicationId:t.baseParam.communicationId})).then(function(e){e.result&&t.reflashContentList(),(0,M.default)(r)&&r()})},this.operateCommunication=function(e){if("agree"==e.operationType){var r=[];F.doApprove(e).then(function(e){t.contentList.map(function(t){t.contentId==e.contentId&&(t.approveNum=e.approveCount,t.approved=e.hasApprove),r.push(t)}),t.contentList=r})}else F.doDelete((0,R.default)({},t.baseParam,e)).then(function(e){!1===e.canDelete&&(W.message.destroy(),W.message.error(B("512478","已超过规定时间或有新内容，无法删除"))),t.reflashContentList()})},a(this,"setState",w,this),a(this,"hideDot",y,this)}return(0,D.default)(e,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.baseParam=t,F.getInitParams(this.baseParam).then(function(t){e.appStatus=t.appStatus,e.baseParam.communicationId=t.communicationId,e.hasSubmitRight=t.hasSubmitRight,e.hasDot=t.hasRelatedMsg,e.adSearchCondition=t.adSearchCondition,e.adSearchForm.initFormFields(e.adSearchCondition),e.reflashContentList()})}},{key:"getUrlParams",value:function(){var e=window.location.href,t={},r=e.lastIndexOf("?");if(r>0)for(var n=e.substring(r+1).split("&"),o=0;o<n.length;o++)(r=n[o].indexOf("="))>0&&(t[n[o].substring(0,r)]=n[o].substring(r+1));return t}}]),e}(),l=i(s.prototype,"hasdate",[O.observable],{enumerable:!0,initializer:function(){return!0}}),c=i(s.prototype,"adSearchCondition",[O.observable],{enumerable:!0,initializer:function(){return[]}}),u=i(s.prototype,"adSearchForm",[O.observable],{enumerable:!0,initializer:function(){return new L.WeaForm}}),d=i(s.prototype,"contentList",[O.observable],{enumerable:!0,initializer:function(){return[]}}),f=i(s.prototype,"status",[O.observable],{enumerable:!0,initializer:function(){return{tabKey:"list",pageSize:10,currentPage:1,total:100}}}),p=i(s.prototype,"appStatus",[O.observable],{enumerable:!0,initializer:function(){return{}}}),h=i(s.prototype,"hasDot",[O.observable],{enumerable:!0,initializer:function(){return!1}}),m=i(s.prototype,"resource",[O.observable],{enumerable:!0,initializer:function(){return{readed:!1,docList:[],wfList:[],cusList:[],mutilprjList:[],taskList:[],accList:[]}}}),v=i(s.prototype,"hasSubmitRight",[O.observable],{enumerable:!0,initializer:function(){return!1}}),i(s.prototype,"init",[O.action],(0,I.default)(s.prototype,"init"),s.prototype),g=i(s.prototype,"getReplaceImgSrc",[O.action],{enumerable:!0,initializer:function(){return function(e){var t=[];return e.length>0&&e.map(function(e){if(e.quoteVo&&e.quoteVo.showRemark&&e.quoteVo.showRemark.indexOf("<img")>-1){var r=e.quoteVo.showRemark.slice(0,e.quoteVo.showRemark.indexOf("<img")),n=e.quoteVo.showRemark.slice(e.quoteVo.showRemark.indexOf("style")),o=e.quoteVo.showRemark.slice(e.quoteVo.showRemark.indexOf("data-imgsrc"),e.quoteVo.showRemark.indexOf("original-src")-2),a=o.slice(o.indexOf("=")+2);e.quoteVo.showRemark=r+'<img src="'+a+'"  '+n}t.push(e)}),t}}}),w=i(s.prototype,"setState",[O.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments[1];return(0,k.default)(t).forEach(function(r){e.status[r]=t[r]}),(0,M.default)(r)&&r(),e}}}),y=i(s.prototype,"hideDot",[O.action],{enumerable:!0,initializer:function(){var e=this;return function(){e.hasDot=!1}}}),s);t.default=z},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=r(8),i=n(a),s=r(3),l=n(s),c=r(1),u=n(c),d=r(2),f=n(d),p=r(4),h=n(p),m=r(5),v=n(m),g=r(10),w=r(6),y=r(0),b=r(53),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(b),S=r(467),k=n(S),E=r(468),I=n(E),C=r(469),R=n(C),x=r(470),P=n(x),N=r(471),D=n(N),O=r(70);r(472);var L=(w.Modal.warning,y.WeaLocaleProvider.getLabel),T=(0,g.observer)(o=function(e){function t(e){(0,u.default)(this,t);var r=(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return r.doSubmit=function(){var e=r.props.secondAuthStore,t=e.authCode,n=e.secondAuthType;if(t){var o={authCode:t,authType:n};(0,O.doSecondAuth)(o).then(function(e){var t=e.api_status,o=e.api_errormsg;t?r.props.onSuccess&&r.props.onSuccess.call({},(0,i.default)({},e,{secondAuthType:n})):(o&&w.Modal.error({content:o}),r.props.onFail&&r.props.onFail.call({},(0,i.default)({},e,{secondAuthType:n})))})}else{var a="";switch(n){case _.DYNAMIC_PASSWORD:a=L(501199,"请输入动态密码");break;case _.DYNAMIC_TOKEN:a=L(501200,"请输入动态令牌");break;case _.SECOND_AUTH_PASSWORD:a=L(501201,"请输入二次验证密码")}a&&w.Modal.error({content:a})}},r.closeDialog=function(){r.props.onClose&&r.props.onClose.call({})},r}return(0,v.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,r=e.secondAuthStore,n=r.secondAuthType,o=this.closeDialog,a=L(501195,"身份验证"),s=[React.createElement(w.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@h2aaez@confirm",onClick:this.doSubmit,type:"primary"},L(501196,"确定")),React.createElement(w.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@zjw8jb@cancel",onClick:this.closeDialog},L(31129,"取消"))],l=150,c={width:600,height:l},u={title:a,style:c,visible:t,onCancel:o,buttons:s};return n==_.CA_AUTH&&(l=300,c={width:600,height:l},u={title:a,style:c,visible:t,onCancel:o}),u.icon="icon-coms-workflow",u.iconBgcolor="#0079DE",n!=_.QYS?React.createElement(y.WeaDialog,(0,i.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@w3lgw8"},u),React.createElement("div",{className:"sencond-auth-dialog"},t&&this.renderContent())):this.renderQYSAuth()}},{key:"renderContent",value:function(){var e=this.props,t=e.visible,r=e.secondAuthStore,n=(r.authKey,r.secondAuthType),o=React.createElement("div",null);switch(n){case _.DYNAMIC_PASSWORD:o=React.createElement(k.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_DynamicPassword@cxrkl6",needSend:t,secondAuthStore:r});break;case _.DYNAMIC_TOKEN:o=React.createElement(I.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_DynamicToken@v64dcz",secondAuthStore:r});break;case _.SECOND_AUTH_PASSWORD:o=React.createElement(R.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_SecondAuthPassword@sr8m38",secondAuthStore:r});break;case _.CA_AUTH:o=React.createElement(P.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_CAAuth@0ul0ao",secondAuthStore:r,isShow:t,onClose:this.props.onClose,onSuccess:this.props.onSuccess});break;case _.QYS:}return o}},{key:"renderQYSAuth",value:function(){return React.createElement(D.default,(0,i.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_QYSAuth@19ohes"},this.props))}}]),t}(React.Component))||o;t.default=T},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=r(8),i=n(a),s=r(3),l=n(s),c=r(1),u=n(c),d=r(2),f=n(d),p=r(4),h=n(p),m=r(5),v=n(m),g=r(10),w=r(6),y=r(0),b=r(70),_=r(53),S=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(_),y.WeaLocaleProvider.getLabel),k={labelCol:{span:7},wrapperCol:{span:17}},E=(0,g.observer)(o=function(e){function t(e){(0,u.default)(this,t);var r=(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return r.saveAuthCode=function(e){r.props.secondAuthStore.saveAuthCode(e)},r.getDynaPwd=function(){(0,b.getDynamicPassword)({}).then(function(e){var t=e.api_status,n=e.api_errormsg,o=e.validSecond;t?r.setState({showButton:!1,countDown:o}):(r.setState({showButton:!0}),n&&w.Modal.error({content:n}))})},r.state={countDown:-1,showButton:!1},r}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){this.props.needSend&&this.getDynaPwd()}},{key:"componentDidUpdate",value:function(){var e=this,t=this.state.countDown;!this.intervalid&&t>0&&(this.intervalid=window.setInterval(function(){t-=1,e.setState({countDown:t})},1e3)),this.intervalid&&t<=0&&(window.clearInterval(this.intervalid),this.intervalid=null)}},{key:"componentWillUnmount",value:function(){this.intervalid&&window.clearInterval(this.intervalid)}},{key:"showAppendHtml",value:function(){var e=this.state,t=e.countDown,r=e.showButton;return t>0?React.createElement("span",{className:"dynamicPwdAppend"},t+"s"):0==t||r?React.createElement("span",{className:"dynamicPwdAppend"},React.createElement(w.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@mcyg6n",type:"primary",onClick:this.getDynaPwd},S(22408,"重新发送"))):void 0}},{key:"render",value:function(){var e="dynamicPwdWrapper",t=this.state,r=t.countDown,n=t.showButton;return(0==r||n)&&(e="dynamicPwdWrapper2"),React.createElement("div",{className:"content"},React.createElement(y.WeaFormItem,(0,i.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_WeaFormItem@see832"},k,{label:S(501221,"动态密码")}),React.createElement("span",{className:e},React.createElement(y.WeaInput,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaInput@v6liof",viewAttr:3,onChange:this.saveAuthCode}),this.showAppendHtml())))}}]),t}(React.Component))||o;t.default=E},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=r(8),i=n(a),s=r(3),l=n(s),c=r(1),u=n(c),d=r(2),f=n(d),p=r(4),h=n(p),m=r(5),v=n(m),g=r(10),w=r(6),y=r(0),b=(w.Modal.warning,y.WeaLocaleProvider.getLabel),_={labelCol:{span:7},wrapperCol:{span:17}},S=(0,g.observer)(o=function(e){function t(e){(0,u.default)(this,t);var r=(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return r.saveAuthCode=function(e){r.props.secondAuthStore.saveAuthCode(e)},r}return(0,v.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){return React.createElement("div",{className:"content"},React.createElement(y.WeaFormItem,(0,i.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_WeaFormItem@ur7gnc"},_,{label:b(32896,"动态令牌")}),React.createElement(y.WeaInput,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaInput@qimu94",viewAttr:3,onChange:this.saveAuthCode})))}}]),t}(React.Component))||o;t.default=S},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=r(8),i=n(a),s=r(3),l=n(s),c=r(1),u=n(c),d=r(2),f=n(d),p=r(4),h=n(p),m=r(5),v=n(m),g=r(10),w=r(6),y=r(0),b=(w.Modal.warning,y.WeaLocaleProvider.getLabel),_={labelCol:{span:7},wrapperCol:{span:17}},S=(0,g.observer)(o=function(e){function t(e){(0,u.default)(this,t);var r=(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return r.saveAuthCode=function(e){r.props.secondAuthStore.saveAuthCode(e)},r}return(0,v.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){return React.createElement("div",{className:"content"},React.createElement(y.WeaFormItem,(0,i.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_WeaFormItem@m6knay"},_,{label:b(501204,"二次验证密码")}),React.createElement(y.WeaInput,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaInput@wnztq9",viewAttr:3,type:"password",onChange:this.saveAuthCode})))}}]),t}(React.Component))||o;t.default=S},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=r(32),i=n(a),s=r(3),l=n(s),c=r(1),u=n(c),d=r(2),f=n(d),p=r(4),h=n(p),m=r(5),v=n(m),g=r(10),w=(r(6),r(0)),y=r(53),b=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(y),r(70)),_=w.WeaLocaleProvider.getLabel,S=(0,g.observer)(o=function(e){function t(e){(0,u.default)(this,t);var r=(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return r.state={sysId:-1},r}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentWillMount",value:function(){var e=this;(0,b.getEMID)().then(function(t){if(t.success){var r=t.sysId;e.setState({sysId:r})}})}},{key:"componentDidMount",value:function(){var e=this;this.intervalid||(this.intervalid=window.setInterval(function(){e.authTimter()},1e3))}},{key:"componentDidUpdate",value:function(){var e=this;this.props.isShow&&!this.intervalid&&(this.intervalid=window.setInterval(function(){e.authTimter()},1e3))}},{key:"authTimter",value:function(){var e=this,t=this.props,r=t.secondAuthStore,n=(t.onClose,t.onSuccess),o=r.authKey,a=(r.secondAuthType,r.isProtectDialog);this.isLoading||(this.isLoading=!0,(0,b.checkCAAuth)({authKey:o}).then(function(t){e.isLoading=!1;var r=t.authStatus;1==t.success&&1==r&&(n&&n.call({},{isProtectDialog:a}),e.intervalid&&(window.clearInterval(e.intervalid),e.intervalid=null))}))}},{key:"componentWillUnmount",value:function(){this.intervalid&&(window.clearInterval(this.intervalid),this.intervalid=null)}},{key:"render",value:function(){var e=this.props.secondAuthStore,t=e.authKey,r=this.state.sysId,n=(window.ecologyContentPath||"")+"/spa/workflow/static4mobile/index.html#/caauth?authKey="+t,o={sysId:r,url:n};return React.createElement("div",{className:"caWrapper"},React.createElement("div",{className:"ca_title wea-f14"},_(501184,"流程已启用CA验证")),React.createElement("div",{className:"description"},_(501189,"请使用e-mobile扫描下方二维码进行验证")),React.createElement("div",{className:"codeWrapper"},React.createElement("div",{className:"qrcode"},React.createElement(w.WeaQrcode,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaQrcode@tx13f7",text:"_ec_open_link:"+(0,i.default)(o)}))))}}]),t}(React.Component))||o;t.default=S},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(8),a=n(o),i=r(3),s=n(i),l=r(1),c=n(l),u=r(2),d=n(u),f=r(4),p=n(f),h=r(5),m=n(h),v=(r(10),r(6)),g=r(0),w=r(53),y=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(w),g.WeaLocaleProvider.getLabel),b=function(e){function t(e){(0,c.default)(this,t);var r=(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return r.receiveMessage=function(e){var t=r.props.secondAuthStore,n=t.secondAuthType,o=t.isProtectDialog,i=t.signUrl,s=void 0===i?"":i,l=e.data||{};"string"==typeof l&&(l=JSON.parse(l));var c=e.origin;if(c&&s.startsWith(c)){var u=l,d=u.action,f=void 0===d?"":d,p=l.data||{};if("cancel"==f)r.props.onClose&&r.props.onClose();else if("complete"==f)r.props.onSuccess&&r.props.onSuccess((0,a.default)({secondAuthType:n,isProtectDialog:o},p));else if("message"==f){var h=p.message;r.setState({errorMsg:h})}}},r.closeDialog=function(){r.props.onClose&&r.props.onClose()},r.state={errorMsg:""},r}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,r=e.secondAuthStore,n=(r.secondAuthType,r.signUrl),o=void 0===n?"":n,i=y(501195,"身份验证"),s={width:520,height:500},l=this.closeDialog,c=[],u={title:i,style:s,visible:t,onCancel:l,buttons:c};return u.icon="icon-coms-workflow",u.iconBgcolor="#0079DE",o&&(u.url=o),React.createElement(g.WeaDialog,(0,a.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@i0y51f"},u))}},{key:"componentDidMount",value:function(){this.resisterListener()}},{key:"componentWillUnMount",value:function(){this.removeListener()}},{key:"shouldComponentUpdate",value:function(e,t,r){return this.state.errorMsg!=t.errorMsg&&t.errorMsg&&(v.Modal.error({content:t.errorMsg}),this.setState({errorMsg:""})),!0}},{key:"resisterListener",value:function(){window.addEventListener?window.addEventListener("message",this.receiveMessage,!1):window.attachEvent("message",this.receiveMessage)}},{key:"removeListener",value:function(){window.removeEventListener?window.removeEventListener("message",this.receiveMessage,!1):window.detachEvent("message",this.receiveMessage)}}]),t}(React.Component);t.default=b},function(e,t){},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r,n){r&&(0,k.default)(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function a(e,t,r,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,s,l,c,u,d,f,p,h,m,v,g,w,y,b,_,S=r(13),k=n(S),E=r(90),I=n(E),C=r(31),R=n(C),x=r(138),P=n(x),N=r(1),D=n(N),O=r(2),L=n(O),T=r(7),F=r(70),A=r(0),M=A.WeaLocaleProvider.getLabel,W=(i=(0,T.action)("设置验证码的值"),s=(0,T.action)("设置CA认证的信息"),l=(0,T.action)("加载篡改的详细信息"),c=(0,T.action)("验证保护的数据是否被篡改"),u=(0,T.action)("切换tab"),d=function(){function e(){(0,D.default)(this,e),this.authCode="",this.authKey="",this.isProtectDialog=0,o(this,"secondAuthType",f,this),this.logId=-1,this.commonParam={},o(this,"tabs",p,this),o(this,"selectedKey",h,this),o(this,"certInfo",m,this),o(this,"tamperInfo",v,this),o(this,"checkResult",g,this),o(this,"isProtected",w,this),o(this,"protectTypes",y,this),o(this,"signUrl",b,this),o(this,"APIResult",_,this)}return(0,L.default)(e,[{key:"saveAuthCode",value:function(e){this.authCode=e}},{key:"setAuthData",value:function(e){(0,P.default)(this,e)}},{key:"loadAuthDetail",value:function(){var e=this;this.tabs=[],this.selectedKey="tamperInfo";var t=this.commonParam,r=t.requestid,n=t.workflowid,o=t.nodeid,a=t.formid,i=t.isbill,s=this.logId,l={requestid:r,workflowid:n,nodeid:o,formid:a,isbill:i,logid:s};(0,F.getTamperDatas)(l).then(function(t){var r=t.success;(0,T.runInAction)(function(){if(e.APIResult=t,"1"==r){var n=t.certInfo,o=t.tamperInfo,a=o.checkResult,i=void 0===a?0:a,s=M(501477,"篡改信息");"1"===i&&(s=M(506277,"受保护数据")),e.certInfo=[].concat((0,R.default)(n)),n.length>0&&e.tabs.push({tabKey:"certInfo",title:M(501463,"证书信息")}),e.tamperInfo=mobx.observable.map(o),e.tabs.push({tabKey:"tamperInfo",title:s})}})})}},{key:"checkProtectDatas",value:function(){this.tabs=[],this.selectedKey="tamperInfo";var e=this.commonParam,t=e.requestid,r=e.workflowid,n=e.nodeid,o=e.formid,a=e.isbill,i=this.logId,s={requestId:t,workflowId:r,nodeId:n,formId:o,isbill:a,logId:i};return(0,F.checkProtectDatas)(s)}},{key:"changeTab",value:function(e){this.selectedKey=e}},{key:"setLogId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.logId=e}},{key:"setCommonParam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.commonParam=e}},{key:"setCheckResult",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;e>0&&this.checkResult.set(e,t)}},{key:"setIsProtected",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e>0&&this.isProtected.set(e,t)}},{key:"setProtectType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e>0&&this.protectTypes.set(e,t)}}]),e}(),f=a(d.prototype,"secondAuthType",[T.observable],{enumerable:!0,initializer:function(){return 0}}),p=a(d.prototype,"tabs",[T.observable],{enumerable:!0,initializer:function(){return[]}}),h=a(d.prototype,"selectedKey",[T.observable],{enumerable:!0,initializer:function(){return""}}),m=a(d.prototype,"certInfo",[T.observable],{enumerable:!0,initializer:function(){return[]}}),v=a(d.prototype,"tamperInfo",[T.observable],{enumerable:!0,initializer:function(){return{}}}),g=a(d.prototype,"checkResult",[T.observable],{enumerable:!0,initializer:function(){return mobx.observable.map({})}}),w=a(d.prototype,"isProtected",[T.observable],{enumerable:!0,initializer:function(){return mobx.observable.map({})}}),y=a(d.prototype,"protectTypes",[T.observable],{enumerable:!0,initializer:function(){return mobx.observable.map({})}}),b=a(d.prototype,"signUrl",[T.observable],{enumerable:!0,initializer:function(){return""}}),_=a(d.prototype,"APIResult",[T.observable],{enumerable:!0,initializer:function(){return{}}}),a(d.prototype,"saveAuthCode",[i],(0,I.default)(d.prototype,"saveAuthCode"),d.prototype),a(d.prototype,"setAuthData",[s],(0,I.default)(d.prototype,"setAuthData"),d.prototype),a(d.prototype,"loadAuthDetail",[l],(0,I.default)(d.prototype,"loadAuthDetail"),d.prototype),a(d.prototype,"checkProtectDatas",[c],(0,I.default)(d.prototype,"checkProtectDatas"),d.prototype),a(d.prototype,"changeTab",[u],(0,I.default)(d.prototype,"changeTab"),d.prototype),a(d.prototype,"setLogId",[T.action],(0,I.default)(d.prototype,"setLogId"),d.prototype),a(d.prototype,"setCommonParam",[T.action],(0,I.default)(d.prototype,"setCommonParam"),d.prototype),a(d.prototype,"setCheckResult",[T.action],(0,I.default)(d.prototype,"setCheckResult"),d.prototype),a(d.prototype,"setIsProtected",[T.action],(0,I.default)(d.prototype,"setIsProtected"),d.prototype),a(d.prototype,"setProtectType",[T.action],(0,I.default)(d.prototype,"setProtectType"),d.prototype),d);t.default=W},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=r(8),i=n(a),s=r(31),l=n(s),c=r(3),u=n(c),d=r(1),f=n(d),p=r(2),h=n(p),m=r(4),v=n(m),g=r(5),w=n(g),y=r(9),b=n(y),_=r(10),S=r(7),k=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(S),E=r(0),I=r(475),C=n(I),R=r(476),x=n(R);r(481);var P=E.WeaLocaleProvider.getLabel,N=(0,_.observer)(o=function(e){function t(e){(0,f.default)(this,t);var r=(0,v.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return r.changeTab=function(e){r.props.secondAuthStore.changeTab(e)},r.closeDialog=function(){r.props.onClose&&r.props.onClose(),r.resetStore()},r.resetStore=function(){var e=r.props.secondAuthStore;e.changeTab("tamperInfo"),e.setLogId()},r}return(0,w.default)(t,e),(0,h.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.visible;this.props.visible!=e.visible&&e.visible&&this.loadAuthDetail()}},{key:"componentDidMount",value:function(){this.props.visible&&this.loadAuthDetail()}},{key:"loadAuthDetail",value:function(){this.props.secondAuthStore.loadAuthDetail()}},{key:"getDialogContent",value:function(){var e=this.props,t=(e.visible,e.secondAuthStore),r=t.tabs,n=t.selectedKey,o=t.tamperInfo,a=t.certInfo,s=k.toJS(r),c=k.toJS(o),u=k.toJS(a),d=[],f=c.checkResult;return"9"==(void 0===f?0:f)?d.push(b.default.createElement(C.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_CertInfo@rysgqn@ec1",data:[].concat((0,l.default)(u))})):(d.push(b.default.createElement(E.WeaTab,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaTab@qrhmke@ec2",datas:s,keyParam:"tabKey",selectedKey:n,onChange:this.changeTab})),d.push("certInfo"==n&&u.length>0&&b.default.createElement(C.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_CertInfo@s935ub@ec3",data:[].concat((0,l.default)(u))})),d.push("tamperInfo"==n&&b.default.createElement(x.default,(0,i.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_TamperInfo@5kxq6s@ec4"},c)))),d}},{key:"render",value:function(){var e=this.props,t=e.visible,r=e.secondAuthStore,n=r.APIResult,o=r.tamperInfo,a=k.toJS(o),s=k.toJS(n),l=s.success,c=void 0===l?"1":l,u=s.message,d=a.checkResult,f=void 0===d?0:d,p=this.closeDialog,h=P(501209,"数据保护"),m={width:800,height:600};"9"==f&&(h=P(501463,"证书信息"));var v={title:h,style:m,visible:t,onCancel:p,hasScroll:!0,moduleName:"workflow"};return b.default.createElement(E.WeaDialog,(0,i.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@72ho5s"},v),"1"==c?this.getDialogContent():b.default.createElement(E.WeaAlertPage,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaAlertPage@506u0u"},b.default.createElement("div",null,u)))}}]),t}(b.default.Component))||o;t.default=N},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(8),a=n(o),i=r(18),s=n(i),l=r(3),c=n(l),u=r(1),d=n(u),f=r(2),p=n(f),h=r(4),m=n(h),v=r(5),g=n(v),w=r(9),y=n(w),b=(r(10),r(7)),_=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(b),r(0)),S=(_.WeaLocaleProvider.getLabel,{labelCol:{span:4},wrapperCol:{span:20}}),k=function(e){function t(e){return(0,d.default)(this,t),(0,m.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e))}return(0,g.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data;return y.default.createElement("div",{className:"second-auth-cert"},t.map(function(t){var r="object"===(0,s.default)(t.domkey)?t.domkey[0]:t.domkey;return y.default.createElement(_.WeaFormItem,(0,a.default)({ecId:(e&&e.props&&e.props.ecId||"")+"_WeaFormItem@ct8g6v@"+r},S,{label:t.label,underline:!0}),y.default.createElement("span",{className:"item"},t.value))}))}}]),t}(y.default.Component);t.default=k},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(8),a=n(o),i=r(3),s=n(i),l=r(1),c=n(l),u=r(2),d=n(u),f=r(4),p=n(f),h=r(5),m=n(h),v=r(9),g=n(v),w=(r(10),r(7)),y=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(w),r(0)),b=r(477),_=n(b),S=r(480),k=n(S),E=(y.WeaLocaleProvider.getLabel,function(e){function t(e){return(0,c.default)(this,t),(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){return g.default.createElement("div",{className:"second-auth-detail"},g.default.createElement(_.default,(0,a.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_FieldLogs@9ec9fe"},this.props)),g.default.createElement(k.default,(0,a.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_RemarkLogs@80gzl6"},this.props)))}}]),t}(g.default.Component));t.default=E},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(8),a=n(o),i=r(31),s=n(i),l=r(3),c=n(l),u=r(1),d=n(u),f=r(2),p=n(f),h=r(4),m=n(h),v=r(5),g=n(v),w=(r(10),r(7)),y=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(w),r(0)),b=r(478),_=n(b),S=r(479),k=n(S),E=y.WeaLocaleProvider.getLabel,I=function(e){function t(e){return(0,d.default)(this,t),(0,m.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e))}return(0,g.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e=[],t={},r=this.props,n=r.hasMain,o=r.hasDetail,i=r.detailTableList,l=r.checkResult;return n&&(e=this.props.mainChangeLog),o&&(t=this.props.detailChangeLog),n||o?React.createElement(y.WeaSearchGroup,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaSearchGroup@ieju4z",showGroup:!0,title:E(501205,"保护字段")},n&&React.createElement(_.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_MainFieldLogs@85yd8w",datas:[].concat((0,s.default)(e)),checkResult:l}),o&&React.createElement(k.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_DetailFieldLogs@33wz44",datas:(0,a.default)({},t),tables:[].concat((0,s.default)(i)),checkResult:l})):null}}]),t}(React.Component);t.default=I},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(3),a=n(o),i=r(1),s=n(i),l=r(2),c=n(l),u=r(4),d=n(u),f=r(5),p=n(f),h=r(9),m=n(h),v=(r(10),r(7)),g=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(v),r(0)),w=g.WeaLocaleProvider.getLabel,y=g.WeaTools.Base64,b=function(e){function t(e){return(0,s.default)(this,t),(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e))}return(0,p.default)(t,e),(0,c.default)(t,[{key:"renderItemList2",value:function(e){return e.map(function(e,t){var r=e.fieldLabel,n=e.showName1,o=e.showName2;return e.isBase64&&(n&&(n=y.decode(n)),o&&(o=y.decode(o))),m.default.createElement("li",null,m.default.createElement("span",null,"[",r,"]："),m.default.createElement("span",null,'"'),m.default.createElement("span",{dangerouslySetInnerHTML:{__html:o}}),m.default.createElement("span",null,'"'),m.default.createElement("span",null," ",w(501211,"被改为")," "),m.default.createElement("span",null,'"'),m.default.createElement("span",{className:"red",dangerouslySetInnerHTML:{__html:n}}),m.default.createElement("span",null,'"'))})}},{key:"renderItemList1",value:function(e){return e.map(function(e,t){var r=e.fieldLabel,n=e.showName;return e.isBase64&&n&&(n=y.decode(n)),m.default.createElement("li",null,m.default.createElement("span",null,"[",r,"]："),m.default.createElement("span",null," "),m.default.createElement("span",{dangerouslySetInnerHTML:{__html:n}}))})}},{key:"render",value:function(){var e=this.props,t=e.datas,r=e.checkResult;return m.default.createElement("div",{className:"mainFieldLogs"},m.default.createElement("ol",null,"2"===r?this.renderItemList2(t):this.renderItemList1(t)))}}]),t}(m.default.Component);t.default=b},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(3),a=n(o),i=r(1),s=n(i),l=r(2),c=n(l),u=r(4),d=n(u),f=r(5),p=n(f),h=r(9),m=n(h),v=(r(10),r(7)),g=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(v),r(0)),w=(g.WeaLocaleProvider.getLabel,g.WeaTools.Base64),y=function(e){function t(e){return(0,s.default)(this,t),(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e))}return(0,p.default)(t,e),(0,c.default)(t,[{key:"renderDetailTable2",value:function(e){var t=e.data,r=e.columns;return t=t.map(function(e,t){var n={};return r.map(function(t){var r=t.fieldId,o=t.fieldName,a=(t.fieldLabel,e[r]);if(a){var i=a.showName1,s=void 0===i?"":i,l=a.showName2,c=void 0===l?"":l;a.isBase64&&(s&&(s=w.decode(s)),c&&(c=w.decode(c)));var u="";c&&(u+='<div class="fieldValue" >'+c+"</div>"),s&&(u+='<div class="fieldValue red">'+s+"</div>");var d=m.default.createElement("div",{dangerouslySetInnerHTML:{__html:u}});n[o]=d}else n[o]=""}),n}),r=r.map(function(e){var t=e.fieldName;return{title:e.fieldLabel,dataIndex:t,key:t}}),m.default.createElement(g.WeaTable,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaTable@fa4ava",columns:r,dataSource:t,pagination:!1})}},{key:"renderDetailTable1",value:function(e){var t=e.data,r=e.columns;return t=t.map(function(e,t){var n={};return r.map(function(t){var r=t.fieldId,o=t.fieldName,a=(t.fieldLabel,e[r]);if(a){var i=a.showName;a.isBase64&&i&&(i=w.decode(i)),n[o]=m.default.createElement("div",{className:"fieldValue",dangerouslySetInnerHTML:{__html:i}})}else n[o]=""}),n}),r=r.map(function(e){var t=e.fieldName;return{title:e.fieldLabel,dataIndex:t,key:t}}),m.default.createElement(g.WeaTable,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaTable@flu8m9",columns:r,dataSource:t,pagination:!1})}},{key:"renderTables",value:function(e,t,r){var n=this;return t.map(function(t){var o=t.tableId,a=t.tableName;return[o]in e?m.default.createElement("div",{className:"detailTalbe"},m.default.createElement("div",{className:"tableTitle"},a,"："),"2"===r?n.renderDetailTable2(e[o]):n.renderDetailTable1(e[o])):null})}},{key:"render",value:function(){var e=this.props,t=e.datas,r=e.tables,n=e.checkResult;return m.default.createElement("div",{className:"detailFieldLogs"},this.renderTables(t,r,n))}}]),t}(m.default.Component);t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(3),a=n(o),i=r(1),s=n(i),l=r(2),c=n(l),u=r(4),d=n(u),f=r(5),p=n(f),h=r(9),m=n(h),v=(r(10),r(7)),g=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(v),r(0)),w=g.WeaLocaleProvider.getLabel,y=g.WeaTools.Base64,b=function(e){function t(e){return(0,s.default)(this,t),(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e))}return(0,p.default)(t,e),(0,c.default)(t,[{key:"renderRemark2",value:function(){var e={},t=null,r=null,n=this.props.hasRemark;return n&&(e=this.props.remarkChangeLog,t=e.showName1,r=e.showName2,t&&(t=y.decode(t)),r&&(r=y.decode(r))),n?m.default.createElement(g.WeaSearchGroup,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaSearchGroup@n9hw50",showGroup:!0,title:w(17614,"签字意见")},m.default.createElement("div",{dangerouslySetInnerHTML:{__html:r}}),m.default.createElement("div",{className:"red",dangerouslySetInnerHTML:{__html:t}})):null}},{key:"renderRemark1",value:function(){var e={},t=null,r=this.props.hasRemark;return r&&(e=this.props.remarkChangeLog,(t=e.showName)&&(t=y.decode(t))),r?m.default.createElement(g.WeaSearchGroup,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaSearchGroup@c786du",showGroup:!0,title:w(17614,"签字意见")},m.default.createElement("div",{dangerouslySetInnerHTML:{__html:t}})):null}},{key:"render",value:function(){return"2"===this.props.checkResult?this.renderRemark2():this.renderRemark1()}}]),t}(m.default.Component);t.default=b},function(e,t){},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a,i=r(8),s=n(i),l=r(3),c=n(l),u=r(1),d=n(u),f=r(2),p=n(f),h=r(4),m=n(h),v=r(5),g=n(v),w=r(9),y=n(w),b=r(10),_=r(0),S=r(483),k=n(S),E=_.WeaLocaleProvider.getLabel,I=(o=(0,b.inject)("wfMobileSettingStore"))(a=(0,b.observer)(a=function(e){function t(){var e,r,n,o;(0,d.default)(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=n=(0,m.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(i))),n.doCancel=function(){(0,n.props.onCancel)()},o=r,(0,m.default)(n,o)}return(0,g.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e=this.props.apptype,t=10==e?{width:"650px",height:"531px"}:{width:"550px",height:"350px"};return y.default.createElement(_.WeaDialog,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@dhylg0",visible:!0,title:E(31811,"应用设置"),icon:"icon-coms-workflow",iconBgcolor:"#0079DE",maskClosable:!1,onCancel:this.doCancel,style:t},y.default.createElement(k.default,(0,s.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_Content@qppzvn"},this.props)))}}]),t}(y.default.Component))||a)||a;t.default=I},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a,i=r(8),s=n(i),l=r(3),c=n(l),u=r(1),d=n(u),f=r(2),p=n(f),h=r(4),m=n(h),v=r(5),g=n(v),w=r(9),y=n(w),b=r(10);r(212);var _=r(6),S=r(0),k=r(11),E=r(7),I=r(484),C=n(I),R=r(485),x=n(R),P=S.WeaLocaleProvider.getLabel,N=(o=(0,b.inject)("wfMobileSettingStore"))(a=(0,b.observer)(a=function(e){function t(e){(0,d.default)(this,t);var r=(0,m.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return r.doSave=function(){var e=r.props,t=e.wfMobileSettingStore,n=e.onCancel,o=t.form,a=o&&o.getFormParams(),i=o.getFormParams();a&&0==a.sourcetype?t.doSave(n):o.validateForm().then(function(e){("1"==i.sourcetype||"2"==i.sourcetype)&&""!=i.workflowids||("3"==i.sourcetype||"4"==i.sourcetype)&&""!=i.workflowtypes||e.isValid?t.doSave(n):e.showErrors()})},r.addFunc=function(){(0,r.props.wfMobileSettingStore.setDialogShow)("contentSetting",!0,{tabid:-1})},r.deleteFunc=function(){(0,r.props.wfMobileSettingStore.doDelMobilecenterConfig)({selectTabids:r.state.selectTabidStr})},r.onCheckEnable=function(e,t,n,o){if(o&&o.enable){var a=o.enable,i=r.props.wfMobileSettingStore,s=i.operatedatas,l=void 0===s?[]:s,c=i.setOperateDatas;l.map(function(e,t){a.filter(function(e){return e===t}).length>0?e.enable="1":e.enable="0"}),c(l)}},r.onCheckContent=function(e,t,n,o){if(t){var a=[],i="";t.map(function(e){a.push(e.key),i+=e.tabid+","}),i.length>0&&(i=i.substring(0,i.length-1)),r.setState({selectTabids:a,selectTabidStr:i})}},r.state={selectTabids:[],selectTabidStr:""},r}return(0,g.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.wfMobileSettingStore,r=e.scope;t.setBaseParams({menuid:r}),t.doInit()}},{key:"render",value:function(){var e=this,t=this.props.wfMobileSettingStore,r=t.fields,n=t.form,o=t.showDialog,a=t.contentcolumns,i=t.operatecolumns,l=t.setDialogShow,c=t.contentdatas,u=void 0===c?[]:c,d=t.operatedatas,f=void 0===d?[]:d,p=t.selectedOperate,h=void 0===p?{}:p,m=t.setOperateDatas,v=t.isWfcenterApp,g=t.resetSelectKeys,w=[];if(g&&(this.setState({selectTabids:[],selectTabidStr:""}),t.resetSelectKeys=!1),"1"!=v&&n&&n.isFormInit){var b=n&&n.getFormParams(),_=b&&(1==b.sourcetype||2==b.sourcetype),I=b&&(3==b.sourcetype||4==b.sourcetype);r.map(function(t){var r=t.domkey[0];("sourcetype"===r||"workflowids"===r&&_||"workflowtypes"===r&&I||"showCopy"===r)&&w.push({com:y.default.createElement(S.WeaFormItem,{ecId:(e&&e.props&&e.props.ecId||"")+"_WeaFormItem@ie0gsk@"+r,label:""+t.label,labelCol:{span:""+t.labelcol},wrapperCol:{span:""+t.fieldcol},error:n.getError(t),tipPosition:"bottom"},y.default.createElement(k.WeaSwitch,{ecId:(e&&e.props&&e.props.ecId||"")+"_WeaSwitch@6867w7@"+r,fieldConfig:t,form:n,formParams:b})),col:1})})}return y.default.createElement("div",{className:"wf-mobile-setting"},y.default.createElement("div",{className:"wf-mobile-setting-content"},y.default.createElement(S.WeaRightMenu,(0,s.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_WeaRightMenu@2iai8v"},this.getMoreBtns()),"1"===v?y.default.createElement("div",{className:"wf-mobile-setting-wfcenter"},y.default.createElement(S.WeaTableEdit,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaTableEdit@t06rck",columns:(0,E.toJS)(a),datas:u,title:P(521936,"内容来源"),draggable:!0,showAdd:!0,showCopy:!1,showDelete:!0,addFunc:this.addFunc,deleteType:"func",deleteFunc:this.deleteFunc,onRowSelect:this.onCheckContent,addType:"func",onChange:function(e){t.contentdatas=e},selectedRowKeys:this.state.selectTabids}),y.default.createElement(S.WeaTableEdit,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaTableEdit@s77fdb",columns:(0,E.toJS)(i),datas:(0,E.toJS)(f),title:P(521935,"操作菜单设置"),draggable:!0,showAdd:!1,showCopy:!1,showDelete:!1,onRowSelect:this.onCheckEnable,getRowSelection:function(){return!1},selectedData:(0,E.toJS)(h),onChange:function(e){m(e)}})):y.default.createElement(S.WeaSearchGroup,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaSearchGroup@ot5787",needTigger:!1,showGroup:!0,items:w}))),y.default.createElement(S.WeaDialogFooter,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialogFooter@puf3vp",buttons:this.getButtons(),moreBtn:this.getMoreBtns()}),y.default.createElement(C.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_WfCenterContent@3f65ga",wfMobileSettingStore:t,setDialogShow:l,isShow:o.contentSetting}),y.default.createElement(x.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_WfSource@px4iqn",wfMobileSettingStore:t,setDialogShow:l,isShow:o.newflow}))}},{key:"getButtons",value:function(){var e=[];return e.push(y.default.createElement(_.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@9177h9@save",type:"primary",onClick:this.doSave},P(86,"保存"))),e}},{key:"getMoreBtns",value:function(){var e=this,t=[];return t.push({key:"0",icon:y.default.createElement("i",{className:"icon-coms-Preservation"}),content:P(86,"保存"),onClick:function(t){return e.doSave()}}),{datas:t}}}]),t}(y.default.Component))||a)||a;t.default=N},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(31),i=n(a),s=r(8),l=n(s),c=r(3),u=n(c),d=r(1),f=n(d),p=r(2),h=n(p),m=r(4),v=n(m),g=r(5),w=n(g),y=r(9),b=n(y),_=r(10),S=r(11),k=r(0),E=r(6);r(212);var I=r(7),C=r(19),R=n(C),x=k.WeaLocaleProvider.getLabel,P=(0,_.observer)(o=function(e){function t(e){(0,f.default)(this,t);var r=(0,v.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return r.getSearchs=function(){var e=r.props.wfMobileSettingStore,t=e.contentSettingForm,n=e.contentSettingFields,o=void 0===n?[]:n,a=e.viewtypeFields,i=void 0===a?[]:a,s=e.selectedOrders,c=void 0===s?[]:s,u=e.orderColDatasMap,d=void 0===u?{}:u,f=e.setDialogShow,p=[],h=[];if(t&&t.isFormInit){var m=t&&t.getFormParams(),v=m&&(1==m.sourcetype||2==m.sourcetype),g=m&&(3==m.sourcetype||4==m.sourcetype),w=m&&m.viewtype,y=!1;o.map(function(e){var n=e.domkey[0];"viewtype"===n?h.push({com:b.default.createElement(k.WeaFormItem,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaFormItem@9sc8wu@"+n,label:""+e.label,labelCol:{span:""+e.labelcol},wrapperCol:{span:""+e.fieldcol},error:t.getError(e),tipPosition:"bottom"},b.default.createElement(S.WeaSwitch,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSwitch@s4v3m1@"+n,fieldConfig:e,form:t,formParams:m}),i&&i.map(function(e,o){var a=n+"_"+o;if(!0===y)return void(y=!1);var s=null;return i.length>o+1&&(s=i[o+1]),e.otherParams&&e.otherParams.key==w&&s&&s.otherParams&&s.otherParams.key==w?(y=!0,b.default.createElement(E.Row,{ecId:(r&&r.props&&r.props.ecId||"")+"_Row@sx6550@"+a},b.default.createElement(E.Col,{ecId:(r&&r.props&&r.props.ecId||"")+"_Col@ot0rm8@"+a,span:12},b.default.createElement(S.WeaSwitch,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSwitch@ycgbkb@"+a,fieldConfig:(0,l.default)({},e,{content:e.label}),form:t})),b.default.createElement(E.Col,{ecId:(r&&r.props&&r.props.ecId||"")+"_Col@pc3a07@"+a,span:12},b.default.createElement(S.WeaSwitch,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSwitch@guythe@"+a,fieldConfig:(0,l.default)({},s,{content:s.label}),form:t})))):e.otherParams&&e.otherParams.key==w&&"selected"==e.otherParams.type?b.default.createElement(E.Row,{ecId:(r&&r.props&&r.props.ecId||"")+"_Row@zelknz@"+a,style:{paddingTop:"8px"}},b.default.createElement(E.Col,{ecId:(r&&r.props&&r.props.ecId||"")+"_Col@rjilvr@"+a,span:9},b.default.createElement(S.WeaSwitch,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSwitch@wd8sr3@"+a,fieldConfig:(0,l.default)({},e,{content:e.label}),form:t}))):e.otherParams&&e.otherParams.key==w?b.default.createElement(E.Row,{ecId:(r&&r.props&&r.props.ecId||"")+"_Row@fc2cih@"+a,style:{textOverflow:"ellipsis"}},b.default.createElement(E.Col,{ecId:(r&&r.props&&r.props.ecId||"")+"_Col@2p6frb@"+a,span:24},b.default.createElement(S.WeaSwitch,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSwitch@0oy6sx@"+a,fieldConfig:(0,l.default)({},e,{content:e.label}),form:t}))):void 0})),col:1}):"ordercol"===n?h.push({com:b.default.createElement(k.WeaFormItem,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaFormItem@xerj4h@"+n,label:""+e.label,labelCol:{span:""+e.labelcol},wrapperCol:{span:""+e.fieldcol},error:t.getError(e),tipPosition:"bottom"},b.default.createElement(E.Row,{ecId:(r&&r.props&&r.props.ecId||"")+"_Row@6xgxtb@"+n,type:"flex",align:"middle"},b.default.createElement("span",{style:{marginRight:"5px",marginTop:"8px"}},b.default.createElement("i",{className:"icon-coms-Flow-setting icon",style:{cursor:"pointer",fontSize:"14px"},onClick:function(){return f("orderCol",!0)}})),c.length>0&&c.map(function(e){if(d[e]){var t=d[e],r=t.fieldshowname,n=void 0===r?"":r,o=t.ordertype,a=void 0===o?"0":o,i="-"+("0"===a?x(384984,"降序"):x(384985,"升序"));return b.default.createElement("span",{style:{marginRight:"5px",marginTop:"5px"}},n,b.default.createElement("span",null,i))}}))),col:1}):("workflowids"===n&&v||"workflowtypes"===n&&g||(!e.otherParams||!e.otherParams.key||""==e.otherParams.key)&&"workflowids"!=n&&"workflowtypes"!=n)&&h.push({com:b.default.createElement(k.WeaFormItem,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaFormItem@0z7otg@"+n,label:""+e.label,labelCol:{span:""+e.labelcol},wrapperCol:{span:""+e.fieldcol},error:t.getError(e),tipPosition:"bottom"},b.default.createElement(S.WeaSwitch,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSwitch@mf0cnk@"+n,fieldConfig:e,form:t,formParams:m})),col:1})})}return p.push(b.default.createElement(k.WeaSearchGroup,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSearchGroup@wgqp2i@group1",needTigger:!1,showGroup:!0,items:h})),p},r.renderItem=function(e){return b.default.createElement("div",{className:"wfcenter-orderCol-render-item"},b.default.createElement("p",null,e.fieldshowname))},r.renderSortItem=function(e){var t=(e.fieldshowname,e.ordertype),n=void 0===t?"asc":t;return b.default.createElement("div",{className:"wfcenter-orderCol-render-item",title:e.fieldshowname},b.default.createElement("div",{className:"item-info-right"},b.default.createElement("p",null,e.fieldshowname)),b.default.createElement("div",{className:"item-info-order"},b.default.createElement("a",{onClick:function(t){r.changeOrder(t,e,"0"===n?"1":"0")},onDoubleClick:function(e){return e.stopPropagation()}},"0"===n?x(384984,"降序"):x(384985,"升序"))))},r.changeOrder=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation();for(var o=r.state.orderColDatas_state,a=[].concat((0,i.default)(o)),s=0;s<a.length;s++)if(a[s].id==t.id){a[s].ordertype=n;break}r.setState({orderColDatas_state:a})},r.saveData=function(){var e=r.props.wfMobileSettingStore,t=e.doSaveMobilecenterConfig,n=e.currentTabid;r.resetState(),t({type:"contentSetting",tabid:n})},r.resetState=function(){r.setState({orderColDatas_state:[],selectedOrder_state:[],needSyn:!0})},r.getSearchs,r.state={orderColDatas_state:[],selectedOrder_state:[],needSyn:!0},r}return(0,w.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.isShow,n=t.setDialogShow,o=t.wfMobileSettingStore,a=o.showDialog,i=o.wfContentLoading;return b.default.createElement("div",null,b.default.createElement(k.WeaDialog,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@3yu19n",onCancel:function(){e.resetState(),n("contentSetting",!1)},visible:r,style:{width:"650px",height:"400px"},hasScroll:!0,buttons:this.getButtons(),icon:"icon-coms-workflow",iconBgcolor:"#0079DE",title:x(504014,"内容设置"),moreBtn:this.getMoreBtns()},!0===a.orderCol&&this.getOrderColDialog(),!i&&b.default.createElement(k.WeaRightMenu,(0,l.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_WeaRightMenu@y58jpw"},this.getMoreBtns()),b.default.createElement("div",null,"  ",this.getSearchs()))))}},{key:"getOrderColDialog",value:function(){var e=this,t=this.props.wfMobileSettingStore,r=t.showDialog,n=t.setDialogShow,o=t.selectedOrders,a=void 0===o?[]:o,i=t.orderColDatas,s=void 0===i?[]:i,l=this.state,c=l.orderColDatas_state,u=l.selectedOrder_state;return l.needSyn&&(0,I.toJS)(c)!=(0,I.toJS)(s)&&(this.setState({orderColDatas_state:(0,R.default)(s)}),this.setState({selectedOrder_state:a}),this.setState({needSyn:!1})),b.default.createElement(k.WeaDialog,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@rffkck",title:x(386541,"排序字段设置"),icon:"icon-coms-workflow",iconBgcolor:"#0079DE",onCancel:function(){e.resetState(),n("orderCol",!1)},visible:r.orderCol,style:{width:680,height:360},buttons:this.getOrderColButtons()},b.default.createElement(k.WeaTransfer,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaTransfer@m58zib",data:c,height:354,renderItem:this.renderItem,renderRight:this.renderSortItem,selectedKeys:u,onChange:function(t,r){e.setState({selectedOrder_state:t})},ref:"orderCol"}))}},{key:"getMoreBtns",value:function(){var e=this,t=[];return t.push({key:"0",icon:b.default.createElement("i",{className:"icon-coms-Preservation"}),content:x(86,"保存"),onClick:function(t){return e.saveData()}}),{datas:t}}},{key:"getButtons",value:function(){var e=[];return e.push(b.default.createElement(E.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@gprx0r@save",type:"primary",onClick:this.saveData},x(86,"保存"))),e}},{key:"getOrderColButtons",value:function(){var e=this,t=this.props.wfMobileSettingStore,r=this.state,n=r.orderColDatas_state,o=r.selectedOrder_state,a=t.setDialogShow,i=t.setSelectedOrders,s=t.setOrderColDatas,l=[];return l.push(b.default.createElement(E.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@yx7ste@confirm",disabled:!1,type:"primary",onClick:function(){s(n,!0),i(o,!0),a("orderCol",!1)}},x(826,"确定"))),l.push(b.default.createElement(E.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@ydxv86@cancel",disabled:!1,onClick:function(){e.setState({needSyn:!0}),a("orderCol",!1)}},x(201,"取消"))),l}}]),t}(b.default.Component))||o;t.default=k.WeaTools.tryCatch(b.default,function(e){return b.default.createElement(k.WeaErrorPage,{ecId:"_WeaErrorPage@x5bzc6",msg:e.error?e.error:"对不起，该页面异常，请联系管理员！"})},{error:""})(P)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(8),i=n(a),s=r(3),l=n(s),c=r(1),u=n(c),d=r(2),f=n(d),p=r(4),h=n(p),m=r(5),v=n(m),g=r(9),w=n(g),y=r(10),b=r(11),_=r(0),S=r(6),k=_.WeaLocaleProvider.getLabel,E=(0,y.observer)(o=function(e){function t(e){(0,u.default)(this,t);var r=(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return r.getSearchs=function(){var e=r.props.wfMobileSettingStore,t=e.newflowForm,n=e.newflowFields,o=void 0===n?[]:n,a=[],i=[];if(t&&t.isFormInit){var s=t&&t.getFormParams(),l=s&&(1==s.sourcetype||2==s.sourcetype),c=s&&(3==s.sourcetype||4==s.sourcetype);o.map(function(e){var n=e.domkey[0];("sourcetype"===n||"workflowids"===n&&l||"workflowtypes"===n&&c)&&i.push({com:w.default.createElement(_.WeaFormItem,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaFormItem@lq3ffb@"+n,label:""+e.label,labelCol:{span:""+e.labelcol},wrapperCol:{span:""+e.fieldcol},error:t.getError(e),tipPosition:"bottom"},w.default.createElement(b.WeaSwitch,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSwitch@12ca2j@"+n,fieldConfig:e,form:t,formParams:s})),col:1})})}return a.push(w.default.createElement(_.WeaSearchGroup,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSearchGroup@8js7k6@group1",needTigger:!1,showGroup:!0,items:i})),a},r.saveData=function(){(0,r.props.wfMobileSettingStore.doSaveMobilecenterConfig)({type:"newflow"})},r.getSearchs,r}return(0,v.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){var e=this.props,t=e.isShow,r=e.setDialogShow;return w.default.createElement("div",null,w.default.createElement(_.WeaDialog,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@5xrm4i",onCancel:function(){return r("newflow",!1)},visible:t,style:{width:"650px",height:"200px"},hasScroll:!0,buttons:this.getButtons(),icon:"icon-coms-workflow",iconBgcolor:"#0079DE",title:k(518517,"流程来源"),moreBtn:this.getMoreBtns()},w.default.createElement(_.WeaRightMenu,(0,i.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_WeaRightMenu@pg9og7"},this.getMoreBtns()),w.default.createElement("div",null,"  ",this.getSearchs()))))}},{key:"getMoreBtns",value:function(){var e=this,t=[];return t.push({key:"0",icon:w.default.createElement("i",{className:"icon-coms-Preservation"}),content:k(86,"保存"),onClick:function(t){return e.saveData()}}),{datas:t}}},{key:"getButtons",value:function(){var e=[];return e.push(w.default.createElement(S.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@lccny4@save",type:"primary",onClick:this.saveData},k(86,"保存"))),e}}]),t}(w.default.Component))||o;t.default=_.WeaTools.tryCatch(w.default,function(e){return w.default.createElement(_.WeaErrorPage,{ecId:"_WeaErrorPage@j1ew0v",msg:e.error?e.error:"对不起，该页面异常，请联系管理员！"})},{error:""})(E)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r,n){r&&(0,k.default)(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function a(e,t,r,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,s,l,c,u,d,f,p,h,m,v,g,w,y,b,_,S=r(13),k=n(S),E=r(32),I=n(E),C=r(8),R=n(C),x=r(1),P=n(x),N=r(7),D=r(11),O=r(487),L=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(O),T=r(6),F=r(0),A=T.Select.Option,M=F.WeaLocaleProvider.getLabel,W=(i=function e(){var t=this;(0,P.default)(this,e),this.baseParams={},this.fields={},this.newflowFields={},this.contentdatas=[],o(this,"contentcolumns",s,this),o(this,"operatedatas",l,this),this.operatecolumns=[],o(this,"selectedOperate",c,this),this.contentSettingFields={},this.viewtypeFields={},this.orderColDatas=[],this.orderColDatasMap=[],o(this,"selectedOrders",u,this),o(this,"form",d,this),o(this,"newflowForm",f,this),o(this,"contentSettingForm",p,this),this.callBackEvent=null,o(this,"isWfcenterApp",h,this),this.resetSelectKeys=!1,this.currentTabid=-1,o(this,"wfContentLoading",m,this),this.cornerTabId=-1,this.cornercountType="0",o(this,"showDialog",v,this),o(this,"setBaseParams",g,this),this.doInit=function(){L.getConfig(t.baseParams).then(function(e){var r=e.fields,n=e.formValue,o=e.isWfcenterApp,a=e.contentcolumns,i=e.operatecolumns,s=e.contentdatas,l=e.operatedatas,c=e.cornerTabId,u=e.cornercountType;t.isWfcenterApp=o,t.cornerTabId=c,t.cornercountType=u,"1"==t.isWfcenterApp&&(t.contentcolumns=a.map(function(e){return"operate"==e.key?e.render=function(e,r,n){return React.createElement("div",null,React.createElement("span",{title:M(30747,"设置")},React.createElement("a",{onClick:function(){t.wfContentLoading=!0,t.setDialogShow("contentSetting",!0,{tabid:r.tabid})}},M(30747,"设置"))),"    ",React.createElement("span",{title:M(350,"另存为")},React.createElement("a",{onClick:function(){t.wfContentLoading=!0,t.setDialogShow("contentSetting",!0,{tabid:r.tabid,saveAs:!0})}},M(350,"另存为"))))}:"iscorner"==e.key&&(e.render=function(e,r,n){var o=t.cornerTabId==r.tabid,i=t.cornercountType;return React.createElement(T.Radio,{checked:o,onChange:function(){t.onchange(r.tabid,a)}},o&&React.createElement(T.Select,{defaultValue:i,style:{width:68},onChange:function(e){t.changeCornercountType(e)}},React.createElement(A,{value:"0"},M(532273,"总数")),React.createElement(A,{value:"1"},M(532274,"未读数"))))}),e}),t.operatecolumns=i.map(function(e){return"operate"==e.key&&(e.render=function(e,r,n){if(e)return React.createElement("div",{title:e},React.createElement("a",{onClick:function(){return t.setDialogShow("newflow",!0,{tabid:r.tabid})}},e))}),e}),l&&l.map(function(e,r){"1"==e.enable&&t.selectedOperate.enable.push(r)})),t.contentdatas=s,t.operatedatas=l,t.fields=r,t.form=new D.WeaForm,t.form.initFormFieldObj(r),t.form.updateFields(n)})},this.doSave=function(e){var r=t.form&&t.form.getFormParams(),n=!(r&&0==r.sourcetype);L.doSaveConfig((0,R.default)({},t.baseParams,r,{contentdatas:(0,I.default)(t.contentdatas),operatedatas:(0,I.default)(t.operatedatas),isWfcenterApp:t.isWfcenterApp,cornerTabId:t.cornerTabId,cornercountType:t.cornercountType})).then(function(t){"success"===t.flag&&"function"===typeof e&&e(n)})},o(this,"doSaveMobilecenterConfig",w,this),o(this,"doDelMobilecenterConfig",y,this),o(this,"getMobileCenterConfig",b,this),o(this,"setDialogShow",_,this),this.setOperateDatas=function(e){t.operatedatas=e;var r={enable:[]};t.operatedatas&&t.operatedatas.map(function(e,t){"1"==e.enable&&r.enable.push(t)}),t.selectedOperate=r},this.setSelectedOperate=function(e){t.selectedOperate=e},this.setOrderColDatas=function(e){t.orderColDatas=e,t.orderColDatas.map(function(e){t.orderColDatasMap[e.id]=e})},this.setSelectedOrders=function(e){e&&(t.selectedOrders=e)},this.onchange=function(e,r){e&&(t.cornerTabId=e),t.cornercountType=0,t.contentcolumns=r.map(function(e){return"operate"==e.key?e.render=function(e,r,n){return React.createElement("div",null,React.createElement("span",{title:M(30747,"设置")},React.createElement("a",{onClick:function(){t.wfContentLoading=!0,t.setDialogShow("contentSetting",!0,{tabid:r.tabid})}},M(30747,"设置"))),"    ",React.createElement("span",{title:M(350,"另存为")},React.createElement("a",{onClick:function(){t.wfContentLoading=!0,t.setDialogShow("contentSetting",!0,{tabid:r.tabid,saveAs:!0})}},M(350,"另存为"))))}:"iscorner"==e.key&&(e.render=function(e,n,o){var a=t.cornerTabId==n.tabid;return React.createElement(T.Radio,{checked:a,onClick:function(){t.onchange(n.tabid,r)}},a&&React.createElement(T.Select,{defaultValue:"0",style:{width:68},onChange:function(e){t.changeCornercountType(e)}},React.createElement(A,{value:"0"},M(532273,"总数")),React.createElement(A,{value:"1"},M(532274,"未读数"))))}),e})},this.changeCornercountType=function(e){e&&(t.cornercountType=e)},this.setBaseParams=this.setBaseParams,this.doInit=this.doInit,this.setDialogShow=this.setDialogShow,this.doSaveMobilecenterConfig=this.doSaveMobilecenterConfig,this.doDelMobilecenterConfig=this.doDelMobilecenterConfig},s=a(i.prototype,"contentcolumns",[N.observable],{enumerable:!0,initializer:function(){return[]}}),l=a(i.prototype,"operatedatas",[N.observable],{enumerable:!0,initializer:function(){return[]}}),c=a(i.prototype,"selectedOperate",[N.observable],{enumerable:!0,initializer:function(){return{enable:[]}}}),u=a(i.prototype,"selectedOrders",[N.observable],{enumerable:!0,initializer:function(){return[]}}),d=a(i.prototype,"form",[N.observable],{enumerable:!0,initializer:function(){return null}}),f=a(i.prototype,"newflowForm",[N.observable],{enumerable:!0,initializer:function(){return null}}),p=a(i.prototype,"contentSettingForm",[N.observable],{enumerable:!0,initializer:function(){return null}}),h=a(i.prototype,"isWfcenterApp",[N.observable],{enumerable:!0,initializer:function(){return null}}),m=a(i.prototype,"wfContentLoading",[N.observable],{enumerable:!0,initializer:function(){return!0}}),v=a(i.prototype,"showDialog",[N.observable],{enumerable:!0,initializer:function(){return{contentSetting:!1,newflow:!1,orderCol:!1}}}),g=a(i.prototype,"setBaseParams",[N.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.baseParams=t}}}),w=a(i.prototype,"doSaveMobilecenterConfig",[N.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"newflow"==t.type?e.newflowForm.validateForm().then(function(r){var n=e.newflowForm.getFormParams();if("0"===n.sourcetype||("1"==n.sourcetype||"2"==n.sourcetype)&&""!=n.workflowids||("3"==n.sourcetype||"4"==n.sourcetype)&&""!=n.workflowtypes||r.isValid){var o=e.newflowForm&&e.newflowForm.getFormParams();L.doSaveMobileCenterConfig((0,R.default)({},e.baseParams,t,o,{type:"newflow"})).then(function(t){"success"===t.flag?T.message.success(M("83551","保存成功")):T.message.error(M("22620","保存失败！")),e.showDialog.newflow=!1})}else r.showErrors()}):"contentSetting"==t.type&&e.contentSettingForm.validateForm().then(function(r){var n=e.contentSettingForm.getFormParams();if(""!=n.title&&("0"===n.sourcetype||("1"==n.sourcetype||"2"==n.sourcetype)&&""!=n.workflowids||("3"==n.sourcetype||"4"==n.sourcetype)&&""!=n.workflowtypes)||r.isValid){var o=e.contentSettingForm&&e.contentSettingForm.getFormParams(),a="";e.selectedOrders.length>0&&e.selectedOrders.map(function(t){e.orderColDatasMap[t]&&(a+=e.orderColDatasMap[t].id+"|"+e.orderColDatasMap[t].ordertype+",")}),L.doSaveMobileCenterConfig((0,R.default)({},e.baseParams,t,o,{type:"contentSetting",orderColKeys:a,cornerTabId:e.cornerTabId,cornercountType:e.cornercountType})).then(function(t){"success"===t.flag?T.message.success(M("83551","保存成功！")):T.message.error(M("22620","保存失败！")),e.showDialog.contentSetting=!1,e.doInit(),e.resetSelectKeys=!0})}else r.showErrors()})}}}),y=a(i.prototype,"doDelMobilecenterConfig",[N.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e;T.Modal.confirm({title:M(131329,"信息确认"),content:M(33435," 确定要删除选中的记录吗？"),onOk:function(){L.doDelMobileCenterConfig((0,R.default)({},r.baseParams,t)).then(function(e){"success"===e.flag?T.message.success(M("83472","删除成功！")):T.message.error(M("83473","删除失败！")),r.resetSelectKeys=!0,r.doInit()})},onCancel:function(){},okText:M(83446,"确定"),cancelText:M(31129,"取消")})}}}),b=a(i.prototype,"getMobileCenterConfig",[N.action],{enumerable:!0,initializer:function(){var e=this;return function(t){L.getMobileCenterConfig((0,R.default)({},e.baseParams,t)).then(function(r){var n=r.newflowFields,o=void 0===n?[]:n,a=r.newflowValues,i=r.contentSettingFields,s=void 0===i?[]:i,l=(r.contentSettingValues,r.viewtypeFields),c=void 0===l?[]:l,u=r.orderColDatas,d=void 0===u?[]:u,f=r.selectedOrders,p=void 0===f?[]:f;t.saveAs&&(e.currentTabid=-1),"contentSetting"===t.type&&(e.selectedOrders=p,e.orderColDatas=d,e.orderColDatas.map(function(t){e.orderColDatasMap[t.id]=t}),e.viewtypeFields=c,e.contentSettingFields=s,e.contentSettingForm=new D.WeaForm,e.contentSettingForm.initFormFieldObj(s),e.wfContentLoading=!1),"newflow"===t.type&&(e.newflowFields=o,e.newflowForm=new D.WeaForm,e.newflowForm.initFormFieldObj(o),e.newflowForm.updateFields(a))})}}}),_=a(i.prototype,"setDialogShow",[N.action],{enumerable:!0,initializer:function(){var e=this;return function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"newflow"===t?!0===r&&e.getMobileCenterConfig({type:"newflow"}):"contentSetting"===t&&!0===r&&(e.currentTabid=n.tabid,n.type="contentSetting",e.getMobileCenterConfig(n)),e.showDialog[t]=r}}}),i);t.default=W},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doDelMobileCenterConfig=t.doSaveMobileCenterConfig=t.doSaveConfig=t.getMobileCenterConfig=t.getConfig=void 0;var n=r(0);t.getConfig=function(e){return n.WeaTools.callApi("/api/workflow/mobilesetting/getConfig","POST",e)},t.getMobileCenterConfig=function(e){return n.WeaTools.callApi("/api/workflow/mobilesetting/getMobileCenterConfig","POST",e)},t.doSaveConfig=function(e){return n.WeaTools.callApi("/api/workflow/mobilesetting/doSaveConfig","POST",e)},t.doSaveMobileCenterConfig=function(e){return n.WeaTools.callApi("/api/workflow/mobilesetting/doSaveMobileCenterConfig","POST",e)},t.doDelMobileCenterConfig=function(e){return n.WeaTools.callApi("/api/workflow/mobilesetting/doDelMobileCenterConfig","POST",e)}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=r(18),i=n(a),s=r(3),l=n(s),c=r(1),u=n(c),d=r(2),f=n(d),p=r(4),h=n(p),m=r(5),v=n(m);r(489);var g=r(9),w=n(g),y=r(10),b=r(6),_=r(0),S=r(11),k=_.WeaLocaleProvider.getLabel,E=_.WeaTools.getKey,I=(0,y.observer)(o=function(e){function t(){(0,u.default)(this,t);var e=(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this));return e.submitEvent=function(){var t=e.props.store,r=t.form;t.isSubmiting||(t.doRemind(r.getFormParams()),e.setState({visible:!1}))},e.cancelEvent=function(){e.props.store.doNotRemind(),e.setState({visible:!1})},e.onSelectChange=function(t,r){e.setState({key:r})},e.state={visible:!0,reminder:"",remindTypes:""},e.onSelectChange=e.onSelectChange,e}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){this.props.store.getRemindData()}},{key:"render",value:function(){var e=this,t=this.props.store,r=t.form,n=t.condition,o=void 0===n?[]:n,a=this.state,s=a.visible,l=(a.reminder,a.remindTypes,[]);if(r.isFormInit){var c=r.getFormParams();c.reminder,c.remindTypes,o.map(function(t){t.items.map(function(t){var n="object"===(0,i.default)(t.domkey)?t.domkey[0]:t.domkey;l.push(w.default.createElement(_.WeaFormItem,{ecId:(e&&e.props&&e.props.ecId||"")+"_WeaFormItem@xwidg1@"+n,label:t.label,labelCol:{span:""+t.labelcol},wrapperCol:{span:""+t.fieldcol},tipPosition:"bottom"},w.default.createElement(S.WeaSwitch,{ecId:(e&&e.props&&e.props.ecId||"")+"_WeaSwitch@fztrla@group1",fieldConfig:t,form:r,onChange:function(r){e.onSelectChange(E(t),r)}})))})})}return w.default.createElement("div",null,r.isFormInit&&w.default.createElement(_.WeaDialog,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@m8sjx2",title:k(502764,"请确认流程提醒"),visible:s,closable:!1,style:{width:600,height:100},maskClosable:!1,icon:"icon-coms-workflow",iconBgcolor:"#0079DE",buttons:[w.default.createElement(b.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@5kcszv@submit",type:"primary",size:"large",onClick:this.submitEvent},k(826,"确定"))]},w.default.createElement("div",{className:"wea-req-chose-reminder-modal"},l)))}}]),t}(w.default.Component))||o;t.default=I},function(e,t){},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r,n){r&&(0,m.default)(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function a(e,t,r,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,s,l,c,u,d,f,p,h=r(13),m=n(h),v=r(1),g=n(v),w=r(11),y=r(7),b=r(92),_=n(b),S=r(491),k=(i=function e(){(0,g.default)(this,e),o(this,"form",s,this),o(this,"condition",l,this),this.params={},o(this,"getRemindData",c,this),o(this,"doRemind",u,this),o(this,"doNotRemind",d,this),o(this,"setParams",f,this),o(this,"setCallBackActions",p,this),this.getRemindData=this.getRemindData,this.doRemind=this.doRemind,this.setParams=this.setParams},s=a(i.prototype,"form",[y.observable],{enumerable:!0,initializer:function(){return new w.WeaForm}}),l=a(i.prototype,"condition",[y.observable],{enumerable:!0,initializer:function(){return[]}}),c=a(i.prototype,"getRemindData",[y.action],{enumerable:!0,initializer:function(){var e=this;return function(){(0,S.getRemindData)(e.params).then(function(t){e.condition=t.condition,e.form.initFormFields(t.condition)})}}}),u=a(i.prototype,"doRemind",[y.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,S.doRemind)((0,_.default)({},t,e.params)).then(function(t){e.callBackActions()})}}}),d=a(i.prototype,"doNotRemind",[y.action],{enumerable:!0,initializer:function(){var e=this;return function(){e.callBackActions()}}}),f=a(i.prototype,"setParams",[y.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.params=t}}}),p=a(i.prototype,"setCallBackActions",[y.action],{enumerable:!0,initializer:function(){var e=this;return function(t){e.callBackActions=t}}}),i);t.default=k},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doRemind=t.getRemindData=void 0;var n=r(0);t.getRemindData=function(e){return n.WeaTools.callApi("/api/workflow/reqform/getRemindData","GET",e)},t.doRemind=function(e){return n.WeaTools.callApi("/api/workflow/reqform/doRemind","POST",e)}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(3),i=n(a),s=r(1),l=n(s),c=r(2),u=n(c),d=r(4),f=n(d),p=r(5),h=n(p),m=r(9),v=n(m),g=(r(7),r(10)),w=r(11),y=r(0),b=r(6);r(213);var _=r(214),S=n(_),k=(w.WeaTableNew.WeaTable,b.Modal.confirm),E=y.WeaLocaleProvider.getLabel,I=(0,g.observer)(o=function(e){function t(e){(0,l.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return r.openSettingDialog=function(){var e=r.props,t=e.followTypeSettingStore,n=e.onVisibleChange,o=t.setFunc;t.getAttentionTypeSet;o("showDialog",!0),o("openType","bdsz"),r.setState({visible:!1}),n(!1)},r.onChange=function(e,t){var n=r.props.followTypeSettingStore,o=n.tagList,a=o.get("datas")||[];a.map(function(r){r.id==e&&(r.checked=t.target.checked)}),o.set("datas",a)},r.addInputShow=function(){r.setState({addInputShow:!0})},r.onVisibleChange=function(e){},r.cancelAll=function(){var e=r.props.followTypeSettingStore,t=e.tagList,n=t.get("datas")||[];n.map(function(e){e.checked=!1}),r.setState({tagData:n}),r.submit()},r.DocancelAll=function(){var e=r;k({title:E("131329","信息确认"),content:E("511455","确定要清除该流程的所有关注类型吗？"),okText:E(826,"确定"),onOk:function(){e.cancelAll()},onCancel:function(){}})},r.same=function(){return r.props.followTypeSettingStore.tagList.get("datas").map(function(e,t){return e.showname!=String(r.state.inputValue).trim()}).indexOf(!1)},r.addSure=function(){var e=r.props.addBtn;r.props.followTypeSettingStore.tagList;if(""==String(r.state.inputValue).trim()||-1!=r.same())return void(""==String(r.state.inputValue).trim()?b.message.warning(E("511461","关注类型名称不能为空")):b.message.warning(E("511462","该关注类型已存在")));r.setState({inputValue:"",hoverOut:!0}),e(r.state.inputValue)},r.handle=function(e){r.setState({inputValue:e})},r.getFontColor=function(e){return.299*parseInt(e.substring(1,3),16)+.587*parseInt(e.substring(3,5),16)+.114*parseInt(e.substring(5,7),16)>186?"#000000":"#ffffff"},r.submit=function(){var e=r.props.makeSureCallBack,t=r.props.followTypeSettingStore,n=t.tagList,o=t.saveAttention,a=(t.setState,r.props.FollowRequestid),i=n.get("datas")||[],s="";i.map(function(e){"true"!==e.checked&&!0!==e.checked||(s+=e.id+",")}),o({src:"add",requestids:a,ids:s},"formrefresh",e)},r.getList=function(){var e=r.props.followTypeSettingStore.tagList,t=[],n=e.get("datas")||[];return n.length<=0?"":(n.map(function(e){t.push(v.default.createElement("div",null,v.default.createElement(b.Checkbox,{ecId:(r&&r.props&&r.props.ecId||"")+"_Checkbox@dr0p8f@"+e.id,className:"tags_checkbox",checked:"false"!=e.checked&&0!=e.checked,onChange:r.onChange.bind(r,e.id)},v.default.createElement("div",{className:"tags_showColor",title:e.showname,style:{background:e.colorval,color:r.getFontColor(e.colorval)}},e.showname))))}),v.default.createElement("div",null,v.default.createElement("div",{className:"select_content"},t),v.default.createElement("div",{className:"select_btn"},v.default.createElement("div",{className:"tag_add_div"},r.state.addInputShow?v.default.createElement("div",null,v.default.createElement(y.WeaInput,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaInput@uz2pqz",inputType:"multilang",isBase64:!0,style:{width:"64%",margin:"5px",display:"inline-block"},size:"large",value:r.state.inputValue,onChange:r.handle}),v.default.createElement(b.Button,{ecId:(r&&r.props&&r.props.ecId||"")+"_Button@3gowou",type:"primary",onClick:function(){r.addSure()}},E("611","添加"))):v.default.createElement("div",{className:"tag_add",onClick:r.addInputShow,title:E("511445","添加关注类型")},v.default.createElement("i",{className:"icon-coms-Add-to-o"}))),v.default.createElement("div",{className:"select_bottom_btn"},v.default.createElement(b.Button,{ecId:(r&&r.props&&r.props.ecId||"")+"_Button@we0c5c",onClick:function(){r.setState({addInputShow:!1,inputValue:"",hoverOut:!0,visible:!1}),r.DocancelAll()}},E("511458","取消关注")),v.default.createElement(b.Button,{ecId:(r&&r.props&&r.props.ecId||"")+"_Button@nauje1",type:"primary",onClick:function(){r.setState({addInputShow:!1,inputValue:"",hoverOut:!0,visible:!1}),r.submit()}},E("826","确定"))))))},r.state={tagData:null,addInputShow:!1,visible:!1,hoverOut:!0,inputValue:""},r}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.data;0==this.state.visible&&1==e.visible&&this.setState({addInputShow:!1}),this.setState({visible:e.visible})}},{key:"componentDidMount",value:function(){var e=this.props,t=e.followTypeSettingStore,r=e.FollowRequestid;t.getWorkflowAttentionTypeSet(r)}},{key:"componentWillUpdate",value:function(e){var t=e.FollowRequestid,r=e.followTypeSettingStore;""==this.props.FollowRequestid&&t&&r.getWorkflowAttentionTypeSet(t)}},{key:"render",value:function(){var e=this.props.followTypeSettingStore,t=(e.tagList,e.showDialog);return v.default.createElement("div",null,v.default.createElement(b.Popover,{ecId:(this&&this.props&&this.props.ecId||"")+"_Popover@u5u4o4",overlayClassName:"wf-Flow-setting-popover",placement:this.props.placement||"leftTop",title:v.default.createElement("div",null,v.default.createElement("span",null,E("511456","选择关注类型")),v.default.createElement("span",{style:{float:"right"},onClick:this.openSettingDialog},v.default.createElement("i",{className:"icon-coms-Flow-setting",style:{cursor:"pointer"},title:E("507530","设置")}))),content:this.getList(),trigger:"click",visible:this.state.visible,onVisibleChange:this.onVisibleChange},v.default.createElement("div",null,this.props.button||"")),t&&v.default.createElement(S.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_FollowTypeSetting@g9w9kj",followTypeSettingStore:this.props.followTypeSettingStore,makeSureCallBack:this.props.makeSureCallBack}))}}]),t}(v.default.Component))||o;t.default=y.WeaTools.tryCatch(v.default,function(e){return v.default.createElement(y.WeaErrorPage,{ecId:"_WeaErrorPage@jtq8v4",msg:e.error?e.error:E(383324," 对不起，该页面异常，请联系管理员 ")+"！"})},{error:""})(I)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r,n){r&&(0,R.default)(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function a(e,t,r,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,s,l,c,u,d,f,p,h,m,v,g,w,y,b,_,S,k,E,I,C=r(13),R=n(C),x=r(18),P=n(x),N=r(69),D=n(N),O=r(26),L=n(O),T=r(1),F=n(T),A=r(7),M=(r(6),r(0)),W=r(494),j=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(W),B=(M.WeaTools.ls,M.WeaLocaleProvider.getLabel,i=function e(){(0,F.default)(this,e),o(this,"colorSetting",s,this),o(this,"colorValue",l,this),o(this,"operateId",c,this),o(this,"showDialog",u,this),o(this,"flowTypeData",d,this),o(this,"tagList",f,this),o(this,"reqid",p,this),o(this,"formTagList",h,this),o(this,"disabledArray",m,this),o(this,"callBackFunc",v,this),o(this,"saveDialogObj",g,this),this.openType="",o(this,"setFunc",w,this),o(this,"setState",y,this),o(this,"getAttentionTypeSet",b,this),o(this,"getWorkflowAttentionTypeSet",_,this),o(this,"getWorkflowFormAttentionTypeSet",S,this),o(this,"saveAttentionTypeSet",k,this),o(this,"batchdelAll",E,this),o(this,"saveAttention",I,this)},s=a(i.prototype,"colorSetting",[A.observable],{enumerable:!0,initializer:function(){return!1}}),l=a(i.prototype,"colorValue",[A.observable],{enumerable:!0,initializer:function(){return"#6aa84f"}}),c=a(i.prototype,"operateId",[A.observable],{enumerable:!0,initializer:function(){return""}}),u=a(i.prototype,"showDialog",[A.observable],{enumerable:!0,initializer:function(){return!1}}),d=a(i.prototype,"flowTypeData",[A.observable],{enumerable:!0,initializer:function(){return""}}),f=a(i.prototype,"tagList",[A.observable],{enumerable:!0,initializer:function(){return A.observable.map?A.observable.map({}):asMap({})}}),p=a(i.prototype,"reqid",[A.observable],{enumerable:!0,initializer:function(){return""}}),h=a(i.prototype,"formTagList",[A.observable],{enumerable:!0,initializer:function(){return null}}),m=a(i.prototype,"disabledArray",[A.observable],{enumerable:!0,initializer:function(){return[]}}),v=a(i.prototype,"callBackFunc",[A.observable],{enumerable:!0,initializer:function(){return function(){}}}),g=a(i.prototype,"saveDialogObj",[A.observable],{enumerable:!0,initializer:function(){return null}}),w=a(i.prototype,"setFunc",[A.action],{enumerable:!0,initializer:function(){var e=this;return function(t,r){e[t]=r}}}),y=a(i.prototype,"setState",[A.action],{enumerable:!0,initializer:function(){var e=this;return function(t,r){var n=(0,L.default)(t),o=!0,a=!1,i=void 0;try{for(var s,l=(0,D.default)(n);!(o=(s=l.next()).done);o=!0){var c=s.value;e[c]=t[c]}}catch(e){a=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw i}}"function"===typeof r&&r()}}}),b=a(i.prototype,"getAttentionTypeSet",[A.action],{enumerable:!0,initializer:function(){var e=this;return function(t){j.getAttentionTypeSet(t).then(function(r){"com"===t?e.tagList.set("datas",r.datas):"object"==("undefined"===typeof t?"undefined":(0,P.default)(t))?(e.saveDialogObj=t,e.flowTypeData=r,e.saveDialogObj.loadData()):"refresh"==t&&(e.flowTypeData=r,e.saveDialogObj.loadData())})}}}),_=a(i.prototype,"getWorkflowAttentionTypeSet",[A.action],{enumerable:!0,initializer:function(){var e=this;return function(t){e.reqid=t,j.getWorkflowAttentionTypeSet(t).then(function(t){e.tagList.set("datas",t.datas),e.tagList.set("title",t.title)})}}}),S=a(i.prototype,"getWorkflowFormAttentionTypeSet",[A.action],{enumerable:!0,initializer:function(){var e=this;return function(t){e.reqid=t,j.getWorkflowAttentionTypeSet(t).then(function(t){e.formTagList=t})}}}),k=a(i.prototype,"saveAttentionTypeSet",[A.action],{enumerable:!0,initializer:function(){var e=this;return function(t,r){var n=e;j.saveAttentionTypeSet(t).then(function(e){"saveData2"==t.src?(n.getWorkflowAttentionTypeSet(n.reqid),n.getAttentionTypeSet(window.flowTypeSelf)):"saveData"==t.src&&(n.getAttentionTypeSet(window.flowTypeSelf),n.getWorkflowAttentionTypeSet(n.reqid),"function"==typeof r&&r())})}}}),E=a(i.prototype,"batchdelAll",[A.action],{enumerable:!0,initializer:function(){return function(e){j.batchdelAll(e).then(function(e){})}}}),I=a(i.prototype,"saveAttention",[A.action],{enumerable:!0,initializer:function(){var e=this;return function(t,r,n){j.saveAttention(t).then(function(o){if("1"===o.success)if("single"===r){var a="attentionDiv_"+t.requestids+"_"+t.ids+"_"+t.rand;jQuery("#"+a).remove(),e.getWorkflowAttentionTypeSet(e.reqid)}else"function"==typeof n&&n()})}}}),i);t.default=B},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.batchdelAll=t.saveAttention=t.saveAttentionTypeSet=t.getWorkflowAttentionTypeSet=t.getAttentionTypeSet=void 0;var n=r(0),o=r(21);(function(e){e&&e.__esModule})(o),t.getAttentionTypeSet=function(e){var t={};return t.src="com"==e?"getData2":"getData",n.WeaTools.callApi("/api/workflow/requestAttention/getAttentionTypeSet","POST",t)},t.getWorkflowAttentionTypeSet=function(e){var t={src:"getData2"};return e&&(t.requestid=e),n.WeaTools.callApi("/api/workflow/requestAttention/getAttentionTypeSet","POST",t)},t.saveAttentionTypeSet=function(e){return n.WeaTools.callApi("/api/workflow/requestAttention/saveAttentionTypeSet","POST",e)},t.saveAttention=function(e){return n.WeaTools.callApi("/api/workflow/requestAttention/saveAttention","POST",e)},t.batchdelAll=function(e){return n.WeaTools.callApi("/api/workflow/requestAttention/saveAttention","POST",e)}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(3),i=n(a),s=r(1),l=n(s),c=r(2),u=n(c),d=r(4),f=n(d),p=r(5),h=n(p),m=r(9),v=n(m),g=(r(7),r(10)),w=r(11),y=r(0),b=r(6);r(496);var _=r(214),S=n(_),k=(w.WeaTableNew.WeaTable,b.Modal.confirm),E=y.WeaLocaleProvider.getLabel,I=(0,g.observer)(o=function(e){function t(e){(0,l.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return r.componentWillUpdate=function(e){var t=e.followTypeSettingStore,n=e.visible,o=e.FollowRequestid,a=t.getWorkflowAttentionTypeSet;0==r.props.visible&&1==n&&a(o)},r.openSettingDialog=function(){var e=r.props.followTypeSettingStore,t=e.setState,n=e.getAttentionTypeSet;t({showDialog:!0,openType:""}),n("refresh")},r.onChange=function(e,t){var n=r.props.followTypeSettingStore.tagList,o=n.get("datas")||[];o.map(function(r){r.id==e&&(r.checked=t.target.checked)}),n.set("datas",o)},r.onVisibleChange=function(e){0==e&&(r.setState({visible:!1}),r.props.onVisibleChange(!1))},r.batchcacelAll=function(){var e=r.props,t=e.followTypeSettingStore,n=e.makeSureCallBack,o=e.FollowRequestid,a=(t.saveAttention,t.tagList),i=t.batchdelAll,s=a.get("datas")||[];s.map(function(e){e.checked=!1}),a.set("datas",s),i({src:"delByRequestids",requestids:o},"",n),r.submit()},r.cancelAll=function(){var e=r.props.followTypeSettingStore.tagList,t=e.get("datas")||[];t.map(function(e){e.checked=!1}),e.set("datas",t),r.submit()},r.DocancelAll=function(){var e=r;k(r.props.isSingle?{title:E("131329","信息确认"),content:E("511455","确定要清除该流程的所有关注类型吗？"),okText:E(826,"确定"),onOk:function(){e.cancelAll()},onCancel:function(){}}:{title:E("131329","信息确认"),content:E("511454","确定要清除选中流程的所有关注类型吗？"),okText:E(826,"确定"),onOk:function(){e.batchcacelAll()},onCancel:function(){}})},r.same=function(){return r.props.followTypeSettingStore.tagList.get("datas").map(function(e,t){return e.showname!=String(r.state.inputValue).trim()}).indexOf(!1)},r.addSure=function(){var e=r.props.addBtn;r.props.followTypeSettingStore.tagList;if(""==String(r.state.inputValue).trim()||-1!=r.same())return void(""==String(r.state.inputValue).trim()?b.message.warning(E("511461","关注类型名称不能为空")):b.message.warning(E("511462","该关注类型已存在")));r.setState({inputValue:"",hoverOut:!0}),e(r.state.inputValue)},r.handle=function(e){r.setState({inputValue:e})},r.getFontColor=function(e){return.299*parseInt(e.substring(1,3),16)+.587*parseInt(e.substring(3,5),16)+.114*parseInt(e.substring(5,7),16)>186?"#000000":"#ffffff"},r.submit=function(){var e=r.props,t=e.followTypeSettingStore,n=e.makeSureCallBack,o=e.FollowRequestid,a=t.saveAttention,i=t.tagList,s=i.get("datas")||[],l=r.props.isSingle,c="";s.map(function(e){"true"!==e.checked&&!0!==e.checked||(c+=e.id+",")}),a({src:l?"add":1==o.split(",").length?"add":"batchadd",requestids:o,ids:c},"",n)},r.getList=function(){var e=followTypeSettingStore,t=e.tagList,n=[],o=t.get("datas")||[];try{o.map(function(e){n.push(v.default.createElement("div",{className:"tag_dialog"},v.default.createElement(b.Checkbox,{ecId:(r&&r.props&&r.props.ecId||"")+"_Checkbox@bqj3rt@"+e.id,className:"tags_checkbox",checked:"false"!=e.checked&&0!=e.checked,onChange:r.onChange.bind(r,e.id)},v.default.createElement("div",{className:"tags_showColor",title:e.showname,style:{background:e.colorval,color:r.getFontColor(e.colorval)}},e.showname))))});return v.default.createElement("div",{className:"tag_dialog_scope"},v.default.createElement("div",null,n),v.default.createElement("div",{className:"add_row"},v.default.createElement("div",{className:"tag_add_div"},r.state.addInputShow?v.default.createElement("div",null,v.default.createElement(y.WeaInput,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaInput@dqvka8",placeholder:E("511578","请输入关注类型名称"),inputType:"multilang",viewAttr:"3",isBase64:!0,style:{width:"80%",marginTop:"10px",display:"inline-block"},size:"large",value:r.state.inputValue,onChange:r.handle}),v.default.createElement(b.Button,{ecId:(r&&r.props&&r.props.ecId||"")+"_Button@8o9e26",type:"primary",onClick:function(){r.addSure()},style:{position:"relative",left:"40px",top:"-30px",float:"right"}},E("611","添加"))):v.default.createElement("div",{className:"tag_add_dialog",onClick:r.addInputShow},"+",v.default.createElement("span",null,E("511445","添加关注类型"))))))}catch(e){}},r.state={tagData:null,addInputShow:!0,visible:!1,hoverOut:!0,inputValue:""},r}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){this.props.data;this.setState({visible:e.visible})}},{key:"componentDidMount",value:function(){(0,this.props.followTypeSettingStore.getWorkflowAttentionTypeSet)()}},{key:"render",value:function(){var e=this,t=this.props,r=t.followTypeSettingStore,n=t.visible,o=r.tagList,a=r.showDialog,i=o.get("title")||E("511456","选择关注类型"),s=[{key:"0",icon:v.default.createElement("i",{className:"icon-coms-Preservation"}),content:E(826,"确定"),onClick:function(){return e.submit()}},{key:"1",icon:v.default.createElement("i",{className:"icon-coms-go-back"}),content:E(511458,"取消关注"),onClick:function(){return e.DocancelAll()}}];return v.default.createElement("div",null,v.default.createElement(y.WeaDialog,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@hrdvqh",className:"select_type_dailog",onCancel:function(){e.setState({visible:!1}),e.props.cancelCallBack()},visible:n,style:{width:640,height:301},icon:"icon-coms-workflow",iconBgcolor:"#0079DE",hasScroll:!0,title:v.default.createElement("div",null,v.default.createElement("span",{dangerouslySetInnerHTML:{__html:i}}),v.default.createElement("span",{style:{position:"absolute",right:"-20px"},onClick:this.openSettingDialog},v.default.createElement("i",{className:"icon-coms-Flow-setting",title:E("507530","设置"),style:{cursor:"pointer"}}))),buttons:[v.default.createElement(b.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@9v8wod@btn1",type:"primary",onClick:function(){e.setState({inputValue:"",hoverOut:!0,visible:!1},function(){e.submit()})}},E("826","确定")),v.default.createElement(b.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@n7xh14@btn2",type:"primary",onClick:this.DocancelAll},E("511458","取消关注")),v.default.createElement(y.WeaMoreButton,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaMoreButton@5hp2ir@btn3",datas:s,collectParams:{favouritetype:2,objid:0,importantlevel:1}})]},v.default.createElement(y.WeaRightMenu,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaRightMenu@4v5fcm",datas:s,collectParams:{favouritetype:2,objid:0,importantlevel:1},style:{overflow:"hidden"}},n&&this.getList())),a&&v.default.createElement(S.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_FollowTypeSetting@qcg1q0",followTypeSettingStore:r,refresh:this.props.refresh,makeSureCallBack:this.props.makeSureCallBack}))}}]),t}(v.default.Component))||o;t.default=y.WeaTools.tryCatch(v.default,function(e){return v.default.createElement(y.WeaErrorPage,{ecId:"_WeaErrorPage@gdreaq",msg:e.error?e.error:E(383324," 对不起，该页面异常，请联系管理员 ")+"！"})},{error:""})(I)},function(e,t){},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(32),i=n(a),s=r(8),l=n(s),c=r(3),u=n(c),d=r(1),f=n(d),p=r(2),h=n(p),m=r(4),v=n(m),g=r(5),w=n(g),y=r(0),b=r(33),_=r(6),S=r(7),k=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(S),E=r(21),I=n(E),C=r(30),R=n(C),x=r(19),P=n(x),N=r(498),D=n(N),O=r(216),L=n(O),T=r(509),F=n(T),A=r(510),M=n(A),W=r(511),j=n(W),B=r(215),z=n(B);r(512);var q=k.toJS,U=y.WeaLocaleProvider.getLabel,V=null,G=(0,b.observer)(o=function(e){function t(e){(0,f.default)(this,t);var r=(0,v.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return r.getMobileAddIcon=function(){var e=r.props,t=e.workflowNewDesignStore,n=(e.isMobile,t.setPopOperatorsPanemParams,t.mobileChoosedElement),o=t.beSerialNodes,a=t.beParallelWithCurNode,i=t.mobileChoosedElementIndex,s=n.nodeEntity,l=void 0===s?{}:s,c=n.id,u=void 0===c?"":c,d=n.nodeElement,f=void 0!==d&&d,p=n.isAddSign,h=void 0!==p&&p,m=l.nodetype,v=void 0===m?"":m;if(!(0,I.default)(q(n))&&"3"!=v){var g=[];return h?g.push(React.createElement("span",{className:"addIcon",onClick:function(){window.parent.historyRoute.push({pathname:"/req/wfFreeFlowSet/detail",detailType:"sign",currentGroup:q(n),pcPublicFreeStore:t})}},React.createElement("img",{src:"/images/menu.svg"}))):f?(g.push(React.createElement("span",{className:"addIcon",onClick:function(){n.trunkNode?o("root",i):o(u,i)}},React.createElement("img",{src:"/images/serial.svg"}))),"0"!=v&&g.push(React.createElement("span",{className:"addIcon",onClick:function(){a(u,i)}},React.createElement("img",{src:"/images/parall.svg"})))):g.push(React.createElement("span",{className:"addIcon",onClick:function(){window.parent.historyRoute.push({pathname:"/req/wfFreeFlowSet/detail",detailType:"branch",currentGroup:q(n),pcPublicFreeStore:t})}},React.createElement("img",{src:"/images/branch-detail.svg"}))),g}},r.saveCallBack=function(e){var t=r.props,n=t.closeDialog,o=(t.closeDialogFunc,t.reLoadTemplateList),a=t.isFlowModel,i=void 0===a?"0":a,s=t.workflowNewDesignStore;s.closeDialogTrunkFunc;if("1"==i)n&&n(),o&&o();else{window.parent.WfForm&&window.parent.WfForm.getGlobalStore().controlVariableMap("FREE_T_KEY",(new Date).getTime());var l=jQuery(".req-workflow-map",window.parent.document).attr("src");if(l&&""!=l){var c=l.split("?"),u=c[1].split("&"),d={};u.map(function(e){var t=e.split("=");d[t[0]]=t[1]}),d._freekey=(new Date).getTime(),u=[];for(var f in d)u.push(f+"="+d[f]);var p=c[0]+"?"+u.join("&");jQuery(".req-workflow-map",window.parent.document).attr("src",p)}var h=top.window.getParentDialog();h.callback(e),h.hide(),window.parent.closeWeaDialog&&window.parent.closeWeaDialog()}},r.state={},r}return(0,w.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.workflowNewDesignStore,r=e.isReadOnlyModel,n=void 0===r?"true":r,o=(e.isFree,e.isMobile),a=void 0===o?"0":o,i=e.closeDialog,s=(e.reLoadTemplateList,e.modelSetCloseCB),l=e.isFlowModel,c=t.setPopOperatorsPanemParams,u=t.setCurrentElement_mobile;t.wfFreeDatas,t.mobileChoosedElementIndex,t.freeWfTrunkNodes;"true"!=n&&"1"!=a||document.body.addEventListener("click",function(e){var t=["geEditor","wf-design-block-groups","wfFrontOperator-header"];e.target&&("svg"==e.target.nodeName||t.indexOf(e.target.className)>-1)&&(c({visible:!1}),"svg"==e.target.nodeName&&window.mxUtils&&window.mxUtils.hideWfOperatorInfo(),"1"==a&&u())});var d="function"==typeof top.window.getParentDialog?top.window.getParentDialog():null,f=this,p=function(){_.message.destroy();var e=f.props.workflowNewDesignStore,t=e.beforeSavedDatas,r=e.wfFreeDatas,n=e.closeDialogIsConfirmed;(0,R.default)(q(t),q(r))||n?"1"==l&&i&&i():(d&&d.show(),_.Modal.confirm({title:U("131329","信息确认"),content:U(506884,"设置未保存，确定要关闭吗？"),onOk:function(){"1"==l?i&&i():(e.closeDialogIsConfirmed=!0,jQuery(".ant-modal-mask",window.parent.document).hide(),jQuery(".ant-modal-wrap",window.parent.document).hide(),window.parent.closeWeaDialog&&window.parent.closeWeaDialog())},okText:U(83446,"确定"),okCancel:function(){}}))};"1"==l&&s(p),d&&(t.closeDialogIsConfirmed=!1,window.parent.WfForm&&window.parent.WfForm.getGlobalStore().controlVariableMap("FREE_FLOW_SET_CLOSE_FUNC",p)),V=this}},{key:"render",value:function(){var e=this.props,t=e.location,r=void 0===t?{}:t,n=e.isOutterFrame,o=void 0!==n&&n,a=e.isReadOnlyModel,i=void 0===a?"true":a,s=e.workflowNewDesignStore,c=e.isMobile,u=void 0===c?"0":c,d=s.popOperatorsPanelParams,f=r.query,p=void 0===f?{}:f;p.isSingle;!this.props.isReadOnlyModel&&p.isReadOnlyModel&&(i=p.isReadOnlyModel),i="true"==i;var h=i?{height:"100%"}:{};return React.createElement("div",{style:{height:"100%"}},React.createElement("div",{className:"wf-design-free-outter-container",style:h},!o&&React.createElement(L.default,(0,l.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_WorkflowFreeDrawSvg@8yl7u3"},this.props,p,{isReadOnlyModel:i})),!i&&"0"==u&&React.createElement(D.default,(0,l.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_WfFreeRightDetail@o3gva6"},this.props,p)),React.createElement(F.default,(0,l.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_OperatorsInfoPanel@u5b038"},d))),!i&&"0"==u&&React.createElement("div",{className:"free-flowset-bottom-tips"},React.createElement("div",{className:"tips"},React.createElement("span",null,U(83989,"注：")),React.createElement("span",{className:"icon-coms-Enlarge"}),React.createElement("span",null,U(15598,"添加节点")),React.createElement("span",{className:"icon-coms-delete"}),React.createElement("span",null,U(15599,"删除节点")),React.createElement("span",{className:"icon-coms-switch"}),React.createElement("span",null,U(506885,"更改操作者"))),React.createElement(y.WeaDialogFooter,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialogFooter@3taem8",buttons:this.getButtons(),moreBtn:{datas:this.getRightMenu()}})),React.createElement(M.default,(0,l.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_ImportFromModel@zn8m1m"},this.props,p)),React.createElement(j.default,(0,l.default)({ecId:(this&&this.props&&this.props.ecId||"")+"_SaveAsTemplate@ej4pkx"},this.props,p)),!i&&"1"==u&&React.createElement("div",{className:"wf-free-deign-mobile"},this.getMobileAddIcon()),React.createElement("div",null,React.createElement(z.default,null)))}},{key:"getButtons",value:function(){var e=this,t=this.props,r=(t.nodeParams,t.nodeStyle,t.workflowNewDesignStore),n=(t.closeDialog,t.location,t.closeDialogFunc,t.isFlowModel),o=void 0===n?"0":n,a=t.belongTest,i=void 0===a?"0":a,s=r.saveFreeNodeData,l=(r.beforeSavedDatas,r.wfFreeDatas,r.setModelImportDialogShow),c=(r.closeDialogTrunkFunc,r.saveAsTemplate),u=r.allowTemplateImport,d=r.globalNextNodeEditPurview,f=r.loading,p=void 0!==f&&f,h=[];return 0==d?h:(h.push(React.createElement(_.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@bh3f0f@btn1",type:"primary",disabled:p,onClick:function(){s(e.saveCallBack)}},"0"==o?U(31103,"保存设置"):U(86,"保存"))),"1"!=o&&"1"!=i&&h.push(React.createElement(_.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@glg6m5@btn2",type:"primary",disabled:p,onClick:function(){c(!0)}},U(18418,"存为模板"))),"1"==o&&h.push(React.createElement(_.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@a4umw9@btn3",type:"primary",disabled:p,onClick:function(){c(!0)}},U(131623,"另存为"))),!u&&"1"!=o||"1"==i||h.push(React.createElement(_.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@9q7mqu@btn4",type:"primary",disabled:p,onClick:function(){l(!0)}},U(506886,"从模板中导入"))),h)}},{key:"getRightMenu",value:function(){var e=this.props,t=(e.nodeParams,e.nodeStyle,e.workflowNewDesignStore),r=(e.closeDialog,e.location,e.closeDialogFunc,e.isFlowModel),n=void 0===r?"0":r,o=e.belongTest,a=void 0===o?"0":o,i=t.saveFreeNodeData,s=(t.beforeSavedDatas,t.wfFreeDatas,t.setModelImportDialogShow),l=(t.closeDialogTrunkFunc,t.saveAsTemplate),c=t.allowTemplateImport,u=t.globalNextNodeEditPurview,d=t.loading,f=[];if(0==u)return f;var p=this;return f.push({key:"save",icon:React.createElement("i",{className:"icon-coms-Preservation"}),content:"0"==n?U(31103,"保存设置"):U(86,"保存"),onClick:function(e){i(p.saveCallBack)},disabled:d}),"1"!=n&&"1"!=a&&f.push({key:"saveAsTemplate",icon:React.createElement("i",{className:"icon-coms-Reopen"}),content:U(18418,"存为模板"),onClick:function(e){l(!0)},disabled:d}),"1"==n&&f.push({key:"saveAs",icon:React.createElement("i",{className:"icon-coms-Reopen"}),content:U(131623,"另存为"),onClick:function(e){l(!0)},disabled:d}),!c&&"1"!=n||"1"==a||f.push({key:"import",icon:React.createElement("i",{className:"icon-coms-Batch-delete"}),content:U(506886,"从模板中导入"),onClick:function(e){s(!0)},disabled:d}),f}}]),t}(React.Component))||o;t.default=y.WeaTools.tryCatch(React,function(e){return React.createElement(y.WeaErrorPage,{ecId:"_WeaErrorPage@ihva59",msg:e.error?e.error:U(383324," 对不起，该页面异常，请联系管理员 ")+"！"})},{error:""})(G),window.wfFreeFlowToMobileUtils=function(){return{reloadFreeNodeDatas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,t.setReturnGroupValue_mobile)(e,t.mobileChoosedElementIndex)},saveFreeDatas_mobile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.saveFreeNodeData},getAllFreeDatas_mobile:function(){var e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],V.props.workflowNewDesignStore),t=void 0===e?{}:e,r=t.wfFreeDatas,n=t.circulationOrginNode,o=t.currentPostParams,a=t.currentAddDataId,s=t.deleteIds,c=t.currentValidStartNodeId,u=(0,P.default)(k.toJS(r)),d=""==n.endOrginNodeId?"1"==o.isFree?n.nextOrginNode:n.startOrginNodeId:n.endOrginNodeId,f=u[c]?(0,i.default)(u[c][0]):"{}";return(0,l.default)({},o,{maxGroupNum:a,chartDatas:f,deleteIds:s.join(","),freeStartNodeid:n.startOrginNodeId,freeEndNodeid:d})}}}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(26),i=n(a),s=r(18),l=n(s),c=r(8),u=n(c),d=r(3),f=n(d),p=r(1),h=n(p),m=r(2),v=n(m),g=r(4),w=n(g),y=r(5),b=n(y),_=r(0),S=r(11),k=r(33),E=r(6),I=r(19),C=n(I),R=r(21),x=n(R),P=r(93),N=r(215),D=(n(N),r(7)),O=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(D),L=r(500),T=n(L),F=O.toJS,A=_.WeaLocaleProvider.getLabel,M=(0,k.observer)(o=function(e){function t(e){(0,h.default)(this,t);var r=(0,w.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e));return r.SignSetComs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"input";return React.createElement(_.WeaFormItem,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaFormItem@cjaexq",label:e,labelCol:{span:8},wrapperCol:{span:16}},"input"===n?React.createElement(_.WeaInput,(0,u.default)({ecId:(r&&r.props&&r.props.ecId||"")+"_WeaInput@3ihe1i"},t,{viewAttr:1})):React.createElement(_.WeaSelect,(0,u.default)({ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSelect@h2j490"},t)))},r.getSignSetRender=function(){var e=r.props.workflowNewDesignStore,t=e.currentSignSetNode,n=void 0===t?{}:t,o=e.signSetChangeBackNode,a=e.signSetIsReadOnly,i=n.nodeName,s=void 0===i?"":i,l=n.nodeType,c=void 0===l?"0":l,u=n.flowType,d=void 0===u?"1":u,f=[],p=[{key:"1",selected:!1,showname:A(506889,"回到本节点")},{key:"2",selected:!0,showname:A(506890,"自动转入下一节点")}],h="0"==c?A(125,"创建"):"3"==c?A(251,"归档"):"1"==c?A(359,"审批"):"2"==c?A(553,"处理"):A(502267,"其他");return[{title:A(385134,"节点信息"),items:[{com:r.SignSetComs(A(15070,"节点名称"),{value:s}),col:1},{com:r.SignSetComs(A(15536,"节点类型"),{value:h}),col:1}]},{title:A(506891,"加签属性"),items:[{com:r.SignSetComs(A(506892,"流转结束后"),{options:p,value:d,viewAttr:a?1:2,onChange:function(e){o(e)}},"select"),col:1}]}].map(function(e,t){f.push(React.createElement(_.WeaSearchGroup,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSearchGroup@9vqflw@"+t,title:e.title,items:e.items,showGroup:!0}))}),f},r.getCusDetailRender=function(){var e=r.props,t=e.workflowNewDesignStore,n=e.isFree,o=e.isReadOnlyModel,a=t.freeDetailSetConditions,i=t.groupApprovalSettings,s=t.detailForm_1,c=t.currentChoosedItemId,u=t.wfFreeDatas,d=t.openReturnBackSetting,f=t.wfinitSettingFlage,p=t.startnodeEntity,h=t.freeWfTrunkNodes,m=t.rightDetailShowSearchGroup,v=t.currentPostParams,g=t.selectOperatorsMax,w=(t.getFreeObjById,t.nodeOperatorsReplaceDatas,t.currentChoosedItemDataIndex),y=(t.renderComponent,v.nodeid),b=void 0===y?0:y,k=w.split("_")[0],I="",C={};""==k||(0,x.default)(F(u))||(I=w.split("_")[1],C=u[k][I]);var R=s.isFormInit,N=s.getFormParams(),D=N.overflowtimetype,O=void 0===D?"":D,L=N.advanceRemind,T=void 0===L?"":L,M=N.approvalSettings,W=void 0===M?"":M,j=[],B=[],z=r.getFreeObjById(c,F(C));if(!z){if("1"!=n)return React.createElement("div",null);var q=h.startGroup,U=void 0===q?{}:q,V=h.endGroup,G=void 0===V?{}:V;z=U.id==c?U:G}var H=z,K=H.nodeEntity,Q=void 0===K?{}:K,$=H.parentid,J=void 0===$?"":$,Y=H.addfromGroupId,X=void 0===Y?0:Y,Z=i[""+(0!=X&&Q.id?X:b)]||"",ee=r.getFreeObjById(J,F(C))||{},te=ee.mergeType,re=void 0===te?"":te,ne=(Q.nodeStatus,Q.currentEditRight,Q.nextNodeEditPurview,Q.nodetype),oe=void 0===ne?"1":ne,ae=Q.mustPass,ie=void 0!==ae&&ae,se=(0,P.checkEditRight)(z,{isReadOnlyModel:o}),le="";return le="0"===oe?"创建":"3"===oe?"归档":Q.nodename,R&&F(a).map(function(e,n){var o=[];(1!=n||"0"!=oe&&"3"!=oe)&&(e.items.map(function(e,t){var n="object"===(0,l.default)(e.domkey)?e.domkey[0]:e.domkey,a=1;if(e.viewAttr=se?1:e.viewAttr,e.conditionType.toUpperCase()==_.WeaTools.types.CASCADER&&(a=1),"nodename"==e.domkey[0])o.push({com:React.createElement(_.WeaFormItem,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaFormItem@4xvcn4@"+n,label:""+e.label,labelCol:{span:""+e.labelcol},ratio1to2:!0,error:s.getError(e),tipPosition:"bottom",wrapperCol:{span:""+e.fieldcol}},"3"==re?React.createElement(E.Row,{ecId:(r&&r.props&&r.props.ecId||"")+"_Row@5kix2j@"+n,type:"flex",align:"middle"},React.createElement(E.Col,{ecId:(r&&r.props&&r.props.ecId||"")+"_Col@zim7gf@"+n,span:13},React.createElement(S.WeaSwitch,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSwitch@ql57v6@"+n,fieldConfig:e,form:s,onChange:r.onChange})),React.createElement(E.Col,{ecId:(r&&r.props&&r.props.ecId||"")+"_Col@xeests@"+n,span:9,offset:2},React.createElement(_.WeaSelect,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSelect@duelxy@"+n,viewAttr:se?1:2,options:[{key:"1",showname:A(21398,"必须通过")}],detailtype:2,value:ie?"1":"",onChange:function(e){r.onChange({mustPass:{value:e}})}}))):React.createElement(S.WeaSwitch,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSwitch@90g575@"+n,fieldConfig:e,form:s,onChange:r.onChange})),col:a,hide:s.isHide(e,function(e,t){return!1})});else if("operators"==e.domkey[0])e.browserConditionParam.viewAttr=se?1:e.browserConditionParam.viewAttr,e.browserConditionParam.isShowGroup=!0,e.browserConditionParam.maxLength=g,o.push({com:React.createElement(_.WeaFormItem,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaFormItem@lk1liq@"+n,label:""+e.label,labelCol:{span:""+e.labelcol},ratio1to2:!0,error:s.getError(e),tipPosition:"bottom",wrapperCol:{span:""+e.fieldcol}},React.createElement(S.WeaSwitch,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSwitch@x9dgch@"+n,fieldConfig:e,form:s,onChange:r.onChange})),col:a,hide:s.isHide(e,function(e,t){return!1})});else if("nodetype"==e.domkey[0])"0"==oe?e.options.push({disabled:!1,key:"0",selected:!1,showname:A(125,"创建"),visible:!0}):"3"==oe&&e.options.push({disabled:!1,key:"3",selected:!1,showname:A(251,"归档"),visible:!0}),o.push({com:React.createElement(_.WeaFormItem,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaFormItem@ztns63@"+n,label:""+e.label,labelCol:{span:""+e.labelcol},ratio1to2:!0,error:s.getError(e),tipPosition:"bottom",wrapperCol:{span:""+e.fieldcol}},"1"==oe?React.createElement(E.Row,{ecId:(r&&r.props&&r.props.ecId||"")+"_Row@rgoq8d@"+n,type:"flex",align:"middle"},React.createElement(E.Col,{ecId:(r&&r.props&&r.props.ecId||"")+"_Col@vllsup@"+n,span:13},React.createElement(S.WeaSwitch,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSwitch@2nyjty@"+n,fieldConfig:e,form:s,onChange:r.onChange})),React.createElement(E.Col,{ecId:(r&&r.props&&r.props.ecId||"")+"_Col@7mv5jt@"+n,span:9,offset:2},React.createElement("a",{onClick:function(){return d(!0,se,F(C))}},A(84508,"退回设置")))):React.createElement(S.WeaSwitch,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSwitch@e7jull@"+n,fieldConfig:e,form:s,onChange:r.onChange})),col:a,hide:s.isHide(e,function(e,t){return!1})});else if("overflowtimetype"==e.domkey[0])o.push({com:React.createElement("div",null,React.createElement(_.WeaFormItem,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaFormItem@z85ukf@"+n,label:""+e.label,labelCol:{span:""+e.labelcol},ratio1to2:!0,error:s.getError(e),tipPosition:"bottom",wrapperCol:{span:""+e.fieldcol}},React.createElement(S.WeaSwitch,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSwitch@kibo8e@"+n,fieldConfig:e,form:s,onChange:r.onChange})),["0","1","2"].indexOf(O)<0&&r.getOvertimeRender("after",se)),col:a,hide:s.isHide(e,function(e,t){return!1})});else if("overflowtimehour"==e.domkey[0]||"overflowtimeminute"==e.domkey[0])e.viewAttr=se?1:3,e.min=0,"overflowtimeminute"==e.domkey[0]&&(e.max=59),"1"==O&&(B.push(React.createElement("div",{className:"freeNode-right-"+e.domkey[0]+" "+(se?"freeNode-right-readOnly":""),style:se?{width:"30%"}:{}},React.createElement(_.WeaFormItem,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaFormItem@i2w27w@"+n,hideLabel:!0,error:s.getError(e),tipPosition:"bottom",wrapperCol:{span:16,offset:8}},React.createElement(S.WeaSwitch,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSwitch@vvxm6g@"+n,fieldConfig:e,form:s,onChange:r.onChange}),React.createElement("span",{className:"hour-min-label"},""+e.label)))),"overflowtimeminute"==e.domkey[0]&&o.push({com:React.createElement("div",{className:"right-detail-hour-minute"},B,r.getOvertimeRender("after",se)),col:a,hide:s.isHide(e,function(e,t){return!1})}));else if("overflowtimedate"==e.domkey[0]||"overflowtimetime"==e.domkey[0])e.viewAttr=se?1:3,"2"==O&&"overflowtimedate"==e.domkey[0]&&(e.showTime=!0,e.format="yyyy-MM-dd HH:mm",o.push({com:React.createElement("div",null,React.createElement(_.WeaFormItem,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaFormItem@0v8ylm@"+n,hideLabel:!0,error:s.getError(e),tipPosition:"bottom",wrapperCol:{span:16,offset:8}},React.createElement(S.WeaSwitch,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSwitch@gq90nv@"+n,fieldConfig:e,form:s,onChange:r.onChange})),r.getOvertimeRender("after",se)),col:a,hide:s.isHide(e,function(e,t){return!1})}));else if("advanceRemind"==e.domkey[0])o.push({com:React.createElement("div",null,React.createElement(_.WeaFormItem,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaFormItem@e3rj1z@"+n,label:""+e.label,labelCol:{span:""+e.labelcol},ratio1to2:!0,error:s.getError(e),tipPosition:"bottom",wrapperCol:{span:""+e.fieldcol}},React.createElement(S.WeaSwitch,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSwitch@pd9pph@"+n,fieldConfig:e,form:s,onChange:r.onChange})),"0"!=T&&r.getOvertimeRender("before",se)),col:a,hide:s.isHide(e,function(e,t){return!1})});else if("loopRemind"==e.domkey[0]);else if("remindInterval"==e.domkey[0]);else{var i=0;if(window.top.WfForm&&(i=window.top.WfForm.getGlobalStore().commonParam.isFreeCustomeForm),0===i&&"allowModify"==e.domkey[0]&&("4"==oe||"0"==oe||"3"==oe))return;"nextNodeEditPurview"==e.domkey[0]&&se&&(e.detailtype="1");var c=!1;if("approvalSettings"==e.domkey[0]){var u=e.options,h=[],m="4"==oe,v=W.indexOf("1")>-1&&!m,w=W.indexOf("2")>-1;u=u.map(function(e){"1"==e.key&&(e.disabled=m),"3"!=e.key&&"4"!=e.key||(e.disabled=!v),"2"==e.key&&(e.disabled=v),"5"==e.key&&(e.disabled=!w),"6"!=e.key&&"7"!=e.key||(e.disabled=!v&&!w);var t=!0;return("1"==e.key||"3"==e.key||"4"==e.key)&&Z.indexOf("1")<0&&W.indexOf("1")<0&&(e.disabled=!0,t=!1),("2"==e.key||"5"==e.key)&&Z.indexOf("2")<0&&W.indexOf("2")<0&&(e.disabled=!0,t=!1),"6"==e.key&&Z.indexOf("6")<0&&W.indexOf("6")<0&&(e.disabled=!0,t=!1),"7"==e.key&&Z.indexOf("7")<0&&W.indexOf("7")<0&&(e.disabled=!0,t=!1),1==t&&h.push(e),e}),e.options=h,h.length<=0&&(c=!0)}if(1===i&&"allowModify"==e.domkey[0]&&("0"==oe||"1"==oe||"2"==oe)){var y=window.top.WfForm.getBaseInfo(),b={fromwhere:"batchSet",requestid:y.requestid||"",wfid:y.workflowid||"",wfinitSetting:2,nodeid:Q.id||"",wfinitSettingData:Q.wfinitSettingData||{},nodeEntitynodename:le,isFreeCustomeNodetype:oe};return"0"==oe&&(b.wfinitSettingData=F(p),b.nodeid=z.freeStartNodeid||window.top.WfForm.getGlobalStore().commonParam.freeStartNodeid),"0"==oe&&"3"==oe||1!=se||(b.wfinitSettingIsReadOnly=!1),window.changefunction=r.onChange,void o.push({com:React.createElement(_.WeaFormItem,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaFormItem@z85ukf@",label:A("532078","节点字段属性"),labelCol:{span:6},ratio1to2:!0,tipPosition:"bottom",wrapperCol:{span:18}},React.createElement("div",{style:{marginTop:"8px"}},React.createElement("span",{className:"icon-coms-Flow-setting cursor-pointer",onClick:function(){r.openExcelDesign(b)},style:{fontSize:"16px"}}),f&&React.createElement("i",null))),col:1})}o.push({com:React.createElement(_.WeaFormItem,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaFormItem@p5y1tp@"+n,className:"freenode-detail-"+e.domkey[0],label:""+e.label,labelCol:{span:""+e.labelcol},ratio1to2:!0,error:s.getError(e),tipPosition:"bottom",wrapperCol:{span:""+e.fieldcol}},React.createElement(S.WeaSwitch,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSwitch@iya30y@"+n,fieldConfig:e,form:s,onChange:r.onChange})),col:a,hide:s.isHide(e,function(e,t){return c})})}}),j.push(React.createElement(_.WeaSearchGroup,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSearchGroup@5fj6di@"+n,needTigger:!0,title:e.title,items:o,showGroup:m[n],onVisibleChange:function(e){t.rightDetailShowSearchGroup[n]=e},className:se?"cus-readonly-searchgroup":""})))}),j},r.getOvertimeRender=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"after",t=arguments[1],n=r.props.workflowNewDesignStore,o=n.freeDetailSetConditions,a=n.currentChoosedItemId,i=n.wfFreeDatas,s=n.currentChoosedItemDataIndex,l=s.split("_")[0],c="",u={};""!=l&&(c=s.split("_")[1],u=i[l][c]);var d=r.getFreeObjById(a,u)||{},f=d.nodeEntity,p=void 0===f?{}:f,h=p.overtimeToNextOperator,m=void 0===h?"0":h,v=p.afterLoopRemind,g=void 0===v?"0":v,w=p.afterRemindInterval,y=void 0===w?"5":w,b=p.beforeLoopRemind,S=void 0===b?"0":b,k=p.beforeRemindInterval,E=void 0===k?"5":k,I=(0,C.default)(F(o))||[],R=I[1]?I[1].items.filter(function(e){return"remindInterval"==e.domkey[0]})[0].options:[],x=[],P=React.createElement(_.WeaCheckbox,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaCheckbox@yitw0t",value:m,viewAttr:t?1:2,onChange:function(e){p.overtimeToNextOperator=e}}),N=React.createElement(_.WeaCheckbox,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaCheckbox@9wptj4",value:"after"==e?g:S,viewAttr:t?1:2,onChange:function(t){p["after"==e?"afterLoopRemind":"beforeLoopRemind"]=t}}),D=React.createElement(_.WeaSelect,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSelect@iq0qbl",options:R,value:"after"==e?y+"":E+"",viewAttr:("after"==e?"0"==g:"0"==S)||t?1:2,onChange:function(t,r){p["after"==e?"afterRemindInterval":"beforeRemindInterval"]=t}});return x.push(React.createElement("div",{className:"overtime-remind"},N,React.createElement("span",{className:"tip-span"},""+A(2068,"节点超时")+("after"==e?A(18110,"后"):A(18109,"前"))+"，"+A(21977,"每")),D,React.createElement("span",{className:"tip-span"},A(18081,"提醒一次")))),"after"==e&&x.unshift(React.createElement("div",{className:"overtime-flowto-next"},P,React.createElement("span",{className:"tip-span"},A(506893,"超时自动流转至下一操作者")))),x},r.openExcelDesign=function(e){window.doBSExcelDesignAction&&window.doBSExcelDesignAction.openInitDialog(e)},r.onChange=function(e,t){var n=r.props.workflowNewDesignStore,o=n.wfFreeDatas,a=n.currentChoosedItemId,s=(n.getFreeObjById,n.detailForm_1),l=n.operatorTransType,c=n.returnBackForm,u=n.updateDetailFormParams,d=n.changeWfinitSettingFlageW,f=n.wfinitSettingFlage,p=n.setstartnodeEntity,h=n.nodeOperatorsReplaceDatas,m=void 0===h?{}:h,v=(n.freeDetailSetConditions,n.currentChoosedItemDataIndex),g=n.renderComponent;if("wfinitSettingStart"===t)return p(e),void r.forceUpdate();var w=v.split("_")[0],y="",b={};""!=w&&(y=v.split("_")[1],b=o[w][y]);var _=r.getFreeObjById(a,b)||{},S=_.nodeEntity,k=void 0===S?{}:S,E=(k.overflowtimetype,k.overflowtimehour),I=void 0===E?"":E,C=k.overflowtimeminute,R=void 0===C?"":C;k.overflowtimedate;if("wfinitSetting"===t)return k.wfinitSettingData=e,void d(!f);for(var x in e){x;var N=e[x].value;if("operators"===x)!function(){m[a]=e[x].valueObj;var t=e[x].valueObj,r=[];t.map(function(e,t){var n=l[e.type];r.push(n+"_"+e.id)}),k[x]=r.join(","),k.operatorids=N}();else if(["advanceRemind","overflowtimetype","overflowtimehour","overflowtimeminute"].indexOf(x)>=0){var D=!0;"overflowtimehour"==x&&N==I&&0==N&&(D=!1),"overflowtimeminute"==x&&N==R&&0==N&&(D=!1),D&&function(){var e=(0,P.judgeRemindTime)(k,N,x,s);(0,i.default)(e).map(function(t){k[t]=e[t]})}()}else if("nodetype"==x){1==N&&(k.isselectrejectnode="1",k.isSubmitDirectNode="0",c.updateFields({isselectrejectnode:"1",isSubmitDirectNode:"0"},!1)),k.nodetype=N;var O=k.approvalSettings||"";O=r.reviseApprovalSettingsVal(O,N),k.approvalSettings=O,u({approvalSettings:O})}else if("approvalSettings"==x){var L=N,T=k.nodetype||"1";L=r.reviseApprovalSettingsVal(L,T),k.approvalSettings=L,u({approvalSettings:L})}else k[x]=N;if("nodename"===x){var F=N;r.checkNodeNameLen(99,F).isPassed||s.showError("nodename",'"'+A(502717,"节点名称")+'"'+A(502997,"长度不能超过")+" 100 "+A(385391,"个字符"))}}g()},r.reviseApprovalSettingsVal=function(e,t){var r=e,n=["1","2","3","4","5","6","7"],o={};return n.map(function(e){o[e]=r.indexOf(e)>-1}),"4"==t&&(o[1]=!1),1==o[1]?o[2]=!0:(o[3]=!1,o[4]=!1),0==o[2]&&(o[5]=!1),0==o[1]&&0==o[2]&&(o[6]=!1,o[7]=!1),r="",n.map(function(e){1==o[e]&&(""==r?r=e:r+=","+e)}),r},r.checkNodeNameLen=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=0,n=t,o=!0,a=0,i=t.length;a<i;a++)if(t.charCodeAt(a)<=255){if((r+=1)>e){o=!1,n=t.substring(0,a);break}}else if((r+=3)>e){o=!1,n=t.substring(0,a);break}return{endStr:n,isPassed:o}},r.getBranchDetailCont=function(){var e=r.props,t=e.workflowNewDesignStore,n=e.isReadOnlyModel,o=(t.detailForm_1,t.rightDetailType,t.currentChoosedBranchId),a=void 0===o?"":o,i=t.wfFreeDatas,s=void 0===i?{}:i,l=(t.globalNextNodeEditPurview,t.currentChoosedItemDataIndex),c=t.currentPostParams,u=(c.nodeid,l.split("_")[0]),d=l.split("_")[1],f=s[u][d],p=r.getFreeObjById(a,f)||{},h=p.mergeType,m=void 0===h?"1":h,v=p.mergeValue,g=void 0===v?"":v,w=p.nodeChartEntity,y=void 0===w?{}:w,b=y.edit,S=void 0!==b&&b,k="true"==n||!S;m+="";var E=[],I=[{key:"1",selected:!0,showname:A(506894,"按比例通过")},{key:"2",selected:!1,showname:A(500223,"按分支数通过 ")},{key:"3",selected:!1,showname:A(390423,"指定通过分支")}];return""===g&&(g="1"==m?"100":"1"),E.push(React.createElement(_.WeaFormItem,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaFormItem@we0eo6@item1",label:A(506895,"通过分支选项"),labelCol:{span:6},wrapperCol:{span:18}},React.createElement("div",{className:"branch-set-wrapper",style:k?{paddingTop:"4px"}:{}},React.createElement(_.WeaSelect,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSelect@dg1xco@ec1",options:I,value:m,viewAttr:k?1:2,onChange:function(e,t){var n={mergeType:e,mergeValue:"1"==e?"100":"1"};r.setBranchMergeParams(n,f)}}),"1"==m&&React.createElement("div",{className:"branch-set-by-ratio"},React.createElement(_.WeaInput,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaInput@m2tijb@ec2",value:g+"",viewAttr:k?1:2,onBlur:function(e){(e<0||isNaN(e))&&(e=0),e>100&&(e=100),e=Math.round(e),r.setBranchMergeParams({mergeValue:e},f)}}),React.createElement("span",{className:"ratio-tag"},"%"),React.createElement(_.WeaHelpfulTip,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaHelpfulTip@f55gi4@ec3",width:196,title:A(506896,"比例=通过分支数/总分支数，实际通过比例大于等于所设比例时，转入下一节点。")})),"2"==m&&React.createElement("div",{className:"branch-set-by-ratio"},React.createElement(_.WeaInput,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaInput@cy4ink@ec4",value:g,viewAttr:k?1:2,onBlur:function(e){(e<1||isNaN(e))&&(e=1),e=Math.round(e),r.setBranchMergeParams({mergeValue:e},f)},helpfulTip:A(506897,"必须是大于或等于1的整数"),helpfulTipProps:{width:120}}))))),"3"==m&&E.push(React.createElement("div",{className:"branch-set-pointBranch"},React.createElement("div",{className:"point-branch-tip"},A(506898,"请至少选择1个必须通过的节点！")),React.createElement("div",{className:"point-branch-panel"},r.renderPointBranchItem(k)))),React.createElement("div",{className:"freeNode-branch-set"},E)},r.renderPointBranchItem=function(e){var t=r.props.workflowNewDesignStore,n=(t.detailForm_1,t.rightDetailType,t.currentChoosedBranchId),o=void 0===n?"":n,a=t.wfFreeDatas,i=void 0===a?{}:a,s=t.currentChoosedItemDataIndex,l=t.renderComponent,c=s.split("_")[0],u=s.split("_")[1],d=i[c][u],f=r.getFreeObjById(o,d)||{},p=f.parallelNodeGroupDatas,h=void 0===p?[]:p,m=[];return h.map(function(t,n,o){var a=t.nodeElement,s=void 0!==a&&a,f=t.nodeEntity,p=void 0===f?{}:f,h=t.id,v=void 0===h?"":h,g=p.mustPass,w=void 0!==g&&g;s&&m.push(React.createElement(_.WeaFormItem,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaFormItem@duvmih@"+v,label:React.createElement("div",{className:"point-branch-item"},React.createElement("span",{className:"branch-item-icon"},React.createElement("span",null)),React.createElement("span",{className:"branch-item-name",title:p.nodename},p.nodename)),labelCol:{span:12},wrapperCol:{span:11,offset:1},colon:!1},React.createElement(_.WeaSelect,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSelect@dgxbuz@"+v,options:[{key:"1",selected:!1,showname:A(21398,"必须通过")}],value:w?"1":"",detailtype:2,onChange:function(e){var t=r.setElementNodeData(v,d,{mustPass:"1"==e});i[c][u]=t,l()},viewAttr:e?1:2})))}),m},r.setBranchMergeParams=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.props.workflowNewDesignStore,o=n.currentChoosedBranchId,a=void 0===o?"":o,i=n.currentChoosedItemDataIndex,s=F(t),l=r.setBranchData(a,s,e),c=i.split("_")[0],d=i.split("_")[1];n.wfFreeDatas[c][d]=(0,u.default)({},l),n.renderComponent()},r.setElementNodeData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.id,a=void 0===o?"":o,i=(t.nodeElement,t.hasNext),s=void 0!==i&&i,l=t.next,c=void 0===l?{}:l,d=t.parallelNodeGroupDatas,f=void 0===d?[]:d,p=t.nodeEntity,h=void 0===p?{}:p,m=null;if(e==a)m=(0,u.default)({},h,n),t.nodeEntity=m;else{if(s){var v=r.setElementNodeData(e,c,n);m=v||m,t.next=m}f.map(function(o,a){var i=r.setElementNodeData(e,o,n);m=i||m,t.parallelNodeGroupDatas[a]=m})}return t},r.setBranchData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t,a=o.id,i=void 0===a?"":a,s=(o.nodeElement,o.hasNext),l=void 0!==s&&s,c=o.next,d=void 0===c?{}:c,f=o.parallelNodeGroupDatas,p=void 0===f?[]:f,h=null;if(e==i)h=(0,u.default)({},t,n),t=h;else{if(l){var m=r.setBranchData(e,d,n);h=m||h,t.next=h}p.map(function(o,a){var i=r.setBranchData(e,o,n);h=i||h,t.parallelNodeGroupDatas[a]=h})}return t},r.getFreeObjById=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],n=t.parallelNodeGroupDatas,o=void 0===n?[]:n,a=null;if(t.id&&t.id==e&&(a=t),t.hasNext){var i=r.getFreeObjById(e,t.next);a=i||a}return o.length>0&&o.map(function(t){var n=r.getFreeObjById(e,t);a=n||a}),a},r.state={},r}return(0,b.default)(t,e),(0,v.default)(t,[{key:"render",value:function(){var e=this.props,t=e.workflowNewDesignStore,r=(e.isFree,e.isAllowNodeFreeFlow,e.isFlowModel),n=(t.detailForm_1,t.rightDetailType),o=void 0===n?"":n,a=t.wfFreeDatas;t.componentNeedRender;return React.createElement("div",{className:"wf-design-free-right-detail"},React.createElement(_.WeaPopoverHrm,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaPopoverHrm@azha90"}),React.createElement("div",{className:"detail-header"},"node"==o?A(15586,"节点"):"branch"==o?A(506887,"分支"):A(31920,"加签"),A(713,"属性")),React.createElement("div",{className:"detail-content"},a&&"isModel_init"!=o?"node"==o?this.getCusDetailRender():"branch"==o?this.getBranchDetailCont():this.getSignSetRender():"1"==r?React.createElement("div",{className:"blank-page"},React.createElement("span",{className:"icon-coms-blank"}),React.createElement("p",null,A(506888,"请先添加或选择节点"))):""),React.createElement(T.default,{ecId:(this&&this.props&&this.props.ecId||"")+"_FreeNodeReturnBackSetModal@0rzlip",workflowNewDesignStore:t}))}}]),t}(React.Component))||o;t.default=_.WeaTools.tryCatch(React,function(e){return React.createElement(_.WeaErrorPage,{ecId:"_WeaErrorPage@7c706y",msg:e.error?e.error:A(383324," 对不起，该页面异常，请联系管理员 ")+"！"})},{error:""})(M)},function(e,t){e.exports=s},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(8),i=n(a),s=r(3),l=n(s),c=r(1),u=n(c),d=r(2),f=n(d),p=r(4),h=n(p),m=r(5),v=n(m),g=r(0),w=r(11),y=r(33),b=r(6),_=r(7),S=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(_),k=r(21),E=n(k),I=r(93),C=S.toJS,R=g.WeaLocaleProvider.getLabel,x=(0,y.observer)(o=function(e){function t(e){(0,u.default)(this,t);var r=(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return r.getSearchs=function(){var e=r.props.workflowNewDesignStore,t=e.returnBackConditions,n=e.returnBackForm,o=e.currentChoosedItemId,a=e.getFreeObjById,i=e.wfFreeDatas,s=e.tempReturnBackValue,l=e.currentChoosedItemDataIndex,c=e.currentPostParams,u=l.split("_")[0],d="",f={};""!=u&&!(0,E.default)(C(i))&&i[u]&&(d=l.split("_")[1],f=i[u][d]);var p=a(o,f)||{},h=p.nodeEntity,m=void 0===h?{}:h,v=(m.nodeStatus,m.nodetype,s.isrejectremind),y=void 0===v?"0":v,b=s.ischangrejectnode,_=void 0===b?"0":b,S=n.isFormInit,k=(n.getFormParams(),[]),R=[],x=(0,I.checkEditRight)(p,c);return S&&C(t).map(function(e,t){var o=[];e.items.map(function(e){var t=e.domkey[0];e.viewAttr=x?1:e.viewAttr,"ischangrejectnode"==t||"isrejectremind"==t?"ischangrejectnode"==t?R.push(React.createElement(g.WeaCheckbox,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaCheckbox@oh4mmh@"+t,viewAttr:x?1:2,value:_+"",onChange:function(e){s.ischangrejectnode=e},content:e.label})):(e.value=y,o.push({com:React.createElement(g.WeaFormItem,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaFormItem@cpyi44@"+t,label:""+e.label,labelCol:{span:""+e.labelcol},ratio1to2:!0,error:n.getError(e),tipPosition:"bottom",wrapperCol:{span:""+e.fieldcol}},React.createElement("div",null,React.createElement(w.WeaSwitch,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSwitch@t2bbga@"+t,fieldConfig:e,form:n,onChange:r.onChange}),"1"==y&&R)),col:1,hide:n.isHide(e,function(e,t){return!1})})):o.push({com:React.createElement(g.WeaFormItem,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaFormItem@mvyev6@"+t,label:""+e.label,labelCol:{span:""+e.labelcol},ratio1to2:!0,error:n.getError(e),tipPosition:"bottom",wrapperCol:{span:""+e.fieldcol}},React.createElement(w.WeaSwitch,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSwitch@ztbcjo@"+t,fieldConfig:e,form:n,onChange:r.onChange})),col:1,hide:n.isHide(e,function(e,t){return!1})})}),k.push(React.createElement(g.WeaSearchGroup,{ecId:(r&&r.props&&r.props.ecId||"")+"_WeaSearchGroup@75yy4d@"+t,needTigger:!1,title:e.title,showGroup:e.defaultshow||!0,items:o}))}),k},r.onChange=function(e){var t=r.props.workflowNewDesignStore,n=t.currentChoosedItemId,o=t.getFreeObjById,a=t.wfFreeDatas,i=(t.tempReturnBackValue,t.currentChoosedItemDataIndex),s=i.split("_")[0],l="",c={};""!=s&&!(0,E.default)(C(a))&&a[s]&&(l=i.split("_")[1],c=a[s][l]);o(n,c);for(var u in e)t.tempReturnBackValue[u]=e[u].value+""},r.dataSave=function(){var e=r.props.workflowNewDesignStore,t=e.openReturnBackSetting,n=e.currentChoosedItemId,o=e.wfFreeDatas,a=e.getFreeObjById,s=e.tempReturnBackValue,l=e.currentChoosedItemDataIndex,c=l.split("_")[0],u="",d={};""!=c&&!(0,E.default)(C(o))&&o[c]&&(u=l.split("_")[1],d=o[c][u]);var f=a(n,d)||{},p=f.nodeEntity,h=void 0===p?{}:p;f.nodeEntity=(0,i.default)({},h,s),t(!1)},r.getRightMenu=function(){var e=r.props.workflowNewDesignStore,t=(e.openReturnBackSetting,e.currentChoosedItemId),n=e.wfFreeDatas,o=e.getFreeObjById,a=e.currentChoosedItemDataIndex,i=e.currentPostParams,s=a.split("_")[0],l="",c={};""!=s&&!(0,E.default)(C(n))&&n[s]&&(l=a.split("_")[1],c=n[s][l]);var u=o(t,c)||{},d=u.nodeEntity,f=void 0===d?{}:d,p=(f.nodeStatus,f.nodetype,(0,I.checkEditRight)(u,i)),h=[];return p||h.push({key:"save",icon:React.createElement("i",{className:"icon-coms-Preservation"}),content:R(86,"保存"),onClick:function(e){r.dataSave()}}),h},r.getButtons=function(){var e=r.props.workflowNewDesignStore,t=(e.openReturnBackSetting,e.currentChoosedItemId),n=e.wfFreeDatas,o=e.getFreeObjById,a=e.currentChoosedItemDataIndex,i=e.currentPostParams,s=a.split("_")[0],l="",c={};""!=s&&!(0,E.default)(C(n))&&n[s]&&(l=a.split("_")[1],c=n[s][l]);var u=o(t,c)||{},d=u.nodeEntity,f=void 0===d?{}:d,p=(f.nodeStatus,f.nodetype,(0,I.checkEditRight)(u,i)),h=[];return p||h.push(React.createElement(b.Button,{ecId:(r&&r.props&&r.props.ecId||"")+"_Button@scnpuw@save",type:"primary",onClick:function(){r.dataSave()}},R(86,"保存"))),h},r.state={},r}return(0,v.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){var e=this.props.workflowNewDesignStore,t=e.openReturnBackSetting,r=e.returnBackDialogShow;return React.createElement("div",null,React.createElement(g.WeaDialog,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@oryxs6",icon:"icon-coms-workflow",iconBgcolor:"#0079DE",onCancel:function(){t(!1,!0)},title:R(84508,"退回设置"),visible:r,style:{width:"600px",height:"180px"},hasScroll:!0,closable:!0,buttons:this.getButtons(),moreBtn:{datas:this.getRightMenu(),collectParams:{favname:R(84508,"退回设置"),favouritetype:"2",importantlevel:1}}},React.createElement("div",{className:"wfFree-flowSet-returnBack-setting"},this.getSearchs())))}}]),t}(React.Component))||o;t.default=g.WeaTools.tryCatch(React,function(e){return React.createElement(g.WeaErrorPage,{ecId:"_WeaErrorPage@hu64b1",msg:e.error?e.error:"对不起，该页面异常，请联系管理员！"})},{error:""})(x)},function(e,t,r){var n=r(185),o=r(502),a=r(180),i=r(181),s=a(function(e,t){if(null==e)return[];var r=t.length;return r>1&&i(e,t[0],t[1])?t=[]:r>2&&i(t[0],t[1],t[2])&&(t=[t[0]]),o(e,n(t,1),[])});e.exports=s},function(e,t,r){function n(e,t,r){var n=-1;t=o(t.length?t:[u],l(a));var d=i(e,function(e,r,a){return{criteria:o(t,function(t){return t(e)}),index:++n,value:e}});return s(d,function(e,t){return c(e,t,r)})}var o=r(111),a=r(68),i=r(503),s=r(504),l=r(61),c=r(505),u=r(65);e.exports=n},function(e,t,r){function n(e,t){var r=-1,n=a(e)?Array(e.length):[];return o(e,function(e,o,a){n[++r]=t(e,o,a)}),n}var o=r(196),a=r(29);e.exports=n},function(e,t){function r(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}e.exports=r},function(e,t,r){function n(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,s=a.length,l=r.length;++n<s;){var c=o(a[n],i[n]);if(c){if(n>=l)return c;return c*("desc"==r[n]?-1:1)}}return e.index-t.index}var o=r(506);e.exports=n},function(e,t,r){function n(e,t){if(e!==t){var r=void 0!==e,n=null===e,a=e===e,i=o(e),s=void 0!==t,l=null===t,c=t===t,u=o(t);if(!l&&!u&&!i&&e>t||i&&s&&c&&!l&&!u||n&&s&&c||!r&&c||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||l&&r&&a||!s&&a||!c)return-1}return 0}var o=r(62);e.exports=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(8),i=n(a),s=r(3),l=n(s),c=r(1),u=n(c),d=r(2),f=n(d),p=r(4),h=n(p),m=r(5),v=n(m),g=r(0),w=r(33),y=(r(6),r(7)),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(y),_=r(19),S=n(_),k=r(21),E=(n(k),r(93)),I=b.toJS,C=g.WeaLocaleProvider.getLabel,R=(0,w.observer)(o=function(e){function t(e){(0,u.default)(this,t);var r=(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return r.mustPassIcon=function(e,t,r){var n=[];return e&&"3"==t&&n.push(React.createElement("span",{className:"icon-coms02-download mustPass-icon",style:"1"==r?{transform:"rotate(-45deg)",left:"77px",bottom:"-18px"}:{left:"44px",bottom:"-44px"},title:C(506902,"此节点必须通过")})),n},r.dragStart=function(e){var t=r.props,n=t.workflowNewDesignStore,o=(t.nodeParams,n.wfFreeDatas,n.wfFreeDatasPoints,e.target.className||""),a=o.split(" ")[1];a&&!isNaN(a)&&(n.dragStartItemId=a)},r.dragEnter=function(e){var t=r.props,n=t.workflowNewDesignStore,o=(t.nodeParams,n.wfFreeDatas,n.wfFreeDatasPoints,e.target.className||""),a=o.split(" ")[1];a&&!isNaN(a)&&(n.dragEndItemId=a)},r.dragDrop=function(e){var t=r.props,n=t.workflowNewDesignStore,o=(t.nodeParams,n.wfFreeDatas),a=n.wfFreeDatasPoints,s=n.dragEndItemId,l=n.dragStartItemId;I(a),I(o);if(s!=l){var c=(0,E.getFreeObjById)(s),u=(0,E.getFreeObjById)(l),d=(0,S.default)(c.nodeEntity),f=(0,S.default)(u.nodeEntity);c.nodeEntity=(0,i.default)({},f),u.nodeEntity=(0,i.default)({},d)}},r.getMobileEditions=function(){var e=r.props,t=e.workflowNewDesignStore,n=e.nodeParams,o=e.belongWhereTag,a=(t.setPopOperatorsPanemParams,t.mobileChoosedElement),i=t.deleteFreeNodeItem,s=t.freeDetailSetConditions,l=t.wfFreeDatas,c=a.nodeEntity,u=void 0===c?{}:c,d=a.id,f=void 0===d?"":d,p=a.parentid,h=void 0===p?"":p,m=u.nodetype,v=void 0===m?"":m,g=o.split("_")[0],w=o.split("_")[1],y={};g&&(y=l[g][w]);var b=(0,E.getFreeObjById)(h,y)||{};if(n.id==f){var _=[];_.push(React.createElement("span",{onClick:function(){window.parent.historyRoute.push({pathname:"/req/wfFreeFlowSet/detail",detailType:"editNode",currentGroup:I(n),parentGroup:I(b),condition:I(s),pcPublicFreeStore:t})}},C(93,"编辑"))),_.push(React.createElement("span",{className:"change-operators",onClick:function(){window.parent.historyRoute.push({pathname:"/req/wfFreeFlowSet/detail",detailType:"operators",currentGroup:I(n),parentGroup:I(b),condition:I(s),pcPublicFreeStore:t})}},C(506885,"更改操作者"))),_.push(React.createElement("span",{className:"mobile-delete",onClick:function(){i(f,o)}},C(91,"删除")));var S={};return S="1"==v?{left:"-87px",top:"-34px",transform:"rotate(-45deg)"}:{left:"-24px",top:"-36px"},React.createElement("div",{className:"mobile-operations",style:S},_)}},r.clickNode=function(e){var t=r.props,n=t.workflowNewDesignStore,o=t.nodeParams,a=void 0===o?{}:o,i=t.isReadOnlyModel,s=t.isMobile,l=void 0===s?"0":s,c=t.belongWhereTag,u=(n.freeIsEditNode,n.getFreeNodeSetting),d=n.setPopOperatorsPanemParams,f=n.setCurrentElement_mobile,p=n.forecastNodeIds;if(i){return d({position:{left:e.pageX,top:e.pageY},visible:!0,nodeinfo:a,forecastNodeIds:p}),void(window.mxUtils&&window.mxUtils.hideWfOperatorInfo())}e.stopPropagation(),"icon-coms-yonghu"!==e.target.className&&"mobile-delete"!==e.target.className&&("0"==l?u(a,c):f(a,!1,c))},r.mouseEnterNode=function(e){if(!(e.target.className.indexOf("mustPass-icon")>-1)){var t=r.props,n=t.workflowNewDesignStore,o=t.nodeParams,a=void 0===o?{}:o;(0,n.setCurrentMouseEnterId)(a.id)}},r.getNodeActions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1",t=(arguments[1],r.props),n=t.workflowNewDesignStore,o=t.nodeParams,a=void 0===o?{}:o,s=t.isFlowModel,l=void 0===s?"0":s,c=t.belongWhereTag,u=n.setFreeNodeUsers,d=n.nodeOperatorsReplaceDatas,f=n.clearCurrentChooseState,p=n.currentMouseEneterItemId,h=n.freeDetailSetConditions,m=void 0===h?[]:h,v=n.selectOperatorsMax,w=[];w=I(d)[a.id]||[];var y={type:17,title:C(33210,"选择人员"),icon:"icon-coms-hrm",iconBgcolor:"#217346",linkUrl:"/hrm/resource/HrmResource.jsp?id=",isAutoComplete:1,isMultCheckbox:!1,isDetail:!1,viewAttr:2,zIndex:1050,isShowGroup:!0,isSingle:!1,customized:!0,memorise:!0,replaceDatas:w,maxLength:v};if(m.length>0){var b=I(m)[0]||{},_=b.items;(void 0===_?[]:_).map(function(e){var t=e.domkey,r=void 0===t?[]:t,n=e.browserConditionParam,o=void 0===n?{}:n;if("operators"==r[0]){var a=o.dataParams,i=void 0===a?{}:a,s=o.destDataParams,l=void 0===s?{}:s,c=o.completeParams,u=void 0===c?{}:c;y.dataParams=i,y.destDataParams=l,y.completeParams=u}})}var S=a.nodeChartEntity,k=void 0===S?{}:S,E=k.del,R=void 0!==E&&E,x=k.edit,P=void 0!==x&&x,N=k.addParall,D=void 0!==N&&N,O=k.addNext,L=void 0!==O&&O;return React.createElement("div",{className:"free-node-v2-action-area "+a.id,style:{background:"rgba(0,0,0,0.001)"},onMouseLeave:function(e){f()}},R&&p==a.id&&React.createElement("div",{className:"action-item delete",title:C(15599,"删除节点"),style:"1"==e?{}:{left:"20px"},onClick:function(e){return r.nodeActions("delete",e)}},React.createElement("span",{className:"icon-coms-delete"})),React.createElement(g.WeaBrowser,(0,i.default)({ecId:(r&&r.props&&r.props.ecId||"")+"_WeaBrowser@uc39us"},I(y),{onChange:function(e,t,r){u(a.id,e,t,r,c)},onClick:function(e){return e.stopPropagation()}}),P&&p==a.id&&React.createElement("div",{className:"action-item operators",title:C(506885,"更改操作者"),style:"1"==e?{}:{left:"70px"}},React.createElement("span",{className:"icon-coms-switch"}))),D&&p==a.id&&React.createElement("div",{className:"action-item addSerial",title:C(506899,"添加并行节点"),style:{},onClick:function(e){return r.nodeActions("beParallel",e)}},React.createElement("span",{className:"icon-coms-Enlarge"})),L&&p==a.id&&React.createElement("div",{className:"action-item addParalla",title:C(506900,"添加串行节点"),style:"1"==e?{}:"0"==e?{left:"1"==l?"55px":"56px",bottom:"1"==l?"10px":"0"}:{left:"42px"},onClick:function(e){return r.nodeActions("beSerial",e)}},React.createElement("span",{className:"icon-coms-Enlarge"})))},r.nodeActions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"delete";arguments[1].stopPropagation();var t=r.props,n=t.workflowNewDesignStore,o=t.nodeParams,a=void 0===o?{}:o,i=t.isFlowModel,s=t.belongWhereTag,l=n.beSerialNodes,c=n.beParallelWithCurNode,u=n.deleteFreeNodeItem;"delete"==e?u(a.id,s):"beSerial"==e?a.trunkNode?l("1"==i?a.id:"root",s):l(a.id,s):"beParallel"==e&&c(a.id,s)},r.state={},r}return(0,v.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){var e=this.props,t=e.workflowNewDesignStore,r=e.nodeParams,n=void 0===r?{}:r,o=e.nodeStyle,a=void 0===o?{}:o,i=e.isReadOnlyModel,s=e.isFlowModel,l=void 0===s?"0":s,c=e.isMobile,u=void 0===c?"0":c,d=e.belongWhereTag,f=(t.setAddDatasTypeModalShow,t.addDatasTypeModalShow,t.addDatasParams,t.currentMouseEneterItemId),p=t.currentChoosedItemId,h=t.wfFreeDatas,m=(t.clearCurrentChooseState,t.circulationParams),v=t.getFreeObjById,g=t.nodeOperatorsReplaceDatas,w=t.globalNextNodeEditPurview,y=(t.currentChoosedItemDataIndex,t.forecastNodeIds),b=n.nodeEntity,_=void 0===b?{}:b,S=n.noOperatedUsers,k=void 0===S?[]:S,E=n.operatedUsers,I=void 0===E?[]:E,R=(n.viewedUsers,n.parentid),x=void 0===R?"":R,P=n.id,N=void 0===P?"":P,D=n.currentNodeGroup,O=void 0!==D&&D,L=_.nodename,T=void 0===L?"":L,F=_.nodetype,A=void 0===F?"1":F,M=_.nodeStatus,W=void 0===M?"0":M,j=_.mustPass,B=void 0!==j&&j,z=(_.nextNodeEditPurview,d.split("_")[0]),q=d.split("_")[1],U=h[z][q],V=v(x,U)||{},G=V.mergeType,H=void 0===G?"":G,K=g[N]||[],Q={},$="";"0"==W||"3"==W?Q=m.noPassedNodeShouldCheckRight:"2"==W?Q=m.passedNodeAndNoOPeration:"1"==W&&(Q=m.currentNodeAndNoOperation,O&&(Q=m.currentMustPassNode)),("0"==W||"3"==W)&&y&&""!=y&&(","+y+",").indexOf(","+n.nodeid+",")>-1&&(Q=m.forecastNode);var J=!i&&(f==n.id||n.id==p),Y={boxShadow:J?"0 0 0 1px "+Q.borderColor:"",border:"1px solid "+Q.borderColor,background:""+Q.backgroundColor,cursor:i?"default":"pointer"};if(k.length>0){var X=(k.length,k[0]),Z=(X.userid,X.beAgentUserId),ee=X.lastname,te=X.beAagentUserName;$=Z>0?te+"->"+ee:ee}else if(I.length>0){var re=(I.length,I.filter(function(e){return e.userid==e.processUser})),ne=re.length>0?re[0]:I[0],oe=(ne.userid,ne.beAgentUserId),ae=ne.lastname,ie=ne.beAagentUserName;$=oe>0?ie+"->"+ae:ae}if(K.length>0&&""==$){var se=K.length>1?"...":"";$=K[0].name+se}return""==$&&($=C(15808,"未设置")),"1"==l?React.createElement("div",{className:"workflow-design-free-node-v2 "+n.id,style:a},"0"==A||"3"==A?React.createElement("div",{className:"circleModel "+("3"==A?"endNode":""),onMouseEnter:!i&&this.mouseEnterNode},"0"==A?React.createElement("div",{className:"name",title:C(506901,"流转设定节点")},C(506901,"流转设定节点")):React.createElement("div",{className:"name"},"..."),!i&&this.getNodeActions(A,w)):React.createElement("div",{className:"1"==A?"shenpi":"chuli",onClick:this.clickNode,onMouseEnter:!i&&this.mouseEnterNode,style:Y},React.createElement("div",{className:"showname",title:T,style:{color:Q.nodeColor}},T),React.createElement("div",{className:"node-operators",title:$,style:{color:Q.operatorColor}},$),!i&&this.getNodeActions(A,w),this.mustPassIcon(B,H,A))):React.createElement("div",{className:"workflow-design-free-node-v2 "+n.id,style:a},React.createElement("div",{className:"1"==A?"shenpi":"0"==A||"3"==A?"circle":"chuli",onClick:this.clickNode,onMouseEnter:!i&&this.mouseEnterNode,style:Y},React.createElement("div",{className:"showname",title:T,style:{color:Q.nodeColor}},T),React.createElement("div",{className:"node-operators",title:$,style:{color:Q.operatorColor}},$),!i&&"1"!=u&&this.getNodeActions(A,w),this.mustPassIcon(B,H,A),!i&&"1"==u&&this.getMobileEditions()))}}]),t}(React.Component))||o;t.default=g.WeaTools.tryCatch(React,function(e){return React.createElement(g.WeaErrorPage,{ecId:"_WeaErrorPage@lxokd3",msg:e.error?e.error:C(383324," 对不起，该页面异常，请联系管理员 ")+"！"})},{error:""})(R)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(3),i=n(a),s=r(1),l=n(s),c=r(2),u=n(c),d=r(4),f=n(d),p=r(5),h=n(p),m=r(0),v=r(33),g=(r(6),r(7)),w=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(g),m.WeaLocaleProvider.getLabel),y=(0,v.observer)(o=function(e){function t(e){(0,l.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return r.setBranchType=function(){var e=r.props,t=e.workflowNewDesignStore,n=e.groupsParams,o=void 0===n?{}:n,a=e.isReadOnlyModel,i=e.isMobile,s=void 0===i?"0":i,l=e.belongWhereTag,c=t.setWfDesignFreeEditGroup,u=t.setCurrentElement_mobile;o.groupStatus;if(!a){t.currentChoosedItemId="",a||"1"!=s||u(o,!0,l);o.id;c(o.id,l)}},r.onMouseLeave=function(){var e=r.props,t=e.workflowNewDesignStore,n=e.groupsParams,o=e.isReadOnlyModel;"0"!=n.groupStatus||o||(t.branchBorderColorShowId="")},r.changeBorderColor=function(){var e=r.props,t=e.workflowNewDesignStore,n=e.groupsParams,o=e.isReadOnlyModel;"0"!=n.groupStatus||o||(t.branchBorderColorShowId=n.id||"")},r.state={},r}return(0,h.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.workflowNewDesignStore,r=e.groupStyle,n=void 0===r?{}:r,o=e.groupsParams,a=void 0===o?{}:o,i=(t.freeIsEditGroup,t.currentChoosedBranchId),s=void 0===i?"":i,l=a.mergeType,c=void 0===l?"1":l,u=a.mergeValue,d=void 0===u?"":u,f=a.id,p=void 0===f?"":f,h=s==p?{borderWidth:"2px",borderColor:"#2285FE"}:{},m="";return m="1"==c?w(506894,"按比例通过")+" "+d+"%":"2"==c?w(500223,"按分支数通过 ")+(d||1):w(390423,"指定通过分支"),React.createElement("div",{className:"wf-design-block-groups",style:n},this.getBorder(m,h))}},{key:"getBorder",value:function(e,t){var r=this,n=this.props,o=n.workflowNewDesignStore,a=n.groupsParams,i=n.isReadOnlyModel,s=o.branchBorderColorShowId,l=a.id,c=a.groupStatus,u=void 0===c?"0":c,d=[];s==l&&(t.borderColor="#2285FE");var f="0"!=u||i,p={cursor:i?"default":"pointer",background:i?"#f5f5f5":"#fff"};return["groups-title","left-border","top-border","right-border","bottom-border"].map(function(n){f&&(t.cursor="default"),d.push(React.createElement("div",{className:"groups-title"===n?n:"groups-border "+n,style:"groups-title"===n?p:t,onMouseEnter:r.changeBorderColor,onMouseLeave:r.onMouseLeave,onClick:r.setBranchType},"groups-title"===n?e:""))}),d}}]),t}(React.Component))||o;t.default=m.WeaTools.tryCatch(React,function(e){return React.createElement(m.WeaErrorPage,{ecId:"_WeaErrorPage@9jhfci",msg:e.error?e.error:w(383324," 对不起，该页面异常，请联系管理员 ")+"！"})},{error:""})(y)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),a=n(o),i=r(1),s=n(i),l=r(2),c=n(l),u=r(4),d=n(u),f=r(5),p=n(f),h=r(9),m=n(h),v=r(0),g=v.WeaLocaleProvider.getLabel,w=function(e){function t(){var e,r,n,o;(0,s.default)(this,t);for(var i=arguments.length,l=Array(i),c=0;c<i;c++)l[c]=arguments[c];return r=n=(0,d.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(l))),n.renderOperateLine=function(){var e=n.props,t=(e.position,e.visible,e.nodeinfo),r=void 0===t?{}:t,o=e.forecastNodeIds,a=r.noOperatedUsers,i=void 0===a?[]:a,s=r.operatedUsers,l=void 0===s?[]:s,c=r.viewedUsers,u=void 0===c?[]:c,d=r.nodeEntity,f=void 0===d?{}:d,p=f.operatorReplaceDatas,h=void 0===p?[]:p,v=f.nodeStatus,w=void 0===v?"0":v,y={},b=[],_=("0"==w||"3"==w)&&(","+o+",").indexOf(","+f.id+",")>-1;if(i.length>0&&(y.noOperatedUsers=i,b.push("noOperatedUsers")),u.length>0&&(y.viewedUsers=u,b.push("viewedUsers")),l.length>0&&(y.operatedUsers=l,b.push("operatedUsers")),0==b.length&&h.length>0){b.push("noOperatedUsers");var S=[];h.map(function(e){"resource"===e.type?S.push(e):e.users.map(function(e){return S.push(e)})}),y.noOperatedUsers=S}var k={noOperatedUsers:"#6db341",viewedUsers:"#ff7906",operatedUsers:"#30b6ff"},E=[];return b.map(function(e){E.push(m.default.createElement("div",{className:"operator-type"},!_&&m.default.createElement("p",{className:"type-title",style:{color:k[e]}},"noOperatedUsers"==e?g(28500,"未操作"):"viewedUsers"==e?g(18006,"已查看"):g(28499,"已操作")),m.default.createElement("p",{className:"type-list"},y[e].map(function(e,t,r){var o=e.userid,a=e.usertype,i=e.beAgentUserId,s=e.lastname,l=e.beAagentUserName,c=e.id,u=e.name;return i>0?m.default.createElement("spa",null,m.default.createElement("span",{className:"hrm-item",onClick:function(e){n.openHrmPanel(e,i)}},l),"->",m.default.createElement("span",{className:"hrm-item",onClick:function(e){n.openHrmPanel(e,o)}},s)):m.default.createElement("span",{className:"hrm-item",onClick:function(e){n.openHrmPanel(e,o||c,a)}},s||u)}))))}),0==E.length&&E.push(m.default.createElement("p",null,g(390474,"暂无数据！"))),E},n.openHrmPanel=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:21,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;"ontouchstart"in document.documentElement?window.parent.formOpenHrmCard(t,!0):1==r?window.open("/spa/crm/static/index.html#/main/crm/customerView?customerId="+t):(window.openhrm(t),window.pointerXY(e))},o=r,(0,d.default)(n,o)}return(0,p.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props,t=e.position,r=void 0===t?{}:t,n=e.visible,o=void 0!==n&&n,a=(e.nodeinfo,{display:o?"block":"none",left:r.left+"px",top:r.top+"px"}),i=window.innerHeight-r.top-40;return m.default.createElement("div",{style:a,className:"wf-pop-operators-panel"},m.default.createElement("div",{className:"header"},g(99,"操作者")),m.default.createElement("div",{className:"content",style:{maxHeight:i}},this.renderOperateLine()))}}]),t}(h.Component);t.default=w},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(18),i=n(a),s=r(26),l=n(s),c=r(3),u=n(c),d=r(1),f=n(d),p=r(2),h=n(p),m=r(4),v=n(m),g=r(5),w=n(g),y=r(9),b=n(y),_=r(10),S=r(7),k=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(S),E=r(11),I=r(6),C=r(0),R=r(21),x=n(R),P=r(19),N=(n(P),k.toJS),D=E.WeaTableNew.WeaTable,O=C.WeaLocaleProvider.getLabel,L=(0,_.observer)(o=function(e){function t(e){(0,f.default)(this,t);var r=(0,v.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return r.getAdvancedSearch=function(){return r.props.workflowNewDesignStore.importModelForm.render({needTigger:!1,showGroup:!0,showTitle:!1},{})},r.confirmSelection=function(){var e=r.props,t=e.workflowNewDesignStore,n=e.isFree,o=void 0===n?"":n,a=t.importModelTableStore,i=t.wfFreeDatas,s=t.postImportModelDatas,c=t.currentPostParams,u=void 0===c?{}:c,d=a.selectedRowKeys;if((0,x.default)(N(d)))return void I.message.warning(O(506881,"请先选择模板"));var f=u.templateid,p=void 0===f?-1:f,h=!1,m=N(i);if(p>0&&!(0,x.default)(m)){(0,l.default)(m).map(function(e){var t=m[e];if(t.length>0)for(var r=t[0];r.hasNext;){if(!r.trunkNode){h=!0;break}r=r.next}})}(0,x.default)(N(i))||p>0&&!h?s({targetTemplateid:d[0],isFree:o}):I.Modal.confirm({title:O("131329","信息确认"),content:""+("1"==o?O(506882,"导入模板将替换已设置的自由节点，是否继续？"):O(506883,"导入模板将替换加签流转，是否继续？")),onOk:function(){s({targetTemplateid:d[0],isFree:o})},okText:O(83446,"确定"),okCancel:function(){}})},r}return(0,w.default)(t,e),(0,h.default)(t,[{key:"doInit",value:function(e){}},{key:"componentDidMount",value:function(){this.doInit(this.props)}},{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){var e=this.props,t=e.workflowNewDesignStore,r=(e.isFree,t.setModelImportDialogShow),n=t.modelImportModelShow,o=t.importModelTableStore,a=t.importModelForm,i=t.setImportModalAdShow,s=t.importModalAdShow,l=t.searchExistedModelList,c=(t.postImportModelDatas,t.wfFreeDatas,a.getFormParams());return b.default.createElement(C.WeaDialog,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@mk40fj",visible:n,title:O(23039,"选择模板"),icon:"icon-coms-workflow",iconBgcolor:"#0079DE",maskClosable:!1,buttons:this.getModalBtns(),onCancel:function(){return r(!1)},style:{width:"800px",height:"400px"},moreBtn:{datas:this.getRightMenu()},hasScroll:!0},b.default.createElement("div",{className:"wf-free-flowset-importModal"},b.default.createElement(C.WeaRightMenu,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaRightMenu@zm0kap",collectParams:{favname:O(23039,"选择模板"),favouritetype:2},datas:this.getRightMenu()},b.default.createElement(C.WeaTab,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaTab@klhz11",buttonsAd:this.getListAdButtons(),searchType:["base","advanced"],advanceHeight:75,searchsBaseValue:c.name,setShowSearchAd:function(e){i(e)},hideSearchAd:function(){return i(!1)},searchsAd:this.getCusAdvancedSearch(),showSearchAd:s,onSearch:function(e){l()},onSearchChange:function(e){a.updateFields({name:{value:e}})}}),b.default.createElement(D,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaTable@3ksskm",comsWeaTableStore:o,hasOrder:!0,needRowClick:!0,scroll:{y:265}}))))}},{key:"getCusAdvancedSearch",value:function(){var e=this,t=this.props.workflowNewDesignStore,r=t.importModelForm,n=t.modelAdCondition,o=r.isFormInit,a=[];return o&&N(n).map(function(t,n){var o=[];t.items.map(function(t){var n="object"===(0,i.default)(t.domkey)?t.domkey[0]:t.domkey,a=2;t.conditionType.toUpperCase()==C.WeaTools.types.CASCADER&&(a=1),o.push({com:b.default.createElement(C.WeaFormItem,{ecId:(e&&e.props&&e.props.ecId||"")+"_WeaFormItem@vp1q84@"+n,label:""+t.label,labelCol:{span:""+t.labelcol},ratio1to2:!0,error:r.getError(t),tipPosition:"bottom",wrapperCol:{span:""+t.fieldcol}},b.default.createElement(C.WeaSwitch,{ecId:(e&&e.props&&e.props.ecId||"")+"_WeaSwitch@w9fs4o@"+n,fieldConfig:t,form:r})),col:a,hide:r.isHide(t,function(e,t){return!1})})}),a.push(b.default.createElement(C.WeaSearchGroup,{ecId:(e&&e.props&&e.props.ecId||"")+"_WeaSearchGroup@193nq4@"+n,needTigger:!1,showTitle:!1,showGroup:!0,items:o}))}),a}},{key:"getListAdButtons",value:function(){var e=this.props.workflowNewDesignStore,t=e.searchExistedModelList,r=e.setImportModalAdShow,n=e.importModelForm;return[b.default.createElement(I.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@7yre2y@search",type:"primary",onClick:function(){t(),r(!1)}},O(197,"搜索")),b.default.createElement(I.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@gaipk6@reset",type:"ghost",onClick:function(){n.resetConditionValue()}},O(2022,"重置")),b.default.createElement(I.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@9z82gs@cancel",type:"ghost",onClick:function(){r(!1)}},O(31129,"取消"))]}},{key:"getModalBtns",value:function(){var e=this,t=this.props.workflowNewDesignStore,r=t.setModelImportDialogShow,n=t.loading,o=void 0!==n&&n,a=[];return a.push(b.default.createElement(I.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@ps79ra@confirm",type:"primary",loading:o,onClick:function(){e.confirmSelection()}},O(83446,"确定"))),a.push(b.default.createElement(I.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@p89qh3@cancel",type:"primary",loading:o,onClick:function(){r(!1)}},O(201,"取消"))),a}},{key:"getRightMenu",value:function(){var e=this,t=this.props.workflowNewDesignStore,r=t.setModelImportDialogShow,n=t.loading,o=void 0!==n&&n,a=[];return a.push({key:"clear",icon:b.default.createElement("i",{className:"icon-coms-complete"}),disabled:o,content:O(83446,"确定"),onClick:function(t){e.confirmSelection()}}),a.push({key:"cancel",icon:b.default.createElement("i",{className:"icon-coms-Clear"}),content:O(201,"取消"),disabled:o,onClick:function(e){r(!1)}}),a}}]),t}(b.default.Component))||o;t.default=C.WeaTools.tryCatch(b.default,function(e){return b.default.createElement(C.WeaErrorPage,{ecId:"_WeaErrorPage@uoy99e",msg:e.error?e.error:O(383324," 对不起，该页面异常，请联系管理员 ")+"！"})},{error:""})(L)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(3),i=n(a),s=r(1),l=n(s),c=r(2),u=n(c),d=r(4),f=n(d),p=r(5),h=n(p),m=r(9),v=n(m),g=r(10),w=r(11),y=r(6),b=r(0),_=(w.WeaTableNew.WeaTable,b.WeaLocaleProvider.getLabel),S=(0,g.observer)(o=function(e){function t(e){(0,l.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return r.getContent=function(){var e=r.props.workflowNewDesignStore,t=(e.saveAsTempCondition,e.saveAsTempForm);return t.render({needTigger:!1,showGroup:!0,col:1},{onChange:function(e){for(var r in e)"name"==r&&100==e[r].value.replace(/[^\u0000-\u00ff]/g,"aaa").length&&t.showError("name",'"'+_(18151,"模板名称")+'"'+_(502997,"长度不能超过")+" 100 "+_(20075,"个字符"))}})},r.dataSave=function(){var e=r.props,t=e.workflowNewDesignStore,n=e.reLoadTemplateList,o=t.saveAsTempSave;t.saveAsTempForm.validateForm().then(function(e){e.isValid?o(n):(e.showErrors(),r.setState({date:new Date}),Modal.warning({title:_(15172,"系统提示"),content:_(383975,"必要信息不完整，红色标记为必填项！")}))})},r}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){var e=this.props,t=e.workflowNewDesignStore,r=(e.isFree,t.saveAsTemplate),n=t.saveAsTempModalShow;return v.default.createElement(b.WeaDialog,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaDialog@wyf7tt",visible:n,title:_(18418,"存为模板"),icon:"icon-coms-workflow",iconBgcolor:"#0079DE",maskClosable:!1,buttons:this.getModalBtns(),onCancel:function(){return r(!1)},style:{width:"500px",height:"150px"},moreBtn:{datas:this.getRightMenu()},layout:window.parent.document.body,hasScroll:!0},v.default.createElement(b.WeaRightMenu,{ecId:(this&&this.props&&this.props.ecId||"")+"_WeaRightMenu@q5pih7",collectParams:{favname:_(18418,"存为模板"),favouritetype:2},datas:this.getRightMenu()},v.default.createElement("div",{className:"wf-free-flowset-saveAsTemplate",style:{paddingTop:"20px"}},this.getContent())))}},{key:"getModalBtns",value:function(){var e=this,t=this.props.workflowNewDesignStore,r=(t.saveAsTempSave,t.saveAsTempForm,[]);return r.push(v.default.createElement(y.Button,{ecId:(this&&this.props&&this.props.ecId||"")+"_Button@aok6f1@save",type:"primary",onClick:function(){e.dataSave()}},_(86,"保存"))),r}},{key:"getRightMenu",value:function(){var e=this,t=this.props.workflowNewDesignStore,r=(t.saveAsTempSave,[]);return r.push({key:"save",icon:v.default.createElement("i",{className:"icon-coms-Preservation"}),content:_(86,"保存"),onClick:function(t){e.dataSave()}}),r}}]),t}(v.default.Component))||o;t.default=b.WeaTools.tryCatch(v.default,function(e){return v.default.createElement(b.WeaErrorPage,{ecId:"_WeaErrorPage@uffqn8",msg:e.error?e.error:_(383324," 对不起，该页面异常，请联系管理员 ")+"！"})},{error:""})(S)},function(e,t){},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,n){r&&(0,Ce.default)(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function i(e,t,r,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}Object.defineProperty(t,"__esModule",{value:!0}),t.WorkflowNewDesignStore=void 0;var s,l,c,u,d,f,p,h,m,v,g,w,y,b,_,S,k,E,I,C,R,x,P,N,D,O,L,T,F,A,M,W,j,B,z,q,U,V,G,H,K,Q,$,J,Y,X,Z,ee,te,re,ne,oe,ae,ie,se,le,ce,ue,de,fe,pe,he,me,ve,ge,we,ye,be,_e,Se,ke,Ee,Ie=r(13),Ce=o(Ie),Re=r(32),xe=o(Re),Pe=r(26),Ne=o(Pe),De=r(8),Oe=o(De),Le=r(1),Te=o(Le),Fe=r(2),Ae=o(Fe),Me=r(7),We=n(Me),je=r(11),Be=r(19),ze=o(Be),qe=r(21),Ue=o(qe),Ve=r(514),Ge=n(Ve),He=r(0),Ke=r(6),Qe=r(515),$e=je.WeaTableNew.TableStore,Je=He.WeaLocaleProvider.getLabel,Ye=We.toJS;t.WorkflowNewDesignStore=(s=(0,Me.action)("渲染组件"),l=function(){function e(){var t=this;(0,Te.default)(this,e),a(this,"loading",c,this),a(this,"workflowDesignShow",u,this),a(this,"shouldPostXml",d,this),this.workflowDesignId="",a(this,"freeIsEditNode",f,this),a(this,"freeIsEditGroup",p,this),a(this,"currentFreeWfEditState",h,this),a(this,"wfFreeDatas",m,this),a(this,"wfFreeDatasPoints",v,this),a(this,"beforeSavedDatas",g,this),a(this,"svgPathLine",w,this),this.operatorMustInput=!1,this.groupApprovalSettings={},a(this,"freeDetailSetConditions",y,this),a(this,"detailForm_1",b,this),a(this,"currentChoosedItemDataIndex",_,this),a(this,"currentChoosedItemId",S,this),a(this,"currentMouseEneterItemId",k,this),a(this,"currentChoosedBranchId",E,this),a(this,"curRightDetailItemId",I,this),a(this,"curFloatSignNodeId",C,this),a(this,"deleteIds",R,this),a(this,"currentPostParams",x,this),a(this,"nodeOperatorsReplaceDatas",P,this),a(this,"branchBorderColorShowId",N,this),a(this,"rightDetailShowSearchGroup",D,this),a(this,"globalNextNodeEditPurview",O,this),this.currentFlowingGroup=null,this.isNeedChangeRow=!1,a(this,"currentAddDataId",L,this),a(this,"rightDetailType",T,this),a(this,"dragStartItemId",F,this),a(this,"dragEndItemId",A,this),a(this,"saveCheckResult",M,this),a(this,"returnBackDialogShow",W,this),a(this,"returnBackConditions",j,this),a(this,"returnBackForm",B,this),a(this,"tempReturnBackValue",z,this),a(this,"componentNeedRender",q,this),this.currentGlobalParam={},this.operatorTransType={com:0,resource:1,subcom:2,dept:3,group:4,virtual_subcom:5,virtual_dept:7,all:9},a(this,"circulationParams",U,this),a(this,"currentOrginSupPosition",V,this),this.circulationOrginNode={startOrginNodeId:"",endOrginNodeId:"",allOrginNodes:[]},a(this,"currentSignSetNode",G,this),a(this,"freeWfTrunkNodes",H,this),a(this,"allowAddNewBranch",K,this),this.signSetIsReadOnly=!1,a(this,"validWorkFlowDatas",Q,this),this.allValidNodesPostions={},this.allValidNodesNodeLinks={},this.nodeLinksConditions={},this.betweenFreeNodeGap=150,this.currentValidStartNodeId="",this.everyFreeNodeOffsetY={},a(this,"modelImportModelShow",$,this),a(this,"importModelTableStore",J,this),this.modelAdCondition=[],a(this,"importModelForm",Y,this),a(this,"importModalAdShow",X,this),a(this,"allowTemplateImport",Z,this),this.saveAsTempCondition=[],a(this,"saveAsTempForm",ee,this),a(this,"saveAsTempModalShow",te,this),a(this,"closeDialogIsConfirmed",re,this),a(this,"popOperatorsPanelParams",ne,this),a(this,"mobileChoosedElement",oe,this),this.mobileCurrentEditGroupId="",a(this,"mobileChoosedElementIndex",ae,this),a(this,"selectOperatorsMax",ie,this),a(this,"wfinitSettingFlage",se,this),a(this,"startnodeEntity",le,this),this.forecastNodeIds="",a(this,"changeWfinitSettingFlageW",ce,this),a(this,"setstartnodeEntity",ue,this),a(this,"initalFreeWfDatas",de,this),a(this,"doActionToDatas_2",fe,this),this.getcurrentFlowGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=void 0;if((0,Ue.default)(Ye(e)))r=null;else{var n=e.currentNodeGroup,o=void 0!==n&&n,a=e.hasNext,i=e.next,s=e.nodeElement,l=e.parallelNodeGroupDatas;if(s?o&&(r=e):l.map(function(e){var n=t.getcurrentFlowGroup(e);r=n||r}),a){var c=t.getcurrentFlowGroup(i);r=c||r}}return r},this.setCurrentMouseEnterId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t.currentMouseEneterItemId=e},this.loadNodeDetailInfo=function(){Ge.getFreeNodeSetting(t.currentPostParams).then(function(e){var r=e.nodeConfigs,n=void 0===r?[]:r,o=e.rejectItems,a=void 0===o?[]:o,i=e.operatorMustInput,s=void 0!==i&&i,l=e.groupApprovalSettings,c=void 0===l?{}:l;t.operatorMustInput=s,t.freeDetailSetConditions=n,t.groupApprovalSettings=c,t.returnBackConditions=[{items:a}],t.returnBackForm=new je.WeaForm,t.returnBackForm.setCondition(t.returnBackConditions)}).catch(function(e){})},this.getFreeNodeSetting=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.id,o=void 0===n?"":n;e.nodeEntity;t.currentChoosedItemDataIndex=r,t.currentChoosedItemId=o,t.detailForm_1=new je.WeaForm;var a=(0,ze.default)(Ye(t.freeDetailSetConditions));t.detailForm_1.setCondition(a),t.setFreeNodeSettingInfo(e,r)},a(this,"setWfDesignFreeEditGroup",pe,this),this.setFreeNodeUsers=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[]),o=arguments[4];t.currentChoosedItemDataIndex=o;var a={};a[e]=n,t.nodeOperatorsReplaceDatas=(0,Oe.default)({},t.nodeOperatorsReplaceDatas,a);var i=o.split("_")[0],s=o.split("_")[1],l=t.getFreeObjById(e,t.wfFreeDatas[i][s]),c=[];n.map(function(e,r,n){var o=t.operatorTransType[e.type];c.push(o+"_"+e.id)}),l.nodeEntity.operators=c.join(","),l.nodeEntity.operatorids=r,t.setFreeNodeSettingInfo(l)},a(this,"deleteFreeNodeItem",he,this),this.beSerialNodes=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=(0,ze.default)(We.toJS(t.wfFreeDatas)),o={},a=r.split("_")[0],i=r.split("_")[1];n[a]?(i||(i=0),n[a][i]&&(o=n[a][i])):i=0;var s=t.getFreeObjById(e,o)||{},l=void 0,c={parentid:s.parentid};if("root"==e){var u=t.initNewAddElement(c),d=(0,ze.default)(o);if((0,Ue.default)(d)){u.freeStartNodeid=r;var f=t.currentSignSetNode.flowType,p=void 0===f?"1":f;"1"==t.currentPostParams.isFree&&(p="2");var h=r;if("2"==p){var m=[];t.allValidNodesNodeLinks[r].map(function(e){m.push(e.descnode)}),h=m.join(",")}u.freeEndNodeid=h}else u.hasNext=!0,u.next=d,u.freeStartNodeid=d.freeStartNodeid,u.freeEndNodeid=d.freeEndNodeid;o=u}else s.hasNext?(l=s.next,c.hasNext=!0,c.next=l,s.next=t.initNewAddElement(c)):(s.hasNext=!0,s.next=t.initNewAddElement(c));t.currentAddDataId++,t.wfFreeDatas[a]=[o];var v={},g=50,w=0,y=We.toJS(t.wfFreeDatas);for(var b in y){var _=y[b];w+=_.length}var S=0,k={};for(var E in y)!function(e){var r=y[e];k[e]=S,r.map(function(r,n){var o=(0,Qe.calculateNodePoint)(r,g,w);v[e+"_"+n]=o;var a=t.getMaxXInAllFreeNodePts(o);g=a+t.betweenFreeNodeGap}),S+=2}(E);t.everyFreeNodeOffsetY=k,t.wfFreeDatasPoints=v},this.beParallelWithCurNode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=(0,ze.default)(We.toJS(t.wfFreeDatas)),o=r.split("_")[0],a=1*r.split("_")[1],i=n[o][a],s=t.getFreeObjById(e,i)||{},l=t.getLastObjById(s.id,i),c=t.getFreeObjById(s.parentid,i)||{},u=(0,ze.default)(We.toJS(s)),d=-1*t.currentAddDataId+"branch";u.hasNext=!1,u.next=null,u.parentid=d;var f={parallelNodeGroupDatas:[]};null==l&&s.parentid&&!(0,Ue.default)(c)||(f={id:d,nodeChartEntity:{del:!0,edit:!0,addParall:!0,addNext:!0},groupStatus:"0",hasNext:s.hasNext,next:s.next,mergeType:"1",mergeValue:"100",requestid:"",nodeElement:!1,parentid:s.parentid,parallelNodeGroupDatas:[u]});var p=t.initNewAddElement({parentid:d});if(f.parallelNodeGroupDatas.push(p),null!=l)l.next=f;else if(f.freeStartNodeid=s.freeStartNodeid,f.freeEndNodeid=s.freeEndNodeid,s.parentid&&!(0,Ue.default)(c)){var h=c.parallelNodeGroupDatas;p.parentid=s.parentid,h.map(function(e,t){s.id==e.id&&c.parallelNodeGroupDatas.splice(t+1,0,p)})}else i=f;t.currentAddDataId++,t.wfFreeDatas[o][a]=i;var m={},v=50,g=0;for(var w in t.wfFreeDatas){var y=t.wfFreeDatas[w];g+=y.length}var b=0,_={};for(var S in t.wfFreeDatas)!function(e){var r=t.wfFreeDatas[e];_[e]=b,r.map(function(r,n){var o=(0,Qe.calculateNodePoint)(r,v,g);m[e+"_"+n]=o;var a=t.getMaxXInAllFreeNodePts(o);v=a+t.betweenFreeNodeGap}),b+=2}(S);t.everyFreeNodeOffsetY=_,t.wfFreeDatasPoints=m},this.getMaxXInAllFreeNodePts=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0;for(var r in e){var n=e[r];t=t<n.x?n.x:t}return t},this.openReturnBackSetting=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.currentChoosedItemDataIndex.split("_")[0],o="",a={};if(""!=n&&(o=t.currentChoosedItemDataIndex.split("_")[1],a=t.wfFreeDatas[n][o]),t.returnBackDialogShow=e,r){var i=t.getFreeObjById(t.currentChoosedItemId,a)||{},s=i.nodeEntity,l=s.isrejectremind,c=void 0===l?"0":l,u=s.ischangrejectnode,d=void 0===u?"0":u,f=s.isselectrejectnode,p=void 0===f?"1":f,h=s.isSubmitDirectNode,m=void 0===h?"0":h;t.returnBackForm.updateFields({isrejectremind:c+"",ischangrejectnode:d+"",isselectrejectnode:p+"",isSubmitDirectNode:m+""},!1),t.tempReturnBackValue={isrejectremind:c+"",ischangrejectnode:d+"",isselectrejectnode:p+"",isSubmitDirectNode:m+""}}},this.getCurrentGroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nodeElement,r=e.hasNext,n=void 0!==r&&r,o=e.isCurrentNodeGroup,a=void 0!==o&&o,i=e.parallelNodeGroupDatas,s=void 0===i?[]:i,l=e.next,c=void 0===l?{}:l,u=null;if(t?a&&(u=e):s.map(function(e){var t=getCurrentGroup(e);null!=t&&(u=t)}),n){var d=getCurrentGroup(c);null!=d&&(u=d)}return u},this.getFreeObjById=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,ze.default)(We.toJS(t.wfFreeDatas)),n=null;if(r=r||{},r.id&&r.id==e&&(n=r),r.hasNext){var o=t.getFreeObjById(e,r.next);n=o||n}return r.parallelNodeGroupDatas&&r.parallelNodeGroupDatas.length>0&&r.parallelNodeGroupDatas.map(function(r){var o=t.getFreeObjById(e,r);n=o||n}),n},this.setOrginWfNodesInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.createNodeInfo,n=e.cellMaxHeight,o=r.currentNode,a=void 0===o?{}:o,i=r.curNextNode,s=r.allNodesInfo,l=void 0===s?[]:s,c={cellMaxHeight:n,allValidNodes:l,currentStartNode:a,currentEndNodes:i};t.validWorkFlowDatas=c,t.calculateValidNodePosition(c);var u={nextOrginNode:i&&i[0]?i[0].nodeId:"",allOrginNodes:l,curNextNode:i[0]};""==t.circulationOrginNode.startOrginNodeId&&(u.startOrginNodeId=t.circulationOrginNode.startOrginNodeId||a.nodeId),t.circulationOrginNode=(0,Oe.default)({},t.circulationOrginNode,u)},this.calculateValidNodePosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.allValidNodes,n=void 0===r?[]:r,o=e.cellMaxHeight,a={};n.map(function(e){var t=e.geometry,r={x:t.x,y:t.y,width:t.width,height:t.height};a[e.nodeId]={x:r.x+r.width/2,y:o-(r.y+r.height)}}),t.allValidNodesPostions=a},this.signSetChangeBackNode=function(e){var r=t.validWorkFlowDatas,n=(r.currentStartNode,r.currentEndNodes,t.currentValidStartNodeId);if(t.wfFreeDatas[n]&&t.wfFreeDatas[n][0])if("1"==e)t.wfFreeDatas[n][0].freeEndNodeid=t.wfFreeDatas[n][0].freeStartNodeid;else{var o=[];t.allValidNodesNodeLinks[n].map(function(e){o.push(e.descnode)}),t.wfFreeDatas[n][0].freeEndNodeid=o.join(",")}t.currentSignSetNode=(0,Oe.default)({},t.currentSignSetNode,{flowType:e}),t.circulationOrginNode.endOrginNodeId="1"==e?t.circulationOrginNode.startOrginNodeId:t.circulationOrginNode.curNextNode.nodeId},this.clearCurrentChooseState=function(){t.currentMouseEneterItemId=""},this.judgeFreeNodeData=function(){var e=(0,ze.default)(We.toJS(t.wfFreeDatas)),r=!0;for(var n in e){for(var o=e[n],a=0;a<o.length;a++){var i=n+"_"+a;if(!(r=t.checkFreeDataPassed(o[a],i)))break}if(!r)break}return r},this.saveFreeNodeData=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.loading=!0,t.judgeFreeNodeData()){var n=(0,ze.default)(We.toJS(t.wfFreeDatas)),o=t.currentValidStartNodeId;"-1"!=t.currentPostParams.templateid&&(o=(0,Ne.default)(n)[0]);var a=n[o]?(0,xe.default)(n[o][0]):"{}",i=(0,Oe.default)({},t.currentPostParams,{maxGroupNum:t.currentAddDataId,chartDatas:a,deleteIds:t.deleteIds.join(",")},r,{startnodeEntity:(0,xe.default)(t.startnodeEntity)});Ke.message.destroy(),Ke.message.loading(Je(23278,"正在保存，请稍候..."),0),Ge.saveFreeNodeInfo(i).then(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ke.message.destroy(),t.loading=!1,r.success&&(Ke.message.success(Je(83551,"保存成功！")),window.top.freeWFStartFlage&&!0===window.top.freeWFStartFlage&&(top.window.location.href=top.window.location.href,top.window.location.reload(),window.top.freeWFStartFlage=!1)),e&&e(r),"template"!=i.method&&t.doActionToDatas_2(r,i)})}else t.loading=!1;t.saveCheckResult={}},this.showDetailFormError=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];t.getFreeNodeSetting(e,n),r.key&&"nodename"!=r.key&&"operators"!=r.key&&(t.rightDetailShowSearchGroup={0:!0,1:!0,2:!0});t.detailForm_1.getFormParams();if(!(0,Ue.default)(r)){var o=r.key,a=void 0===o?"advanceRemind":o,i=(r.tip,r.name),s=void 0===i?"":i;if("advanceRemind"==r.key){var l="【"+s+"】："+Je(506879,"超时时间未设置或设置的超时时间小于提前提醒时间！");Ke.message.destroy(),Ke.message.warning(l,5)}else if("hour_minute"==a){var c="【"+s+"】："+Je(506880,"超时时间必须大于等于一分钟！");Ke.message.destroy(),Ke.message.warning(c)}}t.detailForm_1.validateForm().then(function(e){e.isValid||e.showErrors()})},this.clearMobxState=function(){t.wfFreeDatas={},t.wfFreeDatasPoints={}},a(this,"saveAsTemplate",me,this),this.saveAsTempSave=function(e){var r=t.saveAsTempForm.getFormParams(),n=(0,Oe.default)({},r,{method:"template"});t.saveFreeNodeData(function(r){var n=r.success,o=void 0!==n&&n,a=(r.id,r.isRepeat),i=void 0!==a&&a;o?(t.saveAsTempModalShow=!1,"function"==typeof e&&e()):(Ke.message.destroy(),i?Ke.message.warning(Je(386286,'"名称"已存在，请重新输入！')):Ke.message.error(Je(84544,"保存失败！")))},n)},a(this,"setModelImportDialogShow",ve,this),a(this,"setImportModalAdShow",ge,this),a(this,"searchExistedModelList",we,this),a(this,"postImportModelDatas",ye,this),a(this,"setPopOperatorsPanemParams",be,this),a(this,"setCurrentElement_mobile",_e,this),a(this,"setReturnGroupValue_mobile",Se,this),a(this,"setDatasByGroupId_mobile",ke,this),a(this,"renderComponent",Ee,this),this.updateDetailFormParams=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.detailForm_1.updateFields(e)},window.freeChartStore=this}return(0,Ae.default)(e,[{key:"initAllNodesReplaceDatas",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.id,n=void 0===r?"":r,o=t.nodeEntity,a=void 0===o?{}:o,i=t.hasNext,s=void 0!==i&&i,l=t.next,c=void 0===l?{}:l,u=t.parallelNodeGroupDatas,d=void 0===u?[]:u,f=t.nodeElement,p=void 0===f||f,h=a.operatorReplaceDatas,m=void 0===h?[]:h,v={};if(p?m.length>0&&(v[n]=m):d.map(function(t){var r=e.initAllNodesReplaceDatas(t);v=(0,Oe.default)({},v,r)}),s){var g=this.initAllNodesReplaceDatas(c);v=(0,Oe.default)({},v,g)}return v}},{key:"concatFreeFlowNodeDatas",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,ze.default)(e),n=t.startGroup,o=void 0===n?{}:n,a=t.endGroup,i=void 0===a?{}:a;return(0,Ue.default)(r)?(o.id=(new Date).getTime(),o.hasNext=!0,i.id=(new Date).getTime()+1,o.next=i):(this.setFreeFlowNodeEndNode(r,i),o.hasNext=!0,o.next=r),o}},{key:"setFreeFlowNodeEndNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.hasNext,n=void 0!==r&&r,o=e.next,a=void 0===o?{}:o;n?this.setFreeFlowNodeEndNode(a,t):(e.hasNext=!0,e.next=t)}},{key:"setFreeNodeSettingInfo",value:function(e,t){var r=e.nodeEntity,n=void 0===r?{}:r,o=e.id,a=void 0===o?"":o,i=n.allowComments,s=void 0!==i&&i,l=n.allowModify,c=void 0===l?"0":l,u=n.allowForward,d=void 0!==u&&u,f=n.allowTransfer,p=void 0!==f&&f,h=n.earlyReminder,m=void 0===h?-1:h,v=(n.groupid,n.loopReminder),g=void 0!==v&&v,w=n.loopRemind,y=void 0===w?"":w,b=n.remindInterval,_=void 0===b?"":b,S=(n.mustPass,n.nextNodeEditPurview),k=void 0===S?"2":S,E=n.nodename,I=void 0===E?"":E,C=n.nodetype,R=void 0===C?"1":C,x=(n.overflowtime,n.overflowtimetype),P=void 0===x?"0":x,N=n.operators,D=void 0===N?"":N,O=(n.reminderInterval,n.advanceRemind),L=void 0===O?"":O,T=n.overflowtimehour,F=void 0===T?"":T,A=n.overflowtimeminute,M=void 0===A?"":A,W=n.overflowtimedate,j=void 0===W?"":W,B=n.overflowtimetime,z=void 0===B?"":B,q=n.signType,U=void 0===q?"":q,V=n.operatorReplaceDatas,G=void 0===V?[]:V,H=n.isrejectremind,K=void 0===H?"0":H,Q=n.ischangrejectnode,$=void 0===Q?"0":Q,J=n.isselectrejectnode,Y=void 0===J?"1":J,X=n.isSubmitDirectNode,Z=void 0===X?"0":X,ee=n.approvalSettings,te=void 0===ee?"":ee;"3"==R&&(k="0");var re=this.nodeOperatorsReplaceDatas[a]||G,ne=[];re.map(function(e){ne.push(e.id)});var oe={nodename:I,operators:D,nodetype:R+"",allowModify:!0===c||"1"==c?"1":"0",allowForward:!0===d||"1"==d?"1":"0",allowTransfer:!0===p||"1"==p?"1":"0",allowComments:!0===s||"1"==s?"1":"0",nextNodeEditPurview:k,syncAllNode:-1,overflowtimetype:P+"",overflowtimehour:F+"",overflowtimeminute:M+"",overflowtimedate:j,overflowtimetime:z,advanceRemind:L+"",earlyReminder:m,loopRemind:y+"",remindInterval:_+"",loopReminder:g+"",loopReminderTime:-1,signType:U+"",approvalSettings:te},ae={isrejectremind:K+"",ischangrejectnode:$+"",isselectrejectnode:Y+"",isSubmitDirectNode:Z+""};this.tempReturnBackValue=ae,this.rightDetailType="node",this.currentChoosedBranchId="",this.detailForm_1.updateFields(oe,!1),this.returnBackForm.updateFields(ae,!1);var ie=this;setTimeout(function(){var e={operators:{value:ne.join(","),valueObj:Ye(re)}};ie.detailForm_1.updateFields(e,!1)},0)}},{key:"deleteItemUtil_v2",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments[1],n=r.split("_")[0],o=r.split("_")[1],a=We.toJS(this.wfFreeDatas[n][o]),i=(0,ze.default)(a),s=this.getFreeObjById(t,i),l=this.getLastObjById(t,i),c=this.getFreeObjById(s.parentid,i);if(!l&&s.next&&!s.next.nodeElement&&c)return void Ke.Modal.confirm({title:Je("131329","信息确认"),content:Je(506876,"此节点后有并行节点，不允许删除！"),onOk:function(){},okText:Je(83446,"确定"),okCancel:!1});this.currentMouseEneterItemId="";var u=s.id+"";Number(u)>0&&this.deleteIds.push(u);var d={};if(l)s.hasNext?l.next=s.next:(l.hasNext=!1,l.next=null),d=this.deleteChangeDatas(l.id,l,i);else if(c){var f=c.id,p=c.parallelNodeGroupDatas,h=[];p.map(function(e,r){e.id==t&&(e=null),h.push(e)});var m=void 0;if(s.hasNext&&(m=s.next,h.map(function(e,t){e||(h[t]=m)})),h=h.filter(function(e){return e}),h.length>=2)c.parallelNodeGroupDatas=h;else{if(!h[0])return;Number(c.id)>0&&this.deleteIds.push(c.id);var v=this.getFreeObjById(h[0].id,a);if(v.freeStartNodeid=c.freeStartNodeid,v.freeEndNodeid=c.freeEndNodeid,c.hasNext){var g=(0,ze.default)(c.next);if(g=this.getFreeObjById(g.id,a),v.hasNext){var w=this.findAllNextAndReturnFinal(v,c.parentid);w.hasNext=!0,w.next=g}else v.hasNext=!0,v.parentid=c.parentid,v.next=g;c=v}else{this.findAllNextAndReturnFinal(v,c.parentid);v.parentid=c.parentid,c=(0,Oe.default)({},v)}}d=this.deleteChangeDatas(f,c,i)}else s.hasNext&&(d=s.next,d.freeStartNodeid=s.freeStartNodeid,d.freeEndNodeid=s.freeEndNodeid);this.svgPathLine={},(0,Ue.default)(d)?delete this.wfFreeDatas[n]:this.wfFreeDatas[n][o]=d;var y={},b=50,_=0;for(var S in this.wfFreeDatas){var k=this.wfFreeDatas[S];_+=k.length}var E=0,I={};for(var C in this.wfFreeDatas)!function(t){var r=e.wfFreeDatas[t];I[t]=E,r.map(function(r,n){var o=(0,Qe.calculateNodePoint)(r,b,_);y[t+"_"+n]=o;var a=e.getMaxXInAllFreeNodePts(o);b=a+e.betweenFreeNodeGap}),E+=2}(C);this.everyFreeNodeOffsetY=I,this.wfFreeDatasPoints=y;var R="";"node"==this.rightDetailType?R=this.currentChoosedItemId:"branch"==this.rightDetailType&&(R=this.currentChoosedBranchId),this.getFreeObjById(R,d)||(-1!=this.currentPostParams.templateid?this.rightDetailType="isModel_init":"1"==this.currentPostParams.isFree?this.getFreeNodeSetting(this.freeWfTrunkNodes.startGroup||{},r):(0,Ue.default)(this.currentFlowingGroup)||(0,Ue.default)(d)?this.rightDetailType="signSet":this.getFreeNodeSetting(this.currentFlowingGroup||{},r))}},{key:"deleteChangeDatas",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=(0,ze.default)(n);if(o.id==e)o=(0,Oe.default)({},r);else if(o.hasNext&&(o.next=(0,Oe.default)({},this.deleteChangeDatas(e,r,o.next))),!o.nodeElement){var a=o.parallelNodeGroupDatas;a.map(function(n,o){a[o]=(0,Oe.default)({},t.deleteChangeDatas(e,r,n))}),o.parallelNodeGroupDatas=a}return o}},{key:"findAllNextAndReturnFinal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=null;if(e.hasNext){var n=e.next;n.parentid=t,r=this.findAllNextAndReturnFinal(n,t)}else r=e;return r}},{key:"initNewAddElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.currentPostParams.nodeid,r=void 0===t?0:t,n=this.groupApprovalSettings[""+r]||"",o={id:-1*this.currentAddDataId,nodeChartEntity:{del:!0,edit:!0,addParall:!0,addNext:!0},nodeElement:!0,groupStatus:"0",hasNext:!1,next:null,parallelNodeGroupDatas:[],parentid:"",nodeEntity:{nodename:Je(516487,"节点名称")+this.currentAddDataId,operatortype:"resource",operators:"",nodetype:"1",mustPass:!1,signType:"1",nextNodeEditPurview:"1",allowForward:"1",allowTransfer:"1",allowComments:"1",overflowtimetype:"0",advanceRemind:"0",isrejectremind:"0",ischangrejectnode:"0",isselectrejectnode:"1",isSubmitDirectNode:"0",overflowtimehour:0,overflowtimeminute:0,overtimeToNextOperator:"0",afterLoopRemind:"0",afterRemindInterval:"5",beforeLoopRemind:"0",beforeRemindInterval:"5",approvalSettings:n}};return(0,Oe.default)({},o,e)}},{key:"getLastObjById",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,ze.default)(We.toJS(this.wfFreeDatas)),n=null;if(r=r||{},r.hasNext)if(r.next.id==t)n=r;else{var o=this.getLastObjById(t,r.next);n=o||n}if(!r.nodeElement){(r.parallelNodeGroupDatas||[]).map(function(r){var o=e.getLastObjById(t,r);n=o||n})}return n}},{key:"checkFreeDataPassed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],r=e.nodeElement,n=void 0!==r&&r,o=e.hasNext,a=void 0!==o&&o,i=e.next,s=void 0===i?{}:i,l=e.parallelNodeGroupDatas,c=void 0===l?[]:l,u=e.nodeEntity,d=void 0===u?{}:u,f=e.id,p=void 0===f?"":f;this.detailForm_1.getFormParams();if(n){var h=d.operators,m=void 0===h?"":h,v=d.overflowtimetype,g=void 0===v?"":v,w=d.overflowtimedate,y=void 0===w?"":w,b=(d.overflowtimetime,d.overflowtimehour),_=void 0===b?"":b,S=d.overflowtimeminute,k=void 0===S?"":S,E=d.nodename,I=void 0===E?"":E,C=d.nodetype,R=void 0===C?"":C,x=d.advanceRemind,P=void 0===x?"":x;if("0"!=R&&"3"!=R){var N=this.saveCheckResult[p]||{name:I,tip:[],warning:[]};if(""==I.trim())return N.tip.push(Je(15070,"节点名称")),this.saveCheckResult[p]=N,this.showDetailFormError(e,{key:"nodename"},t),!1;if(this.operatorMustInput&&""==m.trim())return N.tip.push(Je(99,"操作者")),this.saveCheckResult[p]=N,this.showDetailFormError(e,{key:"operators"},t),!1;if("2"==g){if(""==y)return N.tip.push(Je(22823,"日期")),this.saveCheckResult[p]=N,this.showDetailFormError(e,{key:"overflowtimedate"},t),!1}else if("1"==g){if(""===_)return N.tip.push(Je(506877,"超时时间-小时")),this.saveCheckResult[p]=N,this.showDetailFormError(e,{key:"overflowtimehour"},t),!1;if(""===k)return N.tip.push(Je(15049,"分钟")),this.saveCheckResult[p]=N,this.showDetailFormError(e,{key:"overflowtimeminute"},t),!1;if("0"==k&&"0"==_)return N.tip.push(Je(15049,"分钟")),this.saveCheckResult[p]=N,this.showDetailFormError(e,{key:"hour_minute",name:I},t),!1;if(1*P>60*_+1*k)return N.warning.push(Je(506878,"超时时间小于提前提醒时间！")),this.saveCheckResult[p]=N,this.showDetailFormError(e,{key:"advanceRemind",name:I},t),!1}else if(1*P>g)return N.warning.push(Je(506878,"超时时间小于提前提醒时间！")),this.saveCheckResult[p]=N,this.showDetailFormError(e,{key:"advanceRemind",name:I},t),!1}}else{for(var D=(0,ze.default)(c),O=!0,L=0;L<D.length&&(O=this.checkFreeDataPassed(D[L],t));L++);if(!O)return!1}return!a||this.checkFreeDataPassed(s,t)}}]),e}(),c=i(l.prototype,"loading",[Me.observable],{enumerable:!0,initializer:function(){return!1}}),u=i(l.prototype,"workflowDesignShow",[Me.observable],{enumerable:!0,initializer:function(){return!1}}),d=i(l.prototype,"shouldPostXml",[Me.observable],{enumerable:!0,initializer:function(){return!0}}),f=i(l.prototype,"freeIsEditNode",[Me.observable],{enumerable:!0,initializer:function(){return!1}}),p=i(l.prototype,"freeIsEditGroup",[Me.observable],{enumerable:!0,initializer:function(){return!1}}),h=i(l.prototype,"currentFreeWfEditState",[Me.observable],{enumerable:!0,initializer:function(){return!1}}),m=i(l.prototype,"wfFreeDatas",[Me.observable],{enumerable:!0,initializer:function(){return null}}),v=i(l.prototype,"wfFreeDatasPoints",[Me.observable],{enumerable:!0,initializer:function(){return{}}}),g=i(l.prototype,"beforeSavedDatas",[Me.observable],{enumerable:!0,initializer:function(){return{}}}),w=i(l.prototype,"svgPathLine",[Me.observable],{enumerable:!0,initializer:function(){return{}}}),y=i(l.prototype,"freeDetailSetConditions",[Me.observable],{enumerable:!0,initializer:function(){return[]}}),b=i(l.prototype,"detailForm_1",[Me.observable],{enumerable:!0,initializer:function(){return new je.WeaForm}}),_=i(l.prototype,"currentChoosedItemDataIndex",[Me.observable],{enumerable:!0,initializer:function(){return""}}),S=i(l.prototype,"currentChoosedItemId",[Me.observable],{enumerable:!0,initializer:function(){return""}}),k=i(l.prototype,"currentMouseEneterItemId",[Me.observable],{enumerable:!0,initializer:function(){return""}}),E=i(l.prototype,"currentChoosedBranchId",[Me.observable],{enumerable:!0,initializer:function(){return""}}),I=i(l.prototype,"curRightDetailItemId",[Me.observable],{enumerable:!0,initializer:function(){return""}}),C=i(l.prototype,"curFloatSignNodeId",[Me.observable],{enumerable:!0,initializer:function(){return""}}),R=i(l.prototype,"deleteIds",[Me.observable],{enumerable:!0,initializer:function(){return[]}}),x=i(l.prototype,"currentPostParams",[Me.observable],{enumerable:!0,initializer:function(){return{currentPostRequestId:"",currentPostWorkflowId:""}}}),P=i(l.prototype,"nodeOperatorsReplaceDatas",[Me.observable],{enumerable:!0,initializer:function(){return{}}}),N=i(l.prototype,"branchBorderColorShowId",[Me.observable],{enumerable:!0,initializer:function(){return""}}),D=i(l.prototype,"rightDetailShowSearchGroup",[Me.observable],{enumerable:!0,initializer:function(){return{0:!0,1:!1,2:!1}}}),O=i(l.prototype,"globalNextNodeEditPurview",[Me.observable],{enumerable:!0,initializer:function(){return 2}}),L=i(l.prototype,"currentAddDataId",[Me.observable],{enumerable:!0,initializer:function(){return 1}}),T=i(l.prototype,"rightDetailType",[Me.observable],{enumerable:!0,initializer:function(){return"node"}}),F=i(l.prototype,"dragStartItemId",[Me.observable],{enumerable:!0,initializer:function(){return""}}),A=i(l.prototype,"dragEndItemId",[Me.observable],{enumerable:!0,initializer:function(){return""}}),M=i(l.prototype,"saveCheckResult",[Me.observable],{enumerable:!0,initializer:function(){return{}}}),W=i(l.prototype,"returnBackDialogShow",[Me.observable],{enumerable:!0,initializer:function(){return!1}}),j=i(l.prototype,"returnBackConditions",[Me.observable],{enumerable:!0,initializer:function(){return[]}}),B=i(l.prototype,"returnBackForm",[Me.observable],{enumerable:!0,initializer:function(){return new je.WeaForm}}),z=i(l.prototype,"tempReturnBackValue",[Me.observable],{enumerable:!0,initializer:function(){return{}}}),q=i(l.prototype,"componentNeedRender",[Me.observable],{enumerable:!0,initializer:function(){return 0}}),U=i(l.prototype,"circulationParams",[Me.observable],{enumerable:!0,initializer:function(){return{noPassedLinkColor:"#979797",passedLinkColor:"#DC4446",forecastLinkColor:"#1BD1C5",passedNodeAndNoOPeration:{backgroundColor:"#A9E2FF",borderColor:"#49A8D4",nodeColor:"#1E4F6D",operatorColor:"#3C74AF"},noPassedNodeShouldCheckRight:{backgroundColor:"#BFF3C3",borderColor:"#5ABD6B",nodeColor:"#466F4A",operatorColor:"#469454"},currentNodeAndNoOperation:{backgroundColor:"#FFE8CC",borderColor:"#F4B373",nodeColor:"#7C5323",operatorColor:"#C3822A"},currentMustPassNode:{backgroundColor:"#FFD1CC",borderColor:"#FF8376",nodeColor:"#B03528",operatorColor:"#E35B4D"},currentOperator:{backgroundColor:"#fee7cc",borderColor:"#ff3300",nodeColor:"",operatorColor:""},forecastNode:{backgroundColor:"#98F6EF",borderColor:"#1BD1C5",nodeColor:"#087E76",operatorColor:"#087E76"}}}}),V=i(l.prototype,"currentOrginSupPosition",[Me.observable],{enumerable:!0,initializer:function(){return{startPosition:{},endPosition:{}}}}),G=i(l.prototype,"currentSignSetNode",[Me.observable],{enumerable:!0,initializer:function(){return{}}}),H=i(l.prototype,"freeWfTrunkNodes",[Me.observable],{enumerable:!0,initializer:function(){return{}}}),K=i(l.prototype,"allowAddNewBranch",[Me.observable],{enumerable:!0,initializer:function(){return!1}}),Q=i(l.prototype,"validWorkFlowDatas",[Me.observable],{enumerable:!0,initializer:function(){return{cellMaxHeight:0,allValidNodes:[],currentStartNode:{},currentEndNodes:[]}}}),$=i(l.prototype,"modelImportModelShow",[Me.observable],{enumerable:!0,initializer:function(){return!1}}),J=i(l.prototype,"importModelTableStore",[Me.observable],{enumerable:!0,initializer:function(){return new $e}}),Y=i(l.prototype,"importModelForm",[Me.observable],{enumerable:!0,initializer:function(){return new je.WeaForm}}),X=i(l.prototype,"importModalAdShow",[Me.observable],{enumerable:!0,initializer:function(){return!1}}),Z=i(l.prototype,"allowTemplateImport",[Me.observable],{enumerable:!0,initializer:function(){return!1}}),ee=i(l.prototype,"saveAsTempForm",[Me.observable],{enumerable:!0,initializer:function(){return new je.WeaForm}}),te=i(l.prototype,"saveAsTempModalShow",[Me.observable],{enumerable:!0,initializer:function(){return!1}}),re=i(l.prototype,"closeDialogIsConfirmed",[Me.observable],{enumerable:!0,initializer:function(){return!1}}),ne=i(l.prototype,"popOperatorsPanelParams",[Me.observable],{enumerable:!0,initializer:function(){return{}}}),oe=i(l.prototype,"mobileChoosedElement",[Me.observable],{enumerable:!0,initializer:function(){return{}}}),ae=i(l.prototype,"mobileChoosedElementIndex",[Me.observable],{enumerable:!0,initializer:function(){return""}}),ie=i(l.prototype,"selectOperatorsMax",[Me.observable],{enumerable:!0,initializer:function(){return 100}}),se=i(l.prototype,"wfinitSettingFlage",[Me.observable],{enumerable:!0,initializer:function(){return!1}}),le=i(l.prototype,"startnodeEntity",[Me.observable],{enumerable:!0,initializer:function(){return{}}}),ce=i(l.prototype,"changeWfinitSettingFlageW",[Me.action],{enumerable:!0,initializer:function(){var e=this;return function(t){e.wfinitSettingFlage=t}}}),ue=i(l.prototype,"setstartnodeEntity",[Me.action],{enumerable:!0,initializer:function(){var e=this;return function(t){e.startnodeEntity=t}}}),de=i(l.prototype,"initalFreeWfDatas",[Me.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments[1];e.currentPostParams=(0,Oe.default)({},e.currentPostParams,t),e.loadNodeDetailInfo(),Ge.getFreeNodeInfo(t).then(function(n){e.doActionToDatas_2(n,t),e.circulationParams={noPassedLinkColor:n.flowChartColorInfo.NOPASSED_LINK_COLOR,passedLinkColor:n.flowChartColorInfo.PASSED_LINK_COLOR,forecastLinkColor:n.flowChartColorInfo.FORECAST_LINK_COLOR,passedNodeAndNoOPeration:{backgroundColor:n.flowChartColorInfo.PASSED_NODE_FILL_COLOR,borderColor:n.flowChartColorInfo.PASSED_NODE_STROKE_COLOR,nodeColor:n.flowChartColorInfo.PASSED_NODE_FONT_COLOR,operatorColor:n.flowChartColorInfo.PASSED_NODE_OPERATOR_FONT_COLOR},noPassedNodeShouldCheckRight:{backgroundColor:n.flowChartColorInfo.NOARRIVE_NODE_FILL_COLOR,borderColor:n.flowChartColorInfo.NOARRIVE_NODE_STROKE_COLOR,nodeColor:n.flowChartColorInfo.NOARRIVE_NODE_FONT_COLOR,operatorColor:n.flowChartColorInfo.NOARRIVE_NODE_OPERATOR_FONT_COLOR},currentNodeAndNoOperation:{backgroundColor:n.flowChartColorInfo.NOW_NODE_FILL_COLOR,borderColor:n.flowChartColorInfo.NOW_NODE_STROKE_COLOR,nodeColor:n.flowChartColorInfo.NOW_NODE_FONT_COLOR,operatorColor:n.flowChartColorInfo.NOW_NODE_OPERATOR_FONT_COLOR},currentMustPassNode:{backgroundColor:"#FFD1CC",borderColor:"#FF8376",nodeColor:"#B03528",operatorColor:"#E35B4D"},currentOperator:{backgroundColor:"#fee7cc",borderColor:"#ff3300",nodeColor:"",operatorColor:""},forecastNode:{backgroundColor:n.flowChartColorInfo.FORECAST_NODE_FILL_COLOR,borderColor:n.flowChartColorInfo.FORECAST_NODE_STROKE_COLOR,nodeColor:n.flowChartColorInfo.FORECAST_NODE_FONT_COLOR,operatorColor:n.flowChartColorInfo.FORECAST_NODE_OPERATOR_COLOR}},"function"==typeof r&&setTimeout(r,500)}),Ge.getSelectMaxRight({actionType:"addFreeNode"}).then(function(t){var r=t.right,n=void 0!==r&&r,o=t.selectOperatorsMax,a=void 0===o?100:o;e.selectOperatorsMax=n?void 0:a})}}}),fe=i(l.prototype,"doActionToDatas_2",[Me.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=r.isFree,a=void 0===o?"":o,i=r.templateid,s=(r.isFromHtmlPage,t.trunkNodes),l=void 0===s?{}:s,c=t.maxGroupNum,u=void 0===c?1:c,d=t.allowImport,f=void 0===d||d,p=t.allowAddNewBranch,h=void 0!==p&&p,m=t.nextNodeEditPurview,v=void 0===m?2:m,g=t.nodeLinks,w=void 0===g?{}:g,y=t.freeNodeDatas,b=void 0===y?{}:y,_=t.currentStartNodeId,S=t.currentGroupId,k=t.forecastNodeIds;e.currentGlobalParam={currentStartNodeId:_,currentGroupId:S,allowAddNewBranch:h},e.allowTemplateImport=f,e.forecastNodeIds=k,n||(e.allowAddNewBranch=h),e.globalNextNodeEditPurview=v,e.allValidNodesNodeLinks=w,e.currentValidStartNodeId=_,e.currentAddDataId=1!=u?u:e.currentAddDataId;var E=l.startGroup,I=void 0===E?{}:E,C=(l.endGroup,b[_]||[]),R={};C.map(function(e){e.id==S&&(R=e)});var x=R,P=x.freeEndNodeid,N=void 0===P?"":P,D=x.freeStartNodeid,O=void 0===D?"":D;if("1"!=a&&"-1"==i){var L=e.validWorkFlowDatas.allValidNodes,T=void 0===L?[]:L,F=T.filter(function(e){return e.nodeId==_})[0],A=F.value,M=void 0===A?"":A,W=F.nodeType,j=void 0===W?"":W,B={nodeName:M,nodeType:j},z="2";""!=O&&N==O&&(z="1"),B.flowType=z,e.validWorkFlowDatas.currentStartNode=F,e.currentSignSetNode=(0,Oe.default)({},e.currentSignSetNode,B)}if(e.freeWfTrunkNodes=l,"-1"!=i&&!(0,Ue.default)(l)){var q=(0,Ne.default)(b)[0],U={};"undefined"==typeof q?q=l.startGroup.id:U=b[q][0],b[q]=[e.concatFreeFlowNodeDatas(U,l)]}var V={startOrginNodeId:O||e.circulationOrginNode.startOrginNodeId,endOrginNodeId:N||e.circulationOrginNode.endOrginNodeId};e.circulationOrginNode=(0,Oe.default)({},e.circulationOrginNode,V);var G={},H={};for(var K in b){b[K].map(function(t){var r=e.initAllNodesReplaceDatas(t),n=e.getcurrentFlowGroup(t);n&&(H=n),G=(0,Oe.default)({},G,r)})}e.nodeOperatorsReplaceDatas=G,e.currentFlowingGroup=H,e.currentChoosedItemDataIndex=_+"_0","1"==a?"-1"==i?(e.rightDetailType="node",e.getFreeNodeSetting(I,_+"_0")):e.rightDetailType="isModel_init":(e.rightDetailType="signSet",(0,Ue.default)(H)||(e.signSetIsReadOnly=!0,e.rightDetailType="node",e.getFreeNodeSetting(H,_+"_0")));var Q={},$=50,J=0,Y=(0,Ne.default)(b);Y.map(function(e){var t=b[e];J+=t.length});var X=0,Z={};Y.map(function(t){var r=b[t];Z[t]=X,r.map(function(r,n){var o=(0,Qe.calculateNodePoint)(r,$,J);Q[t+"_"+n]=o;var a=e.getMaxXInAllFreeNodePts(o);$=a+e.betweenFreeNodeGap}),X+=2}),e.everyFreeNodeOffsetY=Z,e.wfFreeDatasPoints=Q,e.wfFreeDatas=b,e.beforeSavedDatas=b}}}),pe=i(l.prototype,"setWfDesignFreeEditGroup",[Me.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.currentChoosedItemDataIndex=r,e.currentChoosedBranchId=t,e.rightDetailType="branch"}}}),he=i(l.prototype,"deleteFreeNodeItem",[Me.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments[1];e.setCurrentElement_mobile(),e.deleteItemUtil_v2(t,r)}}}),me=i(l.prototype,"saveAsTemplate",[Me.action],{enumerable:!0,initializer:function(){var e=this;return function(t){e.judgeFreeNodeData()&&(e.saveAsTempModalShow=t,t&&(e.saveAsTempForm=new je.WeaForm),t&&Ge.getAddTemplateBaseData().then(function(t){var r=t.templateBaseInfo,n=void 0===r?[]:r,o=[{items:n}];e.saveAsTempCondition=o,e.saveAsTempForm.setCondition(o),e.saveAsTempForm.initFormFields(o)}))}}}),ve=i(l.prototype,"setModelImportDialogShow",[Me.action],{enumerable:!0,initializer:function(){var e=this;return function(t){e.modelImportModelShow=t,t&&((0,Ue.default)(Ye(e.modelAdCondition))?Ge.getAddTemplateBaseData().then(function(t){var r=t.advanceCondition,n=void 0===r?{}:r,o=(t.addTemplateTabs,t.templateBaseInfo,t.addShareForm,[n]);e.modelAdCondition=o,e.importModelForm.setCondition(o),e.importModelForm.initFormFields(o)}):e.importModelForm.resetConditionValue(),e.searchExistedModelList())}}}),ge=i(l.prototype,"setImportModalAdShow",[Me.action],{enumerable:!0,initializer:function(){var e=this;return function(t){e.importModalAdShow=t}}}),we=i(l.prototype,"searchExistedModelList",[Me.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t={isModelImport:1},r=e.importModelForm.getFormParams();t=(0,Oe.default)({},t,r),Ge.getFlowTemplateList(t).then(function(t){var r=t.sessionkey,n=void 0===r?"":r;e.importModelTableStore.getDatas(n,1,"")})}}}),ye=i(l.prototype,"postImportModelDatas",[Me.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.loading=!0,e.setModelImportDialogShow(!1);var r=e.currentPostParams,n=r.templateid,o=void 0===n?-1:n,a=r.requestid,i=void 0===a?-1:a,s=""==e.circulationOrginNode.endOrginNodeId?e.circulationOrginNode.nextOrginNode:e.circulationOrginNode.endOrginNodeId,l={requestid:i,templateid:o,freeStartNodeid:e.circulationOrginNode.startOrginNodeId,freeEndNodeid:s};l=(0,Oe.default)({},l,t),Ge.importFromTemplate(l).then(function(t){t.success?(e.doActionToDatas_2(t,l,!0),e.loading=!1):Ke.Modal.warning({title:Je(15172,"系统提示"),content:Je(21266,"处理前流程已经流转到了下一节点"),okText:Je(826,"确定"),onOk:function(){window.top.wfform.reloadPage()}})})}}}),be=i(l.prototype,"setPopOperatorsPanemParams",[Me.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.popOperatorsPanelParams=(0,Oe.default)({},e.popOperatorsPanelParams,t)}}}),_e=i(l.prototype,"setCurrentElement_mobile",[Me.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";r||(e.currentChoosedBranchId=""),e.mobileChoosedElementIndex=n,e.mobileCurrentEditGroupId=t.id,e.mobileChoosedElement=t}}}),Se=i(l.prototype,"setReturnGroupValue_mobile",[Me.action],{enumerable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=r.split("_")[0],o=r.split("_")[1],a={};n&&(a=e.wfFreeDatas[n][o]||{});var i=e.mobileCurrentEditGroupId,s=(0,ze.default)(Ye(a)),l={};l[t.id||""]=t.nodeEntity?t.nodeEntity.operatorReplaceDatas:[];var c=e.setDatasByGroupId_mobile(i,s,t);e.wfFreeDatas[n][o]=c,e.nodeOperatorsReplaceDatas=(0,Oe.default)({},e.nodeOperatorsReplaceDatas,l),e.mobileChoosedElement=t}}}),ke=i(l.prototype,"setDatasByGroupId_mobile",[Me.action],{enumerable:!0,initializer:function(){var e=this;return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r,a=o.id,i=void 0===a?"":a,s=o.hasNext,l=o.next,c=o.nodeElement,u=o.parallelNodeGroupDatas,d=void 0===u?[]:u;if(i==t)r=n;else if(c||d.map(function(r,o){e.setDatasByGroupId_mobile(t,r,n);d[o]=r}),s){var f=e.setDatasByGroupId_mobile(t,l,n);r.next=f}return r}}}),Ee=i(l.prototype,"renderComponent",[s],{enumerable:!0,initializer:function(){var e=this;return function(){e.componentNeedRender=(new Date).getTime()}}}),l)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectMaxRight=t.importFromTemplate=t.deleteTemplateShare=t.deleteTemplate=t.getTemplateShareList=t.saveTemplateShare=t.getAddTemplateBaseData=t.saveFlowTemplate=t.getFlowTemplateList=t.getRuleCondition=t.getNodeFreeFlowInfo=t.getFreeNodeSetting=t.saveFreeNodeInfo=t.getFreeNodeInfo=void 0;var n=r(0);t.getFreeNodeInfo=function(e){return n.WeaTools.callApi("/api/workflow/freeFlow/getFreeNodeInfo","GET",e)},t.saveFreeNodeInfo=function(e){return n.WeaTools.callApi("/api/workflow/freeFlow/saveFreeNodeInfo","POST",e)},t.getFreeNodeSetting=function(e){return n.WeaTools.callApi("/api/workflow/freeFlow/getFreeNodeSetting","GET",e)},t.getNodeFreeFlowInfo=function(e){return n.WeaTools.callApi("/api/workflow/freeFlow/getNodeFreeFlowInfo","GET",e)},t.getRuleCondition=function(e){return n.WeaTools.callApi("/api/workflow/layout/getRuleCondition","POST",e)},t.getFlowTemplateList=function(e){return n.WeaTools.callApi("/api/workflow/freeFlow/getFlowTemplateList","GET",e)},t.saveFlowTemplate=function(e){return n.WeaTools.callApi("/api/workflow/freeFlow/saveFlowTemplate","POST",e)},t.getAddTemplateBaseData=function(e){return n.WeaTools.callApi("/api/workflow/freeFlow/getAddTemplateBaseData","GET",e)},t.saveTemplateShare=function(e){return n.WeaTools.callApi("/api/workflow/freeFlow/saveTemplateShare","POST",e)},t.getTemplateShareList=function(e){return n.WeaTools.callApi("/api/workflow/freeFlow/getTemplateShareList","GET",e)},t.deleteTemplate=function(e){return n.WeaTools.callApi("/api/workflow/freeFlow/deleteTemplate","POST",e)},t.deleteTemplateShare=function(e){return n.WeaTools.callApi("/api/workflow/freeFlow/deleteTemplateShare","POST",e)},t.importFromTemplate=function(e){return n.WeaTools.callApi("/api/workflow/freeFlow/importFromTemplate","POST",e)},t.getSelectMaxRight=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.WeaTools.callApi("/api/workflow/forward/getForwardMaxUserCount","GET",e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateNodePoint=void 0;var n=r(19),o=(function(e){e&&e.__esModule}(n),void 0),a=190,i=50,s={},l={},c=1,u=0,d=0,f=(t.calculateNodePoint=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;c=1,u=0,d=0,s={},l={},i=t,a=190+5*-r,o=f(e)?148:window.testnum||256;var n=((new Date).getTime(),h(e));v(e,n,1,0);var p=e.id;return l["branch_max_height_"+p]=n,s},function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.nodeElement,n=void 0===r||r,o=t.hasNext,a=void 0!==o&&o,i=t.next,s=void 0===i?{}:i,l=t.parallelNodeGroupDatas,c=void 0===l?[]:l,u=!1;if(n||(u=!0),a){var d=e(s);d&&(u=d)}return c.map(function(t){var r=e(t);r&&(u=r)}),u}),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(e.length,0);return e.map(function(e,r){var n=h(e);t+=n;var o=e.id;l["branch_max_height_"+o]=n}),t},h=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.id,n=t.hasNext,a=void 0!==n&&n,i=t.next,s=void 0===i?{}:i,c=t.parallelNodeGroupDatas,u=void 0===c?[]:c,d=(t.nodeEntity,t.nodeElement),f=void 0!==d&&d,h=0,m=0;return a&&(h=e(s)),u.length>0&&(m=p(u)),!a&&f?m=o:0==m&&(m=o),l[r]=m,m>h?m:h},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],r=arguments[2],n=t,o=r;return e.map(function(e,r){var a=e.id,i=l["branch_max_height_"+a],s=v(e,i,t,o,!0);n=s>n?s:n,o+=i}),n},v=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,d=t.id,f=t.hasNext,p=void 0!==f&&f,h=t.next,v=void 0===h?{}:h,w=t.parallelNodeGroupDatas,y=void 0===w?[]:w,b=(t.nodeEntity,t.nodeElement),_=void 0!==b&&b,S=n,k=l[d];if(_){c?S+=.7:u&&!u.nodeElement?S+=.7:S++;var E=150*S+0,I=0;I=r>k?r/2+i+o:o+i+k/2,s[d+"_point"]={y:E-a,x:I}}if(y.length>0){u&&!u.nodeElement?S+=.5:S+=.7;var C=150*S+0,R=r/2+o+i;s[d+"_virtual_branch_point"]={y:C-a,x:R,virtual:!0,isBranch:!0};var x=o,P=g(y);P<r&&(x+=(r-P)/2),S=m(y,S,x),S+=.7,C=150*S+0,R=r/2+o+i,s[d+"_virtual_merge_point"]={y:C-a,x:R,virtual:!0,isMerge:!0}}return p&&(S=e(v,r,S,o,!1,t)),S},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;return e.map(function(e,r){var n=e.id,o=l["branch_max_height_"+n];t+=o}),t}},function(e,t,r){"use strict";window.image_resize=function(){}}])});
//# sourceMappingURL=index.js.map?v=9e15f8ba